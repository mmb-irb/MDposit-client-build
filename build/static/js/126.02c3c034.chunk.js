"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[126,3283],{10126:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var a=n(65043),s=n(83283),r=n(58338),l=n(41399),o=n(29449),i=n(95747),c=n(26494),d=n(85865),u=n(99070),h=n(10939),m=n(17545),f=n(38030),p=n(34088),y=n(71261),g=n(70579);const x=(0,a.lazy)(()=>Promise.all([n.e(7631),n.e(1483)]).then(n.bind(n,53099))),v=()=>{const{accessionAndMdNumber:e,files:t}=(0,a.useContext)(o.f),[n,v]=(0,a.useState)(null),[A,_]=(0,a.useState)(14),[b,w]=(0,a.useState)(20),[j,N]=(0,a.useState)("Overall"),M=(0,r.A)("".concat(i.nP,"/").concat(e,"/analyses/clusters")),S=(0,a.useMemo)(()=>M&&M.payload&&M.payload.map(e=>e.name),[M]),C=(0,a.useMemo)(()=>{if(!M.payload)return;const e=M.payload.find(e=>e.name===j);if(!e)throw new Error("Analysis ".concat(j," is not found in the summary"));return e.analysis},[j,M.payload]),z=C?"".concat(i.nP,"/").concat(e,"/analyses/").concat(C):null,R=(0,r.A)(z),k=(0,a.useRef)(R.payload);(0,a.useMemo)(()=>{R.payload&&(k.current=R.payload)},[R.payload]);const P=k.current,q=(0,a.useMemo)(()=>{if(!C)return[];const n=C.replace("-","_"),a="".concat(n,"_screenshot_");return t.filter(e=>e.includes(a)).sort().map(t=>"".concat(i.nP,"/").concat(e,"/files/").concat(t))},[t,C]),D=(0,l.A)(q),E=D.some(e=>e.loading),F=(0,a.useRef)(null);(0,a.useMemo)(()=>{E||(F.current=D.map(e=>e&&e.payload?"data:image/png;base64,"+Buffer.from(e.payload,"binary").toString("base64"):null))},[D,E]);const I=F.current,{graphData:L,availableLinks:O,clusterIndices:Y,version:H,step:T}=(0,a.useMemo)(()=>{if(!P)return{};P.clusters.forEach((e,t)=>{e.index=t});const e=[...P.clusters].sort((e,t)=>t.frames.length-e.frames.length).slice(0,A),t=e.map(e=>e.main),n=e.reduce((e,t)=>e+t.frames.length,0),a=e.map(e=>e.frames.length/n),s=e.map(e=>e.index),r=a[0],l=[];a.forEach((e,n)=>{const a=1e4*e/r,s={id:n,radius:Math.sqrt(a/Math.PI),value:t[n],text:"Population: ".concat(Math.round(1e4*e)/100," %\nFrame: ").concat(t[n])};l.push(s)});const o=[],i=P.transitions.filter(e=>s.includes(e.from)&&s.includes(e.to)),c=i.length,d=i.sort((e,t)=>t.count-e.count),u=d.map(e=>e.count),h=u[0],m=u[u.length-1],f=h===m?1:9/(m-h);d.forEach((e,t)=>{if(t>=b)return;const n=s.indexOf(e.from);if(-1===n)throw new Error("Not found source cluster index");const a=s.indexOf(e.to);if(-1===a)throw new Error("Not found target cluster index");const r=10-(e.count-h)*f,l=o.find(e=>e.source===a&&e.target===n);if(l)l.width+=r;else{const e={source:n,target:a,width:r};o.push(e)}});const p=new y.Rx(P.version),g=P.step;return{graphData:{nodes:l,links:o},availableLinks:c,clusterIndices:s,version:p,step:g}},[P,A,b]),V=(0,a.useMemo)(()=>{if(Y&&I)return Y.map(e=>I[e])},[Y,I]),X=(0,a.useCallback)(e=>{const t=H.equals("0.0")?e.value*T:e.value;v(t)},[v,H,T]);return P?V?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.A,{className:s.default["vertical-margin"],children:(0,g.jsx)(f.A,{label:"Clusters analysis",options:S,selection:j,setter:N})}),(0,g.jsx)(h.A,{children:(0,g.jsxs)("div",{className:R.loading?s.default.disabled:s.default.enabled,children:[(0,g.jsx)(x,{data:L,images:V,selectedNodeValue:n,onSelectNode:X,className:s.default.graph}),(0,g.jsxs)(c.A,{children:[(0,g.jsxs)("div",{className:s.default.horizontal,children:[(0,g.jsx)(d.A,{variant:"h7",className:s.default.wide25,children:"Number of nodes: "}),(0,g.jsx)(u.Ay,{title:"Change number of nodes",value:A,"aria-labelledby":"continuous-slider",onChange:(e,t)=>{_(t)},min:2,max:P.clusters.length,valueLabelDisplay:"auto",className:s.default.wide75})]}),(0,g.jsxs)("div",{className:s.default.horizontal,children:[(0,g.jsx)(d.A,{variant:"h7",className:s.default.wide25,children:"Number of links: "}),(0,g.jsx)(u.Ay,{title:"Change the RMSD cutoff",value:b,"aria-labelledby":"continuous-slider",onChange:(e,t)=>{w(t)},min:0,max:O,valueLabelDisplay:"auto",className:s.default.wide75})]})]})]})}),(0,g.jsx)(p.A,{newViewer:n?{requestedFrame:n}:null,onNail:e=>v(t=>e.requestedFrame===t?null:t),onClose:e=>v(t=>e.requestedFrame===t?null:t)})]}):(0,g.jsx)(m.A,{}):R.loading?(0,g.jsx)(m.A,{}):R.error?R.error.toString():"Something bad happened"}},10939:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(89379),s=n(80045),r=n(65043),l=n(12110),o=n(17604);const i="style_container__M9GCG";var c=n(70579);const d=["overrideComponent"],u={opacity:[0,1]};(0,o.A)()||(u.transform=["translateY(50px)","translateY(0)"]);const h={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},m=(0,r.forwardRef)((e,t)=>{let{overrideComponent:n}=e,o=(0,s.A)(e,d);const m=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{const e=m.current&&m.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),n=e.animate(u,(0,a.A)((0,a.A)({},h),{},{delay:150*t}));return()=>n.cancel()},[]);const f=n?"section":l.A;return(0,c.jsx)("div",{ref:m,className:i,children:(0,c.jsx)(f,(0,a.A)((0,a.A)({component:"section"},o),{},{ref:t}))})})},34088:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(89379),s=n(65043),r=n(43126),l=n(10939);const o="style_rnd__Txifm",i="style_floating-card__HHpby";var c=n(70579);const d=(0,s.lazy)(()=>Promise.all([n.e(7784),n.e(8095),n.e(3845),n.e(9070),n.e(247),n.e(7955),n.e(8677),n.e(4061),n.e(335),n.e(9117)]).then(n.bind(n,14696)));let u=0;const h=e=>{const t=e.viewerRef||(0,s.useRef)(null),[n,h]=(0,s.useState)(()=>{const{innerWidth:e,innerHeight:t,scrollY:n}=window,a=document.querySelector("main").offsetTop,s=Math.max(Math.min(e/4,t/4),150),r=1.5*s;return{width:2*s,height:r,x:0,y:t-a-r-20+n}});return(0,c.jsx)(r.p,{position:{x:n.x,y:n.y},size:{width:n.width,height:n.height},style:{zIndex:(u+=1,u)},className:o,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{h((0,a.A)({},n))},onResizeStart:()=>{h((0,a.A)({},n))},onDragStop:(e,t)=>{0===e.layerX&&0===e.layerY||n.x===t.x&&n.y===t.y||h((0,a.A)((0,a.A)({},n),{},{x:t.x,y:t.y}))},onResize:()=>t.current&&t.current.autoResize(),onResizeStop:(e,t,n,s,r)=>{h((0,a.A)({width:n.style.width,height:n.style.height},r))},children:(0,c.jsx)(l.A,{className:i,elevation:4,children:(0,c.jsx)(s.Suspense,{fallback:null,children:(0,c.jsx)(d,(0,a.A)({className:i,ref:t,startsPlaying:!1},e))})})})},m=e=>{let{newViewer:t,nailing:n=!0,onNail:r,onClose:l}=e;const[o,i]=(0,s.useState)([]),d=[...o],u=(0,s.useRef)([]);if(t){const e=()=>{let e=0;for(;e<999;){if(-1===u.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};t.id=e(),t.close=()=>{n&&i(e=>{const n=[...e],a=e.indexOf(t);return-1!==a&&n.splice(a,1),n}),l&&l(t),u.current.push(t.id)},n&&(t.nail=()=>{i(e=>[...e,t]),r&&r(t),u.current.push(t.id)}),d.push(t)}return d.map(e=>(0,c.jsx)(h,(0,a.A)({},e),e.id))}},38030:(e,t,n)=>{n.d(t,{A:()=>d});n(65043);var a=n(26494),s=n(85865),r=n(2260),l=n(32143);const o="style_content__eXhNP",i="style_horizontal-margined__w4tJp";var c=n(70579);const d=e=>{let{label:t,options:n,selection:d,setter:u,disabled:h}=e;if(!n)return"Missing options argument";if(!d)return"Missing selection argument";if(!u)return"Missing setter argument";return(0,c.jsxs)(a.A,{className:o,children:[t&&(0,c.jsx)(s.A,{variant:"h5",children:t}),(0,c.jsx)(r.A,{value:d,onChange:e=>{u(e.target.value)},className:i,disabled:h,children:n.map((e,t)=>(0,c.jsx)(l.A,{value:e,children:e},t))})]})}},83283:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});const a={graph:"style_graph__Q1ja5",horizontal:"style_horizontal__makgF",wide25:"style_wide25__KqdCT",wide75:"style_wide75__p0NKz",enabled:"style_enabled__ndc27",disabled:"style_disabled__s5ohr","vertical-margin":"style_vertical-margin__5aQXR"}}}]);
//# sourceMappingURL=126.02c3c034.chunk.js.map