"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[1772],{10939:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(65043),s=n(12110),a=n(17604);const o="style_container__M9GCG";var l=n(70579);const i={opacity:[0,1]};(0,a.A)()||(i.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,r.forwardRef)(((e,t)=>{let{overrideComponent:n,...a}=e;const d=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex((t=>e===t)),n=e.animate(i,{...c,delay:150*t});return()=>n.cancel()}),[]);const u=n?"section":s.A;return(0,l.jsx)("div",{ref:d,className:o,children:(0,l.jsx)(u,{component:"section",...a,ref:t})})}))},60676:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(65043),s=n(26494);const a="style_horizontal__KW-k9",o="style_vertical__YKrT2",l="style_heatmap-horizontal__HjdIF",i="style_heatmap-vertical__utgJY";var c=n(85941),d=n(70579);const u=e=>{let{title:t="",maxValue:n=1,minValue:u=0,colorPlan:m,splits:h=19,vertical:p=!1,className:f}=e;const{legendData:x,legendLabels:g}=(0,r.useMemo)((()=>{const e=[];if(u===n)e.push(u);else for(let r=u;r<=n;r+=(n-u)/h)e.push(r);let t=e.map((e=>Math.round(e)));if(t.length>1)for(let n=1;new Set(t).size<t.length;n++)t=e.map((e=>Math.round(e*10**n)/10**n));return{legendData:p?e.map((e=>[e])):[e],legendLabels:t}}),[n,u,h,p]);return(0,d.jsxs)(s.A,{className:f||(p?o:a),children:[t,(0,d.jsx)(c.A,{data:x,xAxisValues:p?[""]:g,yAxisValues:p?g:[""],colorPlan:m,flippedXAxisValues:!1,className:p?i:l})]})}},85941:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(65043),s=n(77691),a=n(32577),o=n(13232),l=n(70579);const i="normal 10px sans-serif",c="normal 14px sans-serif",d=(0,r.memo)((e=>{let{data:t,xAxisValues:n=[],yAxisValues:d=[],xAxisLabel:u,yAxisLabel:m,verticalPadding:h=0,colorPlan:p=["red","white","blue"],colorScale:f,onTooltip:x,onClick:g,flippedXAxisValues:y=!0,margin:v={top:10,right:10,bottom:10,left:10},className:A}=e;if(!t)throw new Error("Data is missing. Data is mandatory for the heatmap representation");if(n.length!==new Set(n).size)throw console.log(n),new Error("Duplicated values in the X axis. See console logs");if(d.length!==new Set(d).size)throw console.log(d),new Error("Duplicated values in the Y axis. See console logs");0===n.length&&(n=Array.from(Array(t[0].length).keys())),0===d.length&&(d=Array.from(Array(t[0].length).keys()));const _=[].concat(...t),w=Math.max(..._),C=Math.min(..._),b=[].concat(...Array(t.length).fill(n)),E=[];for(const r of d)E.push(...Array(n.length).fill(r));const j=[];for(const r in _)j.push({v:_[r],x:b[r],y:E[r]});const N=(0,r.useRef)(null),M=(0,r.useRef)(null),[,V]=(0,r.useState)(null),L=(0,s.jY)("|",i).height,R=(0,s.jY)("|",c).height+9,k=Math.max(...n.map((e=>(0,s.q_)(e,i))))+9,S=Math.max(...d.map((e=>(0,s.q_)(e,i)))),Y=u?R:0,z=m?R+9:0,D=y?k+Y:L+Y,I=1===d.length?Math.max(S,(0,s.q_)(m,c)):S+z,O={top:v.top,right:v.right,bottom:D+v.bottom,left:I+v.left};return(0,r.useEffect)((()=>{M.current&&M.current.forEach((e=>e.remove()));const e=N.current,{clientWidth:r,clientHeight:s}=e.parentElement,l=r-O.left-O.right,i=s-O.top-O.bottom,c=l/(1.05*(y?L:k)),A=i/(1.05*L),_=Math.ceil(n.length/c),b=Math.ceil(d.length/A),E=document.createElement("CANVAS");(0,a.Ltv)(e).node().appendChild(E);const j=(0,a.Ltv)(E).attr("id","canvas").attr("width",l).attr("height",i).style("position","absolute").style("top",O.top+"px").style("left",O.left+"px").style("cursor",g?"pointer":void 0),R=j.node().getContext("2d"),S=(0,a.Ltv)(e).append("svg").attr("id","svg").attr("viewBox",[0,0,r,s]),Y=(0,a.WH)().range([O.left,l+O.left]).domain(n).paddingInner(0),I=S.append("g").attr("transform","translate(0,"+(i+O.top)+")").call((0,a.l78)(Y).tickFormat(((e,t)=>t%_===0?e:""))).selectAll("text");y&&I.style("text-anchor","end").attr("dx","-9px").attr("dy","-9px").attr("transform","rotate(-90)"),S.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",O.left+l/2).attr("y",O.top+i+D).text(u);const F=(0,a.WH)().domain(d).range([O.top,i+O.top]).padding(h);S.append("g").attr("transform","translate("+O.left+", 0)").call((0,a.V4s)(F).tickFormat(((e,t)=>t%b===0?e:""))),1===d.length?S.append("text").attr("class","y label").attr("text-anchor","start").attr("x",0).attr("y",v.top+i).text(m):S.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-(O.top+i/2)).attr("y",v.left+z-9-9).attr("transform","rotate(-90)").text(m);const H=f||(0,a.m4Y)().range(p).domain([C,(C+w)/2,w]),q=Y.bandwidth(),P=F.bandwidth();t.forEach(((e,t)=>{const r=F(d[t])-O.top;e.forEach(((e,t)=>{const s=Y(n[t])-O.left;R.fillStyle=H(e),R.fillRect(s,r,q,P)}))}));const T=e=>{const r=E.getBoundingClientRect(),s=e.clientX-r.left,a=e.clientY-r.top;let o=Math.floor(s/Y.step()),l=Math.floor(a/F.step());const i=t[0].length-1;o<0&&(o=0),o>i&&(o=i);const c=t.length-1;l<0&&(l=0),l>c&&(l=c);const u=n[o],m=d[l];return{xIndex:o,yIndex:l,value:t[l][o],xAxisValue:u,yAxisValue:m}};let W;x&&(W=document.createElement("div"),Object.assign(W.style,{display:"none",position:"absolute",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),e.appendChild(W),E.onmousemove=t=>{const n=T(t);W.innerText=x(n),W.style.display="inline-block";const{x:r,y:s}=(0,o.L)(e,W,{x:t.clientX,y:t.clientY},3);W.style.left=r+"px",W.style.top=s+"px"},E.onmouseleave=()=>{W.style.display="none"}),g&&(E.onmousedown=e=>{const t=T(e);g(t)}),M.current=W?[S,j,W]:[S,j];const X=()=>{V({innerWidth:window.innerWidth,innerHeight:window.innerHeight})};return window.addEventListener("resize",X),()=>{window.removeEventListener("resize",X)}})),(0,l.jsx)("div",{className:A,style:A?void 0:{height:"600px",width:"600px"},children:(0,l.jsx)("div",{ref:N,id:"container",style:{position:"relative",width:"100%",height:"100%"}})})}))},48838:(e,t,n)=>{n.d(t,{A:()=>M});var r=n(65043);const s="style_default__XssaH",a="style_horizontal__FFwZj",o="style_thin__lEVc2",l="style_scroll__uw-00",i="style_flexible__Jijoh",c="style_normal__ymO1T",d="style_letter__NUedA",u="style_margined__ItdEs",m="style_extra-right-margin__ixA6k",h="style_small-up-number__6VamN",p="style_pivot__Q44O7",f="style_pointer__QFoOj",x="style_button__9jcdg";var g=n(26494),y=n(17392),v=n(92127),A=n(12639),_=n(60676),w=n(97318),C=n(32577),b=n(29449),E=n(70579);const j=e=>{const t=document.createElement("span");t.className=p;const n=document.createElement("span");return n.className=f,n.lang="pointer",t.appendChild(n),e.appendChild(t),n},N=["white","yellow","red"],M=e=>{let{residueValues:t,colorPlan:n=N,legendTitle:p,onSelect:f,onDeselect:M,onClean:V,onTooltip:L,forcedResiduesSelection:R,className:k}=e;const{topology:S}=(0,r.useContext)(b.f),{sequences:Y,residueData:z,maxValue:D,minValue:I}=(0,r.useMemo)((()=>{if(!S)return{};const e=S.residueCount,r={},s=new Array(e).fill(null);for(let n=0;n<e;n++){const e=t[n];if(null===e)continue;const a=S.getResidueByIndex(n),o={index:n,letter:a.letter,number:a.referenceNumber||a.number,value:e};s[n]=o;const l=a.chainName,i=r[l];i?i.push(o):r[l]=[o]}const a=Object.entries(r).map((e=>{let[t,n]=e;return{name:"Chain "+t,residues:n}})),o=Math.max(...t),l=Math.min(...t);if(n){const e=(0,C.m4Y)().range(n).domain([l,(l+o)/2,o]);s.forEach((t=>{t&&(t.color=e(t.value))}))}return{sequences:a,residueData:s,maxValue:o,minValue:l}}),[t,n,S]),[O,F,H]=(0,w.A)(),q=(0,r.useRef)([]),P=(0,r.useState)([]),[T,W]=R||P,X=(0,r.useRef)(T);(0,r.useEffect)((()=>{X.current=T}),[T]),(0,r.useEffect)((()=>{const e=document.getElementById("manager");if(!e)return;const t=e=>{const t=e.target;"residue"===t.lang&&j(t)},n=e=>{const t=e.target;"residue"===t.lang&&t.removeChild(t.lastChild)},r=e=>{const t=e.target;if("residue"!==t.lang)return;t.removeChild(t.lastChild);const n=t.getAttribute("residueindex"),r=z[n],s=X.current.indexOf(r),a=-1===s,o=r.tagcolor?r.tagcolor:O();if(a){r.tagcolor=o,f&&f(r,n,o);const e=j(t);e.style["border-top-color"]=o,q.current.push(e),X.current.push(r)}else{r.tagcolor=null,M&&M(r,n,o);const e=t.lastChild;F(o),t.removeChild(e),q.current.splice(s,1),X.current.splice(s,1)}j(t),W([...X.current])};return e.addEventListener("mouseover",t,!0),e.addEventListener("mouseout",n,!0),e.addEventListener("mousedown",r,!0),()=>{e.removeEventListener("mouseover",t,!0),e.removeEventListener("mouseout",n,!0),e.removeEventListener("mousedown",r,!0),H()}}),[Y,W,z,f,M,O,F,H]);if(S)return(0,E.jsx)("div",{className:k||s,children:(0,E.jsxs)("div",{className:a,children:[n&&(0,E.jsx)(_.A,{title:p,minValue:I,maxValue:D,colorPlan:n,vertical:!0,className:o}),(0,E.jsx)(g.A,{className:l,id:"manager",children:Y.map((e=>(0,E.jsxs)("details",{open:!0,children:[(0,E.jsx)("summary",{style:{cursor:"pointer"},children:e.name}),(0,E.jsx)("span",{className:i,children:e.residues.reduce(((e,t,n)=>{n%10===0&&e.push([]);return e[e.length-1].push(t),e}),[]).map(((e,t)=>{const n=e[e.length-1].number||10*(t+1),r=e.map(((e,t)=>(0,E.jsx)("span",{lang:"residue",className:c,title:L&&L(e,e.index),residueindex:e.index,children:(0,E.jsx)("span",{className:d,style:{backgroundColor:e.color},children:e.letter})},t)));return(0,E.jsxs)("span",{className:u,children:[r,10===r.length&&(0,E.jsx)("span",{className:m,children:(0,E.jsx)("span",{className:h,children:n})})]},t)}))})]},e.name)))}),T.length>0&&(0,E.jsx)(y.A,{title:"Clean selections",onClick:()=>{for(const e of q.current){const t=e.parentElement;t.parentElement.removeChild(t)}q.current=[],H(),T.forEach((e=>{e.tagcolor=null})),W([]),V&&V()},className:x,size:"large",children:(0,E.jsx)(v.g,{icon:A.yLS})})]})})}},97318:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(65043);const s=["red","green","blue","orange","purple"],a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";const n=(0,r.useRef)([]);return(0,r.useMemo)((()=>[()=>{for(const t of e){if(-1===n.current.indexOf(t))return n.current.push(t),t}return t},e=>{if(e===t)return;const r=n.current.indexOf(e);if(-1===r)throw new Error("Color ".concat(e," is not used"));n.current.splice(r,1)},()=>{n.current=[]}]),[e,t])}},12110:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(58168),s=n(98587),a=n(65043),o=n(58387),l=n(98610),i=n(34535),c=n(98206),d=n(63336),u=n(92532),m=n(72372);function h(e){return(0,m.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var p=n(70579);const f=["className","raised"],x=(0,i.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),g=a.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiCard"}),{className:a,raised:i=!1}=n,d=(0,s.A)(n,f),u=(0,r.A)({},n,{raised:i}),m=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},h,t)})(u);return(0,p.jsx)(x,(0,r.A)({className:(0,o.A)(m.root,a),elevation:i?8:void 0,ref:t,ownerState:u},d))}))},26494:(e,t,n)=>{n.d(t,{A:()=>x});var r=n(58168),s=n(98587),a=n(65043),o=n(58387),l=n(98610),i=n(34535),c=n(98206),d=n(92532),u=n(72372);function m(e){return(0,u.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var h=n(70579);const p=["className","component"],f=(0,i.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),x=a.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiCardContent"}),{className:a,component:i="div"}=n,d=(0,s.A)(n,p),u=(0,r.A)({},n,{component:i}),x=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},m,t)})(u);return(0,h.jsx)(f,(0,r.A)({as:i,className:(0,o.A)(x.root,a),ownerState:u,ref:t},d))}))}}]);
//# sourceMappingURL=1772.47b57922.chunk.js.map