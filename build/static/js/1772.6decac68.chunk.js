"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[1772],{10939:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(89379),s=n(80045),a=n(65043),l=n(12110),o=n(17604);const i="style_container__M9GCG";var c=n(70579);const d=["overrideComponent"],u={opacity:[0,1]};(0,o.A)()||(u.transform=["translateY(50px)","translateY(0)"]);const m={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},h=(0,a.forwardRef)((e,t)=>{let{overrideComponent:n}=e,o=(0,s.A)(e,d);const h=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{const e=h.current&&h.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),n=e.animate(u,(0,r.A)((0,r.A)({},m),{},{delay:150*t}));return()=>n.cancel()},[]);const p=n?"section":l.A;return(0,c.jsx)("div",{ref:h,className:i,children:(0,c.jsx)(p,(0,r.A)((0,r.A)({component:"section"},o),{},{ref:t}))})})},12110:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(58168),s=n(98587),a=n(65043),l=n(58387),o=n(98610),i=n(34535),c=n(98206),d=n(63336),u=n(92532),m=n(72372);function h(e){return(0,m.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var p=n(70579);const f=["className","raised"],x=(0,i.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),g=a.forwardRef(function(e,t){const n=(0,c.b)({props:e,name:"MuiCard"}),{className:a,raised:i=!1}=n,d=(0,s.A)(n,f),u=(0,r.A)({},n,{raised:i}),m=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},h,t)})(u);return(0,p.jsx)(x,(0,r.A)({className:(0,l.A)(m.root,a),elevation:i?8:void 0,ref:t,ownerState:u},d))})},48838:(e,t,n)=>{n.d(t,{A:()=>V});var r=n(65043);const s="style_default__XssaH",a="style_horizontal__FFwZj",l="style_thin__lEVc2",o="style_scroll__uw-00",i="style_flexible__Jijoh",c="style_normal__ymO1T",d="style_letter__NUedA",u="style_margined__ItdEs",m="style_extra-right-margin__ixA6k",h="style_small-up-number__6VamN",p="style_pivot__Q44O7",f="style_pointer__QFoOj",x="style_button__9jcdg";var g=n(26494),y=n(17392),v=n(92127),_=n(12639),A=n(60676),w=n(97318),b=n(57631),C=n(29449),N=n(70579);const E=e=>{const t=document.createElement("span");t.className=p;const n=document.createElement("span");return n.className=f,n.lang="pointer",t.appendChild(n),e.appendChild(t),n},j=["white","yellow","red"],V=e=>{let{residueValues:t,colorPlan:n=j,legendTitle:p,onSelect:f,onDeselect:V,onClean:M,onTooltip:k,forcedResiduesSelection:L,className:S}=e;const{topology:R}=(0,r.useContext)(C.f),{sequences:Y,residueData:z,maxValue:D,minValue:I}=(0,r.useMemo)(()=>{if(!R)return{};const e=R.residueCount,r={},s=new Array(e).fill(null);for(let n=0;n<e;n++){const e=t[n];if(null===e)continue;const a=R.getResidueByIndex(n),l={index:n,letter:a.letter,number:a.referenceNumber||a.number,value:e};s[n]=l;const o=a.chainName,i=r[o];i?i.push(l):r[o]=[l]}const a=Object.entries(r).map(e=>{let[t,n]=e;return{name:"Chain "+t,residues:n}}),l=Math.max(...t),o=Math.min(...t);if(n){const e=(0,b.m4Y)().range(n).domain([o,(o+l)/2,l]);s.forEach(t=>{t&&(t.color=e(t.value))})}return{sequences:a,residueData:s,maxValue:l,minValue:o}},[t,n,R]),[O,F,H]=(0,w.A)(),W=(0,r.useRef)([]),q=(0,r.useState)([]),[P,T]=L||q,X=(0,r.useRef)(P);(0,r.useEffect)(()=>{X.current=P},[P]),(0,r.useEffect)(()=>{const e=document.getElementById("manager");if(!e)return;const t=e=>{const t=e.target;"residue"===t.lang&&E(t)},n=e=>{const t=e.target;"residue"===t.lang&&t.removeChild(t.lastChild)},r=e=>{const t=e.target;if("residue"!==t.lang)return;t.removeChild(t.lastChild);const n=t.getAttribute("residueindex"),r=z[n],s=X.current.indexOf(r),a=-1===s,l=r.tagcolor?r.tagcolor:O();if(a){r.tagcolor=l,f&&f(r,n,l);const e=E(t);e.style["border-top-color"]=l,W.current.push(e),X.current.push(r)}else{r.tagcolor=null,V&&V(r,n,l);const e=t.lastChild;F(l),t.removeChild(e),W.current.splice(s,1),X.current.splice(s,1)}E(t),T([...X.current])};return e.addEventListener("mouseover",t,!0),e.addEventListener("mouseout",n,!0),e.addEventListener("mousedown",r,!0),()=>{e.removeEventListener("mouseover",t,!0),e.removeEventListener("mouseout",n,!0),e.removeEventListener("mousedown",r,!0),H()}},[Y,T,z,f,V,O,F,H]);if(R)return(0,N.jsx)("div",{className:S||s,children:(0,N.jsxs)("div",{className:a,children:[n&&(0,N.jsx)(A.A,{title:p,minValue:I,maxValue:D,colorPlan:n,vertical:!0,className:l}),(0,N.jsx)(g.A,{className:o,id:"manager",children:Y.map(e=>(0,N.jsxs)("details",{open:!0,children:[(0,N.jsx)("summary",{style:{cursor:"pointer"},children:e.name}),(0,N.jsx)("span",{className:i,children:e.residues.reduce((e,t,n)=>{n%10===0&&e.push([]);return e[e.length-1].push(t),e},[]).map((e,t)=>{const n=e[e.length-1].number||10*(t+1),r=e.map((e,t)=>(0,N.jsx)("span",{lang:"residue",className:c,title:k&&k(e,e.index),residueindex:e.index,children:(0,N.jsx)("span",{className:d,style:{backgroundColor:e.color},children:e.letter})},t));return(0,N.jsxs)("span",{className:u,children:[r,10===r.length&&(0,N.jsx)("span",{className:m,children:(0,N.jsx)("span",{className:h,children:n})})]},t)})})]},e.name))}),P.length>0&&(0,N.jsx)(y.A,{title:"Clean selections",onClick:()=>{for(const e of W.current){const t=e.parentElement;t.parentElement.removeChild(t)}W.current=[],H(),P.forEach(e=>{e.tagcolor=null}),T([]),M&&M()},className:x,size:"large",children:(0,N.jsx)(v.g,{icon:_.yLS})})]})})}},60676:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(65043),s=n(26494);const a="style_horizontal__KW-k9",l="style_vertical__YKrT2",o="style_heatmap-horizontal__HjdIF",i="style_heatmap-vertical__utgJY";var c=n(85941),d=n(70579);const u=e=>{let{title:t="",maxValue:n=1,minValue:u=0,colorPlan:m,splits:h=19,vertical:p=!1,flip:f=!1,className:x}=e;const{legendData:g,legendLabels:y}=(0,r.useMemo)(()=>{const e=[];if(u===n)e.push(u);else for(let s=u;s<=n;s+=(n-u)/h)e.push(s);let t=e.map(e=>Math.round(e));if(t.length>1)for(let n=1;new Set(t).size<t.length;n++)t=e.map(e=>Math.round(e*10**n)/10**n);const r=p?e.map(e=>[e]):[e];return f&&(r.reverse(),t.reverse()),{legendData:r,legendLabels:t}},[n,u,h,p]);return(0,d.jsxs)(s.A,{className:x||(p?l:a),children:[t,(0,d.jsx)(c.A,{data:g,xAxisValues:p?[""]:y,yAxisValues:p?y:[""],colorPlan:m,flippedXAxisValues:!1,className:p?i:o})]})}},85941:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(65043),s=n(77691),a=n(57631),l=n(13232),o=n(70579);const i="normal 10px sans-serif",c="normal 14px sans-serif",d=(0,r.memo)(e=>{let{data:t,xAxisValues:n=[],yAxisValues:d=[],xAxisLabel:u,yAxisLabel:m,verticalPadding:h=0,colorPlan:p=["red","white","blue"],colorScale:f,onTooltip:x,onClick:g,flippedXAxisValues:y=!0,margin:v={top:10,right:10,bottom:10,left:10},className:_,NaNColor:A="#ffffff",minValue:w,maxValue:b,addBorder:C=!0}=e;if(!t)throw new Error("Data is missing. Data is mandatory for the heatmap representation");if(n.length!==new Set(n).size)throw console.log(n),new Error("Duplicated values in the X axis. See console logs");if(d.length!==new Set(d).size)throw console.log(d),new Error("Duplicated values in the Y axis. See console logs");0===n.length&&(n=Array.from(Array(t[0].length).keys())),0===d.length&&(d=Array.from(Array(t[0].length).keys()));const N=[].concat(...t),E=N.filter(e=>!isNaN(e)),j=null!==b&&void 0!==b?b:Math.max(...E),V=null!==w&&void 0!==w?w:Math.min(...E),M=[].concat(...Array(t.length).fill(n)),k=[];for(const r of d)k.push(...Array(n.length).fill(r));const L=[];for(const r in N)L.push({v:N[r],x:M[r],y:k[r]});const S=(0,r.useRef)(null),R=(0,r.useRef)(null),[,Y]=(0,r.useState)(null),z=(0,s.jY)("|",i).height,D=(0,s.jY)("|",c).height+9,I=Math.max(...n.map(e=>(0,s.q_)(e,i)))+9,O=Math.max(...d.map(e=>(0,s.q_)(e,i))),F=u?D:0,H=m?D+9:0,W=y?I+F:z+F,q=1===d.length?Math.max(O,(0,s.q_)(m,c)):O+H,P={top:v.top,right:v.right,bottom:W+v.bottom,left:q+v.left};return(0,r.useEffect)(()=>{R.current&&R.current.forEach(e=>e.remove());const e=S.current,{clientWidth:r,clientHeight:s}=e.parentElement,o=r-P.left-P.right,i=s-P.top-P.bottom,c=o/(1.05*(y?z:I)),_=i/(1.05*z),w=Math.ceil(n.length/c),b=Math.ceil(d.length/_),N=document.createElement("CANVAS");(0,a.Ltv)(e).node().appendChild(N);const E=(0,a.Ltv)(N).attr("id","canvas").attr("width",o).attr("height",i).style("position","absolute").style("top",P.top+"px").style("left",P.left+"px").style("cursor",g?"pointer":void 0),M=E.node().getContext("2d"),k=(0,a.Ltv)(e).append("svg").attr("id","svg").attr("viewBox",[0,0,r,s]),L=(0,a.WH)().range([P.left,o+P.left]).domain(n).paddingInner(0),D=k.append("g").attr("transform","translate(0,"+(i+P.top)+")").call((0,a.l78)(L).tickFormat((e,t)=>t%w===0?e:"")).selectAll("text");y&&D.style("text-anchor","end").attr("dx","-9px").attr("dy","-9px").attr("transform","rotate(-90)"),k.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",P.left+o/2).attr("y",P.top+i+W).text(u);const O=(0,a.WH)().domain(d).range([P.top,i+P.top]).padding(h);k.append("g").attr("transform","translate("+P.left+", 0)").call((0,a.V4s)(O).tickFormat((e,t)=>t%b===0?e:"")),1===d.length?k.append("text").attr("class","y label").attr("text-anchor","start").attr("x",0).attr("y",v.top+i).text(m):k.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-(P.top+i/2)).attr("y",v.left+H-9-9).attr("transform","rotate(-90)").text(m);const F=e=>{if(isNaN(e))return A;return(f||(0,a.m4Y)().range(p).domain([V,(V+j)/2,j]))(e)},q=L.bandwidth(),T=O.bandwidth();t.forEach((e,t)=>{const r=O(d[t])-P.top;e.forEach((e,t)=>{const s=L(n[t])-P.left;M.fillStyle=F(e),M.fillRect(s,r,q,T),C&&(M.strokeStyle=F(e),M.lineWidth=1,M.strokeRect(s,r,q,T))})});const X=e=>{const r=N.getBoundingClientRect(),s=e.clientX-r.left,a=e.clientY-r.top;let l=Math.floor(s/L.step()),o=Math.floor(a/O.step());const i=t[0].length-1;l<0&&(l=0),l>i&&(l=i);const c=t.length-1;o<0&&(o=0),o>c&&(o=c);const u=n[l],m=d[o];return{xIndex:l,yIndex:o,value:t[o][l],xAxisValue:u,yAxisValue:m}};let B;x&&(B=document.createElement("div"),Object.assign(B.style,{display:"none",position:"absolute",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),e.appendChild(B),N.onmousemove=t=>{const n=X(t);B.innerText=x(n),B.style.display="inline-block";const{x:r,y:s}=(0,l.L)(e,B,{x:t.clientX,y:t.clientY},3);B.style.left=r+"px",B.style.top=s+"px"},N.onmouseleave=()=>{B.style.display="none"}),g&&(N.onmousedown=e=>{const t=X(e);g(t)}),R.current=B?[k,E,B]:[k,E];const G=()=>{Y({innerWidth:window.innerWidth,innerHeight:window.innerHeight})};return window.addEventListener("resize",G),()=>{window.removeEventListener("resize",G)}}),(0,o.jsx)("div",{className:_,style:_?void 0:{height:"600px",width:"600px"},children:(0,o.jsx)("div",{ref:S,id:"container",style:{position:"relative",width:"100%",height:"100%"}})})})},97318:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(65043);const s=["red","green","blue","orange","purple"],a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";const n=(0,r.useRef)([]);return(0,r.useMemo)(()=>[()=>{for(const t of e){if(-1===n.current.indexOf(t))return n.current.push(t),t}return t},e=>{if(e===t)return;const r=n.current.indexOf(e);if(-1===r)throw new Error("Color ".concat(e," is not used"));n.current.splice(r,1)},()=>{n.current=[]}],[e,t])}}}]);
//# sourceMappingURL=1772.6decac68.chunk.js.map