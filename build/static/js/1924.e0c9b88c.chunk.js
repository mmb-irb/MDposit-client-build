"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[1924,3016],{507:(e,t,a)=>{a.d(t,{A:()=>b});var l=a(65043),r=a(2260),o=a(32143),s=a(57972),n=a(83558),i=a(14256),c=a(67784),d=a(17392),u=a(92127),m=a(12639),h=a(17545);const f="style_horizontal__2DIWx",x="style_horizontal-margined__e9fQR";var p=a(70579);const v=[{label:"All residues",value:"residue_indices"},{label:"Interface residues",value:"interface_indices"}],b=e=>{let{interactions:t,selectedInteraction:a,setSelectedInteraction:b,selectedResidues:g,setSelectedResidues:A,selectedOrder:y,handleToggleOrder:j,firstOrderLabel:k,firstOrderTooltip:_,secondOrderLabel:w,secondOrderTooltip:S,toggleOrderTooltip:I,interfaceOnly:N=!1}=e;const T=t[a];return(0,p.jsxs)(l.Suspense,{fallback:(0,p.jsx)(h.A,{}),children:[(0,p.jsx)(r.A,{value:a,onChange:e=>{b(e.target.value)},className:x,children:t.map((e,t)=>(0,p.jsx)(o.A,{value:t,disabled:e.failed,children:e.label||e.name},t))}),g&&(0,p.jsx)(s.A,{value:g,onChange:e=>{A(e.target.value)},className:f,children:v.map((e,t)=>(0,p.jsx)(n.A,{value:e.value,control:(0,p.jsx)(i.A,{color:"primary"}),label:e.label,disabled:"All residues"===e.label&&N},t))}),void 0!==y&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.A,{label:k,title:_,value:y?T.agent_1:T.agent_2}),(0,p.jsx)(d.A,{title:I,onClick:()=>{j()},size:"large",children:(0,p.jsx)(u.g,{icon:m._qq})}),(0,p.jsx)(c.A,{label:w,title:S,value:y?T.agent_2:T.agent_1})]})]})}},23016:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});const l={card:"style_card__vXTgq",horizontal:"style_horizontal__t0owt","text-field":"style_text-field__bQrv2","margined-bottom":"style_margined-bottom__pVY9i",enabled:"style_enabled__3P0ll",disabled:"style_disabled__XLm-A"}},45851:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var l=a(89379),r=a(65043),o=a(95747),s=a(58338),n=a(29449),i=a(26494),c=a(85865),d=a(67784),u=a(10939),m=a(34088),h=a(17545),f=a(507),x=a(1960),p=a(83558),v=a(51962);const b="style_graph-legend__TA-gh";var g=a(70579);const A=e=>{let{entries:t,onChange:a,onMouseOver:l,onMouseOut:r}=e;return(0,g.jsx)("div",{className:b,children:t.map(e=>{let{name:t,color:o,check:s}=e;return(0,g.jsx)(p.A,{"data-key":t,onChange:e=>a(e.target.dataset.key),onMouseOver:l,onMouseOut:r,control:(0,g.jsx)(v.A,{checked:s,style:{color:o||"black"},inputProps:{"data-key":t}}),label:t},t)})})};var y=a(23016),j=a(92249),k=a(66565);const _=(0,r.lazy)(()=>Promise.all([a.e(3969),a.e(5291),a.e(5077)]).then(a.bind(a,75291))),w="guest",S=e=>{const t=e.reduce((e,t)=>e+t,0);return Math.round(1e4*t)/1e4},I=()=>{const{accessionAndMdNumber:e,topology:t,interactions:a}=(0,r.useContext)(n.f),p="".concat(o.nP,"/").concat(e,"/analyses"),v="".concat(p,"/energies"),{loading:b,payload:I,error:N}=(0,s.A)(v),[T,C]=(0,r.useState)(0),{interactionName:M,analysisName:z}=(0,r.useMemo)(()=>{if(!a||!I)return{};const e=a[T];if(void 0!==I.data)return{interactionName:e.name};const t=I.find(t=>t.name===e.name);return{interactionName:e.name,analysisName:t.analysis}},[a,T,I]),O=z?"".concat(p,"/").concat(z):null,{loading:D,payload:V,error:E}=(0,s.A)(O),R=(0,k.A)(e=>{if(!I)return e;if(!(void 0!==I.data))return V||e;const t=I.data.find(e=>e.name===M);return t||{error:'Dataset for interaction "'.concat(M,'" not found')}},[I,V,M]),[L,P]=(0,r.useState)(!0),{hostAtomIndices:W,hostResidueIndices:B,guestInterfaceAtomIndices:F,strongBonds:H}=(0,r.useMemo)(()=>{if(!t||!a)return{};const e=a[T],l=L?e.atom_indices_1:e.atom_indices_2;return{hostAtomIndices:l,hostResidueIndices:t.atom2residueIndices(l),guestInterfaceAtomIndices:L?e.interface_atom_indices_2:e.interface_atom_indices_1,strongBonds:e.strong_bonds}},[t,a,T,L]),q=t&&t.defaultRepresentations,[X,G]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!t||!q||!F)return;const e=t.atomIndices2Ngl(F);G(t=>{if(null===t)return[...q,{selection:e,name:"Guest elements",type:"ball+stick",color:"element",opacity:.3,reference:w}];return t.find(e=>e.reference===w).selection=e,[...t]})},[t,q,F]);const[Q,Y]=(0,r.useState)(!0),{data:J,dataError:K,isDataPerResidue:U,strongBondMarks:Z,esData:$,vdwData:ee,bothData:te,xTooltip:ae}=(0,r.useMemo)(()=>{if(!R||!t)return{};if(R.error)return{};const e=new j.A(R.version).major<1;let a;const l=L?"agent1":"agent2";if(a=R[l],!a)return{data:null,dataError:"Data for ".concat(l,' not found in the interaction "').concat(R.name,'"')};if(Q){const e=B.map(e=>t.getResidueByIndex(e).standardLabel);a.xTags=e}else{const e=W.map(e=>t.getAtomByIndex(e).label);a.xTags=e}const r=[].concat.apply([],H),o=Q?r.map(e=>t.getAtomByIndex(e).residue.standardLabel):r.map(e=>t.getAtomByIndex(e).label),s=[];o.forEach(e=>{const t=a.xTags.indexOf(e);-1!==t&&s.push({x:t,attr:{fill:"orange",opacity:.5}})});const n=Q&&!e?e=>{const a={};return e.forEach((e,l)=>{const r=W[l],o=t.getAtomByIndex(r).residueIndex;a[o]=(a[o]||0)+e}),B.map(e=>a[e])}:e=>e,i={esi:{data:n(a.ies),color:"red"},esf:{data:n(a.fes),color:"blue"},es:{data:n(a.es),color:"black"}},c={vdwi:{data:n(a.ivdw),color:"red"},vdwf:{data:n(a.fvdw),color:"blue"},vdw:{data:n(a.vdw),color:"black"}},d={bothi:{data:n(a.iboth),color:"red"},bothf:{data:n(a.fboth),color:"blue"},both:{data:n(a.both),color:"black"}};return{data:a,isDataPerResidue:e,strongBondMarks:s,esData:i,vdwData:c,bothData:d,xTooltip:(e,t)=>"".concat(Q?"residue":"atom"," ").concat(a.xTags&&a.xTags[t]||t)}},[R,L,Q,t,W,B,H]),[le,re]=(0,r.useState)({all:!0,start:!0,end:!0}),{esDisplay:oe,vdwDisplay:se,bothDisplay:ne}=(0,r.useMemo)(()=>({esDisplay:{esi:le.start,esf:le.end,es:le.all},vdwDisplay:{vdwi:le.start,vdwf:le.end,vdw:le.all},bothDisplay:{bothi:le.start,bothf:le.end,both:le.all}}),[le]),[ie,ce]=(0,r.useState)(null),de=(0,r.useMemo)(()=>{if(null===ie)return Z;return[{x:ie,attr:{fill:"#c8c8c8"}},...Z]},[ie,Z]),ue=(0,r.useMemo)(()=>{if(null===ie)return null;if(!Q)return null;return[B[ie]]},[B,Q,ie]),me=(0,r.useMemo)(()=>{if(null===ie)return null;if(Q)return null;return[W[ie]]},[W,Q,ie]),he=(0,r.useCallback)(e=>ce(t=>e&&e.selectedX===t?null:t),[]),fe=(0,r.useCallback)(e=>{C(e),ce(null)},[]),xe=(0,r.useCallback)(()=>{P(e=>!e),ce(null)},[]),pe=(0,r.useCallback)(()=>{Y(e=>!e),ce(null)},[]),ve=b||D;if(N)return N.toString();if(E)return E.toString();if(R&&R.error)return R.error;if(!R)return ve?(0,g.jsx)(h.A,{}):a?t?"Something bad happened":"There is no topology":"There are no interactions";const be=$&&1===$.es.data.length;return(0,g.jsxs)(r.Suspense,{fallback:(0,g.jsx)(h.A,{}),children:[(0,g.jsxs)(u.A,{className:y.default.card,children:[(0,g.jsxs)(i.A,{className:y.default.horizontal,children:[(0,g.jsx)(c.A,{variant:"h6",children:"Interaction:"}),(0,g.jsx)(f.A,{interactions:a,selectedInteraction:T,setSelectedInteraction:fe,selectedOrder:L,handleToggleOrder:xe,firstOrderLabel:"Host",firstOrderTooltip:"Interactor whose energies are to be shown",secondOrderLabel:"Guest",secondOrderTooltip:"Interactor with the opposite energies",toggleOrderTooltip:"Toggle interactors"})]}),(0,g.jsxs)("div",{className:ve?y.default.disabled:y.default.enabled,children:[K||!J?null:(0,g.jsxs)(i.A,{children:[(0,g.jsx)("legend",{className:y.default["margined-bottom"],children:"Overall energies summatory"}),(0,g.jsxs)("div",{children:[(0,g.jsx)(d.A,{className:y.default["text-field"],label:"Electrostatic",title:"Sum electorstatic value along the whole trajectory",value:S(J.es)+" kcal/mol"}),(0,g.jsx)(d.A,{className:y.default["text-field"],label:"Electrostatic Initial",title:"Sum electorstatic value along the first 20% trajectory frames",value:S(J.ies)+" kcal/mol"}),(0,g.jsx)(d.A,{className:y.default["text-field"],label:"Electrostatic Final",title:"Sum electorstatic value along the last 20% trajectory frames",value:S(J.fes)+" kcal/mol"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)(d.A,{className:y.default["text-field"],label:"Van der Waals",title:"Sum Van der Waals value along the whole trajectory",value:S(J.vdw)+" kcal/mol"}),(0,g.jsx)(d.A,{className:y.default["text-field"],label:"Van der Waals Initial",title:"Sum Van der Waals value along the first 20% trajectory frames",value:S(J.ivdw)+" kcal/mol"}),(0,g.jsx)(d.A,{className:y.default["text-field"],label:"Van der Waals Final",title:"Sum Van der Waals value along the last 20% trajectory frames",value:S(J.fvdw)+" kcal/mol"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)(d.A,{className:y.default["text-field"],label:"Electrostatic + Van der Waals",title:"Sum electorstatic + Van der Waals value along the whole trajectory",value:S(J.both)+" kcal/mol"}),(0,g.jsx)(d.A,{className:y.default["text-field"],label:"Electrostatic + Van der Waals Initial",title:"Sum electorstatic + Van der Waals value along the first 20% trajectory frames",value:S(J.iboth)+" kcal/mol"}),(0,g.jsx)(d.A,{className:y.default["text-field"],label:"Electrostatic + Van der Waals Final",title:"Sum electorstatic + Van der Waals value along the last 20% trajectory frames",value:S(J.fboth)+" kcal/mol"})]})]}),!U&&(0,g.jsx)(x.A,{firstLabel:"Residues",secondLabel:"Atoms",isFirst:Q,onChange:pe}),K||be?(0,g.jsx)(i.A,{children:(0,g.jsx)(c.A,{variant:"h6",children:K||"The host has only 1 ".concat(Q?"residue":"atom")})}):(0,g.jsxs)(i.A,{children:[(0,g.jsx)(_,{yData:$,xAxisValues:J.xTags,xTooltip:ae,title:"Electrostatic",xScaleFactor:.001,yAxisLabel:"Interaction energy (kcal/mol)",onSelect:ce,dataDisplay:oe,fullPrecision:!0,marks:de}),(0,g.jsx)(_,{yData:ee,title:"Van der Waals",xAxisValues:J.xTags,xTooltip:ae,yAxisLabel:"Interaction energy (kcal/mol)",onSelect:ce,dataDisplay:se,fullPrecision:!0,marks:de}),(0,g.jsx)(_,{yData:te,title:"Electrostatic + Van der Waals",xAxisLabel:Q?"Residue":"Atom",xAxisValues:J.xTags,xTooltip:ae,yAxisLabel:"Interaction energy (kcal/mol)",onSelect:ce,dataDisplay:ne,fullPrecision:!0,marks:de}),(0,g.jsx)(A,{entries:[{name:"all",color:"black",check:le.all},{name:"start",color:"red",check:le.start},{name:"end",color:"blue",check:le.end}],onChange:e=>re(t=>{const a=(0,l.A)({},t);return a[e]=!a[e],a})})]})]})]}),(0,g.jsx)(m.A,{newViewer:ue||me?{selectedResidueIndices:ue,selectedAtoms:me,representationsState:[X,G],selectedX:ie}:null,onNail:he,onClose:he})]})}},51962:(e,t,a)=>{a.d(t,{A:()=>N});var l=a(98587),r=a(58168),o=a(65043),s=a(58387),n=a(98610),i=a(60061),c=a(33064),d=a(59662),u=a(70579);const m=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),h=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),f=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var x=a(6803),p=a(98206),v=a(34535),b=a(61475),g=a(92532),A=a(72372);function y(e){return(0,A.Ay)("MuiCheckbox",e)}const j=(0,g.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),k=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],_=(0,v.Ay)(c.A,{shouldForwardProp:e=>(0,b.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,t["size".concat((0,x.A)(a.size))],"default"!==a.color&&t["color".concat((0,x.A)(a.color))]]}})(e=>{let{theme:t,ownerState:a}=e;return(0,r.A)({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===a.color?t.vars.palette.action.activeChannel:t.vars.palette[a.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,i.X4)("default"===a.color?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==a.color&&{["&.".concat(j.checked,", &.").concat(j.indeterminate)]:{color:(t.vars||t).palette[a.color].main},["&.".concat(j.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),w=(0,u.jsx)(h,{}),S=(0,u.jsx)(m,{}),I=(0,u.jsx)(f,{}),N=o.forwardRef(function(e,t){var a,i;const c=(0,p.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=w,color:m="primary",icon:h=S,indeterminate:f=!1,indeterminateIcon:v=I,inputProps:b,size:g="medium",className:A}=c,j=(0,l.A)(c,k),N=f?v:h,T=f?v:d,C=(0,r.A)({},c,{color:m,indeterminate:f,size:g}),M=(e=>{const{classes:t,indeterminate:a,color:l,size:o}=e,s={root:["root",a&&"indeterminate","color".concat((0,x.A)(l)),"size".concat((0,x.A)(o))]},i=(0,n.A)(s,y,t);return(0,r.A)({},t,i)})(C);return(0,u.jsx)(_,(0,r.A)({type:"checkbox",inputProps:(0,r.A)({"data-indeterminate":f},b),icon:o.cloneElement(N,{fontSize:null!=(a=N.props.fontSize)?a:g}),checkedIcon:o.cloneElement(T,{fontSize:null!=(i=T.props.fontSize)?i:g}),ownerState:C,ref:t,className:(0,s.A)(M.root,A)},j,{classes:M}))})},66565:(e,t,a)=>{a.d(t,{A:()=>r});var l=a(65043);const r=(e,t)=>{const a=(0,l.useRef)(),r=(0,l.useMemo)(()=>e(a.current),t);return a.current=r,r}},92249:(e,t,a)=>{a.d(t,{A:()=>r});class l{constructor(e){void 0===e&&(e="0.0.0");const t=e.split(".");if(this.major=t[0]&&+t[0],this.major>999)throw new Error("Major version is greater than 999 and this is not allowed");if(this.minor=t[1]&&+t[1],this.minor>999)throw new Error("Minor version is greater than 999 and this is not allowed");if(this.patch=t[2]&&+t[2],this.patch>999)throw new Error("Patch version is greater than 999 and this is not allowed")}toString(){let e=this.major.toString();return void 0===this.minor?e:(e+="."+this.minor.toString(),void 0===this.patch||(e+="."+this.patch.toString()),e)}equals(e){return"string"===typeof e?this.equals(new l(e)):e.major===this.major&&((void 0===e.minor||e.minor===this.minor)&&(void 0===e.patch||e.patch===this.patch))}}l.prototype.valueOf=function(){return 1e6*this.major+1e3*(this.minor||0)+(this.patch||0)};const r=l}}]);
//# sourceMappingURL=1924.e0c9b88c.chunk.js.map