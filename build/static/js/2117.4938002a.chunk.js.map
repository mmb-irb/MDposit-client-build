{"version":3,"file":"static/js/2117.4938002a.chunk.js","mappings":"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","sources":["webpack://mdposit/./src/components/animated-card/style.module.css?d4d9","components/animated-card/index.js","../node_modules/@mui/material/Card/cardClasses.js","../node_modules/@mui/material/Card/Card.js","pages/accession/channels/channels.js","webpack://mdposit/./src/pages/accession/channels/style.module.css?78e6"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"style_container__M9GCG\"};","import React, { useLayoutEffect, useRef, forwardRef } from 'react';\nimport { Card } from '@mui/material';\n\nimport reducedMotion from '../../utils/reduced-motion';\n\nimport style from './style.module.css';\n\nconst KEYFRAMES = { opacity: [0, 1] };\n\nif (!reducedMotion()) {\n  KEYFRAMES.transform = ['translateY(50px)', 'translateY(0)'];\n}\n\nconst ANIMATION_OPTIONS = {\n  fill: 'both',\n  easing: 'cubic-bezier(0, .99, .56, 1.1)',\n  duration: 500,\n};\n\n// Make the card appear and slide softly from down to up when the page is loaded\nconst AnimatedCard = forwardRef(({ overrideComponent, ...props }, ref) => {\n  const containerRef = useRef(null);\n\n  useLayoutEffect(() => {\n    const node = containerRef.current && containerRef.current.firstElementChild;\n    if (!(node && node.animate)) return;\n\n    const index = Array.from(\n      document.querySelectorAll('main section'),\n    ).findIndex(section => node === section);\n\n    const animation = node.animate(KEYFRAMES, {\n      ...ANIMATION_OPTIONS,\n      delay: index * 150,\n    });\n\n    return () => animation.cancel();\n  }, []);\n\n  const Component = overrideComponent ? 'section' : Card;\n\n  return (\n    <div ref={containerRef} className={style.container}>\n      <Component component=\"section\" {...props} ref={ref} />\n    </div>\n  );\n});\n\nexport default AnimatedCard;\n","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardUtilityClass(slot) {\n  return generateUtilityClass('MuiCard', slot);\n}\nconst cardClasses = generateUtilityClasses('MuiCard', ['root']);\nexport default cardClasses;","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"raised\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport chainPropTypes from '@mui/utils/chainPropTypes';\nimport composeClasses from '@mui/utils/composeClasses';\nimport styled from '../styles/styled';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport Paper from '../Paper';\nimport { getCardUtilityClass } from './cardClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getCardUtilityClass, classes);\n};\nconst CardRoot = styled(Paper, {\n  name: 'MuiCard',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(() => {\n  return {\n    overflow: 'hidden'\n  };\n});\nconst Card = /*#__PURE__*/React.forwardRef(function Card(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCard'\n  });\n  const {\n      className,\n      raised = false\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    raised\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardRoot, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : undefined,\n    ref: ref,\n    ownerState: ownerState\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Card.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the card will use raised styling.\n   * @default false\n   */\n  raised: chainPropTypes(PropTypes.bool, props => {\n    if (props.raised && props.variant === 'outlined') {\n      return new Error('MUI: Combining `raised={true}` with `variant=\"outlined\"` has no effect.');\n    }\n    return null;\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default Card;","import React, { lazy, Suspense, useState, useContext, useMemo, useRef, useEffect, useCallback } from 'react';\nimport { useInView } from 'react-intersection-observer';\n\nimport Card from '../../../components/animated-card';\nimport ViewerWithControls from '../../../components/viewer-with-controls';\nimport Loading from '../../../components/loading';\nimport useAPI from '../../../hooks/use-api';\nimport { ProjectCtx } from '../../../contexts';\nimport { BASE_PATH_PROJECTS } from '../../../utils/constants';\nimport style from './style.module.css';\n\nconst useInViewOptions = { triggerOnce: true, rootMargin: '100px' };\n\nconst findClosestNumberOneLiner = (arr, target) => {\n  return arr.sort((a, b) => \n    Math.abs(a - target) - Math.abs(b - target)\n  )[0];\n};\n\nconst Channels = () => {\n  const { accessionAndMdNumber, topology } = useContext(ProjectCtx);\n  const [nglRef, isNglVisible] = useInView(useInViewOptions);\n  const viewerRef = useRef(null);\n  const lastFrameRef = useRef(null);\n\n  // Get the default representations\n  const defaultRepresentations = topology && topology.defaultRepresentations;\n  const [representations, setRepresentations] = useState(null);\n\n  // Send a request to the API with the url of the specific analysis\n  const {\n    loading: channelsLoading,\n    payload: channelsPayload,\n    error: channelsError,\n  } = useAPI(`${BASE_PATH_PROJECTS}/${accessionAndMdNumber}/analyses/channels/`);\n\n    // Initialize representations\n  useEffect(() => {\n    if (!defaultRepresentations || defaultRepresentations.length === 0) return;\n    setRepresentations([...defaultRepresentations]);\n  }, [defaultRepresentations]);\n\n  // Add channel mesh visualization\n  const handleProgress = useCallback((progress) => {\n    if (!viewerRef.current || !channelsPayload || !channelsPayload.data) return;\n\n    let frame = Math.floor(progress * (channelsPayload.n_frames - 1));\n    frame = findClosestNumberOneLiner(Object.keys(channelsPayload.data), frame);\n\n    if (lastFrameRef.current === frame) return;\n    lastFrameRef.current = frame;\n\n    const { position, color_offset } = channelsPayload.data[frame];\n    viewerRef.current.drawMesh(position, color_offset, \"channel\");\n  }, [channelsPayload]);\n\n  if (channelsLoading) return <Loading />;\n  if (channelsError) return channelsError.toString();\n  if (!channelsPayload) return 'Something bad happened with Channels analysis';\n\n  return (\n    <Suspense fallback={<Loading />}>\n      <Card className={style.nglcard} ref={nglRef}>\n        {isNglVisible ? (\n          <ViewerWithControls\n            className={style.container}\n            representationsState={[representations, setRepresentations]}\n            ref={viewerRef}\n            rotateX={true}\n            onProgress={handleProgress}\n          />\n        ) : (\n          <div style={{ height: '50vh' }} />\n        )}\n      </Card>\n    </Suspense>\n  );\n};\n\nexport default Channels;\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"style_card__r7urK\",\"nglcard\":\"style_nglcard__T2VCw\",\"container\":\"style_container__Y8ZJf\"};"],"names":["KEYFRAMES","opacity","reducedMotion","transform","ANIMATION_OPTIONS","fill","easing","duration","forwardRef","_ref","ref","overrideComponent","props","_objectWithoutProperties","_excluded","containerRef","useRef","useLayoutEffect","node","current","firstElementChild","animate","index","Array","from","document","querySelectorAll","findIndex","section","animation","_objectSpread","delay","cancel","Component","Card","_jsx","className","style","children","component","getCardUtilityClass","slot","generateUtilityClass","generateUtilityClasses","CardRoot","styled","Paper","name","overridesResolver","styles","root","overflow","React","inProps","useDefaultProps","raised","other","_objectWithoutPropertiesLoose","ownerState","_extends","classes","composeClasses","useUtilityClasses","clsx","elevation","undefined","useInViewOptions","triggerOnce","rootMargin","Channels","accessionAndMdNumber","topology","useContext","ProjectCtx","nglRef","isNglVisible","useInView","viewerRef","lastFrameRef","defaultRepresentations","representations","setRepresentations","useState","loading","channelsLoading","payload","channelsPayload","error","channelsError","useAPI","concat","BASE_PATH_PROJECTS","useEffect","length","handleProgress","useCallback","progress","data","frame","Math","floor","n_frames","findClosestNumberOneLiner","arr","target","Object","keys","sort","a","b","abs","position","color_offset","drawMesh","Loading","toString","Suspense","fallback","nglcard","ViewerWithControls","container","representationsState","rotateX","onProgress","height"],"ignoreList":[],"sourceRoot":""}