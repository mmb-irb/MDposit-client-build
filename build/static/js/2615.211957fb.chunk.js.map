{"version":3,"file":"static/js/2615.211957fb.chunk.js","mappings":"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","sources":["../node_modules/@mui/material/TableFooter/tableFooterClasses.js","../node_modules/@mui/material/TableFooter/TableFooter.js","webpack://mdposit/./src/pages/accession/hbonds/style.module.css?75f0","webpack://mdposit/./src/components/interaction-selector/style.module.css?5392","components/interaction-selector/index.js","webpack://mdposit/./src/components/animated-card/style.module.css?d4d9","components/animated-card/index.js","pages/accession/hbonds/index.js","webpack://mdposit/./src/components/viewer-spawner/style.module.css?df6e","components/viewer-spawner/index.js","pages/accession/hbonds/bond-status/index.js","hooks/use-remfo/index.js","utils/version/index.js"],"sourcesContent":["import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getTableFooterUtilityClass(slot) {\n  return generateUtilityClass('MuiTableFooter', slot);\n}\nconst tableFooterClasses = generateUtilityClasses('MuiTableFooter', ['root']);\nexport default tableFooterClasses;","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"component\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport Tablelvl2Context from '../Table/Tablelvl2Context';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport styled from '../styles/styled';\nimport { getTableFooterUtilityClass } from './tableFooterClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getTableFooterUtilityClass, classes);\n};\nconst TableFooterRoot = styled('tfoot', {\n  name: 'MuiTableFooter',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})({\n  display: 'table-footer-group'\n});\nconst tablelvl2 = {\n  variant: 'footer'\n};\nconst defaultComponent = 'tfoot';\nconst TableFooter = /*#__PURE__*/React.forwardRef(function TableFooter(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiTableFooter'\n  });\n  const {\n      className,\n      component = defaultComponent\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    component\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(Tablelvl2Context.Provider, {\n    value: tablelvl2,\n    children: /*#__PURE__*/_jsx(TableFooterRoot, _extends({\n      as: component,\n      className: clsx(classes.root, className),\n      ref: ref,\n      role: component === defaultComponent ? null : 'rowgroup',\n      ownerState: ownerState\n    }, other))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? TableFooter.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component, normally `TableRow`.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default TableFooter;","// extracted by mini-css-extract-plugin\nexport default {\"margined\":\"style_margined__wjr-Y\",\"horizontal\":\"style_horizontal__R62Uj\",\"status\":\"style_status__nu7SZ\",\"enabled\":\"style_enabled__q3k51\",\"disabled\":\"style_disabled__fC3Bu\"};","// extracted by mini-css-extract-plugin\nexport default {\"horizontal\":\"style_horizontal__2DIWx\",\"horizontal-margined\":\"style_horizontal-margined__e9fQR\"};","import React, { Suspense } from 'react';\n\nimport {\n  FormControlLabel,\n  Radio,\n  RadioGroup,\n  Select,\n  MenuItem,\n  TextField,\n  IconButton,\n} from '@mui/material';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExchangeAlt } from '@fortawesome/free-solid-svg-icons';\n\nimport Loading from '../loading';\n\nimport style from './style.module.css';\n\nconst residueOptions = [\n  { label: 'All residues', value: 'residue_indices' },\n  { label: 'Interface residues', value: 'interface_indices' },\n];\n\n// Render a panel which allows to select the desired interaction\n// If the user selects a new interaction then the 'setSelectedInteraction' is set as its index\n// Interactions have the following structure:\n// { name: string, label: string, ... }\n// The 'label' field will replace the 'name' in the selector labels if exists\n// When 'selectedResidues' is passed, render also tools to select interaction residues\n// Residue options are 'all' or 'interface' residues\n// DANI: La guinda sería un 'custom' en las opciones de residuos\n// DANI: La idea sería desplegar dos residue selectors, uno para cada interaction agent\nconst InteractionSelector = ({\n  interactions,\n  selectedInteraction,\n  setSelectedInteraction,\n  selectedResidues,\n  setSelectedResidues,\n  selectedOrder,\n  handleToggleOrder,\n  firstOrderLabel, // The label to be represented over the first order rectangle\n  firstOrderTooltip, // The tooltip to be shown for the first order rectangle\n  secondOrderLabel, // The label to be represented over the second order rectangle\n  secondOrderTooltip, // The tooltip to be shown for the second order rectangle\n  toggleOrderTooltip, // The tooltip to be shown for the toggle order button\n  interfaceOnly = false, // Set if the 'All residues' button is enabled\n}) => {\n  const changeInteraction = event => {\n    setSelectedInteraction(event.target.value);\n  };\n\n  const changeResidues = event => {\n    setSelectedResidues(event.target.value);\n  };\n\n  const changeOrder = () => {\n    handleToggleOrder();\n  };\n\n  if (!interactions) return <Loading />\n\n  const currentInteraction = interactions[selectedInteraction];\n\n  // Render\n  return (\n    <Suspense fallback={<Loading />}>\n      <Select\n        value={selectedInteraction}\n        onChange={changeInteraction}\n        className={style['horizontal-margined']}\n      >\n        {interactions.map((interaction, i) => (\n          <MenuItem key={i} value={i} disabled={interaction.failed}>\n            {interaction.label || interaction.name}\n          </MenuItem>\n        ))}\n      </Select>\n      {selectedResidues && (\n        <RadioGroup\n          value={selectedResidues}\n          onChange={changeResidues}\n          className={style.horizontal}\n        >\n          {residueOptions.map((opt, i) => (\n            <FormControlLabel\n              key={i}\n              value={opt.value}\n              control={<Radio color=\"primary\" />}\n              label={opt.label}\n              disabled={opt.label === 'All residues' && interfaceOnly}\n            />\n          ))}\n        </RadioGroup>\n      )}\n      {selectedOrder !== undefined && (\n        <>\n          <TextField\n            //margin=\"dense\"\n            label={firstOrderLabel}\n            title={firstOrderTooltip}\n            value={\n              selectedOrder\n                ? currentInteraction.agent_1\n                : currentInteraction.agent_2\n            }\n          />\n          <IconButton\n            title={toggleOrderTooltip}\n            onClick={changeOrder}\n            size=\"large\"\n          >\n            <FontAwesomeIcon icon={faExchangeAlt} />\n          </IconButton>\n          <TextField\n            //margin=\"dense\"\n            label={secondOrderLabel}\n            title={secondOrderTooltip}\n            value={\n              selectedOrder\n                ? currentInteraction.agent_2\n                : currentInteraction.agent_1\n            }\n          />\n        </>\n      )}\n    </Suspense>\n  );\n};\n\nexport default InteractionSelector;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"style_container__M9GCG\"};","import React, { useLayoutEffect, useRef, forwardRef } from 'react';\nimport { Card } from '@mui/material';\n\nimport reducedMotion from '../../utils/reduced-motion';\n\nimport style from './style.module.css';\n\nconst KEYFRAMES = { opacity: [0, 1] };\n\nif (!reducedMotion()) {\n  KEYFRAMES.transform = ['translateY(50px)', 'translateY(0)'];\n}\n\nconst ANIMATION_OPTIONS = {\n  fill: 'both',\n  easing: 'cubic-bezier(0, .99, .56, 1.1)',\n  duration: 500,\n};\n\n// Make the card appear and slide softly from down to up when the page is loaded\nconst AnimatedCard = forwardRef(({ overrideComponent, ...props }, ref) => {\n  const containerRef = useRef(null);\n\n  useLayoutEffect(() => {\n    const node = containerRef.current && containerRef.current.firstElementChild;\n    if (!(node && node.animate)) return;\n\n    const index = Array.from(\n      document.querySelectorAll('main section'),\n    ).findIndex(section => node === section);\n\n    const animation = node.animate(KEYFRAMES, {\n      ...ANIMATION_OPTIONS,\n      delay: index * 150,\n    });\n\n    return () => animation.cancel();\n  }, []);\n\n  const Component = overrideComponent ? 'section' : Card;\n\n  return (\n    <div ref={containerRef} className={style.container}>\n      <Component component=\"section\" {...props} ref={ref} />\n    </div>\n  );\n});\n\nexport default AnimatedCard;\n","import React, {\n  Suspense,\n  useContext,\n  useState,\n  useMemo,\n  Fragment,\n  useRef,\n  useCallback,\n} from 'react';\n// Import material UI components\nimport {\n  CardContent,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  TablePagination,\n  TableFooter,\n  Typography,\n} from '@mui/material';\n// Import custom components\nimport Card from '../../../components/animated-card';\nimport Loading from '../../../components/loading';\nimport ViewerSpawner from '../../../components/viewer-spawner';\nimport InteractionSelector from '../../../components/interaction-selector';\nimport BondStatus from './bond-status';\n// Import our custom hooks\nimport useAPI from '../../../hooks/use-api';\nimport useRemfo from 'src/hooks/use-remfo';\n// Import the project context\nimport { ProjectCtx } from '../../../contexts';\n// Import some constants\nimport { BASE_PATH_PROJECTS } from '../../../utils/constants';\n// Import CSS style\nimport style from './style.module.css';\n// Import auxiliar functions\nimport { add, max } from 'src/utils/auxiliar-functions';\nimport Version from 'src/utils/version';\n\n// Set the minimum hydrogen bond stability peak to filter which hydrogen bonds are shown\nconst STABILITY_CUTOFF = 0.05;\n\n// Define non-changing props used by the table footer\nconst rowsPerPageDefault = 25;\nconst rowsPerPageOptions = [10, 25, 50, 100];\n\nconst Hbonds = () => {\n  // Get the current project data\n  const {\n    accessionAndMdNumber,\n    metadata,\n    topology,\n    interactions,\n    populations,\n    loading: isProjectLoading,\n  } = useContext(ProjectCtx);\n\n  // Set a reference to the table element so we can scroll to it\n  const tableRef = useRef();\n\n  // Send a request to the API with the url of the hbonds analyses index\n  const analysesUrlBase = `${BASE_PATH_PROJECTS}/${accessionAndMdNumber}/analyses`;\n  const indexUrl = `${analysesUrlBase}/hbonds`;\n  const { loading: isIndexLoading, payload: indexPayload, error: indexError } = useAPI(indexUrl);\n\n  // The interaction to be displayed\n  const [selectedInteraction, setSelectedInteraction] = useState(0);\n\n  // The newest format has 4 fields: acceptors, donors, hydrogens and hbonds\n  // The hbonds includes arrays of true and false per frame\n  const interaction = interactions && interactions[selectedInteraction];\n\n  // Set the target interaction name\n  const { interactionName, analysisName } = useMemo(() => {\n    // Wait for main data to be downloaded\n    if (!interaction || !indexPayload) return {};\n    // Check if the analysis is in the old or the new format\n    const isOld = indexPayload.data !== undefined;\n    // If so, there is no target analysis name, but the whole data is already in the payload\n    if (isOld) return { interactionName: interaction.name };\n    const targetEntry = indexPayload.find(entry => entry.name === interaction.name);\n    return { interactionName: interaction.name, analysisName: targetEntry.analysis }\n  }, [interaction, indexPayload]);\n\n  // Send a request to the API with the url of some specific hbonds analysis\n  const interactionAnalysisUrl = analysisName ? `${analysesUrlBase}/${analysisName}` : null;\n  const { loading: isAnalysisLoading, payload, error } = useAPI(interactionAnalysisUrl);\n\n  // Now set the actual dataset to be used\n  // Note that this is a compatibility layer between the old and the new hbonds system\n  const dataset = useRemfo(previous => {\n    // Wait for the download to finish\n    if (!indexPayload) return previous;\n    // Check if the analysis is in the old or the new format\n    const isOld = indexPayload.data !== undefined;\n    // If this is the new system then the dataset is the payload itself\n    if (!isOld) {\n      if (!payload) return previous;\n      return payload;\n    }\n    // If this is the old system then the dataset is in the index payload\n    const interactionData = indexPayload.data.find(entry => entry.name === interactionName);\n    if (!interactionData) return { error: `Dataset for interaction \"${interactionName}\" not found` };\n    return interactionData;\n  }, [indexPayload, payload, interactionName]);\n\n  // Set the processed data which will be displayed\n  const { processedData, weights } = useMemo(() => {\n    // Return here if we are still waiting for data\n    if (!dataset || !topology || !metadata) return {};\n    if (populations && populations.loading) return {};\n\n    // If the dataset is empty it means no hydrogen bonds where found for this interaction\n    if (dataset.hbonds.length === 0) return {\n      message: 'No hydrogen bonds were found for this interaction'\n    };\n\n    // Get the version of the analysis\n    const version = new Version(dataset.version);\n    let hbondsKey = 'hbonds_timed';\n    // If the simulation is not time related then there will be no timed hbonds\n    // We will use the overall hbonds instead\n    const noTimeRelated = metadata.TYPE === 'ensemble';\n    if (noTimeRelated) hbondsKey = 'hbonds';\n    // In the old version the timed hbonds were in a different key\n    if (version.major < 1) hbondsKey = 'hbonds';\n\n    // Get the number of bonds\n    const bondCount = dataset.hbonds.length;\n\n    // Group bonds with a common acceptor and then group bonds with a common donor\n    const acceptorGroups = {};\n    const donorGroups = {};\n    for (let i = 0; i < bondCount; i++) {\n      // Set the bond object\n      const acceptor = dataset.acceptors[i];\n      const donor = dataset.donors[i];\n      const hydrogen = dataset.hydrogens[i];\n      let status = dataset[hbondsKey][i];\n      // Note that status will be a single float if this is an enseble\n      // We make sure it is an array to keep the types coherent\n      if (!Array.isArray(status)) status = [status];\n      // Find the maximum stability\n      // Use this value to filter which hydrogen bonds are shown\n      const maxStability = max(status);\n      if (maxStability < STABILITY_CUTOFF) continue;\n      // Define also the stability of the hydrogen bond by adding its status over time\n      // This value is then used to sort groups\n      const stability = add(status) / status.length;\n      const bond = { acceptor, donor, hydrogen, status, stability };\n      // Add current bond to its corresponding acceptor group\n      const acceptorGroup = acceptorGroups[acceptor];\n      if (acceptorGroup) acceptorGroup.push(bond);\n      else acceptorGroups[acceptor] = [bond];\n      // Add current bond to its corresponding donor group\n      const donorGroup = donorGroups[donor];\n      if (donorGroup) donorGroup.push(bond);\n      else donorGroups[donor] = [bond];\n    }\n\n    // Join all groups together discarding redundant groups\n    const groups = [];\n    const commons = [];\n    // Join unique acceptor groups\n    // Unique acceptor groups are those which have bonds with more than one different donor\n    Object.values(acceptorGroups).forEach(group => {\n      const donors = group.map(bond => bond.donor);\n      const uniqueDonors = new Set(donors);\n      if (uniqueDonors.size > 1) groups.push(group);\n      // Otherwise, add the group to the common groups list\n      else commons.push(group);\n    });\n    // Join unique donor groups\n    // Unique donor groups are those which have bonds with more than one different acceptor\n    Object.values(donorGroups).forEach(group => {\n      const acceptors = group.map(bond => bond.acceptor);\n      const uniqueAcceptors = new Set(acceptors);\n      if (uniqueAcceptors.size > 1) groups.push(group);\n      // WARNING: There is no need to add common groups to the list now\n      // They can only be repeater or redundant\n      // Repeated ones will be already in the list\n      // Redundant ones are discardes so we are not intereseted\n    });\n    // Common groups are thouse who have both an unique acceptor and an unique donor\n    // They will always be repeated or redundant (already included in bigger groups)\n    // If they are redundant then we are done\n    // Otherwise it means they are repeated so we only have to add it once to the list\n    commons.forEach(group => {\n      // Check if one of its bonds is included in any group already\n      const bondSample = group[0];\n      for (const group of groups) {\n        for (const bond of group) {\n          // In case the acceptor (or the donnor) matches is enought to discard the whole group\n          if (bond.acceptor === bondSample.acceptor) return;\n        }\n      }\n      // In case no coincidence was found we include the bond\n      groups.push(group);\n    });\n\n    // Sum up the groups in the list of atoms and status\n    // When all acceptors/donors/hydrogens are the same atom leave an unique value in the list\n    const processedData = groups.map(group => {\n      let acceptors = group.map(bond => bond.acceptor);\n      const uniqueAcceptors = new Set(acceptors);\n      if (uniqueAcceptors.size === 1) acceptors = [acceptors[0]];\n      let donors = group.map(bond => bond.donor);\n      const uniqueDonors = new Set(donors);\n      if (uniqueDonors.size === 1) donors = [donors[0]];\n      let hydrogens = group.map(bond => bond.hydrogen);\n      const uniqueHydrogens = new Set(hydrogens);\n      if (uniqueHydrogens.size === 1) hydrogens = [hydrogens[0]];\n      const status = group.map(bond => bond.status);\n      // Set the group stability score adding the stability of their individual bonds\n      // This value is then used to sort groups\n      const stability = add(group.map(bond => bond.stability));\n      return { acceptors, donors, hydrogens, status, stability };\n    });\n\n    // Find out for each group which atoms (acceptors or donnors) belong to each interacting agent\n    // Then set the labels to be displayed in the corresponding agent 1 and 2 sections in the table\n    processedData.forEach(group => {\n      // Find out which agent does the acceptors belong to\n      const acceptorIndex = group.acceptors[0];\n      const acceptorAtom = topology.getAtomByIndex(acceptorIndex);\n      const isAcceptorFromAgent1 =\n        interaction['interface_atom_indices_1'].indexOf(acceptorAtom.index) !== -1;\n      group.isAcceptorFromAgent1 = isAcceptorFromAgent1;\n      // Set the acceptor, donor and hydrogen labels to be displayed in the table\n      const [acceptorLabels, donorLabels] = [group.acceptors, group.donors].map(\n        atoms =>\n          atoms.map(atomIndex => {\n            const atom = topology.getAtomByIndex(atomIndex);\n            return `${atom.residue.standardLabel}.${atom.name}`;\n          }),\n      );\n      const hydrogenLabels = group.hydrogens.map(atomIndex => {\n        const atom = topology.getAtomByIndex(atomIndex);\n        let atomName = atom.name;\n        if (isAcceptorFromAgent1) atomName = atomName + ' —';\n        else atomName = '— ' + atomName;\n        return atomName;\n      });\n      group.hydrogenLabels = hydrogenLabels;\n      // Now set the agent 1 and 2 labels\n      if (isAcceptorFromAgent1) {\n        group.agent1Labels = acceptorLabels;\n        group.agent2Labels = donorLabels;\n      } else {\n        group.agent1Labels = donorLabels;\n        group.agent2Labels = acceptorLabels;\n      }\n    });\n\n    // Sort bond groups by status (all status added together)\n    processedData.sort((a, b) => b.stability - a.stability);\n\n    // Calculate the frame step for recorded hydrogen bonds\n    const dataLength = dataset.hbonds[0].length;\n    const frameStep = Math.round(metadata.mdFrames / (dataLength - 1));\n    // Set the weigths in order to resize bonds bandwidth accordingly\n    // Note that this is for the old verion, in the new version values are already weighted\n    let weights;\n    if (populations && populations.payload && version.major < 1) {\n      // Get the weights for each data value corresponding frame\n      weights = [];\n      for (let i = 0; i < populations.payload.length; i += frameStep) {\n        weights.push(populations.payload[i]);\n      }\n      // Check weights and data to match in the number of values\n      const weigthCount = weights.length;\n      if (dataLength !== weigthCount) throw new Error(\n        `Data values count (${dataLength}) does not match the weigths values count (${weigthCount})`,\n      );\n    }\n    return { processedData, weights };\n  }, [dataset, metadata, topology, interaction, populations]);\n\n  // Table pagination states\n  const [selectedPage, setSelectedPage] = useState(0);\n  const [selectedRowsPerPage, setSelectedRowsPerPage] = useState(\n    rowsPerPageDefault,\n  );\n\n  // Set all bonds to be displayed according to the current page and the number of bonds per page\n  const displayedBondGroups = useMemo(() => {\n    if (!processedData) return;\n    const firstBond = selectedPage * selectedRowsPerPage;\n    const lastBond = (selectedPage + 1) * selectedRowsPerPage;\n    return processedData.slice(firstBond, lastBond);\n  }, [processedData, selectedPage, selectedRowsPerPage]);\n\n  // The hydrogen bond bar which the mouse has clicked\n  const [selectedHB, setSelectedHB] = useState(null);\n\n  // Handle when the user clicks in a bond status\n  const handleBondClick = useCallback(keyLabel => {\n    const [b,i] = keyLabel.split('-');\n    const bondGroup = displayedBondGroups[b];\n    const acceptor =\n      bondGroup.acceptors[i] ||\n      bondGroup.acceptors[0];\n    const donor =\n      bondGroup.donors[i] || bondGroup.donors[0];\n    const hydrogen =\n      bondGroup.hydrogens[i] ||\n      bondGroup.hydrogens[0];\n    setSelectedHB({\n      selectedAtoms: [acceptor, donor],\n      selectedDistances: [[acceptor, donor]],\n      selectedAngles: [[acceptor, hydrogen, donor]],\n    });\n  }, [displayedBondGroups]);\n\n  // Handle when the user selects a different interaction\n  const handleChangeInteraction = useCallback(interaction => {\n    setSelectedInteraction(interaction);\n    setSelectedPage(0);\n  }, []);\n\n  // Check if anything is still beeing loaded\n  const anyLoading = isIndexLoading || isAnalysisLoading || isProjectLoading;\n\n  // Render loading or error messages according with the API response\n  if (indexError) return indexError.toString();\n  if (error) return error.toString();\n  if (dataset && dataset.error) return dataset.error;\n  if (populations && populations.error) return populations.error.toString();\n  if (!dataset) {\n    if (anyLoading) return <Loading />;\n    // If there are no interactions or topology\n    if (!interactions) return 'There are no interactions';\n    if (!topology) return 'There is no topology';\n    return 'Something bad happened with the analysis data';\n  }\n  if (populations && !populations.payload) {\n    if (populations.loading) return <Loading />;\n    return 'Something bad happened with populations data';\n  }\n\n  // Render\n  return (\n    <Suspense fallback={<Loading />}>\n      <Card>\n        <CardContent className={style.horizontal}>\n          <Typography variant=\"h6\">Interaction:</Typography>\n          <InteractionSelector\n            interactions={interactions}\n            selectedInteraction={selectedInteraction}\n            setSelectedInteraction={handleChangeInteraction}\n          />\n        </CardContent>\n      </Card>\n      <div className={anyLoading ? style.disabled : style.enabled}>\n        {typeof processedData === 'string' && (\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\">{processedData}</Typography>\n            </CardContent>\n          </Card>\n        )}\n        {typeof processedData === 'object' && (\n          <Card className={style.margined}>\n            <CardContent>\n              <Table ref={tableRef}>\n                {/* Setting column widths explicitly is important for the bond status chart to adapt its width */}\n                <colgroup>\n                  <col style={{ width: '12%' }} />\n                  <col style={{ width: '12%' }} />\n                  <col style={{ width: '12%' }} />\n                  <col style={{ width: '64%' }} />\n                </colgroup>\n                <TableHead className={style['table-head']}>\n                  <TableRow>\n                    <TableCell>{interaction.agent_1}</TableCell>\n                    <TableCell>Hydrogen</TableCell>\n                    <TableCell>{interaction.agent_2}</TableCell>\n                    <TableCell>Bond status along trajectory</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {/* Create a row for each bond to be displayed*/}\n                  {displayedBondGroups.map((bondGroup, b) => (\n                    <Fragment key={b}>\n                      {bondGroup.status.map((status, i) => (\n                        <TableRow key={i}>\n                          {/* agent 1 atom/s */}\n                          {bondGroup.agent1Labels[i] && (\n                            <TableCell\n                              rowSpan={\n                                bondGroup.status.length /\n                                bondGroup.agent1Labels.length\n                              }\n                            >\n                              {bondGroup.agent1Labels[i]}\n                            </TableCell>\n                          )}\n                          {/* hydrogen */}\n                          {bondGroup.hydrogenLabels[i] && (\n                            <TableCell\n                              rowSpan={\n                                bondGroup.status.length /\n                                bondGroup.hydrogenLabels.length\n                              }\n                              align={\n                                bondGroup.isAcceptorFromAgent1 ? 'right' : 'left'\n                              }\n                            >\n                              {bondGroup.hydrogenLabels[i]}\n                            </TableCell>\n                          )}\n                          {/* agent 2 atom */}\n                          {bondGroup.agent2Labels[i] && (\n                            <TableCell\n                              rowSpan={\n                                bondGroup.status.length /\n                                bondGroup.agent2Labels.length\n                              }\n                            >\n                              {bondGroup.agent2Labels[i]}\n                            </TableCell>\n                          )}\n                          {/* bond status */}\n                          <TableCell>\n                            <BondStatus\n                              status={status}\n                              weights={weights}\n                              // Bond group and bond index are passed to further know which bond it is\n                              // Thus the on click function already has dis data as input argument\n                              keyLabel={`${b}-${i}`}\n                              onClick={handleBondClick}\n                              className={style.status}\n                            />\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </Fragment>\n                  ))}\n                </TableBody>\n                <TableFooter>\n                  <TableRow>\n                    <TablePagination\n                      rowsPerPageOptions={rowsPerPageOptions} // Optional numbers of rows displayed in each page. It can be modified by the user.\n                      colSpan={4} // Set the anchor of columns which is taken as a reference for the horizontal position of the footer\n                      count={processedData.length} // Total number of rows\n                      rowsPerPage={selectedRowsPerPage} // The actual number of rows displayed\n                      page={selectedPage} // The actual page\n                      onPageChange={(_, page) => {\n                        setSelectedPage(page);\n                        // Scroll to the top of the table\n                        tableRef.current.scrollIntoView();\n                      }}\n                      onRowsPerPageChange={({ target: { value } }) => {\n                        setSelectedRowsPerPage(value);\n                        setSelectedPage(0);\n                      }}\n                    />\n                  </TableRow>\n                </TableFooter>\n              </Table>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n      <ViewerSpawner\n        // Set the new viewer or null if there is not a proper \"selected\" value\n        newViewer={\n          selectedHB\n            ? {\n                selectedAtoms: selectedHB.selectedAtoms,\n                selectedDistances: selectedHB.selectedDistances,\n                selectedAngles: selectedHB.selectedAngles,\n              }\n            : null\n        }\n        // If the nailed/closed viewer is the current viewer then reset the 'selected'\n        onNail={viewer =>\n          setSelectedHB(previous => {\n            if (previous && previous.selectedAtoms === viewer.selectedAtoms)\n              return null;\n            else return previous;\n          })\n        }\n        onClose={viewer => {\n          setSelectedHB(previous => {\n            if (previous && previous.selectedAtoms === viewer.selectedAtoms)\n              return null;\n            else return previous;\n          });\n        }}\n      />\n    </Suspense>\n  );\n};\n\nexport default Hbonds;\n","// extracted by mini-css-extract-plugin\nexport default {\"rnd\":\"style_rnd__Txifm\",\"floating-card\":\"style_floating-card__HHpby\"};","import React, { lazy, Suspense, useRef, useState } from 'react';\n\n// Rnd is the resizable and draggable system where the ngl viewer is placed\nimport { Rnd } from 'react-rnd';\n\nimport Card from '../animated-card';\n\nimport style from './style.module.css';\n\nconst ViewerWithControls = lazy(() =>\n  import(\n    /* webpackChunkName: 'viewer-with-controls' */ '../viewer-with-controls'\n  ),\n);\n\n// Minimal ngl window height\nconst MIN_NGL_DIMENSION = 150;\n\n// Counter to get always the maximum zIndex\n// This is useful to set a new or currently dragged/resized ngl window over the others\nlet maxZ = 0;\nconst nextZ = () => {\n  maxZ += 1;\n  return maxZ;\n};\n\n// This function spawns all the NGL viewers needed\n// i.e. one viewer with the requested 'props' and all previous viewers which have been nailed\nconst ViewerSpawner = ({ newViewer, nailing = true, onNail, onClose }) => {\n  // Store here all nailed NGL viewers\n  const [nailedViewers, setNailedViewers] = useState([]);\n\n  // Set the viewers as the nailed viewers and the new viewer\n  const viewers = [...nailedViewers];\n\n  // Keep listed all arrays which have been used (i.e. ngl viewers which have been nailed or closed)\n  const usedIds = useRef([]);\n\n  if (newViewer) {\n    // Find a new suitable Id that meet 2 conditions:\n    // - There is never 2 viewers with the same id, so we avoid errors\n    // - If we pick diferent frames in the graph without nailing anything, the current viewer has always the same id\n    // (This way the current viewer does not appear in the origin position every time)\n    const getNewId = () => {\n      let id = 0;\n      while (id < 999) {\n        if (usedIds.current.indexOf(id) === -1) return id;\n        id += 1;\n      }\n      console.error('Maximum number of viewers reached');\n    };\n\n    // Set a unique id for this props based in the last nailed viewer\n    newViewer.id = getNewId();\n    newViewer.close = () => {\n      if (nailing) {\n        setNailedViewers(nailed => {\n          const newNailed = [...nailed];\n          const index = nailed.indexOf(newViewer);\n          if (index !== -1) newNailed.splice(index, 1);\n          return newNailed;\n        });\n      }\n      if (onClose) onClose(newViewer);\n      usedIds.current.push(newViewer.id);\n    };\n    // If the nailer function is passed, add the logic for the viewer to be nailed further\n    if (nailing)\n      newViewer.nail = () => {\n        setNailedViewers(nailed => [...nailed, newViewer]);\n        if (onNail) onNail(newViewer);\n        usedIds.current.push(newViewer.id);\n      };\n    // Add the current viewer to the viewers list\n    viewers.push(newViewer);\n  }\n\n  // Render a viewer for each prop. Use the 'selected' parameter as unique id\n  return viewers.map(viewer => <NGLViewerInDND key={viewer.id} {...viewer} />);\n};\n\n// This component render a small NGL viewer\n// It is called when user clicks in a point in the projections component\n// Also it is called by the generic analysis page\nconst NGLViewerInDND = props => {\n  // Set a reference for the viewer\n  // If a reference is passed among the viewer arguments then use it instead\n  const viewerRef = props.viewerRef || useRef(null);\n\n  // Set the default position and size\n  const [place, setPlace] = useState(() => {\n    // Set an extra margin\n    const MARGIN = 20;\n    // Get the screen pixel sizes and vertical scroll position\n    const { innerWidth, innerHeight, scrollY } = window;\n    // The spawned elements are parented to the 'main' element, not to the 'body'\n    // We have to take this in count, since the header adds an extra offset in vertical position\n    const offsetHeight = document.querySelector('main').offsetTop;\n    // Set a reasonable dimension for the ngl window\n    const dimension = Math.max(\n      Math.min(innerWidth / 4, innerHeight / 4),\n      MIN_NGL_DIMENSION,\n    );\n    const reasonableHeight = 1.5 * dimension;\n    const reasonableWidth = 2 * dimension;\n    return {\n      // WARNING: If you set the width as 'auto' the window stays very wide when exiting fullscreen\n      width: reasonableWidth, // Let the Rnd logic set the width automatically\n      height: reasonableHeight, // Reasonable height\n      x: 0, // Left border\n      y: innerHeight - offsetHeight - reasonableHeight - MARGIN + scrollY, // Bottom border\n    };\n  });\n\n  return (\n    // Rnd is the draggable and resizable system where the ngl viewer is placed\n    <Rnd\n      position={{ x: place.x, y: place.y }}\n      size={{ width: place.width, height: place.height }}\n      // Update the zIndex to make this window the first visible\n      style={{ zIndex: nextZ() }}\n      className={style.rnd}\n      data-rnd\n      // Limits where the window can be dragged/resized to\n      // WARNING: bounds=\"main\" is problematic since the window may appear out of bounds\n      // WARNING: Then when it is moved for the first time it jumps inside the bonds, not elegant\n      bounds=\"window\"\n      // Prevent the mouse to drag/resize the window when it is over specific elements\n      cancel=\"canvas, [data-popover], #preventDragSize, .prevent-drag\"\n      // On drag/resize starts we do not change anything, but use the hook to re-render this component\n      // The Z Index is updated and the selected window becomes the first in the z axis automatically\n      // WARNING: Drag functions are also called when you just click (e.g. clicking buttons)\n      onDragStart={() => {\n        setPlace({ ...place });\n      }}\n      onResizeStart={() => {\n        setPlace({ ...place });\n      }}\n      onDragStop={(e, d) => {\n        // Use this to reject some bugged event calls: e.g. the frames number selector\n        if (e.layerX === 0 && e.layerY === 0) return;\n        // We re-render only if the new position does not equal the old position\n        if (place.x !== d.x || place.y !== d.y)\n          setPlace({\n            ...place,\n            x: d.x,\n            y: d.y,\n          });\n      }}\n      // Re-adapt the viewer and update the position/size when the window is resized\n      onResize={() => viewerRef.current && viewerRef.current.autoResize()}\n      onResizeStop={(e, direction, ref, delta, position) => {\n        setPlace({\n          width: ref.style.width,\n          height: ref.style.height,\n          ...position,\n        });\n        // if (!viewerRef.current) return;\n        // viewerRef.current.autoResize();\n        // viewerRef.current.autoResize.flush();\n      }}\n    >\n      <Card className={style['floating-card']} elevation={4}>\n        <Suspense fallback={null}>\n          <ViewerWithControls\n            className={style['floating-card']}\n            ref={viewerRef}\n            startsPlaying={false}\n            {...props}\n          />\n        </Suspense>\n      </Card>\n    </Rnd>\n  );\n};\n\nexport default ViewerSpawner;\n","import React, { useRef, useEffect, useState, memo } from 'react';\n\nimport { select, scaleBand, scaleLinear, color as d3color } from 'd3';\n\n// Set status colors\nconst ACTIVE_BOND_COLOR = 'blue';\nconst BROKEN_BOND_COLOR = '#f0f0f0';\n\n// Set the color scale according to the maximum and minimum means\nconst COLOR_PLAN = [BROKEN_BOND_COLOR, ACTIVE_BOND_COLOR];\nconst COLOR_SCALE = scaleLinear()\n  .range(COLOR_PLAN)\n  .domain([0, 1]);\n\n// Represent a single row of rects according to the status\n// The status is an array of true/false values\nconst BondStatus = memo(({ status, weights, keyLabel, onClick, className }) => {\n  // Set the reference to the element where the heatmap will be allocated\n  const containerRef = useRef(null);\n  // Save the previous chart reference so we can remove it before a new render\n  const previousCharts = useRef(null);\n  // Use a state as a workaround to force rerenders on window resize\n  const [, setCurrentWindow] = useState(null);\n  // The chart is assigned to a referenced 'div' which must be rendered first\n  // All this process is runned after the render\n  useEffect(() => {\n    // Reset the chart\n    // WARNING: For some reason, if this part is re-render the original render is not gone\n    // WARNING: We must reset the element manually or infinite elements are rendered and stacked\n    if (previousCharts.current)\n      previousCharts.current.forEach(chart => chart.remove());\n\n    // Get the current element where all this heatmap is placed\n    const container = containerRef.current;\n    // The first render, when there is no reference to the current element yet, we skip the process\n    const {\n      clientWidth: width,\n      clientHeight: height,\n    } = container.parentElement;\n\n    // Use canvas to display the heatmap blocks since d3 is not as efficient\n    // Canvas is set this way so we can access this specific element later\n    // WARNING: Using the 'document.getElementById' is risky since there may be more\n    // WARNING: e.g. the color legend\n    const canvasElement = document.createElement('CANVAS');\n    select(container)\n      .node()\n      .appendChild(canvasElement);\n    const canvas = select(canvasElement)\n      .attr('id', 'canvas')\n      .attr('width', width)\n      .attr('height', height)\n      .style('position', 'absolute')\n      //.style('top', offset.top + 'px')\n      //.style('left', offset.left + 'px')\n      .style('cursor', onClick ? 'pointer' : undefined);\n    const canvasContext = canvas\n      .node()\n      .getContext('2d');\n\n    // append the svg object to the body of the page\n    const svg = select(container)\n      .append('svg')\n      .attr('id', 'svg')\n      .attr('viewBox', [0, 0, width, height]);\n\n    // Build X scales and axis:\n    if (weights) {\n\n      const x = scaleBand()\n        .range([0, width])\n        .domain([0, 1])\n        .paddingInner(0);\n\n      // Get the x Range in the d3/canvas available space\n      const minX = x(0);\n      const maxX = x(1);\n      const xRange = maxX - minX;\n\n      // Consider all the previous space to be splitted in the different weigths\n      const weigthsSum = weights.reduce((a, b) => a + b, 0);\n      const proportion = xRange / weigthsSum;\n\n      // Now place cells oneafter the other thus keeping the x offset position\n      let xOffset = 0;\n      status.forEach((stat, i) => {\n        const weigth = weights[i];\n        // DANI: El dibujo se quedaba a exactamente la mitad del espacio total, no entiendo por que\n        // DANI: El * 2 en el cellWidth arregla el problema\n        const cellWidth = weigth * proportion * 2;\n        const xPosition = xOffset;\n        const color = stat ? ACTIVE_BOND_COLOR : BROKEN_BOND_COLOR;\n        canvasContext.fillStyle = color;\n        canvasContext.fillRect(xPosition, 0, cellWidth, height);\n        xOffset += cellWidth;\n      });\n    } else {\n      const x = scaleBand()\n        .range([0, width])\n        .domain(status.map((s, i) => i))\n        .paddingInner(0);\n\n      // Get the width of each cell\n      const cellWidth = x.bandwidth();\n\n      // Display heatmap cells using canvas\n      status.forEach((stat, i) => {\n        const xPosition = x(i);\n        // Calculate the interpolated rgb for this value\n        // The interpolated color comes in rbg format\n        const color = d3color(COLOR_SCALE(stat)).formatHex();\n        canvasContext.fillStyle = color;\n        canvasContext.fillRect(xPosition, 0, cellWidth, height);\n      });\n\n      // If there is only one status then add also the number\n      if (status.length === 1) {\n        const value = Math.round(status[0] * 1000) / 10;\n        const label = value + '%';\n        canvasContext.font = \"14px arial\";\n        canvasContext.fillStyle = 'black';\n        canvasContext.textAlign = \"center\";\n        canvasContext.textBaseline = \"middle\";\n        canvasContext.fillText(label, cellWidth / 2, height / 2);\n      }\n    }\n\n    // Handle when a cell is clicked\n    if (onClick) {\n      canvasElement.onmousedown = () => {\n        // Call the on click function\n        onClick(keyLabel);\n      };\n    }\n\n    // Record all elements which must be removed manually when re-rendering\n    previousCharts.current = [svg, canvas];\n\n    const handleResize = () => {\n      setCurrentWindow({\n        innerWidth: window.innerWidth,\n        innerHeight: window.innerHeight,\n      });\n    };\n    window.addEventListener('resize', handleResize);\n\n    // Cleaning function\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }); // This useEffect has no dependencies\n\n  // Finally, render the horizontal bar\n  return (\n    // It is important to specify a height value\n    // Otherwise canvas and svg may be not coordinated\n    <div\n      className={className}\n      style={className ? undefined : { height: '100px', width: '600px' }}\n    >\n      <div\n        ref={containerRef}\n        id={'container'}\n        // WARNING: This width 100% may seem redundant, but chrome needs it\n        style={{ position: 'relative', width: '100%', height: '100%' }}\n      />\n    </div>\n  );\n});\n\nexport default BondStatus;\n","import { useMemo, useRef } from 'react';\n\n// Get a memoized value just like a useMemo would\n// However you can access the previous memoized value as the first (and only) function argument\nconst useRemfo = (func, deps) => {\n    const previousValue = useRef();\n    const newValue = useMemo(() => func(previousValue.current), deps);\n    previousValue.current = newValue;\n    return newValue;\n};\n\nexport default useRemfo;\n","// Set a class to handle version comparisions\nclass Version {\n    constructor (versionString) {\n        // If there is no version then consider it the 0.0.0\n        if (versionString === undefined) versionString = '0.0.0';\n        // Get the major, minor and patch versions\n        const splits = versionString.split('.');\n        this.major = splits[0] && +splits[0];\n        if (this.major > 999)\n            throw new Error('Major version is greater than 999 and this is not allowed');\n        this.minor = splits[1] && +splits[1];\n        if (this.minor > 999)\n            throw new Error('Minor version is greater than 999 and this is not allowed');\n        this.patch = splits[2] && +splits[2];\n        if (this.patch > 999)\n            throw new Error('Patch version is greater than 999 and this is not allowed');\n    }\n\n    // Get the version back in string format\n    // This has also an effect in the console-log display\n    toString () {\n        let string = this.major.toString();\n        if (this.minor === undefined) return string;\n        string += '.' + this.minor.toString();\n        if (this.patch === undefined) return string;\n        string += '.' + this.patch.toString();\n        return string;\n    }\n\n    // Check if two versions are equal\n    equals (other) {\n        // If this is a string instead of a version the parse it\n        if (typeof other === 'string') return this.equals(new Version(other));\n        // Check if versions are equal for all major, minor and patch versions\n        // If other version has not explicit patch or minor version then they are not compared\n        if (other.major !== this.major) return false;\n        if (other.minor !== undefined && other.minor !== this.minor) return false;\n        if (other.patch !== undefined && other.patch !== this.patch) return false;\n        return true;\n    }\n}\n\n// This allows version comparision in the classic JS notation\n// e.g. version1 >= version2\nVersion.prototype.valueOf = function() {\n    // Make sure the value will make version values coherent\n    // Note that the every version value is limited to 999 to make this function safe\n    return this.major * 1000000 + (this.minor || 0) * 1000 + (this.patch || 0);\n};\n\nexport default Version;"],"names":["getTableFooterUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","TableFooterRoot","styled","name","overridesResolver","props","styles","root","display","tablelvl2","variant","defaultComponent","React","inProps","ref","useDefaultProps","className","component","other","_objectWithoutPropertiesLoose","ownerState","_extends","classes","composeClasses","useUtilityClasses","_jsx","Tablelvl2Context","Provider","value","children","as","clsx","role","residueOptions","label","_ref","interactions","selectedInteraction","setSelectedInteraction","selectedResidues","setSelectedResidues","selectedOrder","handleToggleOrder","firstOrderLabel","firstOrderTooltip","secondOrderLabel","secondOrderTooltip","toggleOrderTooltip","interfaceOnly","Loading","currentInteraction","_jsxs","Suspense","fallback","Select","onChange","event","target","style","map","interaction","i","MenuItem","disabled","failed","RadioGroup","opt","FormControlLabel","control","Radio","color","undefined","_Fragment","TextField","title","agent_1","agent_2","IconButton","onClick","changeOrder","size","FontAwesomeIcon","icon","faExchangeAlt","KEYFRAMES","opacity","reducedMotion","transform","ANIMATION_OPTIONS","fill","easing","duration","forwardRef","overrideComponent","_objectWithoutProperties","containerRef","useRef","useLayoutEffect","node","current","firstElementChild","animate","index","Array","from","document","querySelectorAll","findIndex","section","animation","_objectSpread","delay","cancel","Component","Card","rowsPerPageOptions","Hbonds","accessionAndMdNumber","metadata","topology","populations","loading","isProjectLoading","useContext","ProjectCtx","tableRef","analysesUrlBase","concat","BASE_PATH_PROJECTS","indexUrl","isIndexLoading","payload","indexPayload","error","indexError","useAPI","useState","interactionName","analysisName","useMemo","data","targetEntry","find","entry","analysis","interactionAnalysisUrl","isAnalysisLoading","dataset","useRemfo","previous","interactionData","processedData","weights","hbonds","length","message","version","Version","hbondsKey","TYPE","major","bondCount","acceptorGroups","donorGroups","acceptor","acceptors","donor","donors","hydrogen","hydrogens","status","isArray","max","bond","stability","add","acceptorGroup","push","donorGroup","groups","commons","Object","values","forEach","group","Set","bondSample","acceptorIndex","acceptorAtom","getAtomByIndex","isAcceptorFromAgent1","indexOf","acceptorLabels","donorLabels","atoms","atomIndex","atom","residue","standardLabel","hydrogenLabels","atomName","agent1Labels","agent2Labels","sort","a","b","dataLength","frameStep","Math","round","mdFrames","weigthCount","Error","selectedPage","setSelectedPage","selectedRowsPerPage","setSelectedRowsPerPage","displayedBondGroups","firstBond","lastBond","slice","selectedHB","setSelectedHB","handleBondClick","useCallback","keyLabel","split","bondGroup","selectedAtoms","selectedDistances","selectedAngles","handleChangeInteraction","anyLoading","toString","CardContent","horizontal","Typography","InteractionSelector","enabled","margined","Table","width","TableHead","TableRow","TableCell","TableBody","Fragment","rowSpan","align","BondStatus","TableFooter","TablePagination","colSpan","count","rowsPerPage","page","onPageChange","_","scrollIntoView","onRowsPerPageChange","ViewerSpawner","newViewer","onNail","viewer","onClose","ViewerWithControls","lazy","maxZ","NGLViewerInDND","viewerRef","place","setPlace","innerWidth","innerHeight","scrollY","window","offsetHeight","querySelector","offsetTop","dimension","min","reasonableHeight","height","x","y","Rnd","position","zIndex","bounds","onDragStart","onResizeStart","onDragStop","e","d","layerX","layerY","onResize","autoResize","onResizeStop","direction","delta","elevation","startsPlaying","nailing","nailedViewers","setNailedViewers","viewers","usedIds","getNewId","id","console","close","nailed","newNailed","splice","nail","ACTIVE_BOND_COLOR","BROKEN_BOND_COLOR","COLOR_PLAN","COLOR_SCALE","scaleLinear","range","domain","memo","previousCharts","setCurrentWindow","useEffect","chart","remove","container","clientWidth","clientHeight","parentElement","canvasElement","createElement","select","appendChild","canvas","attr","canvasContext","getContext","svg","append","scaleBand","paddingInner","minX","proportion","reduce","xOffset","stat","cellWidth","xPosition","fillStyle","fillRect","s","bandwidth","d3color","formatHex","font","textAlign","textBaseline","fillText","onmousedown","handleResize","addEventListener","removeEventListener","func","deps","previousValue","newValue","constructor","versionString","splits","this","minor","patch","string","equals","prototype","valueOf"],"ignoreList":[],"sourceRoot":""}