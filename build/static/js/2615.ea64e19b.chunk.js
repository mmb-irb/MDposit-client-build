"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[450,2615,5750],{207:(e,t,n)=>{n.d(t,{A:()=>y});var s=n(58168),r=n(98587),a=n(65043),o=n(58387),i=n(98610),l=n(21573),c=n(98206),d=n(34535),h=n(92532),u=n(72372);function g(e){return(0,u.Ay)("MuiTableFooter",e)}(0,h.A)("MuiTableFooter",["root"]);var m=n(70579);const p=["className","component"],f=(0,d.Ay)("tfoot",{name:"MuiTableFooter",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-footer-group"}),A={variant:"footer"},x="tfoot",y=a.forwardRef(function(e,t){const n=(0,c.b)({props:e,name:"MuiTableFooter"}),{className:a,component:d=x}=n,h=(0,r.A)(n,p),u=(0,s.A)({},n,{component:d}),y=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"]},g,t)})(u);return(0,m.jsx)(l.A.Provider,{value:A,children:(0,m.jsx)(f,(0,s.A)({as:d,className:(0,o.A)(y.root,a),ref:t,role:d===x?null:"rowgroup",ownerState:u},h))})})},450:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});const s={margined:"style_margined__wjr-Y",horizontal:"style_horizontal__R62Uj",status:"style_status__nu7SZ",enabled:"style_enabled__q3k51",disabled:"style_disabled__fC3Bu"}},507:(e,t,n)=>{n.d(t,{A:()=>x});var s=n(65043),r=n(2260),a=n(32143),o=n(57972),i=n(83558),l=n(14256),c=n(67784),d=n(17392),h=n(92127),u=n(12639),g=n(17545);const m="style_horizontal__2DIWx",p="style_horizontal-margined__e9fQR";var f=n(70579);const A=[{label:"All residues",value:"residue_indices"},{label:"Interface residues",value:"interface_indices"}],x=e=>{let{interactions:t,selectedInteraction:n,setSelectedInteraction:x,selectedResidues:y,setSelectedResidues:b,selectedOrder:j,handleToggleOrder:v,firstOrderLabel:w,firstOrderTooltip:S,secondOrderLabel:_,secondOrderTooltip:N,toggleOrderTooltip:L,interfaceOnly:R=!1}=e;const z=t[n];return(0,f.jsxs)(s.Suspense,{fallback:(0,f.jsx)(g.A,{}),children:[(0,f.jsx)(r.A,{value:n,onChange:e=>{x(e.target.value)},className:p,children:t.map((e,t)=>(0,f.jsx)(a.A,{value:t,disabled:e.failed,children:e.label||e.name},t))}),y&&(0,f.jsx)(o.A,{value:y,onChange:e=>{b(e.target.value)},className:m,children:A.map((e,t)=>(0,f.jsx)(i.A,{value:e.value,control:(0,f.jsx)(l.A,{color:"primary"}),label:e.label,disabled:"All residues"===e.label&&R},t))}),void 0!==j&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.A,{label:w,title:S,value:j?z.agent_1:z.agent_2}),(0,f.jsx)(d.A,{title:L,onClick:()=>{v()},size:"large",children:(0,f.jsx)(h.g,{icon:u._qq})}),(0,f.jsx)(c.A,{label:_,title:N,value:j?z.agent_2:z.agent_1})]})]})}},10939:(e,t,n)=>{n.d(t,{A:()=>g});var s=n(89379),r=n(80045),a=n(65043),o=n(12110),i=n(17604);const l="style_container__M9GCG";var c=n(70579);const d=["overrideComponent"],h={opacity:[0,1]};(0,i.A)()||(h.transform=["translateY(50px)","translateY(0)"]);const u={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},g=(0,a.forwardRef)((e,t)=>{let{overrideComponent:n}=e,i=(0,r.A)(e,d);const g=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{const e=g.current&&g.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),n=e.animate(h,(0,s.A)((0,s.A)({},u),{},{delay:150*t}));return()=>n.cancel()},[]);const m=n?"section":o.A;return(0,c.jsx)("div",{ref:g,className:l,children:(0,c.jsx)(m,(0,s.A)((0,s.A)({component:"section"},i),{},{ref:t}))})})},12615:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var s=n(65043),r=n(26494),a=n(85865),o=n(71806),i=n(84882),l=n(28076),c=n(10039),d=n(73460),h=n(207),u=n(67803),g=n(10939),m=n(17545),p=n(34088),f=n(507),A=n(55750),x=n(58338),y=n(66565),b=n(29449),j=n(95747),v=n(450),w=n(71261),S=n(92249),_=n(70579);const N=[10,25,50,100],L=()=>{const{accessionAndMdNumber:e,metadata:t,topology:n,interactions:L,populations:R}=(0,s.useContext)(b.f),z=(0,s.useRef)(),C="".concat(j.nP,"/").concat(e,"/analyses"),E="".concat(C,"/hbonds"),{loading:M,payload:k,error:T}=(0,x.A)(E),[I,O]=(0,s.useState)(0),P=L&&L[I],{interactionName:D,analysisName:H}=(0,s.useMemo)(()=>{if(!P||!k)return{};if(void 0!==k.data)return{interactionName:P.name};const e=k.find(e=>e.name===P.name);return{interactionName:P.name,analysisName:e.analysis}},[P,k]),W=H?"".concat(C,"/").concat(H):null,{loading:F,payload:q,error:B}=(0,x.A)(W),Y=(0,y.A)(e=>{if(!k)return e;if(!(void 0!==k.data))return q||e;const t=k.data.find(e=>e.name===D);return t||{error:'Dataset for interaction "'.concat(D,'" not found')}},[k,q,D]),{processedData:V,weights:Q}=(0,s.useMemo)(()=>{if(!Y||!n||!t)return{};if(R&&R.loading)return{};if(0===Y.hbonds.length)return{message:"No hydrogen bonds were found for this interaction"};const e=new S.A(Y.version);let s="hbonds_timed";"ensemble"===t.TYPE&&(s="hbonds"),e.major<1&&(s="hbonds");const r=Y.hbonds.length,a={},o={};for(let t=0;t<r;t++){const e=Y.acceptors[t],n=Y.donors[t],r=Y.hydrogens[t];let i=Y[s][t];Array.isArray(i)||(i=[i]);if((0,w.T9)(i)<.05)continue;const l={acceptor:e,donor:n,hydrogen:r,status:i,stability:(0,w.WQ)(i)/i.length},c=a[e];c?c.push(l):a[e]=[l];const d=o[n];d?d.push(l):o[n]=[l]}const i=[],l=[];Object.values(a).forEach(e=>{const t=e.map(e=>e.donor);new Set(t).size>1?i.push(e):l.push(e)}),Object.values(o).forEach(e=>{const t=e.map(e=>e.acceptor);new Set(t).size>1&&i.push(e)}),l.forEach(e=>{const t=e[0];for(const n of i)for(const e of n)if(e.acceptor===t.acceptor)return;i.push(e)});const c=i.map(e=>{let t=e.map(e=>e.acceptor);1===new Set(t).size&&(t=[t[0]]);let n=e.map(e=>e.donor);1===new Set(n).size&&(n=[n[0]]);let s=e.map(e=>e.hydrogen);1===new Set(s).size&&(s=[s[0]]);return{acceptors:t,donors:n,hydrogens:s,status:e.map(e=>e.status),stability:(0,w.WQ)(e.map(e=>e.stability))}});c.forEach(e=>{const t=e.acceptors[0],s=n.getAtomByIndex(t),r=-1!==P.interface_atom_indices_1.indexOf(s.index);e.isAcceptorFromAgent1=r;const[a,o]=[e.acceptors,e.donors].map(e=>e.map(e=>{const t=n.getAtomByIndex(e);return"".concat(t.residue.standardLabel,".").concat(t.name)})),i=e.hydrogens.map(e=>{let t=n.getAtomByIndex(e).name;return r?t+=" \u2014":t="\u2014 "+t,t});e.hydrogenLabels=i,r?(e.agent1Labels=a,e.agent2Labels=o):(e.agent1Labels=o,e.agent2Labels=a)}),c.sort((e,t)=>t.stability-e.stability);const d=Y.hbonds[0].length,h=Math.round(t.mdFrames/(d-1));let u;if(R&&R.payload&&e.major<1){u=[];for(let t=0;t<R.payload.length;t+=h)u.push(R.payload[t]);const e=u.length;if(d!==e)throw new Error("Data values count (".concat(d,") does not match the weigths values count (").concat(e,")"))}return{processedData:c,weights:u}},[Y,t,n,P,R]),[G,U]=(0,s.useState)(0),[X,Z]=(0,s.useState)(25),J=(0,s.useMemo)(()=>{if(!V)return;const e=G*X,t=(G+1)*X;return V.slice(e,t)},[V,G,X]),[K,$]=(0,s.useState)(null),ee=(0,s.useCallback)(e=>{const[t,n]=e.split("-"),s=J[t],r=s.acceptors[n]||s.acceptors[0],a=s.donors[n]||s.donors[0],o=s.hydrogens[n]||s.hydrogens[0];$({selectedAtoms:[r,a],selectedDistances:[[r,a]],selectedAngles:[[r,o,a]]})},[J]),te=(0,s.useCallback)(e=>{O(e),U(0)},[]);return T?T.toString():B?B.toString():Y&&Y.error?Y.error:R&&R.error?R.error.toString():Y?R&&!R.payload?R.loading?(0,_.jsx)(m.A,{}):"Something bad happened with populations data":(0,_.jsxs)(s.Suspense,{fallback:(0,_.jsx)(m.A,{}),children:[(0,_.jsx)(g.A,{children:(0,_.jsxs)(r.A,{className:v.default.horizontal,children:[(0,_.jsx)(a.A,{variant:"h6",children:"Interaction:"}),(0,_.jsx)(f.A,{interactions:L,selectedInteraction:I,setSelectedInteraction:te})]})}),(0,_.jsxs)("div",{className:M||F?v.default.disabled:v.default.enabled,children:["string"===typeof V&&(0,_.jsx)(g.A,{children:(0,_.jsx)(r.A,{children:(0,_.jsx)(a.A,{variant:"h6",children:V})})}),"object"===typeof V&&(0,_.jsx)(g.A,{className:v.default.margined,children:(0,_.jsx)(r.A,{children:(0,_.jsxs)(o.A,{ref:z,children:[(0,_.jsxs)("colgroup",{children:[(0,_.jsx)("col",{style:{width:"12%"}}),(0,_.jsx)("col",{style:{width:"12%"}}),(0,_.jsx)("col",{style:{width:"12%"}}),(0,_.jsx)("col",{style:{width:"64%"}})]}),(0,_.jsx)(i.A,{className:v.default["table-head"],children:(0,_.jsxs)(l.A,{children:[(0,_.jsx)(c.A,{children:P.agent_1}),(0,_.jsx)(c.A,{children:"Hydrogen"}),(0,_.jsx)(c.A,{children:P.agent_2}),(0,_.jsx)(c.A,{children:"Bond status along trajectory"})]})}),(0,_.jsx)(d.A,{children:J.map((e,t)=>(0,_.jsx)(s.Fragment,{children:e.status.map((n,s)=>(0,_.jsxs)(l.A,{children:[e.agent1Labels[s]&&(0,_.jsx)(c.A,{rowSpan:e.status.length/e.agent1Labels.length,children:e.agent1Labels[s]}),e.hydrogenLabels[s]&&(0,_.jsx)(c.A,{rowSpan:e.status.length/e.hydrogenLabels.length,align:e.isAcceptorFromAgent1?"right":"left",children:e.hydrogenLabels[s]}),e.agent2Labels[s]&&(0,_.jsx)(c.A,{rowSpan:e.status.length/e.agent2Labels.length,children:e.agent2Labels[s]}),(0,_.jsx)(c.A,{children:(0,_.jsx)(A.default,{status:n,weights:Q,keyLabel:"".concat(t,"-").concat(s),onClick:ee,className:v.default.status})})]},s))},t))}),(0,_.jsx)(h.A,{children:(0,_.jsx)(l.A,{children:(0,_.jsx)(u.A,{rowsPerPageOptions:N,colSpan:4,count:V.length,rowsPerPage:X,page:G,onPageChange:(e,t)=>{U(t),z.current.scrollIntoView()},onRowsPerPageChange:e=>{let{target:{value:t}}=e;Z(t),U(0)}})})})]})})})]}),(0,_.jsx)(p.A,{newViewer:K?{selectedAtoms:K.selectedAtoms,selectedDistances:K.selectedDistances,selectedAngles:K.selectedAngles}:null,onNail:e=>$(t=>t&&t.selectedAtoms===e.selectedAtoms?null:t),onClose:e=>{$(t=>t&&t.selectedAtoms===e.selectedAtoms?null:t)}})]}):M||F?(0,_.jsx)(m.A,{}):L?n?"Something bad happened with the analysis data":"There is no topology":"There are no interactions"}},34088:(e,t,n)=>{n.d(t,{A:()=>g});var s=n(89379),r=n(65043),a=n(43126),o=n(10939);const i="style_rnd__Txifm",l="style_floating-card__HHpby";var c=n(70579);const d=(0,r.lazy)(()=>Promise.all([n.e(7784),n.e(8095),n.e(3845),n.e(9070),n.e(247),n.e(7955),n.e(8677),n.e(4061),n.e(335),n.e(9117)]).then(n.bind(n,14696)));let h=0;const u=e=>{const t=e.viewerRef||(0,r.useRef)(null),[n,u]=(0,r.useState)(()=>{const{innerWidth:e,innerHeight:t,scrollY:n}=window,s=document.querySelector("main").offsetTop,r=Math.max(Math.min(e/4,t/4),150),a=1.5*r;return{width:2*r,height:a,x:0,y:t-s-a-20+n}});return(0,c.jsx)(a.p,{position:{x:n.x,y:n.y},size:{width:n.width,height:n.height},style:{zIndex:(h+=1,h)},className:i,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{u((0,s.A)({},n))},onResizeStart:()=>{u((0,s.A)({},n))},onDragStop:(e,t)=>{0===e.layerX&&0===e.layerY||n.x===t.x&&n.y===t.y||u((0,s.A)((0,s.A)({},n),{},{x:t.x,y:t.y}))},onResize:()=>t.current&&t.current.autoResize(),onResizeStop:(e,t,n,r,a)=>{u((0,s.A)({width:n.style.width,height:n.style.height},a))},children:(0,c.jsx)(o.A,{className:l,elevation:4,children:(0,c.jsx)(r.Suspense,{fallback:null,children:(0,c.jsx)(d,(0,s.A)({className:l,ref:t,startsPlaying:!1},e))})})})},g=e=>{let{newViewer:t,nailing:n=!0,onNail:a,onClose:o}=e;const[i,l]=(0,r.useState)([]),d=[...i],h=(0,r.useRef)([]);if(t){const e=()=>{let e=0;for(;e<999;){if(-1===h.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};t.id=e(),t.close=()=>{n&&l(e=>{const n=[...e],s=e.indexOf(t);return-1!==s&&n.splice(s,1),n}),o&&o(t),h.current.push(t.id)},n&&(t.nail=()=>{l(e=>[...e,t]),a&&a(t),h.current.push(t.id)}),d.push(t)}return d.map(e=>(0,c.jsx)(u,(0,s.A)({},e),e.id))}},55750:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var s=n(65043),r=n(57631),a=n(70579);const o="blue",i="#f0f0f0",l=[i,o],c=(0,r.m4Y)().range(l).domain([0,1]),d=(0,s.memo)(e=>{let{status:t,weights:n,keyLabel:l,onClick:d,className:h}=e;const u=(0,s.useRef)(null),g=(0,s.useRef)(null),[,m]=(0,s.useState)(null);return(0,s.useEffect)(()=>{g.current&&g.current.forEach(e=>e.remove());const e=u.current,{clientWidth:s,clientHeight:a}=e.parentElement,h=document.createElement("CANVAS");(0,r.Ltv)(e).node().appendChild(h);const p=(0,r.Ltv)(h).attr("id","canvas").attr("width",s).attr("height",a).style("position","absolute").style("cursor",d?"pointer":void 0),f=p.node().getContext("2d"),A=(0,r.Ltv)(e).append("svg").attr("id","svg").attr("viewBox",[0,0,s,a]);if(n){const e=(0,r.WH)().range([0,s]).domain([0,1]).paddingInner(0),l=e(0),c=(e(1)-l)/n.reduce((e,t)=>e+t,0);let d=0;t.forEach((e,t)=>{const s=n[t]*c*2,r=d,l=e?o:i;f.fillStyle=l,f.fillRect(r,0,s,a),d+=s})}else{const e=(0,r.WH)().range([0,s]).domain(t.map((e,t)=>t)).paddingInner(0),n=e.bandwidth();if(t.forEach((t,s)=>{const o=e(s),i=(0,r.yWT)(c(t)).formatHex();f.fillStyle=i,f.fillRect(o,0,n,a)}),1===t.length){const e=Math.round(1e3*t[0])/10+"%";f.font="14px arial",f.fillStyle="black",f.textAlign="center",f.textBaseline="middle",f.fillText(e,n/2,a/2)}}d&&(h.onmousedown=()=>{d(l)}),g.current=[A,p];const x=()=>{m({innerWidth:window.innerWidth,innerHeight:window.innerHeight})};return window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}}),(0,a.jsx)("div",{className:h,style:h?void 0:{height:"100px",width:"600px"},children:(0,a.jsx)("div",{ref:u,id:"container",style:{position:"relative",width:"100%",height:"100%"}})})})},66565:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(65043);const r=(e,t)=>{const n=(0,s.useRef)(),r=(0,s.useMemo)(()=>e(n.current),t);return n.current=r,r}},92249:(e,t,n)=>{n.d(t,{A:()=>r});class s{constructor(e){void 0===e&&(e="0.0.0");const t=e.split(".");if(this.major=t[0]&&+t[0],this.major>999)throw new Error("Major version is greater than 999 and this is not allowed");if(this.minor=t[1]&&+t[1],this.minor>999)throw new Error("Minor version is greater than 999 and this is not allowed");if(this.patch=t[2]&&+t[2],this.patch>999)throw new Error("Patch version is greater than 999 and this is not allowed")}toString(){let e=this.major.toString();return void 0===this.minor?e:(e+="."+this.minor.toString(),void 0===this.patch||(e+="."+this.patch.toString()),e)}equals(e){return"string"===typeof e?this.equals(new s(e)):e.major===this.major&&((void 0===e.minor||e.minor===this.minor)&&(void 0===e.patch||e.patch===this.patch))}}s.prototype.valueOf=function(){return 1e6*this.major+1e3*(this.minor||0)+(this.patch||0)};const r=s}}]);
//# sourceMappingURL=2615.ea64e19b.chunk.js.map