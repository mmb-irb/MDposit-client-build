"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[375,2930],{20854:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var l=t(89379),n=t(65043),s=t(95747),o=t(58338),r=t(29449),i=t(26494),c=t(67784),d=t(82746),u=t(57631),m=t(10939),h=t(34088),p=t(17545),f=t(38030),x=t(1960),b=t(71261),g=t(30375),A=t(70579);const C=(0,n.lazy)(()=>Promise.all([t.e(3969),t.e(5291),t.e(5077)]).then(t.bind(t,75291))),y=["grey","yellow","red"],v=e=>e.sort().join(),k=new Map([[v(["O3'","P","O5'","C5'"]),"alpha"],[v(["P","O5'","C5'","C4'"]),"beta"],[v(["O5'","C5'","C4'","C3'"]),"gamma"],[v(["C5'","C4'","C3'","O3'"]),"delta"],[v(["C4'","C3'","O3'","P"]),"epsilon"],[v(["C3'","O3'","P","O5'"]),"zeta"],[v(["C1'","C2'","C3'","C4'"]),"nu2"],[v(["O4'","C1'","N9","C8"]),"chi"],[v(["O4'","C1'","N1","C6"]),"chi"]]),w=Array.from(new Set(k.values())),j={alpha:"P",beta:"O5'",gamma:"C5'",delta:"C4'",epsilon:"C3'",zeta:"O3'",nu2:"C2'",chi:"C1'"},S=()=>{const{accessionAndMdNumber:e,topology:a}=(0,n.useContext)(r.f),t="".concat(s.nP,"/").concat(e,"/analyses/dihenergies"),{loading:S,payload:D,error:_}=(0,o.A)(t),{dihedralsData:N,targetChains:P}=(0,n.useMemo)(()=>{if(!D||!a)return{};const e=[];w.forEach(a=>e[a]=[]),D.forEach(t=>{const n=(0,l.A)({},t),s=n.indices.map(e=>a.getAtomByIndex(e)),o=v(s.map(e=>e.name)),r=k.get(o);if(!r)return;n.name=r;const i=j[r],c=s.find(e=>e.name===i);n.residue=c.residue,n.label="".concat(n.residue.standardLabel," ").concat(r),n.normee=n.ee?n.ee:0,n.normvdw=n.vdw?n.vdw:0,n.total=n.torsion+n.normee+n.normvdw,e.push(n)});const t=(0,b.Am)(e.map(e=>e.residue.chain.name));return{dihedralsData:e,targetChains:t}},[D,a]),[O,E]=(0,n.useState)(null),F=(0,n.useCallback)(e=>{const t=a.chainNames.indexOf(e);E(t),$(null)},[a]);(0,n.useEffect)(()=>{P&&F(P[0])},[P]);const[I,R]=(0,n.useState)("alpha"),T=(0,n.useCallback)(e=>{R(e),$(null)},[]),[z,B]=(0,n.useState)(!1),W=(0,n.useCallback)(()=>{B(e=>!e),$(null)},[]),{selectedData:M,summaryData:V,torsionData:L,eeData:Q,vdwData:q,totalData:X,xAxisValues:J,xTooltip:Y,colorScheme:H}=(0,n.useMemo)(()=>{if(!N||null===O)return{};const e=N.filter(e=>e.residue.chainIndex===O),a=z?(e=>{const a={};return e.forEach(e=>{const t=a[e.residue.index];t?t.push(e):a[e.residue.index]=[e]}),a})(e):(e=>{const a={};return e.forEach(e=>{const t=a[e.name];t?t.push(e):a[e.name]=[e]}),a})(e),t=z?Object.values(a).map(e=>{const a=e[0].residue;return{residue:a,label:a.standardLabel,torsion:(0,b.WQ)(e.map(e=>e.torsion)),normee:(0,b.WQ)(e.map(e=>e.normee)),normvdw:(0,b.WQ)(e.map(e=>e.normvdw)),total:(0,b.WQ)(e.map(e=>e.total))}}):a[I],l=(0,b.Wd)(t.map(e=>e.torsion)),n=(0,b.Wd)(t.map(e=>e.normee)),s=(0,b.Wd)(t.map(e=>e.normvdw)),o=(0,b.Wd)(t.map(e=>e.total)),r={torsion:(0,b.wC)(l)+" kcal/mol",ee:(0,b.wC)(n)+" kcal/mol",vdw:(0,b.wC)(s)+" kcal/mol",total:(0,b.wC)(o)+" kcal/mol"},i={torsion:{data:t.map(e=>e.torsion),color:"black"}},c={ee:{data:t.map(e=>e.normee),color:"black"}},m={vdw:{data:t.map(e=>e.normvdw),color:"black"}},h=t.map(e=>e.total),p={total:{data:h,color:"black"}},f=t.map(e=>e.label),x=z?"residue":"dihedral",g={};t.forEach(e=>g[e.residue.index]=e.total);const A=(0,b.jk)(h),C=(0,b.T9)(h),v=(0,u.m4Y)().range(y).domain([A,(A+C)/2,C]),k=d.hD.addScheme(function(e){this.atomColor=e=>{const a=e.residueIndex,t=g[a];if(void 0===t)return 16777215;const l=(0,u.yWT)(v(t)).formatHex();return parseInt(l.substring(1),16)}});return{selectedData:t,summaryData:r,torsionData:i,eeData:c,vdwData:m,totalData:p,xAxisValues:f,xTooltip:(e,a)=>"".concat(x," ").concat(f[a]||a),colorScheme:k}},[O,N,I,z]),Z=a&&a.defaultRepresentations,[G,K]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!a||!Z)return;const e=":"+a.chainNames[O],t=[{name:"Dihedral energies",selection:e,color:"custom",customScheme:H,reference:"dihen_color"},{name:"Reference",selection:"not "+e,type:"licorice",color:"element",opacity:.2,reference:"dihen_ref"}];K(e=>{const a=null===e?Z:e.filter(e=>{e.reference&&e.reference.substr(0,5)});return[...t,...a]})},[a,Z,O,H]);const[U,$]=(0,n.useState)(null),ee=(0,n.useMemo)(()=>{if(null===U)return[];return[{x:U,attr:{fill:"#c8c8c8"}}]},[U]),ae=(0,n.useCallback)(e=>$(a=>e&&e.selectedX===a?null:a),[]);return a?_?_.toString():S?(0,A.jsx)(p.A,{}):D?(0,A.jsxs)(n.Suspense,{fallback:(0,A.jsx)(p.A,{}),children:[(0,A.jsxs)(m.A,{className:g.default.card,children:[(0,A.jsxs)("div",{className:g.default.horizontal,children:[(0,A.jsx)(f.A,{label:"Chain",options:P,selection:a.chainNames[O],setter:F}),(0,A.jsx)(f.A,{label:"Dihedral",options:w,selection:I,setter:T,disabled:z}),(0,A.jsx)(x.A,{firstLabel:"Per dihedral",secondLabel:"Per residue",isFirst:!z,onChange:W})]}),(0,A.jsx)(i.A,{className:g.default.horizontal,children:V?(0,A.jsxs)(i.A,{children:[(0,A.jsx)("legend",{className:g.default["margined-bottom"],children:"Energy averages"}),(0,A.jsx)(c.A,{className:g.default["text-field"],label:"Torsion",title:"Average torsion energy",value:V.torsion}),(0,A.jsx)(c.A,{className:g.default["text-field"],label:"Electrostatic",title:"Average electorstatic energy",value:V.ee}),(0,A.jsx)(c.A,{className:g.default["text-field"],label:"Van Der Waals",title:"Average Van Der Waals energy",value:V.vdw}),(0,A.jsx)(c.A,{className:g.default["text-field"],label:"Total",title:"Average total energy",value:V.total})]}):null}),(0,A.jsxs)(i.A,{children:[(0,A.jsx)(C,{yData:L,xAxisValues:J,xTooltip:Y,title:"Torsions",yAxisLabel:"Energy (kcal/mol)",onSelect:$,fullPrecision:!0,marks:ee}),(0,A.jsx)(C,{yData:Q,xAxisValues:J,xTooltip:Y,title:"Electrostatic",yAxisLabel:"Energy (kcal/mol)",onSelect:$,fullPrecision:!0,marks:ee}),(0,A.jsx)(C,{yData:q,xAxisValues:J,xTooltip:Y,title:"Van Der Waals",yAxisLabel:"Energy (kcal/mol)",onSelect:$,fullPrecision:!0,marks:ee}),(0,A.jsx)(C,{yData:X,xAxisValues:J,xTooltip:Y,title:"Total",yAxisLabel:"Energy (kcal/mol)",onSelect:$,fullPrecision:!0,marks:ee})]})]}),(0,A.jsx)(h.A,{newViewer:U?{selectedResidueIndices:[M[U].residue.index],representationsState:[G,K],selectedX:U}:null,onNail:ae,onClose:ae})]}):"Something bad happened":(0,A.jsx)(p.A,{})}},30375:(e,a,t)=>{t.r(a),t.d(a,{default:()=>l});const l={card:"style_card__bFecw",horizontal:"style_horizontal__ZYIg8","text-field":"style_text-field__CSo-z","margined-bottom":"style_margined-bottom__kI93T",disabled:"style_disabled__kJ0uc"}},33064:(e,a,t)=>{t.d(a,{A:()=>y});var l=t(98587),n=t(58168),s=t(65043),o=t(58387),r=t(98610),i=t(6803),c=t(34535),d=t(61475),u=t(54516),m=t(85213),h=t(66236),p=t(92532),f=t(72372);function x(e){return(0,f.Ay)("PrivateSwitchBase",e)}(0,p.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var b=t(70579);const g=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],A=(0,c.Ay)(h.A,{name:"MuiSwitchBase"})(e=>{let{ownerState:a}=e;return(0,n.A)({padding:9,borderRadius:"50%"},"start"===a.edge&&{marginLeft:"small"===a.size?-3:-12},"end"===a.edge&&{marginRight:"small"===a.size?-3:-12})}),C=(0,c.Ay)("input",{name:"MuiSwitchBase",shouldForwardProp:d.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),y=s.forwardRef(function(e,a){const{autoFocus:t,checked:s,checkedIcon:c,className:d,defaultChecked:h,disabled:p,disableFocusRipple:f=!1,edge:y=!1,icon:v,id:k,inputProps:w,inputRef:j,name:S,onBlur:D,onChange:_,onFocus:N,readOnly:P,required:O=!1,tabIndex:E,type:F,value:I}=e,R=(0,l.A)(e,g),[T,z]=(0,u.A)({controlled:s,default:Boolean(h),name:"SwitchBase",state:"checked"}),B=(0,m.A)();let W=p;B&&"undefined"===typeof W&&(W=B.disabled);const M="checkbox"===F||"radio"===F,V=(0,n.A)({},e,{checked:T,disabled:W,disableFocusRipple:f,edge:y}),L=(e=>{const{classes:a,checked:t,disabled:l,edge:n}=e,s={root:["root",t&&"checked",l&&"disabled",n&&"edge".concat((0,i.A)(n))],input:["input"]};return(0,r.A)(s,x,a)})(V);return(0,b.jsxs)(A,(0,n.A)({component:"span",className:(0,o.A)(L.root,d),centerRipple:!0,focusRipple:!f,disabled:W,tabIndex:null,role:void 0,onFocus:e=>{N&&N(e),B&&B.onFocus&&B.onFocus(e)},onBlur:e=>{D&&D(e),B&&B.onBlur&&B.onBlur(e)},ownerState:V,ref:a},R,{children:[(0,b.jsx)(C,(0,n.A)({autoFocus:t,checked:s,defaultChecked:h,className:L.input,disabled:W,id:M?k:void 0,name:S,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const a=e.target.checked;z(a),_&&_(e,a)},readOnly:P,ref:j,required:O,ownerState:V,tabIndex:E,type:F},"checkbox"===F&&void 0===I?{}:{value:I},w)),T?c:v]}))})},38030:(e,a,t)=>{t.d(a,{A:()=>d});t(65043);var l=t(26494),n=t(85865),s=t(2260),o=t(32143);const r="style_content__eXhNP",i="style_horizontal-margined__w4tJp";var c=t(70579);const d=e=>{let{label:a,options:t,selection:d,setter:u,disabled:m}=e;if(!t)return"Missing options argument";if(!d)return"Missing selection argument";if(!u)return"Missing setter argument";return(0,c.jsxs)(l.A,{className:r,children:[a&&(0,c.jsx)(n.A,{variant:"h5",children:a}),(0,c.jsx)(s.A,{value:d,onChange:e=>{u(e.target.value)},className:i,disabled:m,children:t.map((e,a)=>(0,c.jsx)(o.A,{value:e,children:e},a))})]})}}}]);
//# sourceMappingURL=2930.445a3498.chunk.js.map