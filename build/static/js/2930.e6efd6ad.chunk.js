"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[375,2930],{20854:(e,a,t)=>{t.r(a),t.d(a,{default:()=>D});var l=t(89379),n=t(65043),s=t(95747),o=t(58338),r=t(29449),i=t(26494),c=t(67784),d=t(82746),u=t(57631),m=t(10939),h=t(34088),p=t(17545),f=t(38030),x=t(1960),b=t(10419),g=t(71261),A=t(30375),C=t(70579);const y=(0,n.lazy)(()=>Promise.all([t.e(7631),t.e(3969),t.e(5291),t.e(5077)]).then(t.bind(t,75291))),v=["grey","yellow","red"],k=e=>e.sort().join(),w=new Map([[k(["O3'","P","O5'","C5'"]),"alpha"],[k(["P","O5'","C5'","C4'"]),"beta"],[k(["O5'","C5'","C4'","C3'"]),"gamma"],[k(["C5'","C4'","C3'","O3'"]),"delta"],[k(["C4'","C3'","O3'","P"]),"epsilon"],[k(["C3'","O3'","P","O5'"]),"zeta"],[k(["C1'","C2'","C3'","C4'"]),"nu2"],[k(["O4'","C1'","N9","C8"]),"chi"],[k(["O4'","C1'","N1","C6"]),"chi"]]),j=Array.from(new Set(w.values())),S={alpha:"P",beta:"O5'",gamma:"C5'",delta:"C4'",epsilon:"C3'",zeta:"O3'",nu2:"C2'",chi:"C1'"},D=()=>{const{accessionAndMdNumber:e,topology:a}=(0,n.useContext)(r.f),t="".concat(s.nP,"/").concat(e,"/analyses/dihenergies"),{loading:D,payload:_,error:N}=(0,o.A)(t),{dihedralsData:P,targetChains:O}=(0,n.useMemo)(()=>{if(!_||!a)return{};const e=[];j.forEach(a=>e[a]=[]),_.forEach(t=>{const n=(0,l.A)({},t),s=n.indices.map(e=>a.getAtomByIndex(e)),o=k(s.map(e=>e.name)),r=w.get(o);if(!r)return;n.name=r;const i=S[r],c=s.find(e=>e.name===i);n.residue=c.residue,n.label="".concat(n.residue.standardLabel," ").concat(r),n.normee=n.ee?n.ee:0,n.normvdw=n.vdw?n.vdw:0,n.total=n.torsion+n.normee+n.normvdw,e.push(n)});const t=(0,g.Am)(e.map(e=>e.residue.chain.name));return{dihedralsData:e,targetChains:t}},[_,a]),[E,F]=(0,n.useState)(null),I=(0,n.useCallback)(e=>{const t=a.chainNames.indexOf(e);F(t),ee(null)},[a]);(0,n.useEffect)(()=>{O&&I(O[0])},[O]);const[T,z]=(0,n.useState)("alpha"),R=(0,n.useCallback)(e=>{z(e),ee(null)},[]),[W,B]=(0,n.useState)(!1),V=(0,n.useCallback)(()=>{B(e=>!e),ee(null)},[]),{selectedData:L,summaryData:M,torsionData:Q,eeData:q,vdwData:X,totalData:J,xAxisValues:Y,xTooltip:H,colorScheme:Z}=(0,n.useMemo)(()=>{if(!P||null===E)return{};const e=P.filter(e=>e.residue.chainIndex===E),a=W?(e=>{const a={};return e.forEach(e=>{const t=a[e.residue.index];t?t.push(e):a[e.residue.index]=[e]}),a})(e):(e=>{const a={};return e.forEach(e=>{const t=a[e.name];t?t.push(e):a[e.name]=[e]}),a})(e),t=W?Object.values(a).map(e=>{const a=e[0].residue;return{residue:a,label:a.standardLabel,torsion:(0,g.WQ)(e.map(e=>e.torsion)),normee:(0,g.WQ)(e.map(e=>e.normee)),normvdw:(0,g.WQ)(e.map(e=>e.normvdw)),total:(0,g.WQ)(e.map(e=>e.total))}}):a[T],l=(0,g.Wd)(t.map(e=>e.torsion)),n=(0,g.Wd)(t.map(e=>e.normee)),s=(0,g.Wd)(t.map(e=>e.normvdw)),o=(0,g.Wd)(t.map(e=>e.total)),r={torsion:(0,g.wC)(l)+" kcal/mol",ee:(0,g.wC)(n)+" kcal/mol",vdw:(0,g.wC)(s)+" kcal/mol",total:(0,g.wC)(o)+" kcal/mol"},i={torsion:{data:t.map(e=>e.torsion),color:"black"}},c={ee:{data:t.map(e=>e.normee),color:"black"}},m={vdw:{data:t.map(e=>e.normvdw),color:"black"}},h=t.map(e=>e.total),p={total:{data:h,color:"black"}},f=t.map(e=>e.label),x=W?"residue":"dihedral",b={};t.forEach(e=>b[e.residue.index]=e.total);const A=(0,g.jk)(h),C=(0,g.T9)(h),y=(0,u.m4Y)().range(v).domain([A,(A+C)/2,C]),k=d.hD.addScheme(function(e){this.atomColor=e=>{const a=e.residueIndex,t=b[a];if(void 0===t)return 16777215;const l=(0,u.yWT)(y(t)).formatHex();return parseInt(l.substring(1),16)}});return{selectedData:t,summaryData:r,torsionData:i,eeData:c,vdwData:m,totalData:p,xAxisValues:f,xTooltip:(e,a)=>"".concat(x," ").concat(f[a]||a),colorScheme:k}},[E,P,T,W]),G=(0,b.A)(),[K,U]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!a||!G)return;const e=":"+a.chainNames[E],t=[{name:"Dihedral energies",selection:e,color:"custom",customScheme:Z,reference:"dihen_color"},{name:"Reference",selection:"not "+e,type:"licorice",color:"element",opacity:.2,reference:"dihen_ref"}];U(e=>{const a=null===e?G:e.filter(e=>{e.reference&&e.reference.substr(0,5)});return[...t,...a]})},[a,G,E,Z]);const[$,ee]=(0,n.useState)(null),ae=(0,n.useMemo)(()=>{if(null===$)return[];return[{x:$,attr:{fill:"#c8c8c8"}}]},[$]),te=(0,n.useCallback)(e=>ee(a=>e&&e.selectedX===a?null:a),[]);return a?N?N.toString():D?(0,C.jsx)(p.A,{}):_?(0,C.jsxs)(n.Suspense,{fallback:(0,C.jsx)(p.A,{}),children:[(0,C.jsxs)(m.A,{className:A.default.card,children:[(0,C.jsxs)("div",{className:A.default.horizontal,children:[(0,C.jsx)(f.A,{label:"Chain",options:O,selection:a.chainNames[E],setter:I}),(0,C.jsx)(f.A,{label:"Dihedral",options:j,selection:T,setter:R,disabled:W}),(0,C.jsx)(x.A,{firstLabel:"Per dihedral",secondLabel:"Per residue",isFirst:!W,onChange:V})]}),(0,C.jsx)(i.A,{className:A.default.horizontal,children:M?(0,C.jsxs)(i.A,{children:[(0,C.jsx)("legend",{className:A.default["margined-bottom"],children:"Energy averages"}),(0,C.jsx)(c.A,{className:A.default["text-field"],label:"Torsion",title:"Average torsion energy",value:M.torsion}),(0,C.jsx)(c.A,{className:A.default["text-field"],label:"Electrostatic",title:"Average electorstatic energy",value:M.ee}),(0,C.jsx)(c.A,{className:A.default["text-field"],label:"Van Der Waals",title:"Average Van Der Waals energy",value:M.vdw}),(0,C.jsx)(c.A,{className:A.default["text-field"],label:"Total",title:"Average total energy",value:M.total})]}):null}),(0,C.jsxs)(i.A,{children:[(0,C.jsx)(y,{yData:Q,xAxisValues:Y,xTooltip:H,title:"Torsions",yAxisLabel:"Energy (kcal/mol)",onSelect:ee,fullPrecision:!0,marks:ae}),(0,C.jsx)(y,{yData:q,xAxisValues:Y,xTooltip:H,title:"Electrostatic",yAxisLabel:"Energy (kcal/mol)",onSelect:ee,fullPrecision:!0,marks:ae}),(0,C.jsx)(y,{yData:X,xAxisValues:Y,xTooltip:H,title:"Van Der Waals",yAxisLabel:"Energy (kcal/mol)",onSelect:ee,fullPrecision:!0,marks:ae}),(0,C.jsx)(y,{yData:J,xAxisValues:Y,xTooltip:H,title:"Total",yAxisLabel:"Energy (kcal/mol)",onSelect:ee,fullPrecision:!0,marks:ae})]})]}),(0,C.jsx)(h.A,{newViewer:$?{selectedResidueIndices:[L[$].residue.index],representationsState:[K,U],selectedX:$}:null,onNail:te,onClose:te})]}):"Something bad happened":(0,C.jsx)(p.A,{})}},30375:(e,a,t)=>{t.r(a),t.d(a,{default:()=>l});const l={card:"style_card__bFecw",horizontal:"style_horizontal__ZYIg8","text-field":"style_text-field__CSo-z","margined-bottom":"style_margined-bottom__kI93T",disabled:"style_disabled__kJ0uc"}},33064:(e,a,t)=>{t.d(a,{A:()=>y});var l=t(98587),n=t(58168),s=t(65043),o=t(58387),r=t(98610),i=t(6803),c=t(34535),d=t(61475),u=t(54516),m=t(85213),h=t(66236),p=t(92532),f=t(72372);function x(e){return(0,f.Ay)("PrivateSwitchBase",e)}(0,p.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var b=t(70579);const g=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],A=(0,c.Ay)(h.A)(e=>{let{ownerState:a}=e;return(0,n.A)({padding:9,borderRadius:"50%"},"start"===a.edge&&{marginLeft:"small"===a.size?-3:-12},"end"===a.edge&&{marginRight:"small"===a.size?-3:-12})}),C=(0,c.Ay)("input",{shouldForwardProp:d.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),y=s.forwardRef(function(e,a){const{autoFocus:t,checked:s,checkedIcon:c,className:d,defaultChecked:h,disabled:p,disableFocusRipple:f=!1,edge:y=!1,icon:v,id:k,inputProps:w,inputRef:j,name:S,onBlur:D,onChange:_,onFocus:N,readOnly:P,required:O=!1,tabIndex:E,type:F,value:I}=e,T=(0,l.A)(e,g),[z,R]=(0,u.A)({controlled:s,default:Boolean(h),name:"SwitchBase",state:"checked"}),W=(0,m.A)();let B=p;W&&"undefined"===typeof B&&(B=W.disabled);const V="checkbox"===F||"radio"===F,L=(0,n.A)({},e,{checked:z,disabled:B,disableFocusRipple:f,edge:y}),M=(e=>{const{classes:a,checked:t,disabled:l,edge:n}=e,s={root:["root",t&&"checked",l&&"disabled",n&&"edge".concat((0,i.A)(n))],input:["input"]};return(0,r.A)(s,x,a)})(L);return(0,b.jsxs)(A,(0,n.A)({component:"span",className:(0,o.A)(M.root,d),centerRipple:!0,focusRipple:!f,disabled:B,tabIndex:null,role:void 0,onFocus:e=>{N&&N(e),W&&W.onFocus&&W.onFocus(e)},onBlur:e=>{D&&D(e),W&&W.onBlur&&W.onBlur(e)},ownerState:L,ref:a},T,{children:[(0,b.jsx)(C,(0,n.A)({autoFocus:t,checked:s,defaultChecked:h,className:M.input,disabled:B,id:V?k:void 0,name:S,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const a=e.target.checked;R(a),_&&_(e,a)},readOnly:P,ref:j,required:O,ownerState:L,tabIndex:E,type:F},"checkbox"===F&&void 0===I?{}:{value:I},w)),z?c:v]}))})},38030:(e,a,t)=>{t.d(a,{A:()=>d});t(65043);var l=t(26494),n=t(85865),s=t(2260),o=t(32143);const r="style_content__eXhNP",i="style_horizontal-margined__w4tJp";var c=t(70579);const d=e=>{let{label:a,options:t,selection:d,setter:u,disabled:m}=e;if(!t)return"Missing options argument";if(!d)return"Missing selection argument";if(!u)return"Missing setter argument";return(0,c.jsxs)(l.A,{className:r,children:[a&&(0,c.jsx)(n.A,{variant:"h5",children:a}),(0,c.jsx)(s.A,{value:d,onChange:e=>{u(e.target.value)},className:i,disabled:m,children:t.map((e,a)=>(0,c.jsx)(o.A,{value:e,children:e},a))})]})}}}]);
//# sourceMappingURL=2930.e6efd6ad.chunk.js.map