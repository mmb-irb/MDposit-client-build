"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[2527,3753],{507:(e,n,a)=>{a.d(n,{A:()=>y});var r=a(65043),t=a(2260),s=a(32143),l=a(57972),i=a(83558),o=a(14256),c=a(67784),d=a(17392),u=a(92127),m=a(12639),f=a(17545);const h="style_horizontal__2DIWx",p="style_horizontal-margined__e9fQR";var g=a(70579);const x=[{label:"All residues",value:"residue_indices"},{label:"Interface residues",value:"interface_indices"}],y=e=>{let{interactions:n,selectedInteraction:a,setSelectedInteraction:y,selectedResidues:_,setSelectedResidues:b,selectedOrder:A,handleToggleOrder:v,firstOrderLabel:j,firstOrderTooltip:w,secondOrderLabel:S,secondOrderTooltip:$,toggleOrderTooltip:N,interfaceOnly:R=!1}=e;const z=n[a];return(0,g.jsxs)(r.Suspense,{fallback:(0,g.jsx)(f.A,{}),children:[(0,g.jsx)(t.A,{value:a,onChange:e=>{y(e.target.value)},className:p,children:n.map((e,n)=>(0,g.jsx)(s.A,{value:n,disabled:e.failed,children:e.label||e.name},n))}),_&&(0,g.jsx)(l.A,{value:_,onChange:e=>{b(e.target.value)},className:h,children:x.map((e,n)=>(0,g.jsx)(i.A,{value:e.value,control:(0,g.jsx)(o.A,{color:"primary"}),label:e.label,disabled:"All residues"===e.label&&R},n))}),void 0!==A&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.A,{label:j,title:w,value:A?z.agent_1:z.agent_2}),(0,g.jsx)(d.A,{title:N,onClick:()=>{v()},size:"large",children:(0,g.jsx)(u.g,{icon:m._qq})}),(0,g.jsx)(c.A,{label:S,title:$,value:A?z.agent_2:z.agent_1})]})]})}},13826:(e,n,a)=>{a.r(n),a.d(n,{default:()=>j});var r=a(65043),t=a(26494),s=a(85865),l=a(43845),i=a(58338),o=a(66565),c=a(10939),d=a(17545),u=a(34088),m=a(92127),f=a(12639),h=a(29449),p=a(95747),g=a(52527),x=a(507),y=a(24310),_=a(70579);const b=["First frame","Second frame"],A=["First frame interface","Second frame interface"],v={base:["red","blue"],interface:[["orange","yellow"],["purple","green"]]},j=()=>{const{accessionAndMdNumber:e,metadata:n,interactions:a,topology:j}=(0,r.useContext)(h.f),w=(0,r.useRef)(null),S=(0,r.useMemo)(()=>{if(!a)return[{name:"Overall"}];a.forEach(e=>{e.label=e.name+" (interface residues)"});return[{name:"Overall"},...a]},[a]),$=`${p.nP}/${e}/analyses`,N=`${$}/rmsd-pairwise`,{loading:R,payload:z,error:O}=(0,i.A)(N),[C,E]=(0,r.useState)(0),M=S&&S[C],{interactionName:F,analysisName:T,analysisNote:k}=(0,r.useMemo)(()=>{if(!M||!z)return{};if(void 0!==z.data)return{interactionName:M.name};const e=z.find(e=>e.name===M.name);return{interactionName:M.name,analysisName:e.analysis,analysisNote:e.note}},[M,z]),I=T?`${$}/${T}`:null,{loading:D,payload:V,error:L}=(0,i.A)(I),q=(0,o.A)(e=>{if(!z)return e;if(!(void 0!==z.data))return V||e;const n=z.data.find(e=>e.name===F);return n||{error:`Dataset for interaction "${F}" not found`}},[z,V,F]),{rmsds:H,AxesValues:P}=(0,r.useMemo)(()=>{if(!q)return{};const e=q.rmsds,a=e.length,r=Math.floor(n.mdFrames/(a-1));return{rmsds:e,AxesValues:Array(a).fill(void 0).map((e,n)=>n*r)}},[q,n]),[W,Y]=(0,r.useState)(null),[B,G]=(0,r.useState)(null);(0,r.useMemo)(()=>{if(!W)return G(null);G(e=>null===e?W.map((e,n)=>({name:"Frame "+(0===n?"A":"B"),frame:e})):(W.forEach((n,a)=>{const r=e[a];r.name="Frame "+(0===a?"A":"B"),r.frame=n}),[...e]))},[W]);const K=j&&j.defaultRepresentations,[Q,X]=(0,r.useState)(null);return(0,r.useMemo)(()=>{if(!B)return X(null);const e=S[C],n=[{name:e.agent_1,interface:e.interface_indices_1},{name:e.agent_2,interface:e.interface_indices_2}];X(e=>{const a=[],r=C>0,t=!(!e||!e.find(e=>e.reference&&e.reference.includes(A[0])));return null===e?B.forEach((e,n)=>{K.forEach(t=>{const s={...t};s.name=`${e.name} - ${t.name}`,s.color=v.base[n],s.component=e.name,s.reference=`${b[n]} - ${t.name}`,r&&(s.name+=" reference",s.opacity=.1),a.push(s)})}):B.forEach((n,s)=>{K.forEach(l=>{const i=`${b[s]} - ${l.name}`,o=e.find(e=>e.reference===i);if(!o)throw new Error(`No previous representation with reference ${i}`);const c=o.name.split(" - ")[0];o.name=o.name.replace(c,n.name),o.component=n.name,r&&!t&&(o.name+=" reference",o.opacity=.1),!r&&t&&(o.name=o.name.replace(" reference",""),o.opacity=1),a.push(o)})}),r&&(!1===t?B.forEach((e,r)=>{n.forEach((n,t)=>{const s=n.interface&&j.residueIndices2Ngl(n.interface);a.push({name:`${e.name} - ${n.name} interface`,color:v.interface[r][t],selection:s.rangedSelection,type:"licorice",component:e.name,reference:`${A[r]} - ${n.name}`})})}):B.forEach((r,t)=>{n.forEach(n=>{const s=n.interface&&j.residueIndices2Ngl(n.interface),l=`${A[t]} - ${n.name}`,i=e.find(e=>e.reference===l);i.name=`${r.name} - ${n.name} interface`,i.selection=s.rangedSelection,i.component=r.name,a.push(i)})})),e&&e.filter(e=>e.custom).forEach(e=>{e.component=B[0].name,a.push(e)}),a})},[B,j,S,C,K]),O?O.toString():L?L.toString():q&&q.error?q.error:q?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(c.A,{children:(0,_.jsxs)(t.A,{className:g.default.horizontal,children:[(0,_.jsx)(s.A,{variant:"h6",children:"Residues selection:"}),(0,_.jsx)(x.A,{interactions:S,selectedInteraction:C,setSelectedInteraction:E}),W&&(0,_.jsxs)("div",{children:[B&&B.map((e,n)=>(0,_.jsx)(l.A,{label:"Frame "+e.frame,style:{margin:"0.2em",backgroundColor:0===n?"red":"blue"}},n)),C>0&&B&&B.map((e,n)=>{const a=S[C];return[a.agent_1,a.agent_2].map((a,r)=>(0,_.jsx)(l.A,{label:"Frame "+e.frame+" - "+a,style:{margin:"0.2em",backgroundColor:0===r?0===n?"orange":"purple":0===n?"yellow":"green"}},r))})]})]})}),k&&(0,_.jsx)(c.A,{className:g.default.margined,children:(0,_.jsx)(t.A,{children:(0,_.jsxs)("div",{style:{fontWeight:"bold"},children:[(0,_.jsx)(m.g,{icon:f.zpE,size:"lg"})," "+k]})})}),(0,_.jsx)("div",{className:R||D?g.default.disabled:g.default.enabled,children:(0,_.jsx)(c.A,{className:g.default.margined,id:"heatmap",children:(0,_.jsx)(t.A,{children:(0,_.jsx)(y.A,{inputData:{data:H,xLabels:P,yLabels:P},onTooltip:e=>{let{value:n,xAxisValue:a,yAxisValue:r}=e;return`${a} - ${r}\n${Math.round(100*n)/100} \xc5`},onClick:e=>{let{xAxisValue:n,yAxisValue:a}=e;return Y([n,a])},legendTitle:"RMSD (\xc5)",maxColor:"red",minColor:"blue",xTitle:"Frames",yTitle:"Frames"})})})}),(0,_.jsx)(u.A,{newViewer:B?{componentsState:[B,G],representationsState:[Q,X],selRef:W,viewerRef:w}:null,onNail:e=>Y(n=>e.selRef===n?null:n),onClose:e=>Y(n=>e.selRef===n?null:n)})]}):R||D?(0,_.jsx)(d.A,{}):j?"Something bad happened with the analysis data":"There is no topology"}},34088:(e,n,a)=>{a.d(n,{A:()=>m});var r=a(65043),t=a(43126),s=a(10939);const l="style_rnd__Txifm",i="style_floating-card__HHpby";var o=a(70579);const c=(0,r.lazy)(()=>Promise.all([a.e(7784),a.e(8095),a.e(3845),a.e(9070),a.e(247),a.e(7955),a.e(8677),a.e(3471),a.e(335),a.e(9117)]).then(a.bind(a,14696)));let d=0;const u=e=>{const n=e.viewerRef||(0,r.useRef)(null),[a,u]=(0,r.useState)(()=>{const{innerWidth:e,innerHeight:n,scrollY:a}=window,r=document.querySelector("main").offsetTop,t=Math.max(Math.min(e/4,n/4),150),s=1.5*t;return{width:2*t,height:s,x:0,y:n-r-s-20+a}});return(0,o.jsx)(t.p,{position:{x:a.x,y:a.y},size:{width:a.width,height:a.height},style:{zIndex:(d+=1,d)},className:l,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{u({...a})},onResizeStart:()=>{u({...a})},onDragStop:(e,n)=>{0===e.layerX&&0===e.layerY||a.x===n.x&&a.y===n.y||u({...a,x:n.x,y:n.y})},onResize:()=>n.current&&n.current.autoResize(),onResizeStop:(e,n,a,r,t)=>{u({width:a.style.width,height:a.style.height,...t})},children:(0,o.jsx)(s.A,{className:i,elevation:4,children:(0,o.jsx)(r.Suspense,{fallback:null,children:(0,o.jsx)(c,{className:i,ref:n,startsPlaying:!1,...e})})})})},m=e=>{let{newViewer:n,nailing:a=!0,onNail:t,onClose:s}=e;const[l,i]=(0,r.useState)([]),c=[...l],d=(0,r.useRef)([]);if(n){const e=()=>{let e=0;for(;e<999;){if(-1===d.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};n.id=e(),n.close=()=>{a&&i(e=>{const a=[...e],r=e.indexOf(n);return-1!==r&&a.splice(r,1),a}),s&&s(n),d.current.push(n.id)},a&&(n.nail=()=>{i(e=>[...e,n]),t&&t(n),d.current.push(n.id)}),c.push(n)}return c.map(e=>(0,o.jsx)(u,{...e},e.id))}},52527:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const r={widest:"style_widest__hZ7sO",margined:"style_margined__GphyO","margined-bottom":"style_margined-bottom__KpiYO",horizontal:"style_horizontal__1xLer",enabled:"style_enabled__Lh27c",disabled:"style_disabled__qDRCr"}},66565:(e,n,a)=>{a.d(n,{A:()=>t});var r=a(65043);const t=(e,n)=>{const a=(0,r.useRef)(),t=(0,r.useMemo)(()=>e(a.current),n);return a.current=t,t}}}]);
//# sourceMappingURL=3753.7838ace0.chunk.js.map