"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[2527,3753],{507:(e,n,a)=>{a.d(n,{A:()=>x});var t=a(65043),r=a(2260),c=a(32143),s=a(57972),i=a(83558),o=a(14256),l=a(67784),d=a(17392),u=a(92127),m=a(12639),f=a(17545);const h="style_horizontal__2DIWx",p="style_horizontal-margined__e9fQR";var g=a(70579);const y=[{label:"All residues",value:"residue_indices"},{label:"Interface residues",value:"interface_indices"}],x=e=>{let{interactions:n,selectedInteraction:a,setSelectedInteraction:x,selectedResidues:A,setSelectedResidues:b,selectedOrder:_,handleToggleOrder:v,firstOrderLabel:S,firstOrderTooltip:j,secondOrderLabel:w,secondOrderTooltip:N,toggleOrderTooltip:C,interfaceOnly:R=!1}=e;const I=n[a];return(0,g.jsxs)(t.Suspense,{fallback:(0,g.jsx)(f.A,{}),children:[(0,g.jsx)(r.A,{value:a,onChange:e=>{x(e.target.value)},className:p,children:n.map((e,n)=>(0,g.jsx)(c.A,{value:n,disabled:e.failed,children:e.label||e.name},n))}),A&&(0,g.jsx)(s.A,{value:A,onChange:e=>{b(e.target.value)},className:h,children:y.map((e,n)=>(0,g.jsx)(i.A,{value:e.value,control:(0,g.jsx)(o.A,{color:"primary"}),label:e.label,disabled:"All residues"===e.label&&R},n))}),void 0!==_&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.A,{label:S,title:j,value:_?I.agent_1:I.agent_2}),(0,g.jsx)(d.A,{title:C,onClick:()=>{v()},size:"large",children:(0,g.jsx)(u.g,{icon:m._qq})}),(0,g.jsx)(l.A,{label:w,title:N,value:_?I.agent_2:I.agent_1})]})]})}},10419:(e,n,a)=>{a.d(n,{A:()=>s});var t=a(65043),r=a(29449),c=a(71261);const s=()=>{const{topology:e}=(0,t.useContext)(r.f);return(0,t.useMemo)(()=>{if(!e)return[];const n=[];return e.iterchains().forEach(a=>{const t=a.metadataChainName,r=t?"".concat(t," (Chain ").concat(a.name,")"):"Chain ".concat(a.name),s=a.residues,i=a=>{const t=s.filter(e=>e.classification===a);if(0===t.length)return;const i=t.filter(e=>e.isCg);if(i.length>0){const t=i.map(e=>e.index),{rangedSelection:c}=e.residueIndices2Ngl(t);n.push({name:"".concat(r," - ").concat(a," polymer (coarse grain)"),selection:c,type:"spacefill",color:"chainid"})}const o=t.filter(e=>!e.isCg).map(e=>e.index),l=[...(0,c.Y$)(o)],d=l.filter(e=>e.length<=3);if(d.length>0){const t=d.reduce((e,n)=>e.concat(n),[]),{rangedSelection:c}=e.residueIndices2Ngl(t);n.push({name:"".concat(r," - ").concat(a," polymer (short)"),selection:c,type:"licorice",color:"chainid"})}const u=l.filter(e=>e.length>3);if(u.length>0){const t=u.reduce((e,n)=>e.concat(n),[]),{rangedSelection:c}=e.residueIndices2Ngl(t);n.push({name:"".concat(r," - ").concat(a," polymer"),selection:c,type:"cartoon",color:"chainid"});new Set(["dna","rna","nucleic"]).has(a)&&n.push({name:"".concat(r," - ").concat(a," bases"),selection:c,type:"base",color:"resname"})}};i("protein"),i("dna"),i("rna"),i("nucleic");const o=s.filter(e=>"ligand"===e.classification);if(o.length>0){const a=new Set(o.map(e=>e.referenceId));for(const t of a){const a=o.filter(e=>e.referenceId===t).map(e=>e.index),{rangedSelection:c}=e.residueIndices2Ngl(a);n.push({name:"".concat(r," - ligand ").concat(t),selection:c,type:"ball+stick",color:"element"})}}const l=new Set(["fatty","steroid"]),d=s.filter(e=>l.has(e.classification));if(d.length>0){const a=d.map(e=>e.index),{rangedSelection:t}=e.residueIndices2Ngl(a);n.push({name:"".concat(r," - lipids"),selection:t,type:"licorice",color:"grey",opacity:.5})}const u=s.filter(e=>"ion"===e.classification);if(u.length>0){const a=u.map(e=>e.index),{rangedSelection:t}=e.residueIndices2Ngl(a);n.push({name:"".concat(r," - ions"),selection:t,type:"spacefill",color:"element"})}const m=new Set(["solvent","unknown"]),f=s.filter(e=>m.has(e.classification));if(f.length>0){const a=f.map(e=>e.index),{rangedSelection:t}=e.residueIndices2Ngl(a);n.push({name:"".concat(r," - other"),selection:t,type:"licorice",color:"purple",opacity:.3})}}),n},[e])}},13826:(e,n,a)=>{a.r(n),a.d(n,{default:()=>j});var t=a(89379),r=a(65043),c=a(26494),s=a(85865),i=a(43845),o=a(58338),l=a(66565),d=a(10939),u=a(17545),m=a(34088),f=a(10419),h=a(92127),p=a(12639),g=a(29449),y=a(95747),x=a(52527),A=a(507),b=a(24310),_=a(70579);const v={base:["First frame","Second frame"],interface:["First frame interface","Second frame interface"]},S={base:["red","blue"],interface:[["orange","yellow"],["purple","green"]]},j=()=>{const{accessionAndMdNumber:e,metadata:n,interactions:a,topology:j}=(0,r.useContext)(g.f),w=(0,r.useRef)(null),N=(0,r.useMemo)(()=>{if(!a)return[{name:"Overall"}];a.forEach(e=>{e.label=e.name+" (interface residues)"});return[{name:"Overall"},...a]},[a]),C="".concat(y.nP,"/").concat(e,"/analyses"),R="".concat(C,"/rmsd-pairwise"),{loading:I,payload:z,error:O}=(0,o.A)(R),[E,M]=(0,r.useState)(0),k=N&&N[E],{interactionName:F,analysisName:T,analysisNote:D}=(0,r.useMemo)(()=>{if(!k||!z)return{};if(void 0!==z.data)return{interactionName:k.name};const e=z.find(e=>e.name===k.name);return{interactionName:k.name,analysisName:e.analysis,analysisNote:e.note}},[k,z]),V=T?"".concat(C,"/").concat(T):null,{loading:L,payload:q,error:Y}=(0,o.A)(V),H=(0,l.A)(e=>{if(!z)return e;if(!(void 0!==z.data))return q||e;const n=z.data.find(e=>e.name===F);return n||{error:'Dataset for interaction "'.concat(F,'" not found')}},[z,q,F]),{rmsds:P,AxesValues:W}=(0,r.useMemo)(()=>{if(!H)return{};const e=H.rmsds,a=e.length,t=Math.floor(n.mdFrames/(a-1));return{rmsds:e,AxesValues:Array(a).fill(void 0).map((e,n)=>n*t)}},[H,n]),[B,G]=(0,r.useState)(null),[K,Q]=(0,r.useState)(null);(0,r.useMemo)(()=>{if(!B)return Q(null);Q(e=>null===e?B.map((e,n)=>({name:"Frame ".concat(0===n?"A":"B"),frame:e})):(B.forEach((n,a)=>{const t=e[a];t.name="Frame ".concat(0===a?"A":"B"),t.frame=n}),[...e]))},[B]);const X=(0,f.A)(),[Z,$]=(0,r.useState)(null);return(0,r.useMemo)(()=>{if(!K)return $(null);const e=N[E],n=[{name:e.agent_1,interface:e.interface_indices_1},{name:e.agent_2,interface:e.interface_indices_2}];$(e=>{const a=[],r=E>0,c=!(!e||!e.find(e=>e.reference&&e.reference.includes(v.interface[0])));return null===e?K.forEach((e,n)=>{X.forEach(c=>{const s=(0,t.A)({},c);s.name="".concat(e.name," - ").concat(c.name),s.color=S.base[n],s.component=e.name,s.reference="".concat(v.base[n]," - ").concat(c.name),r&&(s.name+=" reference",s.opacity=.1),a.push(s)})}):K.forEach((n,t)=>{X.forEach(s=>{const i="".concat(v.base[t]," - ").concat(s.name),o=e.find(e=>e.reference===i);if(!o)throw new Error("No previous representation with reference ".concat(i));const l=o.name.split(" - ")[0];o.name=o.name.replace(l,n.name),o.component=n.name,r&&!c&&(o.name+=" reference",o.opacity=.1),!r&&c&&(o.name=o.name.replace(" reference",""),o.opacity=1),a.push(o)})}),r&&(!1===c?K.forEach((e,t)=>{n.forEach((n,r)=>{const c=n.interface&&j.residueIndices2Ngl(n.interface);a.push({name:"".concat(e.name," - ").concat(n.name," interface"),color:S.interface[t][r],selection:c.rangedSelection,type:"licorice",component:e.name,reference:"".concat(v.interface[t]," - ").concat(n.name)})})}):K.forEach((t,r)=>{n.forEach(n=>{const c=n.interface&&j.residueIndices2Ngl(n.interface),s="".concat(v.interface[r]," - ").concat(n.name),i=e.find(e=>e.reference===s);i.name="".concat(t.name," - ").concat(n.name," interface"),i.selection=c.rangedSelection,i.component=t.name,a.push(i)})})),e&&e.filter(e=>e.custom).forEach(e=>{e.component=K[0].name,a.push(e)}),a})},[K,j,N,E,X]),O?O.toString():Y?Y.toString():H&&H.error?H.error:H?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.A,{children:(0,_.jsxs)(c.A,{className:x.default.horizontal,children:[(0,_.jsx)(s.A,{variant:"h6",children:"Residues selection:"}),(0,_.jsx)(A.A,{interactions:N,selectedInteraction:E,setSelectedInteraction:M}),B&&(0,_.jsxs)("div",{children:[K&&K.map((e,n)=>(0,_.jsx)(i.A,{label:"Frame "+e.frame,style:{margin:"0.2em",backgroundColor:0===n?"red":"blue"}},n)),E>0&&K&&K.map((e,n)=>{const a=N[E];return[a.agent_1,a.agent_2].map((a,t)=>(0,_.jsx)(i.A,{label:"Frame "+e.frame+" - "+a,style:{margin:"0.2em",backgroundColor:0===t?0===n?"orange":"purple":0===n?"yellow":"green"}},t))})]})]})}),D&&(0,_.jsx)(d.A,{className:x.default.margined,children:(0,_.jsx)(c.A,{children:(0,_.jsxs)("div",{style:{fontWeight:"bold"},children:[(0,_.jsx)(h.g,{icon:p.zpE,size:"lg"})," "+D]})})}),(0,_.jsx)("div",{className:I||L?x.default.disabled:x.default.enabled,children:(0,_.jsx)(d.A,{className:x.default.margined,id:"heatmap",children:(0,_.jsx)(c.A,{children:(0,_.jsx)(b.A,{inputData:{data:P,xLabels:W,yLabels:W},onTooltip:e=>{let{value:n,xAxisValue:a,yAxisValue:t}=e;return"".concat(a," - ").concat(t,"\n").concat(Math.round(100*n)/100," \xc5")},onClick:e=>{let{xAxisValue:n,yAxisValue:a}=e;return G([n,a])},legendTitle:"RMSD (\xc5)",maxColor:"red",minColor:"blue",xTitle:"Frames",yTitle:"Frames"})})})}),(0,_.jsx)(m.A,{newViewer:K?{componentsState:[K,Q],representationsState:[Z,$],selRef:B,viewerRef:w}:null,onNail:e=>G(n=>e.selRef===n?null:n),onClose:e=>G(n=>e.selRef===n?null:n)})]}):I||L?(0,_.jsx)(u.A,{}):j?"Something bad happened with the analysis data":"There is no topology"}},34088:(e,n,a)=>{a.d(n,{A:()=>f});var t=a(89379),r=a(65043),c=a(43126),s=a(10939);const i="style_rnd__Txifm",o="style_floating-card__HHpby";var l=a(70579);const d=(0,r.lazy)(()=>Promise.all([a.e(7784),a.e(8095),a.e(3845),a.e(9070),a.e(247),a.e(7955),a.e(8677),a.e(4061),a.e(335),a.e(9117)]).then(a.bind(a,14696)));let u=0;const m=e=>{const n=e.viewerRef||(0,r.useRef)(null),[a,m]=(0,r.useState)(()=>{const{innerWidth:e,innerHeight:n,scrollY:a}=window,t=document.querySelector("main").offsetTop,r=Math.max(Math.min(e/4,n/4),150),c=1.5*r;return{width:2*r,height:c,x:0,y:n-t-c-20+a}});return(0,l.jsx)(c.p,{position:{x:a.x,y:a.y},size:{width:a.width,height:a.height},style:{zIndex:(u+=1,u)},className:i,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{m((0,t.A)({},a))},onResizeStart:()=>{m((0,t.A)({},a))},onDragStop:(e,n)=>{0===e.layerX&&0===e.layerY||a.x===n.x&&a.y===n.y||m((0,t.A)((0,t.A)({},a),{},{x:n.x,y:n.y}))},onResize:()=>n.current&&n.current.autoResize(),onResizeStop:(e,n,a,r,c)=>{m((0,t.A)({width:a.style.width,height:a.style.height},c))},children:(0,l.jsx)(s.A,{className:o,elevation:4,children:(0,l.jsx)(r.Suspense,{fallback:null,children:(0,l.jsx)(d,(0,t.A)({className:o,ref:n,startsPlaying:!1},e))})})})},f=e=>{let{newViewer:n,nailing:a=!0,onNail:c,onClose:s}=e;const[i,o]=(0,r.useState)([]),d=[...i],u=(0,r.useRef)([]);if(n){const e=()=>{let e=0;for(;e<999;){if(-1===u.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};n.id=e(),n.close=()=>{a&&o(e=>{const a=[...e],t=e.indexOf(n);return-1!==t&&a.splice(t,1),a}),s&&s(n),u.current.push(n.id)},a&&(n.nail=()=>{o(e=>[...e,n]),c&&c(n),u.current.push(n.id)}),d.push(n)}return d.map(e=>(0,l.jsx)(m,(0,t.A)({},e),e.id))}},52527:(e,n,a)=>{a.r(n),a.d(n,{default:()=>t});const t={widest:"style_widest__hZ7sO",margined:"style_margined__GphyO","margined-bottom":"style_margined-bottom__KpiYO",horizontal:"style_horizontal__1xLer",enabled:"style_enabled__Lh27c",disabled:"style_disabled__qDRCr"}},66565:(e,n,a)=>{a.d(n,{A:()=>r});var t=a(65043);const r=(e,n)=>{const a=(0,t.useRef)(),r=(0,t.useMemo)(()=>e(a.current),n);return a.current=r,r}}}]);
//# sourceMappingURL=3753.8f7c1528.chunk.js.map