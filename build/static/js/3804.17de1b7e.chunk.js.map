{"version":3,"file":"static/js/3804.17de1b7e.chunk.js","mappings":"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","sources":["utils/load-custom-element/index.js","pages/accession/trajectory/chains/chain-analysis/index.js","pages/accession/trajectory/metadata/index.js","utils/hash-from-string/index.js","utils/color-from-string/index.js","utils/merge-intervals/index.js","pages/accession/trajectory/chains/chain-analysis/process-ipscan-results/index.js","webpack://mdposit/./src/components/animated-card/style.module.css?d4d9","components/animated-card/index.js","../node_modules/@mui/material/Card/cardClasses.js","../node_modules/@mui/material/Card/Card.js","webpack://mdposit/./src/components/domains/style.module.css?a054","components/domains/index.js","pages/accession/trajectory/index.js","webpack://mdposit/./src/pages/accession/trajectory/chains/chain-analysis/style.module.css?b840","webpack://mdposit/./src/pages/accession/trajectory/metadata/style.module.css?1f4a","components/ngl-viewer/use-epitopes-representations/index.js","components/ngl-viewer/use-mutations-representations/index.js","../node_modules/@mui/material/InputAdornment/inputAdornmentClasses.js","../node_modules/@mui/material/InputAdornment/InputAdornment.js","webpack://mdposit/./src/pages/accession/trajectory/chains/style.module.css?611e","pages/accession/trajectory/chains/index.js","webpack://mdposit/./src/pages/accession/trajectory/style.module.css?3307"],"sourcesContent":["const loadCustomElement = importer => ({\n  async as(namespace) {\n    let _namespace = namespace;\n    // load custom element script\n    let customElement = await importer();\n    if (customElement.default) customElement = customElement.default;\n    // if no name was specified, use default provided by the custom element\n    if (\n      !_namespace &&\n      customElement.is &&\n      typeof customElement.is === 'string'\n    ) {\n      _namespace = customElement.is;\n    }\n    // if we get to this point without any name, just give up\n    if (!_namespace) {\n      throw new Error('Please a specify a name for custom element');\n    }\n    // check if not already defined\n    const alreadyExisting = window.customElements.get(_namespace);\n    if (alreadyExisting) {\n      // if it was, with the same element, everything is fine\n      if (alreadyExisting === customElement) return _namespace;\n      throw new Error('This name is already used by another component');\n    }\n    window.customElements.define(_namespace, customElement);\n    return _namespace;\n  },\n});\n\nexport default loadCustomElement;\n","import React, { memo, useEffect, useRef } from 'react';\n\nimport loadCustomElement from '../../../../../utils/load-custom-element';\n\nimport processIPScanResults from './process-ipscan-results';\n\nimport style from './style.module.css';\n\n// Keep elements out of any component, since they must be imported just once\nlet customElements = [];\n// This promise is further resolven when all protvista elements have finished the import process\nlet protvistaLoadedResolve;\nconst protvistaLoaded = new Promise(resolve => { protvistaLoadedResolve = resolve });\n\n// Load all protvista components together in a 'custom' way for them to work\nconst importProtVista = async () => {\n  if (customElements.length > 0) return;\n  customElements = [\n        // WARNING: We must make sure the manager is imported before the others\n        // Otherwise we get many errors of 'this.manager.register is not a function'\n        // The rest of components may be imported in any order\n        await loadCustomElement(() => import(\n            /* webpackChunkName: \"protvista-manager\" */ 'protvista-manager'),\n        ).as('protvista-manager'),\n        loadCustomElement(() => import(\n            /* webpackChunkName: \"protvista-sequence\" */ 'protvista-sequence'\n        )).as('protvista-sequence'),\n        loadCustomElement(() => import(\n            /* webpackChunkName: \"protvista-navigation\" */ 'protvista-navigation'\n        )).as('protvista-navigation'),\n        loadCustomElement(() => import(\n            /* webpackChunkName: \"protvista-coloured-sequence\" */ 'protvista-coloured-sequence'\n        )).as('protvista-coloured-sequence'),\n        loadCustomElement(() => import(\n            /* webpackChunkName: \"protvista-coloured-sequence\" */ 'protvista-coloured-sequence'\n        )).as('protvista-coloured-sequence'),\n        loadCustomElement(() => import(\n            /* webpackChunkName: \"protvista-interpro-track\" */ 'protvista-interpro-track'\n        )).as('protvista-interpro-track')\n  ];\n  // Wait until all protvista elements are loaded and then resolve the promise\n  await Promise.all(customElements);\n  protvistaLoadedResolve();\n};\n\n// Set the protvista interpro track independently, since it needs to keep its own reference\nconst InterproTrack = memo(({ match, length, shape, classAttr }) => {\n    // Set a reference to the protvista element\n    const protvistaRef = useRef();\n    // Update protvista element data after render\n    useEffect(() => {\n        const fillComponentWithData = async () => {\n            // Make sure the element has been imported already or it wont work\n            await protvistaLoaded;\n            // Load data in the reference\n            protvistaRef.current.data = [match];\n            protvistaRef.current.contributors = match.signatures || [];\n        }\n        fillComponentWithData();\n    }, []);\n    // Render the element\n    return (\n        <protvista-interpro-track\n            ref={protvistaRef}\n            length={length}\n            shape={shape}\n            class={classAttr}\n        />\n    );\n});\n\n// The result of this function is memoized since it is a heavy work\nconst ChainAnalyses = memo(({ chain, data, firstResidueNumber }) => {\n    // Import protvista elements in their 'custom' way\n    useEffect(() => {\n        importProtVista();\n    }, []);\n    // Mine data\n    const sequence = data.sequence;\n    const sequenceLength = sequence.length;\n    const interproscanData = data.interproscan;\n    // It may happen that interproscan data is missing when we have a small sequence\n    if (!interproscanData) return 'No InterProScan data';\n    const matches = interproscanData.results[0].matches;\n    const processedMatches = processIPScanResults(matches, firstResidueNumber);\n    // Set the end residue to be displayed\n    const displayEnd = firstResidueNumber + sequenceLength;\n    // Set an shifted sequence by adding null values at the begining\n    // This is the only way I figured out to offset the sequence\n    // Apparently protvista sequence components have no argument for this\n    const shiftedSequence = ' '.repeat(firstResidueNumber) + sequence;\n    return (\n        <protvista-manager\n            attributes=\"length displaystart displayend\"\n            length={sequenceLength}\n            chain={chain}\n        >\n        <protvista-navigation\n            rulerstart={firstResidueNumber}\n            displaystart={firstResidueNumber}\n            displayend={displayEnd}\n        />\n        <div className={style.entries}>\n            <protvista-sequence\n                sequence={shiftedSequence}\n                height=\"37\"\n            />\n            <protvista-coloured-sequence\n                sequence={shiftedSequence}\n                scale=\"hydrophobicity-scale\"\n                height=\"15\"\n            />\n            { processedMatches.length\n            ? processedMatches.map((match, index) => {\n                return (\n                <div key={index} >\n                    <span className={style.label}>{match.accession}</span>\n                    <InterproTrack\n                    match={match}\n                    shape=\"roundRectangle\"\n                    classAttr={match.signatures ? style['has-signatures'] : undefined}\n                    />\n                </div>\n                )})\n            : 'No entry was found for this sequence'\n            }\n        </div>\n        </protvista-manager>\n    );\n});\n\nexport default ChainAnalyses;\n","\nimport React, { useContext } from 'react';\n\n// Project metadata saved in this context by the accession component\nimport { ProjectCtx } from '../../../../contexts';\n\n// Visual components\nimport {\n    TextField,\n    InputAdornment,\n} from '@mui/material';\n\n// Import a function to round to cents\nimport { round2cents } from 'src/utils/auxiliar-functions';\n\n// CSS style\nimport style from './style.module.css';\n\n// Label to be shown when a metadata field is not available\nconst NA = 'Not available';\n\n// This component displays the trajectory metadata\nconst TrajectoryMetadata = () => {\n    // Load metadata from the project context\n    const { metadata } = useContext(ProjectCtx);\n    // When there is no metadata\n    if (!metadata) return 'No available metadata';\n    // Calculate frequency and multiply it by 1000 since it will be represented in picoseconds\n    const frequency = (metadata.FRAMESTEP && metadata.FRAMESTEP * 1000) || null;\n    // Render the whole metadata\n    return (<>\n        <fieldset>\n            <legend>Counts</legend>\n            <TextField\n                className={style['text-field']}\n                label=\"System atoms\"\n                title=\"Total number of atoms in the system\"\n                value={metadata.SYSTATS === null ? NA : metadata.SYSTATS}\n                disabled={metadata.SYSTATS === null}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Proteins atoms\"\n                title=\"Number of protein atoms in the system\"\n                value={metadata.PROTATS === null ? NA : metadata.PROTATS}\n                disabled={metadata.PROTATS === null}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Proteins residues\"\n                title=\"Number of protein residues in the system\"\n                value={metadata.PROT === null ? NA : metadata.PROT}\n                disabled={metadata.PROT === null}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Solvent molecules\"\n                title=\"Number of solvent molecules in the system\"\n                value={metadata.SOL === null ? NA : metadata.SOL}\n                disabled={metadata.SOL === null}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Positive ions\"\n                title=\"Number of positively charged ions in the system\"\n                value={metadata.NA === null ? NA : metadata.NA}\n                disabled={metadata.NA === null}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Negative ions\"\n                title=\"Number of negatively charged ions in the system\"\n                value={metadata.CL === null ? NA : metadata.CL}\n                disabled={metadata.CL === null}\n            />\n        </fieldset>\n        <fieldset>\n            <legend>System box</legend>\n            <TextField\n                className={style['text-field']}\n                label=\"Type\"\n                title=\"Box type\"\n                value={metadata.BOXTYPE === null ? NA : metadata.BOXTYPE}\n                disabled={metadata.BOXTYPE === null}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Size X\"\n                title=\"Simulated system box X dimension\"\n                value={\n                    metadata.BOXSIZEX === null\n                    ? NA\n                    : round2cents(metadata.BOXSIZEX)\n                }\n                disabled={metadata.BOXSIZEX === null}\n                InputProps={{\n                    endAdornment: (\n                    <InputAdornment variant=\"filled\" position=\"end\">\n                        nm\n                    </InputAdornment>\n                    ),\n                }}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Size Y\"\n                title=\"Simulated system box Y dimension\"\n                value={\n                    metadata.BOXSIZEY === null\n                    ? NA\n                    : round2cents(metadata.BOXSIZEY)\n                }\n                disabled={metadata.BOXSIZEY === null}\n                InputProps={{\n                    endAdornment: (\n                    <InputAdornment variant=\"filled\" position=\"end\">\n                        nm\n                    </InputAdornment>\n                    ),\n                }}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Size Z\"\n                title=\"Simulated system box Z dimension\"\n                value={\n                    metadata.BOXSIZEZ === null\n                    ? NA\n                    : round2cents(metadata.BOXSIZEZ)\n                }\n                disabled={metadata.BOXSIZEZ === null}\n                InputProps={{\n                    endAdornment: (\n                    <InputAdornment variant=\"filled\" position=\"end\">\n                        nm\n                    </InputAdornment>\n                    ),\n                }}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Volume\"\n                title=\"Simulated system box volume\"\n                value={\n                    metadata.BOXSIZEX === null ||\n                    metadata.BOXSIZEY === null ||\n                    metadata.BOXSIZEZ === null\n                    ? NA\n                    : round2cents(\n                        metadata.BOXSIZEX * metadata.BOXSIZEY * metadata.BOXSIZEZ,\n                        )\n                }\n                disabled={\n                    !(metadata.BOXSIZEX && metadata.BOXSIZEY && metadata.BOXSIZEZ)\n                }\n                InputProps={{\n                    endAdornment: (\n                    <InputAdornment variant=\"filled\" position=\"end\">\n                        nm³\n                    </InputAdornment>\n                    ),\n                }}\n            />\n        </fieldset>\n        <fieldset>\n            <legend>Simulation</legend>\n            <TextField\n                className={style['text-field']}\n                label=\"Length\"\n                title=\"Simulation length\"\n                value={metadata.timeLength === null ? NA : round2cents(metadata.timeLength)}\n                disabled={metadata.timeLength === null}\n                InputProps={{\n                    endAdornment: (\n                    <InputAdornment variant=\"filled\" position=\"end\">\n                        ns\n                    </InputAdornment>\n                    ),\n                }}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Timestep\"\n                title=\"Simulation timestep\"\n                value={metadata.TIMESTEP === null ? NA : metadata.TIMESTEP}\n                disabled={metadata.TIMESTEP === null}\n                InputProps={{\n                    endAdornment: (\n                    <InputAdornment variant=\"filled\" position=\"end\">\n                        fs\n                    </InputAdornment>\n                    ),\n                }}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Snapshots\"\n                title=\"Number of snapshots\"\n                value={metadata.mdFrames === null ? NA : metadata.mdFrames}\n                disabled={metadata.mdFrames === null}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Frequency\"\n                title=\"Frequency of snapshots\"\n                value={\n                    frequency === null\n                    ? NA\n                    : frequency\n                }\n                disabled={frequency === null}\n                InputProps={{\n                    endAdornment: (\n                    <InputAdornment variant=\"filled\" position=\"end\">\n                        ps\n                    </InputAdornment>\n                    ),\n                }}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Force fields\"\n                title=\"Force fields\"\n                value={metadata.FF === null ? NA : metadata.FF.join(', ')}\n                disabled={metadata.FF === null}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Temperature\"\n                title=\"Temperature\"\n                value={metadata.TEMP === null ? NA : metadata.TEMP}\n                disabled={metadata.TEMP === null}\n                InputProps={{\n                    endAdornment: (\n                    <InputAdornment variant=\"filled\" position=\"end\">\n                        K\n                    </InputAdornment>\n                    ),\n                }}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Water type\"\n                title=\"Water type\"\n                value={metadata.WAT === null ? NA : metadata.WAT}\n                disabled={metadata.WAT === null}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Ensemble\"\n                title=\"Simulation ensemble\"\n                value={metadata.ENSEMBLE === null ? NA : metadata.ENSEMBLE}\n                disabled={metadata.ENSEMBLE === null}\n            />\n            {/*\n            <TextField\n                className={style['text-field']}\n                label=\"Pressure coupling\"\n                title=\"Pressure coupling method\"\n                value={metadata.PCOUPLING === null ? NA : metadata.PCOUPLING}\n                disabled={metadata.PCOUPLING === null}\n            />\n            <TextField\n                className={style['text-field']}\n                label=\"Membrane\"\n                title=\"Membrane type\"\n                value={metadata.MEMBRANE === null ? NA : metadata.MEMBRANE}\n                disabled={metadata.MEMBRANE === null}\n            />*/}\n        </fieldset>\n    </>);\n};\n\nexport default TrajectoryMetadata;","const hashFromString = string => {\n  let hash = 0;\n  for (let i = 0; i < string.length; i++) {\n    hash = (hash << 5) - hash + string.charCodeAt(i);\n    hash |= 0;\n  }\n  return hash;\n};\n\nexport default hashFromString;\n","import hashFromString from '../hash-from-string';\n\nconst colorFromString = string => {\n  const hash = hashFromString(string);\n  const hue = Math.abs(hash % 360);\n  const saturation = Math.abs(hash % 20) + 40; // 50% give or take 10%\n  const lightness = Math.abs(hash % 10) + 45; // 50% give or take 5%\n  return `hsla(${hue}, ${saturation}%, ${lightness}%, 1)`;\n};\n\nexport default colorFromString;\n","const startAccessorDefault = (interval, value) =>\n  Number.isFinite(value) ? (interval[0] = value) : interval[0];\nconst endAccessorDefault = (interval, value) =>\n  Number.isFinite(value) ? (interval[1] = value) : interval[1];\n\nconst mergeIntervals = (\n  intervals,\n  startAccessor = startAccessorDefault,\n  endAccessor = endAccessorDefault,\n) => {\n  const sortedIntervals = Array.from(intervals).sort(\n    (a, b) => startAccessor(a) - startAccessor(b),\n  );\n  let output = [];\n  let current;\n  for (const interval of sortedIntervals) {\n    if (!current) {\n      // first loop\n      current = interval;\n    } else if (endAccessor(current) < startAccessor(interval)) {\n      // current is not within interval\n      output.push(current);\n      current = interval;\n    } else {\n      // current is within, or contiguous to interval\n      endAccessor(\n        current,\n        Math.max(endAccessor(current), endAccessor(interval)),\n      );\n    }\n  }\n  if (current) output.push(current);\n  return output;\n};\n\nexport default mergeIntervals;\n","import colorFromString from '../../../../../../utils/color-from-string';\nimport mergeIntervals from '../../../../../../utils/merge-intervals';\n\n// Renumerate residue numbers to make them match the actual chain they come from\nconst shiftLocations = (fragments, shift) => {\n  fragments.forEach(fragment => {\n    fragment.start += shift -1;\n    fragment.end += shift -1;\n  })\n  return fragments;\n}\n\nconst processLocations = (locations, firstResidueNumber = 1) =>\n  locations.map(location => ({\n    fragments: shiftLocations(location['location-fragments'], firstResidueNumber),\n  }));\n\nconst processIPScanResults = (matches, firstResidueNumber) => {\n  const processed = [];\n  // for all the matches\n  for (const match of matches || []) {\n    // if the match has an entry, consider it as a signature of the entry\n    if (match.signature.entry) {\n      let existing = processed.find(\n        m => m.accession === match.signature.entry.accession,\n      );\n      // if the entry hadn't been stored yet, create it now\n      if (!existing) {\n        existing = {\n          accession: match.signature.entry.accession,\n          db: 'InterPro',\n          signatures: [],\n          locations: [],\n          color: colorFromString(match.signature.entry.accession),\n        };\n        processed.push(existing);\n      }\n      const locations = processLocations(match.locations, firstResidueNumber);\n      existing.locations = mergeIntervals(\n        [...existing.locations, ...locations],\n        (interval, value) =>\n          Number.isFinite(value)\n            ? (interval.fragments[0].start = value)\n            : interval.fragments[0].start,\n        (interval, value) =>\n          Number.isFinite(value)\n            ? (interval.fragments[0].end = value)\n            : interval.fragments[0].end,\n      );\n      // add the match as a signature of that entry\n      existing.signatures.push({\n        accession: match.signature.accession,\n        db: match.signature.signatureLibraryRelease.library,\n        locations,\n        color: existing.color.replace(', 1)', ', 0.25)'),\n      });\n    } else {\n      // the match doesn't have entry, it is not integrated\n      processed.push({\n        accession: match.signature.accession,\n        db: match.signature.signatureLibraryRelease.library,\n        locations: processLocations(match.locations, firstResidueNumber),\n        color: colorFromString(match['model-ac']),\n      });\n    }\n  }\n\n  // sort them\n  processed\n    // secondary sort by start position\n    .sort((a, b) => a.locations[0].fragments[0].start - b.locations[0].fragments[0].start)\n    // primary sort by number of signatures\n    .sort((a, b) => (b.signatures || []).length - (a.signatures || []).length);\n\n  return processed;\n};\n\nexport default processIPScanResults;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"style_container__M9GCG\"};","import React, { useLayoutEffect, useRef, forwardRef } from 'react';\nimport { Card } from '@mui/material';\n\nimport reducedMotion from '../../utils/reduced-motion';\n\nimport style from './style.module.css';\n\nconst KEYFRAMES = { opacity: [0, 1] };\n\nif (!reducedMotion()) {\n  KEYFRAMES.transform = ['translateY(50px)', 'translateY(0)'];\n}\n\nconst ANIMATION_OPTIONS = {\n  fill: 'both',\n  easing: 'cubic-bezier(0, .99, .56, 1.1)',\n  duration: 500,\n};\n\n// Make the card appear and slide softly from down to up when the page is loaded\nconst AnimatedCard = forwardRef(({ overrideComponent, ...props }, ref) => {\n  const containerRef = useRef(null);\n\n  useLayoutEffect(() => {\n    const node = containerRef.current && containerRef.current.firstElementChild;\n    if (!(node && node.animate)) return;\n\n    const index = Array.from(\n      document.querySelectorAll('main section'),\n    ).findIndex(section => node === section);\n\n    const animation = node.animate(KEYFRAMES, {\n      ...ANIMATION_OPTIONS,\n      delay: index * 150,\n    });\n\n    return () => animation.cancel();\n  }, []);\n\n  const Component = overrideComponent ? 'section' : Card;\n\n  return (\n    <div ref={containerRef} className={style.container}>\n      <Component component=\"section\" {...props} ref={ref} />\n    </div>\n  );\n});\n\nexport default AnimatedCard;\n","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardUtilityClass(slot) {\n  return generateUtilityClass('MuiCard', slot);\n}\nconst cardClasses = generateUtilityClasses('MuiCard', ['root']);\nexport default cardClasses;","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"raised\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport chainPropTypes from '@mui/utils/chainPropTypes';\nimport composeClasses from '@mui/utils/composeClasses';\nimport styled from '../styles/styled';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport Paper from '../Paper';\nimport { getCardUtilityClass } from './cardClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getCardUtilityClass, classes);\n};\nconst CardRoot = styled(Paper, {\n  name: 'MuiCard',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(() => {\n  return {\n    overflow: 'hidden'\n  };\n});\nconst Card = /*#__PURE__*/React.forwardRef(function Card(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCard'\n  });\n  const {\n      className,\n      raised = false\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    raised\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardRoot, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : undefined,\n    ref: ref,\n    ownerState: ownerState\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Card.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the card will use raised styling.\n   * @default false\n   */\n  raised: chainPropTypes(PropTypes.bool, props => {\n    if (props.raised && props.variant === 'outlined') {\n      return new Error('MUI: Combining `raised={true}` with `variant=\"outlined\"` has no effect.');\n    }\n    return null;\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default Card;","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"style_card__Ocl+v\",\"chips\":\"style_chips__40Fvj\",\"title\":\"style_title__tHkJW\"};","import React, {\n  useContext,\n  useState,\n  useMemo,\n  useEffect,\n  Suspense,\n} from 'react';\n\nimport Card from '../animated-card';\nimport { CardContent, Chip } from '@mui/material';\n\nimport { ProjectCtx } from '../../contexts';\n\nimport useDefaultRepresentations from '../ngl-viewer/use-default-representations';\nimport useMutationsRepresentations from '../ngl-viewer/use-mutations-representations';\nimport useEpitopesRepresentations from '../ngl-viewer/use-epitopes-representations';\n\nimport style from './style.module.css';\n\nimport Loading from '../loading';\n\nimport { rangedSelectionParser } from '../../utils/auxiliar-functions';\n\n// Show floatting bubles with domain names\n// When a bubble is selected the domain is represented\nconst Domains = ({ setRepresentations, setInitialFocus }) => {\n  // Get the current project data\n  const {\n    metadata,\n    proteinReferences,\n    ligandReferences,\n    topology,\n    interactions\n  } = useContext(ProjectCtx);\n\n  // Set the first domain (the overall) as the default selected domain\n  const [selectedDomain, setSelectedDomain] = useState(0);\n  const [overlapedDomain, setOverlapedDomain] = useState(null);\n\n  // Get pre-build representations\n  const defaultRepresentations = useDefaultRepresentations();\n  const mutationsRepresentation = useMutationsRepresentations();\n  const epitopesRepresentation = useEpitopesRepresentations();\n\n  // The domains strucutre is:\n  // domains: [\n  //    {\n  //      \"name\" : \"Example domain name\",\n  //      \"description\": \"Example domain description\"\n  //      \"representations\" : [\n  //        {\n  //          \"name\" : \"Region 1\",\n  //          \"selection\" : \"16-316\",\n  //          \"type\": \"ball+stick\",\n  //          \"color\": \"element\",\n  //          \"opacity\": 0.5,\n  //          ...\n  //        },\n  //        {\n  //          \"name\" : \"Region 2\",\n  //          \"selection\" : \"418-439\"\n  //        }\n  //      ]\n  //    },\n  // ]\n  const domains = useMemo(() => {\n    if (!topology) return;\n    // Set the overall domain\n    const overallDomain = {\n      name: 'Overall',\n      representations: defaultRepresentations,\n    };\n    // Get custom domains in metadata\n    const customDomains = metadata.CUSTOMS || [];\n    // Get domains constructed from interactions\n    const interactionDomains = [];\n    if (interactions) {\n      interactions.forEach(interaction => {\n        if (interaction.failed) return;\n        // Add a new domain for each new agent and skip repeated agents\n        const agent1 = {\n          name: interaction.agent_1,\n          atoms: interaction.atom_indices_1,\n        };\n        const agent2 = {\n          name: interaction.agent_2,\n          atoms: interaction.atom_indices_2,\n        };\n        [agent1, agent2].forEach(agent => {\n          const current = interactionDomains.find(domain => domain.name === agent.name);\n          if (current) return;\n          const nglSelection = topology.atomIndices2Ngl(agent.atoms);\n          interactionDomains.push({\n            name: agent.name,\n            representations: [\n              {\n                name: agent.name,\n                selection: nglSelection,\n                type: 'licorice',\n              },\n            ],\n          });\n        });\n      });\n    }\n    // Get domains from protein references\n    // Skip those whose name matches with an interacting agent or custom domain\n    const referenceDomains = [];\n    proteinReferences && proteinReferences.forEach(proteinReference => {\n      const referenceId = proteinReference.uniprot;\n      // Start by creating a domain for the whole reference\n      const wholeReferenceResidueIndices = topology.getReferenceResidueIndices(referenceId);\n      const wholeReferenceNglSelection = topology.residueIndices2Ngl(wholeReferenceResidueIndices);\n      const wholeReferenceDomain = {\n        name: proteinReference.name,\n        representations: [{\n          name: proteinReference.name,\n          selection: wholeReferenceNglSelection.rangedSelection\n        }],\n      };\n      referenceDomains.push(wholeReferenceDomain);\n      // Collect all domains in protein reference data\n      let referenceDataDomains = [];\n      // Domains in the 'domains' filed are automatically mined from uniprot\n      if (proteinReference.domains) referenceDataDomains = referenceDataDomains.concat(proteinReference.domains);\n      // Domains in the 'custom_domains' filed are added by hand in the database and they are not common\n      if (proteinReference.custom_domains) referenceDataDomains = referenceDataDomains.concat(proteinReference.custom_domains);\n      // If there are not domains at all then stop here\n      if (referenceDataDomains.length === 0) return;\n      // ----------------------------------------------------------------------------------------\n      // These domains are only specified for the protein reference sequence\n      // Residue selections must be mapped back to the current topology for each domain\n      // Custom reference domains may contain a 'representations' field instead of a 'selection' field\n      referenceDataDomains.forEach(domain => {\n        const domainName = domain.name;\n        // Discard the domain if its name matches an already existing domain\n        if (customDomains.find(domain => domain.name === domainName)) return;\n        if (interactionDomains.find(domain => domain.name === domainName))\n          return;\n        // Discard the domain if its name matches the reference name\n        // This is quite usual: some references have domains which are basically the whole thing\n        // There may be a difference in the pole residues, but it is redundant anyway\n        // Note that we already add a domain for the whole reference\n        if (proteinReference.name === domainName) return;\n        const mappedDomain = {\n          name: proteinReference.name + ' - ' + domainName,\n          description: domain.description, // It may not have description\n          representations: [],\n        };\n        // Set a function to modify a representation by parsing its selections to NGL\n        const parseRepresentationSelection = representation => {\n          const selection = representation.selection;\n          const parsedSelection = rangedSelectionParser(selection);\n          // WARNING: A single protein reference residue may correspond to multiple topology residues\n          const mappedSelection = topology.getReferenceResidueIndices(referenceId, parsedSelection);\n          // Representations with a selection not present in topology are discarded\n          if (!mappedSelection || mappedSelection.length === 0) return;\n          // Transform the residue indices to a NGL selection\n          const { rangedSelection: nglSelection, small } = topology.residueIndices2Ngl(mappedSelection);\n          const newRepresentation = { ...representation };\n          newRepresentation.selection = nglSelection;\n          // residueIndices2Ngl returns 'small' = true when there are series of 3 residues or less\n          // These small residue selections will be not represented in cartoon due to an NGL bug\n          // https://github.com/nglviewer/ngl/issues/223\n          if (small) newRepresentation.type = 'licorice';\n          mappedDomain.representations.push(newRepresentation);\n        };\n        if (domain.selection) {\n          const domainRepresentation = { name: domainName, selection: domain.selection };\n          parseRepresentationSelection(domainRepresentation);\n        }\n        if (domain.representations) {\n          domain.representations.forEach(parseRepresentationSelection);\n        }\n        // Domains whose representatios have been all discarded are also discarded\n        if (mappedDomain.representations.length > 0)\n          referenceDomains.push(mappedDomain);\n      });\n    });\n    // Create a new domains for every ligand reference\n    // Skip those whose name matches with an interacting agent or custom domain\n    ligandReferences && ligandReferences.forEach(ligandReference => {\n      // Set the ligand name as the domain name\n      const domainName = ligandReference.name;\n      // Discard the domain if its name matches an already existing domain\n      if (customDomains.find(domain => domain.name === domainName)) return;\n      if (interactionDomains.find(domain => domain.name === domainName))\n        return;\n      // Get the NGL selection for ligand residues\n      const residueIndices = topology.getReferenceResidueIndices(ligandReference.pubchem);\n      if (!residueIndices) throw new Error(`Ligand reference \"${ligandReference.pubchem}\" not found in topology`);\n      const { rangedSelection: nglSelection } = topology.residueIndices2Ngl(residueIndices);\n      // Set the ligand domain\n      const ligandDomain = {\n        name: domainName,\n        // description: \n        representations: [\n          {\n            name: domainName,\n            selection: nglSelection,\n            type: 'ball+stick',\n            color: 'element'\n          }\n        ],\n      };\n      // Add it to the reference domains list\n      referenceDomains.push(ligandDomain);\n    });\n    // Put all domains together\n    const domains = [\n      overallDomain,\n      ...customDomains,\n      ...referenceDomains,\n      ...interactionDomains,\n    ];\n    // Add the mutations domain if possible\n    if (mutationsRepresentation) {\n      const mutationsDomain = {\n        name: 'Mutations',\n        description:\n          'Show the entropies of each residue according to the bibliography',\n        representations: mutationsRepresentation,\n      };\n      domains.push(mutationsDomain);\n    }\n    if (epitopesRepresentation) {\n      const epitopesDomain = {\n        name: 'Epitopes',\n        description:\n          'Show regions considered as epitopes according to the bibliography',\n        representations: epitopesRepresentation,\n      };\n      domains.push(epitopesDomain);\n    }\n    // Reset the selected domain\n    setSelectedDomain(0);\n    return domains;\n  }, [\n    metadata,\n    defaultRepresentations,\n    mutationsRepresentation,\n    epitopesRepresentation,\n    topology,\n    proteinReferences,\n    interactions,\n  ]);\n\n  // Add the selected domain (if any) configuration to the viewer\n  useEffect(() => {\n    if (!domains) return;\n    const currentSelectedDomain = domains[selectedDomain];\n    const currentSelectedRepresentations = currentSelectedDomain.representations.map(\n      rep => {\n        return { ...rep };\n      },\n    );\n    const currentOverlapedDomain =\n      overlapedDomain !== null && domains[overlapedDomain];\n    const currentOverlapedRepresentations = currentOverlapedDomain\n      ? currentOverlapedDomain.representations.map(rep => {\n          return {\n            ...rep,\n            type: 'spacefill',\n            opacity: rep.opacity ? rep.opacity * 0.2 : 0.2,\n          };\n        })\n      : [];\n    // Set an NGL representation for each domain representation\n    const representations = [\n      ...currentSelectedRepresentations,\n      ...currentOverlapedRepresentations,\n    ];\n    // Add a representation with the whole strucutre in grey color and with the opacity reduced\n    if (currentSelectedDomain.name !== 'Overall')\n      representations.push({\n        name: 'Reference',\n        color: 'grey',\n        opacity: 0.1,\n      });\n\n    // Set the NGL selection for the focus\n    const focusSelection = `(${\n      currentSelectedDomain.representations\n        .map(rep => rep.selection)\n        .join(') or (')\n    })`;\n    const initialFocus = { sele: focusSelection };\n    setRepresentations(representations);\n    setInitialFocus(initialFocus);\n  }, [domains, selectedDomain, overlapedDomain, setRepresentations, setInitialFocus]);\n\n  // If project data is still loading then stop here\n  if (!domains) return <Loading />;\n\n  return (\n    <Suspense fallback={<Loading />}>\n      {domains && domains.length > 0 && (\n        <Card className={style.card}>\n          <CardContent>\n            <a className={style.title}>Domains</a>\n            {domains.map((dom, d) => (\n              <Chip\n                key={dom.name}\n                title={dom.description}\n                className={style.chips}\n                label={dom.name}\n                variant={\n                  selectedDomain === d || overlapedDomain === d\n                    ? undefined\n                    : 'outlined'\n                }\n                color={\n                  selectedDomain === d\n                    ? 'primary'\n                    : overlapedDomain === d\n                    ? 'secondary'\n                    : undefined\n                }\n                onClick={event => {\n                  // When the keys control, shift or command (ios) are hold while clicking\n                  const overlap =\n                    event.shiftKey || event.ctrlKey || event.metaKey;\n                  if (overlap)\n                    return setOverlapedDomain(previous => {\n                      if (previous === d) return null;\n                      if (selectedDomain === d) return null;\n                      return d;\n                    });\n                  else\n                    return setSelectedDomain(previous => {\n                      if (previous === d) return 0;\n                      if (overlapedDomain === d) setOverlapedDomain(null);\n                      return d;\n                    });\n                }}\n              />\n            ))}\n          </CardContent>\n        </Card>\n      )}\n    </Suspense>\n  );\n};\n\nexport default Domains;\n","import React, { useState } from 'react';\n// A hook to track whenever some element is on screen\nimport { useInView } from 'react-intersection-observer';\n\n// Visual components\nimport Card from '../../../components/animated-card';\nimport { CardContent } from '@mui/material';\n\n// Viewer available domains\nimport Domains from '../../../components/domains';\n// The molecular viewer\nimport ViewerWithControls from '../../../components/viewer-with-controls';\n// Component for the metadata table\nimport TrajectoryMetadata from './metadata';\n// Component for the chains analysis\nimport ChainsAnalysis from './chains';\n\n// CSS style\nimport style from './style.module.css';\n\n// Define permanent options for the \"useInView\"\nconst useInViewOptions = { triggerOnce: true, rootMargin: '100px' };\n\nconst Trajectory = () => {\n  // useInView acts as a React hook\n  // Track if the NGL viewer (nglRef) and the analyses (nightingaleRef) are on screen\n  // The status (e.g. isNglVisible) is returned true/false when the element is in/out the screen respectively\n  const [nglRef, isNglVisible] = useInView(useInViewOptions);\n  const [nightingaleRef, isNightingaleVisible] = useInView(useInViewOptions);\n\n  // Set the representations to be displayed in the viewer\n  const [ representations, setRepresentations ] = useState(null);\n\n  // Set the viewer initial focus\n  const [ initialFocus, setInitialFocus ] = useState(null);\n\n  return (\n    <>\n      <Domains setRepresentations={setRepresentations} setInitialFocus={setInitialFocus} />\n      <Card className={style['ngl-card']} ref={nglRef}>\n        {/* Render the NGL viewer when it is on screen*/}\n        {isNglVisible ? (\n          <ViewerWithControls\n            className={style.container}\n            representationsState={[ representations, setRepresentations ]}\n            initialFocus={initialFocus}\n          />\n        ) : (\n          <div style={{ height: '50vh' }} />\n        )}\n      </Card>\n      <Card className={style.card}>\n        <CardContent>\n          <details>\n            <summary className={style['trajectory-metadata-title']}>\n              Trajectory metadata\n            </summary>\n            <br />\n            <span>\n              {/* Renders the metadata table */}\n              <TrajectoryMetadata />\n            </span>\n          </details>\n        </CardContent>\n      </Card>\n      <Card className={style.card} ref={nightingaleRef}>\n        {isNightingaleVisible ? (\n          <CardContent>\n            {/* Render chain analyses */}\n            <ChainsAnalysis />\n          </CardContent>\n        ) : (\n          <div style={{ height: '50vh' }} />\n        )}\n      </Card>\n    </>\n  );\n};\n\nexport default Trajectory;\n","// extracted by mini-css-extract-plugin\nexport default {\"entries\":\"style_entries__T4f7r\",\"has-signatures\":\"style_has-signatures__4CW-U\",\"label\":\"style_label__UT0BE\"};","// extracted by mini-css-extract-plugin\nexport default {\"text-field\":\"style_text-field__34cWZ\"};","import { useContext, useMemo } from 'react';\n\nimport { ProjectCtx } from '../../../contexts';\n\n// Use this hook to get the memoized NGL default representations\nconst useEpitopesRepresentations = () => {\n  // Get the current project data\n  const { topology } = useContext(ProjectCtx);\n  // Set the representations for the NGL viewer\n  const epitopesRepresentations = useMemo(() => {\n    if (!topology) return;\n    // Check that at least one of the protein references has epitopes\n    const anyReferenceEpitopes = topology.proteinReferences.some(\n      reference => !!reference.epitopes,\n    );\n    if (!anyReferenceEpitopes) return;\n    // Get the residues on each reference epitopes in the current topology numeration\n    const mappedResiduesPerReference = topology.proteinReferences.map(reference => {\n      // Get the reference name and epitopes\n      const referenceId = reference.uniprot;\n      const referenceEpitopes = reference.epitopes;\n      if (!referenceEpitopes) return [];\n      // Save all epitope residues together and eliminate duplicates\n      const epitopeResidues = Object.values(referenceEpitopes).map(\n        epitope => epitope.residues,\n      );\n      const allResidues = [].concat.apply([], epitopeResidues);\n      const uniqueResidues = Array.from(new Set(allResidues));\n      const mappedResidues = topology.getReferenceResidueIndices(\n        referenceId,\n        uniqueResidues,\n      );\n      if (!mappedResidues) return [];\n      return mappedResidues;\n    });\n    // Join all previous mapped residues together\n    const allMappedResidues = [].concat.apply(\n      [],\n      Object.values(mappedResiduesPerReference),\n    );\n    // Transform mapped residues indices to an NGL selection\n    const { rangedSelection, small } = topology.residueIndices2Ngl(\n      allMappedResidues,\n    );\n    const reps = [\n      {\n        name: 'Epitopes',\n        selection: rangedSelection || 'none',\n        type: small ? 'licorice' : 'cartoon',\n        color: 'purple',\n      },\n    ];\n    return reps;\n  }, [topology]);\n\n  return epitopesRepresentations;\n};\n\nexport default useEpitopesRepresentations;\n","import { useContext, useMemo } from 'react';\n\nimport { ColormakerRegistry } from 'ngl';\n\nimport { color as d3color, scaleLinear } from 'd3';\n\nimport { ProjectCtx } from '../../../contexts';\n\n// Set the color of each residue in the NGL representation\n// WARNING: Grey looks better than white because the background may be white and resdiues are hard to see\nconst greyColorPlan = ['grey', 'yellow', 'red'];\n\n// Use this hook to get the memoized NGL default representations\nconst useMutationsRepresentations = () => {\n  // Get project data\n  const { topology: topologyManager } = useContext(ProjectCtx);\n\n  // Set the representations for the NGL viewer\n  const mutationRepresentations = useMemo(() => {\n    if (!topologyManager) return;\n    // Check that at least 1 of the references has entropies\n    const anyReferenceMutations = topologyManager.proteinReferences.some(\n      reference => !!reference.entropies,\n    );\n    if (!anyReferenceMutations) return;\n\n    // Get the entorpies of each reference\n    // Save the logarithmic values on each reference\n    const entropiesPerReference = topologyManager.proteinReferences.map(reference => {\n      if (!reference.entropies) return [];\n      const logarithmicEntropies = reference.entropies.map(entropy =>\n        Math.log(entropy + 0.0001),\n      );\n      reference.logarithmicEntropies = logarithmicEntropies;\n      return logarithmicEntropies;\n    });\n\n    // Save all array values together just to check the minimum and maximum values\n    const allEntropies = [].concat.apply([], entropiesPerReference);\n    const max = Math.max(...allEntropies);\n    const min = Math.min(...allEntropies);\n\n    // Set the color scale according to the maximum and minimum means\n    const colorScale = scaleLinear()\n      .range(greyColorPlan)\n      .domain([min, (min + max) / 2, max]);\n\n    const colorScheme = ColormakerRegistry.addScheme(function(params) {\n      this.atomColor = atom => {\n        // Find the residue index and then the entropy for this residue\n        // WARNING: atom.residueIndex starts the count at 0 although it may seem that starts at 1\n        // WARNING: It may happen that the first residue is a capping terminal and it is skipped\n        // WARNING: The cartoon representation would skip the non-standard residue and start by 1\n        const residueIndex = atom.residueIndex;\n        const residue = topologyManager.getResidueByIndex(residueIndex);\n        const referenceId = residue.referenceId;\n        // If no reference residue was found then paint it white\n        if (!referenceId) return parseInt('ffffff', 16);\n        // get the corresponding entropy\n        // -1 because the residue 'x' would be the index 'x-1' in the array\n        const reference = residue.referenceData;\n        const entropies = reference.logarithmicEntropies;\n        if (!entropies || entropies.length === 0) return parseInt('ffffff', 16);\n        const entropy = entropies[residue.referenceNumber - 1];\n        // If there is no entropy at this point probably there is something wrong with the map\n        if (!entropy) return parseInt('ffffff', 16);\n        // Calculate the interpolated rgb for this value\n        // The interpolated color comes in rbg format\n        const hexColor = d3color(colorScale(entropy)).formatHex();\n        // The color interpolation returns a string like '#000000'\n        // We remove the first character ('#') and parse it to integer from hexadecimal\n        const color = parseInt(hexColor.substring(1), 16);\n        return color;\n      };\n    });\n\n    const reps = [\n      { name: 'Mutations', color: 'custom', customScheme: colorScheme },\n    ];\n    return reps;\n  }, [topologyManager]);\n\n  return mutationRepresentations;\n};\n\nexport default useMutationsRepresentations;\n","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getInputAdornmentUtilityClass(slot) {\n  return generateUtilityClass('MuiInputAdornment', slot);\n}\nconst inputAdornmentClasses = generateUtilityClasses('MuiInputAdornment', ['root', 'filled', 'standard', 'outlined', 'positionStart', 'positionEnd', 'disablePointerEvents', 'hiddenLabel', 'sizeSmall']);\nexport default inputAdornmentClasses;","'use client';\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _span;\nconst _excluded = [\"children\", \"className\", \"component\", \"disablePointerEvents\", \"disableTypography\", \"position\", \"variant\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport capitalize from '../utils/capitalize';\nimport Typography from '../Typography';\nimport FormControlContext from '../FormControl/FormControlContext';\nimport useFormControl from '../FormControl/useFormControl';\nimport styled from '../styles/styled';\nimport inputAdornmentClasses, { getInputAdornmentUtilityClass } from './inputAdornmentClasses';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst overridesResolver = (props, styles) => {\n  const {\n    ownerState\n  } = props;\n  return [styles.root, styles[`position${capitalize(ownerState.position)}`], ownerState.disablePointerEvents === true && styles.disablePointerEvents, styles[ownerState.variant]];\n};\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    disablePointerEvents,\n    hiddenLabel,\n    position,\n    size,\n    variant\n  } = ownerState;\n  const slots = {\n    root: ['root', disablePointerEvents && 'disablePointerEvents', position && `position${capitalize(position)}`, variant, hiddenLabel && 'hiddenLabel', size && `size${capitalize(size)}`]\n  };\n  return composeClasses(slots, getInputAdornmentUtilityClass, classes);\n};\nconst InputAdornmentRoot = styled('div', {\n  name: 'MuiInputAdornment',\n  slot: 'Root',\n  overridesResolver\n})(({\n  theme,\n  ownerState\n}) => _extends({\n  display: 'flex',\n  height: '0.01em',\n  // Fix IE11 flexbox alignment. To remove at some point.\n  maxHeight: '2em',\n  alignItems: 'center',\n  whiteSpace: 'nowrap',\n  color: (theme.vars || theme).palette.action.active\n}, ownerState.variant === 'filled' && {\n  // Styles applied to the root element if `variant=\"filled\"`.\n  [`&.${inputAdornmentClasses.positionStart}&:not(.${inputAdornmentClasses.hiddenLabel})`]: {\n    marginTop: 16\n  }\n}, ownerState.position === 'start' && {\n  // Styles applied to the root element if `position=\"start\"`.\n  marginRight: 8\n}, ownerState.position === 'end' && {\n  // Styles applied to the root element if `position=\"end\"`.\n  marginLeft: 8\n}, ownerState.disablePointerEvents === true && {\n  // Styles applied to the root element if `disablePointerEvents={true}`.\n  pointerEvents: 'none'\n}));\nconst InputAdornment = /*#__PURE__*/React.forwardRef(function InputAdornment(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiInputAdornment'\n  });\n  const {\n      children,\n      className,\n      component = 'div',\n      disablePointerEvents = false,\n      disableTypography = false,\n      position,\n      variant: variantProp\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const muiFormControl = useFormControl() || {};\n  let variant = variantProp;\n  if (variantProp && muiFormControl.variant) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (variantProp === muiFormControl.variant) {\n        console.error('MUI: The `InputAdornment` variant infers the variant prop ' + 'you do not have to provide one.');\n      }\n    }\n  }\n  if (muiFormControl && !variant) {\n    variant = muiFormControl.variant;\n  }\n  const ownerState = _extends({}, props, {\n    hiddenLabel: muiFormControl.hiddenLabel,\n    size: muiFormControl.size,\n    disablePointerEvents,\n    position,\n    variant\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(FormControlContext.Provider, {\n    value: null,\n    children: /*#__PURE__*/_jsx(InputAdornmentRoot, _extends({\n      as: component,\n      ownerState: ownerState,\n      className: clsx(classes.root, className),\n      ref: ref\n    }, other, {\n      children: typeof children === 'string' && !disableTypography ? /*#__PURE__*/_jsx(Typography, {\n        color: \"text.secondary\",\n        children: children\n      }) : /*#__PURE__*/_jsxs(React.Fragment, {\n        children: [position === 'start' ? ( /* notranslate needed while Google Translate will not fix zero-width space issue */_span || (_span = /*#__PURE__*/_jsx(\"span\", {\n          className: \"notranslate\",\n          children: \"\\u200B\"\n        }))) : null, children]\n      })\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? InputAdornment.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component, normally an `IconButton` or string.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * Disable pointer events on the root.\n   * This allows for the content of the adornment to focus the `input` on click.\n   * @default false\n   */\n  disablePointerEvents: PropTypes.bool,\n  /**\n   * If children is a string then disable wrapping in a Typography component.\n   * @default false\n   */\n  disableTypography: PropTypes.bool,\n  /**\n   * The position this adornment should appear relative to the `Input`.\n   */\n  position: PropTypes.oneOf(['end', 'start']).isRequired,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The variant to use.\n   * Note: If you are using the `TextField` component or the `FormControl` component\n   * you do not have to set this manually.\n   */\n  variant: PropTypes.oneOf(['filled', 'outlined', 'standard'])\n} : void 0;\nexport default InputAdornment;","// extracted by mini-css-extract-plugin\nexport default {\"popup\":\"style_popup__-6ZHj\",\"portal-container\":\"style_portal-container__B70Nq\",\"chain-analysis-list\":\"style_chain-analysis-list__TzUHq\",\"trajectory-metadata-title\":\"style_trajectory-metadata-title__7GlAT\"};","import React, {\n    memo,\n    useContext,\n    useEffect,\n} from 'react';\n\n// Visual components\nimport { Typography } from '@mui/material';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleRight } from '@fortawesome/free-solid-svg-icons';\n\n// Recover the metadata saved in this context by the accession script\nimport { ProjectCtx } from '../../../../contexts';\n\n// The single chain analysis component, using protvista\nimport ChainAnalysis from './chain-analysis';\n\n// Check if reduced motion is requested\nimport reducedMotion from '../../../../utils/reduced-motion';\n\n// CSS style\nimport style from './style.module.css';\n\nconst dbMap = new Map([\n    ['InterPro', 'InterPro'],\n    // special cases\n    ['TIGRFAM', 'tigrfams'],\n    ['PROSITE_PROFILES', 'profile'],\n    ['PROSITE_PATTERNS', 'prosite'],\n    ['SUPERFAMILY', 'ssf'],\n    ['GENE3D', 'cathgene3d'],\n    // just the same, but lowercase\n    ['CDD', 'cdd'],\n    ['HAMAP', 'hamap'],\n    ['PANTHER', 'panther'],\n    ['PFAM', 'pfam'],\n    ['PIRSF', 'pirsf'],\n    ['PRINTS', 'prints'],\n    ['SFLD', 'sfld'],\n    ['SMART', 'smart'],\n]);\n\nconst ChainsAnalysis = memo(() => {\n    // Load chains references and the topology manager\n    const { topology: topologyManager } = useContext(ProjectCtx);\n    // Portals create a window where a web page is pre rendered without navigating to\n    // You can navigate to this web page by clicking on the portal\n    // NOTE: see https://web.dev/hands-on-portals for tutorial on Portals\n    useEffect(() => {\n        // bypass React for DOM alteration\n        // document.createElement is a different way to create React elements\n        const popup = document.createElement('div');\n        popup.className = style.popup;\n        let portal, portalContainer;\n        if ('HTMLPortalElement' in window) {\n            portalContainer = document.createElement('div');\n            portalContainer.className = style['portal-container'];\n            portal = document.createElement('portal');\n            portalContainer.appendChild(portal);\n            popup.appendChild(portalContainer);\n            portal.addEventListener('click', () => {\n            const bcr = portal.getBoundingClientRect();\n            portal.animate(\n                { transform: [`scale(1) translate(${-bcr.left}px, ${-bcr.top}px)`] },\n                {\n                    duration: reducedMotion() ? 0 : 1000,\n                    easing: 'cubic-bezier(.23,-0.26,0,1)',\n                    fill: 'both',\n                },\n            ).onfinish = () => {\n                // TODO: whenever the bug removing history when activating a portal is\n                // TODO: fixed, use this piece of code\n                // portal.activate();\n                // TODO: in the meantime... (yes, it does an ugly flash 🤷‍)\n                window.location.href = portal.src;\n            };\n            });\n        }\n    \n        const link = document.createElement('a');\n        link.rel = 'noopener';\n        link.target = '_blank';\n        popup.appendChild(link);\n    \n        let displayed = false;\n        let timeout;\n    \n        const clearPopup = () => {\n            link.textContent = '';\n            link.href = '';\n            if (portal) {\n                portalContainer.style.display = 'none';\n                portal.src = null;\n                portal.removeAttribute('src');\n            }\n            popup.style.visibility = 'hidden';\n            popup.style.transform = 'translate(0, 0)';\n        };\n    \n        const popupEnterHandle = () => clearTimeout(timeout);\n        const popupLeaveHandle = () => (timeout = setTimeout(clearPopup, 1000));\n    \n        popup.addEventListener('mouseenter', popupEnterHandle);\n        popup.addEventListener('mouseleave', popupLeaveHandle);\n    \n        // event handler for events emitted by the nightingale/protvista components\n        const handler = event => {\n            if (!event.detail) return;\n            let bcrTarget, bcrPopup, bcrTrack;\n            switch (event.detail.eventtype) {\n            case 'mouseover':\n                if (!event.detail.feature.accession) return;\n    \n                clearTimeout(timeout);\n    \n                const IP_DB = dbMap.get(event.detail.feature.db);\n                const href = IP_DB &&\n                    `https://www.ebi.ac.uk/interpro/entry/${IP_DB}/${event.detail.feature.accession}/`;\n                if (portal && IP_DB) portal.src = href;\n                link.textContent = `${event.detail.feature.db} - ${event.detail.feature.accession}`;\n                link.href = href;\n                if (IP_DB) {\n                if (portal) portalContainer.style.display = 'block';\n                } else {\n                if (portal) {\n                    portalContainer.style.display = 'none';\n                    portal.removeAttribute('src');\n                    portal.src = null;\n                }\n                link.removeAttribute('href');\n                }\n    \n                bcrTarget = event.detail.target.getBoundingClientRect();\n                bcrPopup = popup.getBoundingClientRect();\n                bcrTrack = event.detail.target\n                    .closest('protvista-interpro-track')\n                    .getBoundingClientRect();\n    \n                // x\n                const translateX = Math.min(\n                Math.max(\n                    // center the popup in the middle of the region\n                    bcrTarget.left + bcrTarget.width / 2 - bcrPopup.width / 2,\n                    // make sure the popup doesn't overflow to the left\n                    bcrTrack.left,\n                ),\n                // make sure the popup doesn't overflow to the right\n                bcrTrack.right - bcrPopup.width,\n                );\n                // y\n                const translateY = window.scrollY + bcrTarget.top - bcrPopup.height;\n    \n                popup.style.visibility = 'visible';\n                popup.style.transform = `translate(${translateX}px, ${translateY}px)`;\n    \n                displayed = true;\n                break;\n            case 'mouseout':\n                if (!displayed) return; // no need to do DOM operation, it's already invisible\n                timeout = setTimeout(clearPopup, 1000);\n    \n                displayed = false;\n                break;\n            default:\n            // ignore\n            }\n        };\n        document.body.appendChild(popup);\n        window.addEventListener('change', handler);\n        // clean-up logic\n        return () => {\n            window.removeEventListener('change', handler);\n            popup.removeEventListener('mouseenter', popupEnterHandle);\n            popup.removeEventListener('mouseleave', popupLeaveHandle);\n            document.body.removeChild(popup);\n        };\n    }, []);\n    // If the topology manager is not ready yet then return here\n    if (!topologyManager) return;\n  \n    // Render the functional analysis with a brief introduction\n    // Here chainReferences contains the \"analysis\" data\n    // WARNING: Use the topology manager chain references, not the project manager references\n    // WARNING: Otherwise, chain references mya no contain the \"chains\" field in the first render\n    const chainReferences = topologyManager && topologyManager.chainReferences;\n    if (chainReferences && chainReferences.length > 0) {\n        return (\n        <>\n            {/* Brief introduction */}\n            <Typography variant=\"h5\">Protein functional analysis</Typography>\n            <br />\n            <Typography variant=\"subtitle2\">\n            <strong>{chainReferences.length}</strong> chains were analysed.\n            </Typography>\n            <ul className={style['chain-analysis-list']}>\n            {/* Here, main data is displayed */}\n            {(() => {\n                // Build all components in a list so we can sort them by chain at the end\n                const chainComponents = [];\n                chainReferences.forEach(chainReference => {\n                    const chainLetters = chainReference.chains;\n                    chainLetters.forEach(chainLetter => {\n                        // Get some data using the topology manager when it is available\n                        let name = '';\n                        let firstResidueNumber = 1;\n                        if (topologyManager) {\n                            const chain = topologyManager.getChainByName(chainLetter);\n                            name = chain.metadataChainName;\n                            firstResidueNumber = chain.residueNumbers[0];\n                        }\n                        chainComponents.push(\n                            <li key={chainLetter}>\n                                <Typography variant=\"h6\">\n                                <FontAwesomeIcon icon={faAngleRight} />\n                                {` Chain ${chainLetter} ${name ? '(' + name + ')' : ''}`}\n                                </Typography>\n                                {/* the main visual asset */}\n                                <ChainAnalysis\n                                    chain={chainLetter}\n                                    data={chainReference}\n                                    firstResidueNumber={firstResidueNumber}\n                                />\n                            </li>\n                        );\n                    });\n                });\n                // Sort chains alphabetically\n                return chainComponents.sort((a, b) => a.key.localeCompare(b.key));\n            })()}\n            </ul>\n            <Typography variant=\"body2\">\n            Data generated using{' '}\n            <a\n                href=\"https://www.ebi.ac.uk/\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                EBI\n            </a>\n            's{' '}\n            <a\n                href=\"https://www.ebi.ac.uk/interpro/about/interproscan/\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                InterProScan service\n            </a>{' '}\n            and visualised using the{' '}\n            <a\n                href=\"https://ebi-webcomponents.github.io/nightingale/\"\n                target=\"_blank\"\n                rel=\"noreferrer noopener\"\n            >\n                Nightingale visualisation library\n            </a>\n            .\n            </Typography>\n        </>\n        );\n    } else return 'No chain analyses available';\n});\n\nexport default ChainsAnalysis;","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"style_card__T1Y+D\",\"ngl-card\":\"style_ngl-card__596lW\",\"container\":\"style_container__VwOAd\",\"trajectory-metadata-title\":\"style_trajectory-metadata-title__MQcG8\"};"],"names":["importer","as","namespace","_namespace","customElement","default","is","Error","alreadyExisting","window","customElements","get","define","protvistaLoadedResolve","protvistaLoaded","Promise","resolve","InterproTrack","memo","_ref","match","length","shape","classAttr","protvistaRef","useRef","useEffect","async","current","data","contributors","signatures","fillComponentWithData","_jsx","ref","class","_ref2","chain","firstResidueNumber","loadCustomElement","all","importProtVista","sequence","sequenceLength","interproscanData","interproscan","matches","results","processedMatches","processIPScanResults","displayEnd","shiftedSequence","repeat","_jsxs","attributes","children","rulerstart","displaystart","displayend","className","style","entries","height","scale","map","index","label","accession","undefined","NA","TrajectoryMetadata","metadata","useContext","ProjectCtx","frequency","FRAMESTEP","_Fragment","TextField","title","value","SYSTATS","disabled","PROTATS","PROT","SOL","CL","BOXTYPE","BOXSIZEX","round2cents","InputProps","endAdornment","InputAdornment","variant","position","BOXSIZEY","BOXSIZEZ","timeLength","TIMESTEP","mdFrames","FF","join","TEMP","WAT","ENSEMBLE","string","hash","i","charCodeAt","hashFromString","hue","Math","abs","saturation","lightness","concat","startAccessorDefault","interval","Number","isFinite","endAccessorDefault","intervals","startAccessor","arguments","endAccessor","sortedIntervals","Array","from","sort","a","b","output","push","max","processLocations","locations","location","fragments","shift","forEach","fragment","start","end","shiftLocations","processed","signature","entry","existing","find","m","db","color","colorFromString","mergeIntervals","signatureLibraryRelease","library","replace","KEYFRAMES","opacity","reducedMotion","transform","ANIMATION_OPTIONS","fill","easing","duration","forwardRef","overrideComponent","props","_objectWithoutProperties","_excluded","containerRef","useLayoutEffect","node","firstElementChild","animate","document","querySelectorAll","findIndex","section","animation","_objectSpread","delay","cancel","Component","Card","component","getCardUtilityClass","slot","generateUtilityClass","generateUtilityClasses","CardRoot","styled","Paper","name","overridesResolver","styles","root","overflow","React","inProps","useDefaultProps","raised","other","_objectWithoutPropertiesLoose","ownerState","_extends","classes","composeClasses","useUtilityClasses","clsx","elevation","setRepresentations","setInitialFocus","proteinReferences","ligandReferences","topology","interactions","selectedDomain","setSelectedDomain","useState","overlapedDomain","setOverlapedDomain","defaultRepresentations","useDefaultRepresentations","mutationsRepresentation","useMutationsRepresentations","epitopesRepresentation","useEpitopesRepresentations","domains","useMemo","overallDomain","representations","customDomains","CUSTOMS","interactionDomains","interaction","failed","agent_1","atoms","atom_indices_1","agent_2","atom_indices_2","agent","domain","nglSelection","atomIndices2Ngl","selection","type","referenceDomains","proteinReference","referenceId","uniprot","wholeReferenceResidueIndices","getReferenceResidueIndices","wholeReferenceNglSelection","residueIndices2Ngl","wholeReferenceDomain","rangedSelection","referenceDataDomains","custom_domains","domainName","mappedDomain","description","parseRepresentationSelection","representation","parsedSelection","rangedSelectionParser","mappedSelection","small","newRepresentation","ligandReference","residueIndices","pubchem","ligandDomain","mutationsDomain","epitopesDomain","currentSelectedDomain","currentSelectedRepresentations","rep","currentOverlapedDomain","initialFocus","sele","Suspense","fallback","Loading","CardContent","dom","d","Chip","onClick","event","shiftKey","ctrlKey","metaKey","previous","useInViewOptions","triggerOnce","rootMargin","Trajectory","nglRef","isNglVisible","useInView","nightingaleRef","isNightingaleVisible","Domains","ViewerWithControls","container","representationsState","card","ChainsAnalysis","some","reference","epitopes","mappedResiduesPerReference","referenceEpitopes","epitopeResidues","Object","values","epitope","residues","allResidues","apply","uniqueResidues","Set","mappedResidues","allMappedResidues","greyColorPlan","topologyManager","entropies","entropiesPerReference","logarithmicEntropies","entropy","log","allEntropies","min","colorScale","scaleLinear","range","customScheme","ColormakerRegistry","addScheme","params","this","atomColor","atom","residueIndex","residue","getResidueByIndex","parseInt","referenceData","referenceNumber","hexColor","d3color","formatHex","substring","getInputAdornmentUtilityClass","_span","InputAdornmentRoot","capitalize","disablePointerEvents","theme","display","maxHeight","alignItems","whiteSpace","vars","palette","action","active","inputAdornmentClasses","positionStart","hiddenLabel","marginTop","marginRight","marginLeft","pointerEvents","disableTypography","variantProp","muiFormControl","useFormControl","size","slots","FormControlContext","Provider","Typography","dbMap","Map","popup","createElement","portal","portalContainer","appendChild","addEventListener","bcr","getBoundingClientRect","left","top","onfinish","href","src","link","rel","target","timeout","displayed","clearPopup","textContent","removeAttribute","visibility","popupEnterHandle","clearTimeout","popupLeaveHandle","setTimeout","handler","detail","bcrTarget","bcrPopup","bcrTrack","eventtype","feature","IP_DB","closest","translateX","width","right","translateY","scrollY","body","removeEventListener","removeChild","chainReferences","chainComponents","chainReference","chains","chainLetter","getChainByName","metadataChainName","residueNumbers","FontAwesomeIcon","icon","faAngleRight","ChainAnalysis","key","localeCompare"],"sourceRoot":""}