"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[2492,4313,9117],{10939:(e,t,a)=>{a.d(t,{A:()=>u});var n=a(89379),r=a(80045),o=a(65043),s=a(12110),l=a(17604);const i="style_container__M9GCG";var c=a(70579);const d=["overrideComponent"],m={opacity:[0,1]};(0,l.A)()||(m.transform=["translateY(50px)","translateY(0)"]);const h={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},u=(0,o.forwardRef)((e,t)=>{let{overrideComponent:a}=e,l=(0,r.A)(e,d);const u=(0,o.useRef)(null);(0,o.useLayoutEffect)(()=>{const e=u.current&&u.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),a=e.animate(m,(0,n.A)((0,n.A)({},h),{},{delay:150*t}));return()=>a.cancel()},[]);const p=a?"section":s.A;return(0,c.jsx)("div",{ref:u,className:i,children:(0,c.jsx)(p,(0,n.A)((0,n.A)({component:"section"},l),{},{ref:t}))})})},12110:(e,t,a)=>{a.d(t,{A:()=>g});var n=a(58168),r=a(98587),o=a(65043),s=a(58387),l=a(98610),i=a(34535),c=a(98206),d=a(63336),m=a(92532),h=a(72372);function u(e){return(0,h.Ay)("MuiCard",e)}(0,m.A)("MuiCard",["root"]);var p=a(70579);const f=["className","raised"],x=(0,i.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),g=o.forwardRef(function(e,t){const a=(0,c.b)({props:e,name:"MuiCard"}),{className:o,raised:i=!1}=a,d=(0,r.A)(a,f),m=(0,n.A)({},a,{raised:i}),h=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},u,t)})(m);return(0,p.jsx)(x,(0,n.A)({className:(0,s.A)(h.root,o),elevation:i?8:void 0,ref:t,ownerState:m},d))})},12492:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n={paper:"style_paper__O1iVe",tablecard:"style_tablecard__QrT9j",legend_container:"style_legend_container__p+ZJk",legend:"style_legend__YWoMk",nglcard:"style_nglcard__1Ns8a",margined:"style_margined__hC4Uz",container:"style_container__yFiwR",selectedrow:"style_selectedrow__hSkEf",graph:"style_graph__f4I+1","graph-placeholder":"style_graph-placeholder__vZj+5"}},48940:(e,t,a)=>{a.d(t,{G:()=>r,c:()=>n});const n=e=>{if(!e)return;return e.reduce((e,t)=>e+t,0)/e.length},r=e=>{if(!e)return;const t=e.reduce((e,t)=>e+t,0),a=e.length,n=t/a,r=Math.sqrt(e.map(e=>Math.pow(e-n,2)).reduce((e,t)=>e+t)/a);return{mean:n,stdv:r}}},51962:(e,t,a)=>{a.d(t,{A:()=>C});var n=a(98587),r=a(58168),o=a(65043),s=a(58387),l=a(98610),i=a(60061),c=a(33064),d=a(59662),m=a(70579);const h=(0,d.A)((0,m.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),u=(0,d.A)((0,m.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),p=(0,d.A)((0,m.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var f=a(6803),x=a(98206),g=a(34535),v=a(61475),y=a(92532),A=a(72372);function b(e){return(0,A.Ay)("MuiCheckbox",e)}const _=(0,y.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),j=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],w=(0,g.Ay)(c.A,{shouldForwardProp:e=>(0,v.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,t["size".concat((0,f.A)(a.size))],"default"!==a.color&&t["color".concat((0,f.A)(a.color))]]}})(e=>{let{theme:t,ownerState:a}=e;return(0,r.A)({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===a.color?t.vars.palette.action.activeChannel:t.vars.palette[a.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,i.X4)("default"===a.color?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==a.color&&{["&.".concat(_.checked,", &.").concat(_.indeterminate)]:{color:(t.vars||t).palette[a.color].main},["&.".concat(_.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),k=(0,m.jsx)(u,{}),M=(0,m.jsx)(h,{}),S=(0,m.jsx)(p,{}),C=o.forwardRef(function(e,t){var a,i;const c=(0,x.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=k,color:h="primary",icon:u=M,indeterminate:p=!1,indeterminateIcon:g=S,inputProps:v,size:y="medium",className:A}=c,_=(0,n.A)(c,j),C=p?g:u,z=p?g:d,N=(0,r.A)({},c,{color:h,indeterminate:p,size:y}),E=(e=>{const{classes:t,indeterminate:a,color:n,size:o}=e,s={root:["root",a&&"indeterminate","color".concat((0,f.A)(n)),"size".concat((0,f.A)(o))]},i=(0,l.A)(s,b,t);return(0,r.A)({},t,i)})(N);return(0,m.jsx)(w,(0,r.A)({type:"checkbox",inputProps:(0,r.A)({"data-indeterminate":p},v),icon:o.cloneElement(C,{fontSize:null!=(a=C.props.fontSize)?a:y}),checkedIcon:o.cloneElement(z,{fontSize:null!=(i=z.props.fontSize)?i:y}),ownerState:N,ref:t,className:(0,s.A)(E.root,A)},_,{classes:E}))})},60676:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(65043),r=a(26494);const o="style_horizontal__KW-k9",s="style_vertical__YKrT2",l="style_heatmap-horizontal__HjdIF",i="style_heatmap-vertical__utgJY";var c=a(85941),d=a(70579);const m=e=>{let{title:t="",maxValue:a=1,minValue:m=0,colorPlan:h,splits:u=19,vertical:p=!1,flip:f=!1,className:x}=e;const{legendData:g,legendLabels:v}=(0,n.useMemo)(()=>{const e=[];if(m===a)e.push(m);else for(let r=m;r<=a;r+=(a-m)/u)e.push(r);let t=e.map(e=>Math.round(e));if(t.length>1)for(let a=1;new Set(t).size<t.length;a++)t=e.map(e=>Math.round(e*10**a)/10**a);const n=p?e.map(e=>[e]):[e];return f&&(n.reverse(),t.reverse()),{legendData:n,legendLabels:t}},[a,m,u,p]);return(0,d.jsxs)(r.A,{className:x||(p?s:o),children:[t,(0,d.jsx)(c.A,{data:g,xAxisValues:p?[""]:v,yAxisValues:p?v:[""],colorPlan:h,flippedXAxisValues:!1,className:p?i:l})]})}},77691:(e,t,a)=>{a.d(t,{jY:()=>r,q_:()=>n});const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bold 10px sans-serif";const a=(n.canvas||(n.canvas=document.createElement("canvas"))).getContext("2d");a.font=t;return a.measureText(e).width},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bold 10px sans-serif";const a=document.createElement("div"),n=document.createTextNode(e);return a.appendChild(n),Object.assign(a.style,{font:t,position:"absolute",visibility:"hidden",height:"auto",width:"auto","white-space":"nowrap"}),document.body.appendChild(a),{width:a.clientWidth,height:a.clientHeight}}},85941:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(65043),r=a(77691),o=a(57631),s=a(13232),l=a(70579);const i="normal 10px sans-serif",c="normal 14px sans-serif",d=(0,n.memo)(e=>{let{data:t,xAxisValues:a=[],yAxisValues:d=[],xAxisLabel:m,yAxisLabel:h,verticalPadding:u=0,colorPlan:p=["red","white","blue"],colorScale:f,onTooltip:x,onClick:g,flippedXAxisValues:v=!0,margin:y={top:10,right:10,bottom:10,left:10},className:A,NaNColor:b="#ffffff",minValue:_,maxValue:j,addBorder:w=!0}=e;if(!t)throw new Error("Data is missing. Data is mandatory for the heatmap representation");if(a.length!==new Set(a).size)throw console.log(a),new Error("Duplicated values in the X axis. See console logs");if(d.length!==new Set(d).size)throw console.log(d),new Error("Duplicated values in the Y axis. See console logs");0===a.length&&(a=Array.from(Array(t[0].length).keys())),0===d.length&&(d=Array.from(Array(t[0].length).keys()));const k=[].concat(...t),M=k.filter(e=>!isNaN(e)),S=null!==j&&void 0!==j?j:Math.max(...M),C=null!==_&&void 0!==_?_:Math.min(...M),z=[].concat(...Array(t.length).fill(a)),N=[];for(const n of d)N.push(...Array(a.length).fill(n));const E=[];for(const n in k)E.push({v:k[n],x:z[n],y:N[n]});const L=(0,n.useRef)(null),V=(0,n.useRef)(null),[,R]=(0,n.useState)(null),D=(0,r.jY)("|",i).height,P=(0,r.jY)("|",c).height+9,T=Math.max(...a.map(e=>(0,r.q_)(e,i)))+9,F=Math.max(...d.map(e=>(0,r.q_)(e,i))),Y=m?P:0,H=h?P+9:0,I=v?T+Y:D+Y,W=1===d.length?Math.max(F,(0,r.q_)(h,c)):F+H,O={top:y.top,right:y.right,bottom:I+y.bottom,left:W+y.left};return(0,n.useEffect)(()=>{V.current&&V.current.forEach(e=>e.remove());const e=L.current,{clientWidth:n,clientHeight:r}=e.parentElement,l=n-O.left-O.right,i=r-O.top-O.bottom,c=l/(1.05*(v?D:T)),A=i/(1.05*D),_=Math.ceil(a.length/c),j=Math.ceil(d.length/A),k=document.createElement("CANVAS");(0,o.Ltv)(e).node().appendChild(k);const M=(0,o.Ltv)(k).attr("id","canvas").attr("width",l).attr("height",i).style("position","absolute").style("top",O.top+"px").style("left",O.left+"px").style("cursor",g?"pointer":void 0),z=M.node().getContext("2d"),N=(0,o.Ltv)(e).append("svg").attr("id","svg").attr("viewBox",[0,0,n,r]),E=(0,o.WH)().range([O.left,l+O.left]).domain(a).paddingInner(0),P=N.append("g").attr("transform","translate(0,"+(i+O.top)+")").call((0,o.l78)(E).tickFormat((e,t)=>t%_===0?e:"")).selectAll("text");v&&P.style("text-anchor","end").attr("dx","-9px").attr("dy","-9px").attr("transform","rotate(-90)"),N.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",O.left+l/2).attr("y",O.top+i+I).text(m);const F=(0,o.WH)().domain(d).range([O.top,i+O.top]).padding(u);N.append("g").attr("transform","translate("+O.left+", 0)").call((0,o.V4s)(F).tickFormat((e,t)=>t%j===0?e:"")),1===d.length?N.append("text").attr("class","y label").attr("text-anchor","start").attr("x",0).attr("y",y.top+i).text(h):N.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-(O.top+i/2)).attr("y",y.left+H-9-9).attr("transform","rotate(-90)").text(h);const Y=e=>{if(isNaN(e))return b;return(f||(0,o.m4Y)().range(p).domain([C,(C+S)/2,S]))(e)},W=E.bandwidth(),B=F.bandwidth();t.forEach((e,t)=>{const n=F(d[t])-O.top;e.forEach((e,t)=>{const r=E(a[t])-O.left;z.fillStyle=Y(e),z.fillRect(r,n,W,B),w&&(z.strokeStyle=Y(e),z.lineWidth=1,z.strokeRect(r,n,W,B))})});const X=e=>{const n=k.getBoundingClientRect(),r=e.clientX-n.left,o=e.clientY-n.top;let s=Math.floor(r/E.step()),l=Math.floor(o/F.step());const i=t[0].length-1;s<0&&(s=0),s>i&&(s=i);const c=t.length-1;l<0&&(l=0),l>c&&(l=c);const m=a[s],h=d[l];return{xIndex:s,yIndex:l,value:t[l][s],xAxisValue:m,yAxisValue:h}};let q;x&&(q=document.createElement("div"),Object.assign(q.style,{display:"none",position:"absolute",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),e.appendChild(q),k.onmousemove=t=>{const a=X(t);q.innerText=x(a),q.style.display="inline-block";const{x:n,y:r}=(0,s.L)(e,q,{x:t.clientX,y:t.clientY},3);q.style.left=n+"px",q.style.top=r+"px"},k.onmouseleave=()=>{q.style.display="none"}),g&&(k.onmousedown=e=>{const t=X(e);g(t)}),V.current=q?[N,M,q]:[N,M];const U=()=>{R({innerWidth:window.innerWidth,innerHeight:window.innerHeight})};return window.addEventListener("resize",U),()=>{window.removeEventListener("resize",U)}}),(0,l.jsx)("div",{className:A,style:A?void 0:{height:"600px",width:"600px"},children:(0,l.jsx)("div",{ref:L,id:"container",style:{position:"relative",width:"100%",height:"100%"}})})})},97037:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(89379),r=a(65043),o=a(89257),s=a(71806),l=a(84882),i=a(28076),c=a(10039),d=a(73460),m=a(83558),h=a(51962),u=a(26494),p=a(10939),f=a(45944),x=a(17545),g=a(58338),v=a(29449),y=a(95747),A=a(48940),b=a(12492),_=a(60676),j=a(82746),w=a(70579);const k=(0,r.lazy)(()=>Promise.all([a.e(3969),a.e(5291),a.e(5077)]).then(a.bind(a,75291))),M=["green","blue","red"],S=(e,t,a)=>j.hD.addScheme(function(n){this.atomColor=function(n){let r,o,s,l,i,c=t.midplane_z[e],d=3*a,m=n.z-c;return m>0?i=t.mean_positive[e]:(i=-1*t.mean_negative[e],m=-m),m>=i?(r=(m-i)/d,r=Math.min(1,r),o=Math.floor(255*(1-r)),s=Math.floor(255*(1-r)),l=255):(r=-(m-i)/d,r=Math.min(1,r),o=255,s=Math.floor(255*(1-r)),l=Math.floor(255*(1-r))),(o<<16)+(s<<8)+l}},"distorsion"),C={triggerOnce:!0,rootMargin:"100px"},z=()=>{const{accessionAndMdNumber:e,metadata:t,chains:a,topology:j}=(0,r.useContext)(v.f),{loading:z,payload:N,error:E}=(0,g.A)("".concat(y.nP,"/").concat(e,"/analyses/thickness/")),{loading:L,payload:V,error:R}=(0,g.A)("".concat(y.nP,"/").concat(e,"/analyses/mem-map/")),[D,P]=(0,r.useState)({}),[T,F]=(0,o.Wx)(C),Y=(0,r.useRef)(null),H=j&&j.defaultRepresentations,[I,W]=(0,r.useState)(null),O=(0,r.useRef)({}),B=(e,t,a)=>(O.current[e]||(O.current[e]=S(e,t,a)),O.current[e]),{thicknessData:X,frameStep:q,xAxisStep:U,xAxisLabel:G,isEnsemble:J,xTooltip:K,xValues:Z,defaultDisplay:Q}=(0,r.useMemo)(()=>{if(!N||!N.data)return{};const e={Membrane:{data:N.data.thickness,color:M[0],average:(0,A.c)(N.data.thickness),mean_stddev:(0,A.c)(N.data.std_thickness),areaStdDev:N.data.std_thickness},"Upper leaflet":{data:N.data.mean_positive,color:M[1],average:(0,A.c)(N.data.mean_positive),mean_stddev:(0,A.c)(N.data.std_positive),areaStdDev:N.data.std_positive},"Lower leaflet":{data:N.data.mean_negative,color:M[2],average:(0,A.c)(N.data.mean_negative),mean_stddev:(0,A.c)(N.data.std_negative),areaStdDev:N.data.std_negative}},a=N.data.step,n="ensemble"===t.TYPE,r=t.FRAMESTEP;let o,s,l;if(n||!r)o=a,s="Frames",l=e=>"frame "+e;else{o=a*r,s="Time (ns)",l=e=>+e.toFixed(2)+" ns"}return{thicknessData:e,frameStep:a,xAxisStep:o,xAxisLabel:s,isEnsemble:n,xTooltip:l,xValues:N.data.frame,defaultDisplay:{Membrane:!0,"Upper leaflet":!0,"Lower leaflet":!0}}},[t,N]);(0,r.useMemo)(()=>{Q&&P(Q)},[Q]);const[$,ee]=(0,r.useState)(-100),te=(0,r.useCallback)(e=>{Y.current.togglePlaying(!1),Y.current.currentFrame=e,ee(e)},[]),ae=(0,r.useMemo)(()=>[{x:$,attr:{fill:"#c8c8c8"}}],[$]);(0,r.useEffect)(()=>{Y.current&&(Y.current.currentFrame=$)},[$]);const ne=(0,r.useMemo)(()=>{if(!X)return;return[{trajectoryURLs:["/trajectory?frames=1:".concat(t.mdFrames,":").concat(q)]}]},[t,q]);(0,r.useMemo)(()=>{if(!ne||!N.data||!V)return;if(!H||0===H.length)return;const e=H.filter(e=>!e.name.toLowerCase().includes("lipid"));W(t=>{if(null!==t)return t;e.forEach(e=>{(e.name.toLowerCase().includes("protein")||-1!==(null===a||void 0===a?void 0:a.indexOf(e.selection.slice(1,2))))&&(e.color="grey")});let n=[{name:"Upper leaflet",type:"ball+stick",opacity:1,selection:"@"+V.mems[0].polar_atoms.top.join(","),other:{radius:.75},color:B(0,N.data,X.Membrane.mean_stddev),customScheme:"distorsion"},{name:"Lower leaflet",type:"ball+stick",opacity:1,selection:"@"+V.mems[0].polar_atoms.bot.join(","),other:{radius:.75},color:B(0,N.data,X.Membrane.mean_stddev),customScheme:"distorsion"}];return[...e,...n]})},[ne,H,N,V,X]),(0,r.useEffect)(()=>{I&&0!==I.length&&W(e=>(e.forEach(e=>{e.name.endsWith("leaflet")&&(e.show=!!D[e.name])}),[...e]))},[D]);const re=(0,r.useCallback)(e=>{if(!N||!N.data)return{};const t=Y.current.currentFrame;W(e=>(e.forEach(e=>{e.name.endsWith("leaflet")&&(e.color=B(t,N.data,X.Membrane.mean_stddev))}),[...e])),ee(t)},[N]);if(z)return(0,w.jsx)(x.A,{});if(E)return E.toString();if(!N)return"Something bad happened loading thickness data";const oe=e=>Math.round(100*e)/100;return(0,w.jsxs)(r.Suspense,{fallback:(0,w.jsx)(x.A,{}),children:[(0,w.jsx)(p.A,{className:b.default.tablecard,children:(0,w.jsx)("div",{className:b.default.paper,children:(0,w.jsxs)(s.A,{padding:"checkbox",children:[(0,w.jsx)(l.A,{children:(0,w.jsxs)(i.A,{children:[(0,w.jsx)(c.A,{children:"selected chains"}),(0,w.jsx)(c.A,{children:"mean"}),(0,w.jsx)(c.A,{children:"mean of standard deviations"})]})}),(0,w.jsx)(d.A,{children:Object.entries(X).map((e,t)=>{let[a,r]=e;return(0,w.jsxs)(i.A,{children:[(0,w.jsx)(c.A,{children:(0,w.jsx)(m.A,{onChange:()=>P(e=>(e[a]=!e[a],(0,n.A)({},e))),control:(0,w.jsx)(h.A,{checked:D[a],style:{color:M[t]}}),label:a})}),(0,w.jsx)(c.A,{children:oe(r.average)}),(0,w.jsx)(c.A,{children:oe(r.mean_stddev)})]},a)})})]})})}),(0,w.jsx)(p.A,{className:b.default.legend_container,children:(0,w.jsx)(_.A,{title:"Distortion (\xc5)",minValue:-X.Membrane.mean_stddev,maxValue:X.Membrane.mean_stddev,colorPlan:["red","white","blue"],vertical:!0,className:b.default.legend,flip:!0})}),(0,w.jsx)(p.A,{className:b.default.nglcard,ref:T,children:F?(0,w.jsx)(f.default,{className:b.default.container,startingComponents:ne,representationsState:[I,W],onProgress:re,ref:Y,rotateX:!0}):(0,w.jsx)("div",{style:{height:"50vh"}})}),(0,w.jsx)(p.A,{className:b.default.graph,children:(0,w.jsx)(u.A,{children:(0,w.jsx)(k,{yData:X,step:U,xAxisLabel:G,xAxisValues:Z,xTooltip:K,yAxisLabel:"Thickness",onSelect:te,selfLegend:!1,dataDisplay:D,marks:ae,areaStdDev:!0,className:b.default.graph,zeroLine:!0,margin:{top:10,right:10,bottom:30,left:10},yPadding:X.Membrane.mean_stddev})})})]})};z.displayName="Thickness";const N=z}}]);
//# sourceMappingURL=4313.64c2a42b.chunk.js.map