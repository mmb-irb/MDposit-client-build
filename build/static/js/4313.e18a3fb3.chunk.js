"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[2492,4313,9117],{10939:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(65043),r=a(12110),o=a(17604);const s="style_container__M9GCG";var l=a(70579);const i={opacity:[0,1]};(0,o.A)()||(i.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,n.forwardRef)(((e,t)=>{let{overrideComponent:a,...o}=e;const d=(0,n.useRef)(null);(0,n.useLayoutEffect)((()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex((t=>e===t)),a=e.animate(i,{...c,delay:150*t});return()=>a.cancel()}),[]);const m=a?"section":r.A;return(0,l.jsx)("div",{ref:d,className:s,children:(0,l.jsx)(m,{component:"section",...o,ref:t})})}))},12110:(e,t,a)=>{a.d(t,{A:()=>g});var n=a(58168),r=a(98587),o=a(65043),s=a(58387),l=a(98610),i=a(34535),c=a(98206),d=a(63336),m=a(92532),h=a(72372);function u(e){return(0,h.Ay)("MuiCard",e)}(0,m.A)("MuiCard",["root"]);var p=a(70579);const f=["className","raised"],x=(0,i.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),g=o.forwardRef((function(e,t){const a=(0,c.b)({props:e,name:"MuiCard"}),{className:o,raised:i=!1}=a,d=(0,r.A)(a,f),m=(0,n.A)({},a,{raised:i}),h=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},u,t)})(m);return(0,p.jsx)(x,(0,n.A)({className:(0,s.A)(h.root,o),elevation:i?8:void 0,ref:t,ownerState:m},d))}))},12492:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});const n={paper:"style_paper__O1iVe",tablecard:"style_tablecard__QrT9j",legend_container:"style_legend_container__p+ZJk",legend:"style_legend__YWoMk",nglcard:"style_nglcard__1Ns8a",margined:"style_margined__hC4Uz",container:"style_container__yFiwR",selectedrow:"style_selectedrow__hSkEf",graph:"style_graph__f4I+1","graph-placeholder":"style_graph-placeholder__vZj+5"}},48940:(e,t,a)=>{a.d(t,{G:()=>r,c:()=>n});const n=e=>{if(!e)return;return e.reduce(((e,t)=>e+t),0)/e.length},r=e=>{if(!e)return;const t=e.reduce(((e,t)=>e+t),0),a=e.length,n=t/a,r=Math.sqrt(e.map((e=>Math.pow(e-n,2))).reduce(((e,t)=>e+t))/a);return{mean:n,stdv:r}}},51962:(e,t,a)=>{a.d(t,{A:()=>C});var n=a(98587),r=a(58168),o=a(65043),s=a(58387),l=a(98610),i=a(60061),c=a(33064),d=a(59662),m=a(70579);const h=(0,d.A)((0,m.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),u=(0,d.A)((0,m.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),p=(0,d.A)((0,m.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var f=a(6803),x=a(98206),g=a(34535),v=a(61475),y=a(92532),A=a(72372);function b(e){return(0,A.Ay)("MuiCheckbox",e)}const _=(0,y.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),j=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],k=(0,g.Ay)(c.A,{shouldForwardProp:e=>(0,v.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,t[`size${(0,f.A)(a.size)}`],"default"!==a.color&&t[`color${(0,f.A)(a.color)}`]]}})((e=>{let{theme:t,ownerState:a}=e;return(0,r.A)({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${"default"===a.color?t.vars.palette.action.activeChannel:t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,i.X4)("default"===a.color?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==a.color&&{[`&.${_.checked}, &.${_.indeterminate}`]:{color:(t.vars||t).palette[a.color].main},[`&.${_.disabled}`]:{color:(t.vars||t).palette.action.disabled}})})),M=(0,m.jsx)(u,{}),w=(0,m.jsx)(h,{}),S=(0,m.jsx)(p,{}),C=o.forwardRef((function(e,t){var a,i;const c=(0,x.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=M,color:h="primary",icon:u=w,indeterminate:p=!1,indeterminateIcon:g=S,inputProps:v,size:y="medium",className:A}=c,_=(0,n.A)(c,j),C=p?g:u,z=p?g:d,N=(0,r.A)({},c,{color:h,indeterminate:p,size:y}),E=(e=>{const{classes:t,indeterminate:a,color:n,size:o}=e,s={root:["root",a&&"indeterminate",`color${(0,f.A)(n)}`,`size${(0,f.A)(o)}`]},i=(0,l.A)(s,b,t);return(0,r.A)({},t,i)})(N);return(0,m.jsx)(k,(0,r.A)({type:"checkbox",inputProps:(0,r.A)({"data-indeterminate":p},v),icon:o.cloneElement(C,{fontSize:null!=(a=C.props.fontSize)?a:y}),checkedIcon:o.cloneElement(z,{fontSize:null!=(i=z.props.fontSize)?i:y}),ownerState:N,ref:t,className:(0,s.A)(E.root,A)},_,{classes:E}))}))},60676:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(65043),r=a(26494);const o="style_horizontal__KW-k9",s="style_vertical__YKrT2",l="style_heatmap-horizontal__HjdIF",i="style_heatmap-vertical__utgJY";var c=a(85941),d=a(70579);const m=e=>{let{title:t="",maxValue:a=1,minValue:m=0,colorPlan:h,splits:u=19,vertical:p=!1,flip:f=!1,className:x}=e;const{legendData:g,legendLabels:v}=(0,n.useMemo)((()=>{const e=[];if(m===a)e.push(m);else for(let r=m;r<=a;r+=(a-m)/u)e.push(r);let t=e.map((e=>Math.round(e)));if(t.length>1)for(let a=1;new Set(t).size<t.length;a++)t=e.map((e=>Math.round(e*10**a)/10**a));const n=p?e.map((e=>[e])):[e];return f&&(n.reverse(),t.reverse()),{legendData:n,legendLabels:t}}),[a,m,u,p]);return(0,d.jsxs)(r.A,{className:x||(p?s:o),children:[t,(0,d.jsx)(c.A,{data:g,xAxisValues:p?[""]:v,yAxisValues:p?v:[""],colorPlan:h,flippedXAxisValues:!1,className:p?i:l})]})}},77691:(e,t,a)=>{a.d(t,{jY:()=>r,q_:()=>n});const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bold 10px sans-serif";const a=(n.canvas||(n.canvas=document.createElement("canvas"))).getContext("2d");a.font=t;return a.measureText(e).width},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bold 10px sans-serif";const a=document.createElement("div"),n=document.createTextNode(e);return a.appendChild(n),Object.assign(a.style,{font:t,position:"absolute",visibility:"hidden",height:"auto",width:"auto","white-space":"nowrap"}),document.body.appendChild(a),{width:a.clientWidth,height:a.clientHeight}}},85941:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(65043),r=a(77691),o=a(32577),s=a(13232),l=a(70579);const i="normal 10px sans-serif",c="normal 14px sans-serif",d=(0,n.memo)((e=>{let{data:t,xAxisValues:a=[],yAxisValues:d=[],xAxisLabel:m,yAxisLabel:h,verticalPadding:u=0,colorPlan:p=["red","white","blue"],colorScale:f,onTooltip:x,onClick:g,flippedXAxisValues:v=!0,margin:y={top:10,right:10,bottom:10,left:10},className:A,NaNColor:b="#ffffff",minValue:_,maxValue:j,addBorder:k=!0}=e;if(!t)throw new Error("Data is missing. Data is mandatory for the heatmap representation");if(a.length!==new Set(a).size)throw console.log(a),new Error("Duplicated values in the X axis. See console logs");if(d.length!==new Set(d).size)throw console.log(d),new Error("Duplicated values in the Y axis. See console logs");0===a.length&&(a=Array.from(Array(t[0].length).keys())),0===d.length&&(d=Array.from(Array(t[0].length).keys()));const M=[].concat(...t),w=M.filter((e=>!isNaN(e))),S=null!==j&&void 0!==j?j:Math.max(...w),C=null!==_&&void 0!==_?_:Math.min(...w),z=[].concat(...Array(t.length).fill(a)),N=[];for(const n of d)N.push(...Array(a.length).fill(n));const E=[];for(const n in M)E.push({v:M[n],x:z[n],y:N[n]});const V=(0,n.useRef)(null),L=(0,n.useRef)(null),[,P]=(0,n.useState)(null),R=(0,r.jY)("|",i).height,$=(0,r.jY)("|",c).height+9,D=Math.max(...a.map((e=>(0,r.q_)(e,i))))+9,F=Math.max(...d.map((e=>(0,r.q_)(e,i)))),T=m?$:0,Y=h?$+9:0,H=v?D+T:R+T,I=1===d.length?Math.max(F,(0,r.q_)(h,c)):F+Y,W={top:y.top,right:y.right,bottom:H+y.bottom,left:I+y.left};return(0,n.useEffect)((()=>{L.current&&L.current.forEach((e=>e.remove()));const e=V.current,{clientWidth:n,clientHeight:r}=e.parentElement,l=n-W.left-W.right,i=r-W.top-W.bottom,c=l/(1.05*(v?R:D)),A=i/(1.05*R),_=Math.ceil(a.length/c),j=Math.ceil(d.length/A),M=document.createElement("CANVAS");(0,o.Ltv)(e).node().appendChild(M);const w=(0,o.Ltv)(M).attr("id","canvas").attr("width",l).attr("height",i).style("position","absolute").style("top",W.top+"px").style("left",W.left+"px").style("cursor",g?"pointer":void 0),z=w.node().getContext("2d"),N=(0,o.Ltv)(e).append("svg").attr("id","svg").attr("viewBox",[0,0,n,r]),E=(0,o.WH)().range([W.left,l+W.left]).domain(a).paddingInner(0),$=N.append("g").attr("transform","translate(0,"+(i+W.top)+")").call((0,o.l78)(E).tickFormat(((e,t)=>t%_===0?e:""))).selectAll("text");v&&$.style("text-anchor","end").attr("dx","-9px").attr("dy","-9px").attr("transform","rotate(-90)"),N.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",W.left+l/2).attr("y",W.top+i+H).text(m);const F=(0,o.WH)().domain(d).range([W.top,i+W.top]).padding(u);N.append("g").attr("transform","translate("+W.left+", 0)").call((0,o.V4s)(F).tickFormat(((e,t)=>t%j===0?e:""))),1===d.length?N.append("text").attr("class","y label").attr("text-anchor","start").attr("x",0).attr("y",y.top+i).text(h):N.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-(W.top+i/2)).attr("y",y.left+Y-9-9).attr("transform","rotate(-90)").text(h);const T=e=>{if(isNaN(e))return b;return(f||(0,o.m4Y)().range(p).domain([C,(C+S)/2,S]))(e)},I=E.bandwidth(),O=F.bandwidth();t.forEach(((e,t)=>{const n=F(d[t])-W.top;e.forEach(((e,t)=>{const r=E(a[t])-W.left;z.fillStyle=T(e),z.fillRect(r,n,I,O),k&&(z.strokeStyle=T(e),z.lineWidth=1,z.strokeRect(r,n,I,O))}))}));const B=e=>{const n=M.getBoundingClientRect(),r=e.clientX-n.left,o=e.clientY-n.top;let s=Math.floor(r/E.step()),l=Math.floor(o/F.step());const i=t[0].length-1;s<0&&(s=0),s>i&&(s=i);const c=t.length-1;l<0&&(l=0),l>c&&(l=c);const m=a[s],h=d[l];return{xIndex:s,yIndex:l,value:t[l][s],xAxisValue:m,yAxisValue:h}};let X;x&&(X=document.createElement("div"),Object.assign(X.style,{display:"none",position:"absolute",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),e.appendChild(X),M.onmousemove=t=>{const a=B(t);X.innerText=x(a),X.style.display="inline-block";const{x:n,y:r}=(0,s.L)(e,X,{x:t.clientX,y:t.clientY},3);X.style.left=n+"px",X.style.top=r+"px"},M.onmouseleave=()=>{X.style.display="none"}),g&&(M.onmousedown=e=>{const t=B(e);g(t)}),L.current=X?[N,w,X]:[N,w];const q=()=>{P({innerWidth:window.innerWidth,innerHeight:window.innerHeight})};return window.addEventListener("resize",q),()=>{window.removeEventListener("resize",q)}})),(0,l.jsx)("div",{className:A,style:A?void 0:{height:"600px",width:"600px"},children:(0,l.jsx)("div",{ref:V,id:"container",style:{position:"relative",width:"100%",height:"100%"}})})}))},97037:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(65043),r=a(89257),o=a(71806),s=a(84882),l=a(28076),i=a(10039),c=a(73460),d=a(37597),m=a(51962),h=a(26494),u=a(10939),p=a(92428),f=a(17545),x=a(58338),g=a(29449),v=a(95747),y=a(48940),A=a(12492),b=a(10419),_=a(60676),j=a(82746),k=a(70579);const M=(0,n.lazy)((()=>Promise.all([a.e(2577),a.e(2460),a.e(5291),a.e(5077)]).then(a.bind(a,75291)))),w=["green","blue","red"],S=(e,t,a)=>j.ColormakerRegistry.addScheme((function(n){this.atomColor=function(n){let r,o,s,l,i,c=t.midplane_z[e],d=3*a,m=n.z-c;return m>0?i=t.mean_positive[e]:(i=-1*t.mean_negative[e],m=-m),m>=i?(r=(m-i)/d,r=Math.min(1,r),o=Math.floor(255*(1-r)),s=Math.floor(255*(1-r)),l=255):(r=-(m-i)/d,r=Math.min(1,r),o=255,s=Math.floor(255*(1-r)),l=Math.floor(255*(1-r))),(o<<16)+(s<<8)+l}}),"distorsion"),C={triggerOnce:!0,rootMargin:"100px"},z=()=>{const{accession:e,accessionAndMdNumber:t,metadata:a,analyses:j}=(0,n.useContext)(g.f),{loading:z,payload:N,error:E}=(0,x.A)(`${v.nP}/${t}/analyses/thickness/`),{loading:V,payload:L,error:P}=(0,x.A)(`${v.nP}/${t}/analyses/mem-map/`),[R,$]=(0,n.useState)({}),[D,F]=(0,r.Wx)(C),T=(0,n.useRef)(null),Y=(0,b.A)(),[H,I]=(0,n.useState)(null),W=(0,n.useRef)({}),O=(e,t,a)=>(W.current[e]||(W.current[e]=S(e,t,a)),W.current[e]),{thicknessData:B,frameStep:X,xAxisStep:q,xAxisLabel:U,isEnsemble:G,xTooltip:J,xValues:K,defaultDisplay:Z}=(0,n.useMemo)((()=>{if(!N||!N.data)return{};const e={Membrane:{data:N.data.thickness,color:w[0],average:(0,y.c)(N.data.thickness),mean_stddev:(0,y.c)(N.data.std_thickness),areaStdDev:N.data.std_thickness},"Upper leaflet":{data:N.data.mean_positive,color:w[1],average:(0,y.c)(N.data.mean_positive),mean_stddev:(0,y.c)(N.data.std_positive),areaStdDev:N.data.std_positive},"Lower leaflet":{data:N.data.mean_negative,color:w[2],average:(0,y.c)(N.data.mean_negative),mean_stddev:(0,y.c)(N.data.std_negative),areaStdDev:N.data.std_negative}},t=N.data.thickness.length,n=N.step||Math.floor(a.mdFrames/(t-1)),r="ensemble"===a.TYPE,o=a.FRAMESTEP;let s,l,i;if(r||!o)s=n,l="Frames",i=e=>"frame "+e;else{s=n*o,l="Time (ns)",i=e=>+e.toFixed(2)+" ns"}return{thicknessData:e,frameStep:n,xAxisStep:s,xAxisLabel:l,isEnsemble:r,xTooltip:i,xValues:N.data.frame,defaultDisplay:{Membrane:!0,"Upper leaflet":!0,"Lower leaflet":!0}}}),[a,N]);(0,n.useMemo)((()=>{Z&&$(Z)}),[Z]);const[Q,ee]=(0,n.useState)(-100),te=(0,n.useCallback)((e=>{T.current.togglePlaying(!1),T.current.currentFrame=e,ee(e)}),[]),ae=(0,n.useMemo)((()=>[{x:Q,attr:{fill:"#c8c8c8"}}]),[Q]);(0,n.useEffect)((()=>{T.current&&(T.current.currentFrame=Q)}),[Q]);const ne=(0,n.useMemo)((()=>{if(!B)return;return[{trajectoryURLs:[`${`${v.nP}/${t}/trajectory`}?frames=1:${a.mdFrames}:${X}`]}]}),[t,a,X]);(0,n.useMemo)((()=>{if(!ne||!N.data||!L)return;if(!Y||0===Y.length)return;const e=Y.filter((e=>"M"!==e.name));I((t=>{if(null!==t)return t;e.forEach((e=>{"Protein"==e.name&&(e.color="grey")}));let a=[{name:"Upper leaflet",type:"ball+stick",opacity:1,selection:"@"+L.mems[0].polar_atoms.top.join(","),other:{radius:.75},color:O(0,N.data,B.Membrane.mean_stddev),customScheme:"distorsion"},{name:"Lower leaflet",type:"ball+stick",opacity:1,selection:"@"+L.mems[0].polar_atoms.bot.join(","),other:{radius:.75},color:O(0,N.data,B.Membrane.mean_stddev),customScheme:"distorsion"}];return[...e,...a]}))}),[ne,Y]),(0,n.useEffect)((()=>{H&&0!==H.length&&I((e=>(e.forEach((e=>{e.name.endsWith("leaflet")&&(e.show=!!R[e.name])})),[...e])))}),[R]);const re=(0,n.useCallback)((e=>{if(!N||!N.data)return{};const t=T.current.currentFrame;I((e=>(e.forEach((e=>{e.name.endsWith("leaflet")&&(e.color=O(t,N.data,B.Membrane.mean_stddev))})),[...e]))),ee(t)}),[N]);if(z)return(0,k.jsx)(f.A,{});if(E)return E.toString();if(!N)return"Something bad happened loading thickness data";const oe=e=>Math.round(100*e)/100;return(0,k.jsxs)(n.Suspense,{fallback:(0,k.jsx)(f.A,{}),children:[(0,k.jsx)(u.A,{className:A.default.tablecard,children:(0,k.jsx)("div",{className:A.default.paper,children:(0,k.jsxs)(o.A,{padding:"checkbox",children:[(0,k.jsx)(s.A,{children:(0,k.jsxs)(l.A,{children:[(0,k.jsx)(i.A,{children:"selected chains"}),(0,k.jsx)(i.A,{children:"mean"}),(0,k.jsx)(i.A,{children:"mean of standard deviations"})]})}),(0,k.jsx)(c.A,{children:Object.entries(B).map(((e,t)=>{let[a,n]=e;return(0,k.jsxs)(l.A,{children:[(0,k.jsx)(i.A,{children:(0,k.jsx)(d.A,{onChange:()=>$((e=>(e[a]=!e[a],{...e}))),control:(0,k.jsx)(m.A,{checked:R[a],style:{color:w[t]}}),label:a})}),(0,k.jsx)(i.A,{children:oe(n.average)}),(0,k.jsx)(i.A,{children:oe(n.mean_stddev)})]},a)}))})]})})}),(0,k.jsx)(u.A,{className:A.default.legend_container,children:(0,k.jsx)(_.A,{title:"Distortion (\xc5)",minValue:-B.Membrane.mean_stddev,maxValue:B.Membrane.mean_stddev,colorPlan:["red","white","blue"],vertical:!0,className:A.default.legend,flip:!0})}),(0,k.jsx)(u.A,{className:A.default.nglcard,ref:D,children:F?(0,k.jsx)(p.default,{className:A.default.container,startingComponents:ne,representationsState:[H,I],onProgress:re,ref:T,rotateX:!0}):(0,k.jsx)("div",{style:{height:"50vh"}})}),(0,k.jsx)(u.A,{className:A.default.graph,children:(0,k.jsx)(h.A,{children:(0,k.jsx)(M,{yData:B,step:q,xAxisLabel:U,xAxisValues:K,xTooltip:J,yAxisLabel:"Thickness",onSelect:te,selfLegend:!1,dataDisplay:R,marks:ae,areaStdDev:!0,className:A.default.graph,zeroLine:!0,margin:{top:10,right:10,bottom:30,left:10},yPadding:B.Membrane.mean_stddev})})})]})};z.displayName="Thickness";const N=z}}]);
//# sourceMappingURL=4313.e18a3fb3.chunk.js.map