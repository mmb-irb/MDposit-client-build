"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[2881,5096,9117],{2276:(e,r,t)=>{t.r(r),t.d(r,{default:()=>z});var o=t(65043),a=t(89257),n=t(71806),s=t(84882),c=t(28076),l=t(10039),i=t(83558),d=t(51962),u=t(73460),m=t(85865),p=t(10939),h=t(14696),f=t(42881),A=t(29449),x=t(17545),v=t(58338),y=t(97318),g=t(95747),j=t(70579);const k=(0,o.lazy)(()=>Promise.all([t.e(3969),t.e(5291),t.e(5077)]).then(t.bind(t,75291))),b={triggerOnce:!0,rootMargin:"100px"},M="pocket",_="pocket surface",w=!1,C=e=>{const r=e.reduce((e,r)=>e+r,0)/e.length;return Math.round(10*r)/10},z=()=>{const[e,r]=(0,a.Wx)(b),{accessionAndMdNumber:t,metadata:z,topology:S}=(0,o.useContext)(A.f),$=(0,o.useRef)(null),N=(0,o.useRef)(null),[R,P]=(0,y.A)(),[E,O]=(0,o.useState)(w),[I,L]=(0,o.useState)(null),[F,D]=(0,o.useState)([]),[H,V]=(0,o.useState)(0),{loading:B,payload:T,error:Y}=(0,v.A)(`${g.nP}/${t}/analyses/pockets/`),{data:G,frameStep:U}=(0,o.useMemo)(()=>{if(!T)return{};const e=T&&T.data,r=e.length,t=e[0].volumes.length,o=T.step||Math.floor(z.mdFrames/(t-1));return D(new Array(r).fill(null)),{data:e,frameStep:o}},[T,z]),W=(0,o.useMemo)(()=>{if(!G)return;return[{trajectoryURLs:[`${`${g.nP}/${t}/trajectory`}?frames=1:${z.mdFrames}:${U}`]},...G.map(e=>({name:e.name,topologyURL:`${g.nP}/${t}/files/${e.name}.pdb`,onlyTopology:!0}))]},[G,t,z,U]),X=S&&S.defaultRepresentations,[q,J]=(0,o.useState)(null);(0,o.useMemo)(()=>{W&&X&&0!==X.length&&J(e=>{if(null!==e)return e;X.forEach(e=>{e.color="black",e.opacity=.3});const r=G.map(e=>({name:e.name+" surface",selection:"@"+e.atoms.join(","),type:"surface",color:"grey",show:!1,reference:_})),t=W.slice(1).map(e=>({name:e.name,type:"surface",color:"grey",other:{contour:!0},label:e.name,component:e.name,show:w,reference:M}));return[...X,...r,...t]})},[W,X]);const{graphInputData:K,dataDisplay:Q}=(0,o.useMemo)(()=>{if(!G||!z)return{};const e={},r={};return G.forEach((t,o)=>{const a=t.name;e[a]={data:t.volumes,color:F[o]},r[a]=!!F[o]}),{graphInputData:e,dataDisplay:r}},[G,z,F]),Z=(0,o.useMemo)(()=>[{x:H,attr:{fill:"#c8c8c8"}}],[H]),ee=(0,o.useMemo)(()=>e=>"frame "+e);return(0,o.useEffect)(()=>{N.current&&(N.current.currentFrame=H)},[H]),(0,o.useEffect)(()=>{J(e=>{if(null===e)return null;e.filter(e=>e.reference===M).forEach((e,r)=>{if(I===r)e.show=!0,e.color="yellow";else{const t=F[r];e.show=!!t||E,e.color=t||"grey"}});return e.filter(e=>e.reference===_).forEach((e,r)=>{const t=F[r];e.show=!!t}),[...e]})},[F,I,E]),B?(0,j.jsx)(x.A,{}):Y?Y.toString():T?z?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.A,{className:f.default.tablecard,children:(0,j.jsx)("div",{className:f.default.paper,children:(0,j.jsxs)(n.A,{stickyHeader:!0,size:"small",padding:"checkbox",children:[(0,j.jsx)(s.A,{children:(0,j.jsxs)(c.A,{children:[(0,j.jsx)(l.A,{children:(0,j.jsx)(i.A,{onChange:()=>O(e=>!e),control:(0,j.jsx)(d.A,{checked:E}),label:"Pockets"})},0),(0,j.jsx)(l.A,{children:"Average volume (\xc5\xb3)"},1)]})}),(0,j.jsx)(u.A,{children:G.map((e,r)=>{const t=e.name;return(0,j.jsx)(c.A,{role:"checkbox",className:r===I?f.default.selectedrow:void 0,onMouseOver:()=>L(r),onMouseOut:()=>L(e=>e===r?null:e),children:[(0,j.jsx)(i.A,{"data-key":t,onMouseOver:()=>{$.current=r},onMouseOut:()=>{$.current=null},onChange:()=>D(e=>(e[r]?(P(e[r]),e[r]=null):e[r]=R(),[...e])),control:(0,j.jsx)(d.A,{checked:!!F[r],style:{color:F[r]?F[r]:"black"},inputProps:{"data-key":t}}),label:t},t),C(e.volumes)].map(e=>(0,j.jsx)(l.A,{children:e},e))},t)})})]})})}),(0,j.jsx)(p.A,{className:f.default.nglcard,ref:e,children:r?(0,j.jsx)(h.default,{className:f.default.container,startingComponents:W,representationsState:[q,J],preventTrajectory:!0,ref:N}):(0,j.jsx)("div",{style:{height:"50vh"}})}),(0,j.jsxs)(p.A,{className:f.default.graph,children:[F.every(e=>null===e)&&(0,j.jsx)("div",{className:f.default["graph-placeholder"],children:(0,j.jsx)(m.A,{variant:"h6",children:"No pocket selected"})}),(0,j.jsx)(k,{yData:K,step:U,xTooltip:ee,xScaleFactor:1,xAxisLabel:"Frames",yAxisLabel:"Pocket volume (\xc5\xb3)",dataDisplay:Q,showPrecisionSlider:!1,blockMaxPrecision:!0,roundcents:!1,onSelect:V,className:f.default.graph,marks:Z})]})]}):(0,j.jsx)(x.A,{}):"Something bad happened"}},10939:(e,r,t)=>{t.d(r,{A:()=>d});var o=t(65043),a=t(12110),n=t(17604);const s="style_container__M9GCG";var c=t(70579);const l={opacity:[0,1]};(0,n.A)()||(l.transform=["translateY(50px)","translateY(0)"]);const i={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,o.forwardRef)((e,r)=>{let{overrideComponent:t,...n}=e;const d=(0,o.useRef)(null);(0,o.useLayoutEffect)(()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const r=Array.from(document.querySelectorAll("main section")).findIndex(r=>e===r),t=e.animate(l,{...i,delay:150*r});return()=>t.cancel()},[]);const u=t?"section":a.A;return(0,c.jsx)("div",{ref:d,className:s,children:(0,c.jsx)(u,{component:"section",...n,ref:r})})})},12110:(e,r,t)=>{t.d(r,{A:()=>x});var o=t(58168),a=t(98587),n=t(65043),s=t(58387),c=t(98610),l=t(34535),i=t(98206),d=t(63336),u=t(92532),m=t(72372);function p(e){return(0,m.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var h=t(70579);const f=["className","raised"],A=(0,l.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({overflow:"hidden"})),x=n.forwardRef(function(e,r){const t=(0,i.b)({props:e,name:"MuiCard"}),{className:n,raised:l=!1}=t,d=(0,a.A)(t,f),u=(0,o.A)({},t,{raised:l}),m=(e=>{const{classes:r}=e;return(0,c.A)({root:["root"]},p,r)})(u);return(0,h.jsx)(A,(0,o.A)({className:(0,s.A)(m.root,n),elevation:l?8:void 0,ref:r,ownerState:u},d))})},42881:(e,r,t)=>{t.r(r),t.d(r,{default:()=>o});const o={paper:"style_paper__3rwjT",tablecard:"style_tablecard__zkclz",nglcard:"style_nglcard__Giv4e",margined:"style_margined__oYYKj",container:"style_container__LW09U",selectedrow:"style_selectedrow__J0gnV",graph:"style_graph__tgzxk","graph-placeholder":"style_graph-placeholder__QpX0O"}},51962:(e,r,t)=>{t.d(r,{A:()=>z});var o=t(98587),a=t(58168),n=t(65043),s=t(58387),c=t(98610),l=t(60061),i=t(33064),d=t(59662),u=t(70579);const m=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var f=t(6803),A=t(98206),x=t(34535),v=t(61475),y=t(92532),g=t(72372);function j(e){return(0,g.Ay)("MuiCheckbox",e)}const k=(0,y.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),b=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],M=(0,x.Ay)(i.A,{shouldForwardProp:e=>(0,v.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,t.indeterminate&&r.indeterminate,r[`size${(0,f.A)(t.size)}`],"default"!==t.color&&r[`color${(0,f.A)(t.color)}`]]}})(e=>{let{theme:r,ownerState:t}=e;return(0,a.A)({color:(r.vars||r).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:r.vars?`rgba(${"default"===t.color?r.vars.palette.action.activeChannel:r.vars.palette[t.color].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:(0,l.X4)("default"===t.color?r.palette.action.active:r.palette[t.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${k.checked}, &.${k.indeterminate}`]:{color:(r.vars||r).palette[t.color].main},[`&.${k.disabled}`]:{color:(r.vars||r).palette.action.disabled}})}),_=(0,u.jsx)(p,{}),w=(0,u.jsx)(m,{}),C=(0,u.jsx)(h,{}),z=n.forwardRef(function(e,r){var t,l;const i=(0,A.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=_,color:m="primary",icon:p=w,indeterminate:h=!1,indeterminateIcon:x=C,inputProps:v,size:y="medium",className:g}=i,k=(0,o.A)(i,b),z=h?x:p,S=h?x:d,$=(0,a.A)({},i,{color:m,indeterminate:h,size:y}),N=(e=>{const{classes:r,indeterminate:t,color:o,size:n}=e,s={root:["root",t&&"indeterminate",`color${(0,f.A)(o)}`,`size${(0,f.A)(n)}`]},l=(0,c.A)(s,j,r);return(0,a.A)({},r,l)})($);return(0,u.jsx)(M,(0,a.A)({type:"checkbox",inputProps:(0,a.A)({"data-indeterminate":h},v),icon:n.cloneElement(z,{fontSize:null!=(t=z.props.fontSize)?t:y}),checkedIcon:n.cloneElement(S,{fontSize:null!=(l=S.props.fontSize)?l:y}),ownerState:$,ref:r,className:(0,s.A)(N.root,g)},k,{classes:N}))})},97318:(e,r,t)=>{t.d(r,{A:()=>n});var o=t(65043);const a=["red","green","blue","orange","purple"],n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";const t=(0,o.useRef)([]);return(0,o.useMemo)(()=>[()=>{for(const r of e){if(-1===t.current.indexOf(r))return t.current.push(r),r}return r},e=>{if(e===r)return;const o=t.current.indexOf(e);if(-1===o)throw new Error(`Color ${e} is not used`);t.current.splice(o,1)},()=>{t.current=[]}],[e,r])}}}]);
//# sourceMappingURL=5096.21f9f119.chunk.js.map