"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[2881,5096,9117],{2276:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var o=r(65043),n=r(89257),a=r(71806),c=r(84882),s=r(28076),l=r(10039),i=r(83558),d=r(51962),u=r(73460),m=r(85865),p=r(10939),h=r(14696),f=r(10419),A=r(42881),x=r(29449),v=r(17545),y=r(58338),g=r(97318),j=r(95747),k=r(70579);const b=(0,o.lazy)(()=>Promise.all([r.e(7631),r.e(3969),r.e(5291),r.e(5077)]).then(r.bind(r,75291))),M={triggerOnce:!0,rootMargin:"100px"},C="pocket",_="pocket surface",w=!1,z=e=>{const t=e.reduce((e,t)=>e+t,0)/e.length;return Math.round(10*t)/10},S=()=>{const[e,t]=(0,n.Wx)(M),{accessionAndMdNumber:r,metadata:S}=(0,o.useContext)(x.f),N=(0,o.useContext)(x.I),P=(0,o.useRef)(null),R=(0,o.useRef)(null),[E,O]=(0,g.A)(),[I,L]=(0,o.useState)(w),[F,D]=(0,o.useState)(null),[H,V]=(0,o.useState)([]),[B,T]=(0,o.useState)(0),{loading:Y,payload:G,error:U}=(0,y.A)("".concat(j.nP,"/").concat(r,"/analyses/pockets/")),{data:W,frameStep:X}=(0,o.useMemo)(()=>{if(!G)return{};const e=G&&G.data,t=e.length,r=e[0].volumes.length,o=G.step||Math.floor(S.mdFrames/(r-1));return V(new Array(t).fill(null)),{data:e,frameStep:o}},[G,S]),q=(0,o.useMemo)(()=>{if(!W)return;const e="".concat(j.nP,"/").concat(r,"/trajectory");return[{trajectoryURLs:["".concat(e,"?frames=1:").concat(S.mdFrames,":").concat(X)]},...W.map(e=>({name:e.name,topologyURL:"".concat(j.nP,"/").concat(r,"/files/").concat(e.name,".pdb"),onlyTopology:!0}))]},[W,r,S,X]),J=(0,f.A)(),[K,Q]=(0,o.useState)(null);(0,o.useMemo)(()=>{q&&J&&0!==J.length&&Q(e=>{if(null!==e)return e;J.forEach(e=>{e.color="black",e.opacity=.3});const t=W.map(e=>({name:e.name+" surface",selection:"@"+e.atoms.join(","),type:"surface",color:"grey",show:!1,reference:_})),r=q.slice(1).map(e=>({name:e.name,type:"surface",color:"grey",other:{contour:!0},label:e.name,component:e.name,show:w,reference:C}));return[...J,...t,...r]})},[q,J]);const{graphInputData:Z,dataDisplay:$}=(0,o.useMemo)(()=>{if(!W||!S)return{};const e={},t={};return W.forEach((r,o)=>{const n=r.name;e[n]={data:r.volumes,color:H[o]},t[n]=!!H[o]}),{graphInputData:e,dataDisplay:t}},[W,S,H]),ee=(0,o.useMemo)(()=>[{x:B,attr:{fill:"#c8c8c8"}}],[B]),te=(0,o.useMemo)(()=>e=>"frame "+e);return(0,o.useEffect)(()=>{R.current&&(R.current.currentFrame=B)},[B]),(0,o.useEffect)(()=>{Q(e=>{if(null===e)return null;e.filter(e=>e.reference===C).forEach((e,t)=>{if(F===t)e.show=!0,e.color="yellow";else{const r=H[t];e.show=!!r||I,e.color=r||"grey"}});return e.filter(e=>e.reference===_).forEach((e,t)=>{const r=H[t];e.show=!!r}),[...e]})},[H,F,I]),Y?(0,k.jsx)(v.A,{}):U?U.toString():G?S&&N.file?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.A,{className:A.default.tablecard,children:(0,k.jsx)("div",{className:A.default.paper,children:(0,k.jsxs)(a.A,{stickyHeader:!0,size:"small",padding:"checkbox",children:[(0,k.jsx)(c.A,{children:(0,k.jsxs)(s.A,{children:[(0,k.jsx)(l.A,{children:(0,k.jsx)(i.A,{onChange:()=>L(e=>!e),control:(0,k.jsx)(d.A,{checked:I}),label:"Pockets"})},0),(0,k.jsx)(l.A,{children:"Average volume (\xc5\xb3)"},1)]})}),(0,k.jsx)(u.A,{children:W.map((e,t)=>{const r=e.name;return(0,k.jsx)(s.A,{role:"checkbox",className:t===F?A.default.selectedrow:void 0,onMouseOver:()=>D(t),onMouseOut:()=>D(e=>e===t?null:e),children:[(0,k.jsx)(i.A,{"data-key":r,onMouseOver:()=>{P.current=t},onMouseOut:()=>{P.current=null},onChange:()=>V(e=>(e[t]?(O(e[t]),e[t]=null):e[t]=E(),[...e])),control:(0,k.jsx)(d.A,{checked:!!H[t],style:{color:H[t]?H[t]:"black"},inputProps:{"data-key":r}}),label:r},r),z(e.volumes)].map(e=>(0,k.jsx)(l.A,{children:e},e))},r)})})]})})}),(0,k.jsx)(p.A,{className:A.default.nglcard,ref:e,children:t?(0,k.jsx)(h.default,{className:A.default.container,startingComponents:q,representationsState:[K,Q],preventTrajectory:!0,ref:R}):(0,k.jsx)("div",{style:{height:"50vh"}})}),(0,k.jsxs)(p.A,{className:A.default.graph,children:[H.every(e=>null===e)&&(0,k.jsx)("div",{className:A.default["graph-placeholder"],children:(0,k.jsx)(m.A,{variant:"h6",children:"No pocket selected"})}),(0,k.jsx)(b,{yData:Z,step:X,xTooltip:te,xScaleFactor:1,xAxisLabel:"Frames",yAxisLabel:"Pocket volume (\xc5\xb3)",dataDisplay:$,showPrecisionSlider:!1,blockMaxPrecision:!0,roundcents:!1,onSelect:T,className:A.default.graph,marks:ee})]})]}):(0,k.jsx)(v.A,{}):"Something bad happened"}},10939:(e,t,r)=>{r.d(t,{A:()=>p});var o=r(89379),n=r(80045),a=r(65043),c=r(12110),s=r(17604);const l="style_container__M9GCG";var i=r(70579);const d=["overrideComponent"],u={opacity:[0,1]};(0,s.A)()||(u.transform=["translateY(50px)","translateY(0)"]);const m={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},p=(0,a.forwardRef)((e,t)=>{let{overrideComponent:r}=e,s=(0,n.A)(e,d);const p=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{const e=p.current&&p.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),r=e.animate(u,(0,o.A)((0,o.A)({},m),{},{delay:150*t}));return()=>r.cancel()},[]);const h=r?"section":c.A;return(0,i.jsx)("div",{ref:p,className:l,children:(0,i.jsx)(h,(0,o.A)((0,o.A)({component:"section"},s),{},{ref:t}))})})},12110:(e,t,r)=>{r.d(t,{A:()=>x});var o=r(58168),n=r(98587),a=r(65043),c=r(58387),s=r(98610),l=r(34535),i=r(98206),d=r(63336),u=r(92532),m=r(72372);function p(e){return(0,m.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var h=r(70579);const f=["className","raised"],A=(0,l.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),x=a.forwardRef(function(e,t){const r=(0,i.b)({props:e,name:"MuiCard"}),{className:a,raised:l=!1}=r,d=(0,n.A)(r,f),u=(0,o.A)({},r,{raised:l}),m=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},p,t)})(u);return(0,h.jsx)(A,(0,o.A)({className:(0,c.A)(m.root,a),elevation:l?8:void 0,ref:t,ownerState:u},d))})},42881:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});const o={paper:"style_paper__3rwjT",tablecard:"style_tablecard__zkclz",nglcard:"style_nglcard__Giv4e",margined:"style_margined__oYYKj",container:"style_container__LW09U",selectedrow:"style_selectedrow__J0gnV",graph:"style_graph__tgzxk","graph-placeholder":"style_graph-placeholder__QpX0O"}},51962:(e,t,r)=>{r.d(t,{A:()=>z});var o=r(98587),n=r(58168),a=r(65043),c=r(58387),s=r(98610),l=r(60061),i=r(33064),d=r(59662),u=r(70579);const m=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var f=r(6803),A=r(98206),x=r(34535),v=r(61475),y=r(92532),g=r(72372);function j(e){return(0,g.Ay)("MuiCheckbox",e)}const k=(0,y.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),b=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],M=(0,x.Ay)(i.A,{shouldForwardProp:e=>(0,v.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t["size".concat((0,f.A)(r.size))],"default"!==r.color&&t["color".concat((0,f.A)(r.color))]]}})(e=>{let{theme:t,ownerState:r}=e;return(0,n.A)({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===r.color?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,l.X4)("default"===r.color?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&{["&.".concat(k.checked,", &.").concat(k.indeterminate)]:{color:(t.vars||t).palette[r.color].main},["&.".concat(k.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),C=(0,u.jsx)(p,{}),_=(0,u.jsx)(m,{}),w=(0,u.jsx)(h,{}),z=a.forwardRef(function(e,t){var r,l;const i=(0,A.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=C,color:m="primary",icon:p=_,indeterminate:h=!1,indeterminateIcon:x=w,inputProps:v,size:y="medium",className:g}=i,k=(0,o.A)(i,b),z=h?x:p,S=h?x:d,N=(0,n.A)({},i,{color:m,indeterminate:h,size:y}),P=(e=>{const{classes:t,indeterminate:r,color:o,size:a}=e,c={root:["root",r&&"indeterminate","color".concat((0,f.A)(o)),"size".concat((0,f.A)(a))]},l=(0,s.A)(c,j,t);return(0,n.A)({},t,l)})(N);return(0,u.jsx)(M,(0,n.A)({type:"checkbox",inputProps:(0,n.A)({"data-indeterminate":h},v),icon:a.cloneElement(z,{fontSize:null!=(r=z.props.fontSize)?r:y}),checkedIcon:a.cloneElement(S,{fontSize:null!=(l=S.props.fontSize)?l:y}),ownerState:N,ref:t,className:(0,c.A)(P.root,g)},k,{classes:P}))})},97318:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(65043);const n=["red","green","blue","orange","purple"],a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";const r=(0,o.useRef)([]);return(0,o.useMemo)(()=>[()=>{for(const t of e){if(-1===r.current.indexOf(t))return r.current.push(t),t}return t},e=>{if(e===t)return;const o=r.current.indexOf(e);if(-1===o)throw new Error("Color ".concat(e," is not used"));r.current.splice(o,1)},()=>{r.current=[]}],[e,t])}}}]);
//# sourceMappingURL=5096.e8ec0a05.chunk.js.map