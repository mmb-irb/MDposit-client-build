"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[5236,9373],{10939:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(89379),a=r(80045),o=r(65043),s=r(12110),c=r(17604);const l="style_container__M9GCG";var i=r(70579);const d=["overrideComponent"],u={opacity:[0,1]};(0,c.A)()||(u.transform=["translateY(50px)","translateY(0)"]);const m={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},p=(0,o.forwardRef)((e,t)=>{let{overrideComponent:r}=e,c=(0,a.A)(e,d);const p=(0,o.useRef)(null);(0,o.useLayoutEffect)(()=>{const e=p.current&&p.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),r=e.animate(u,(0,n.A)((0,n.A)({},m),{},{delay:150*t}));return()=>r.cancel()},[]);const h=r?"section":s.A;return(0,i.jsx)("div",{ref:p,className:l,children:(0,i.jsx)(h,(0,n.A)((0,n.A)({component:"section"},c),{},{ref:t}))})})},29373:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n={card:"style_card__7-6cg","margined-bottom":"style_margined-bottom__X+p3P"}},34088:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(89379),a=r(65043),o=r(43126),s=r(10939);const c="style_rnd__Txifm",l="style_floating-card__HHpby";var i=r(70579);const d=(0,a.lazy)(()=>Promise.all([r.e(7784),r.e(8095),r.e(3845),r.e(9070),r.e(247),r.e(7955),r.e(8677),r.e(4061),r.e(335),r.e(9117)]).then(r.bind(r,14696)));let u=0;const m=e=>{const t=e.viewerRef||(0,a.useRef)(null),[r,m]=(0,a.useState)(()=>{const{innerWidth:e,innerHeight:t,scrollY:r}=window,n=document.querySelector("main").offsetTop,a=Math.max(Math.min(e/4,t/4),150),o=1.5*a;return{width:2*a,height:o,x:0,y:t-n-o-20+r}});return(0,i.jsx)(o.p,{position:{x:r.x,y:r.y},size:{width:r.width,height:r.height},style:{zIndex:(u+=1,u)},className:c,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{m((0,n.A)({},r))},onResizeStart:()=>{m((0,n.A)({},r))},onDragStop:(e,t)=>{0===e.layerX&&0===e.layerY||r.x===t.x&&r.y===t.y||m((0,n.A)((0,n.A)({},r),{},{x:t.x,y:t.y}))},onResize:()=>t.current&&t.current.autoResize(),onResizeStop:(e,t,r,a,o)=>{m((0,n.A)({width:r.style.width,height:r.style.height},o))},children:(0,i.jsx)(s.A,{className:l,elevation:4,children:(0,i.jsx)(a.Suspense,{fallback:null,children:(0,i.jsx)(d,(0,n.A)({className:l,ref:t,startsPlaying:!1},e))})})})},p=e=>{let{newViewer:t,nailing:r=!0,onNail:o,onClose:s}=e;const[c,l]=(0,a.useState)([]),d=[...c],u=(0,a.useRef)([]);if(t){const e=()=>{let e=0;for(;e<999;){if(-1===u.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};t.id=e(),t.close=()=>{r&&l(e=>{const r=[...e],n=e.indexOf(t);return-1!==n&&r.splice(n,1),r}),s&&s(t),u.current.push(t.id)},r&&(t.nail=()=>{l(e=>[...e,t]),o&&o(t),u.current.push(t.id)}),d.push(t)}return d.map(e=>(0,i.jsx)(m,(0,n.A)({},e),e.id))}},45236:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n=r(89379),a=r(65043),o=r(26494),s=r(8939),c=r(24056),l=r(71806),i=r(84882),d=r(28076),u=r(10039),m=r(73460),p=r(83558),h=r(51962),x=r(10939),f=r(34088),A=r(17545),y=r(58338),v=r(29449),b=r(95747),g=r(48940),S=r(29373),j=r(70579);const w=(0,a.lazy)(()=>Promise.all([r.e(7631),r.e(3969),r.e(5291),r.e(5077)]).then(r.bind(r,75291))),z=[{reference:"firstframe",type:"rmsd",label:"First frame RMSD"},{reference:"average",type:"rmsd",label:"Average RMSD"},{reference:"firstframe",type:"tmscore",label:"First frame TM score"},{reference:"average",type:"tmscore",label:"Average TM score"}],M=["black","red","orange","yellow"],k=()=>{const{accessionAndMdNumber:e,metadata:t,analyses:r,populations:k}=(0,a.useContext)(v.f),C=r.includes("tmscores"),{loading:R,payload:_,error:N}=(0,y.A)("".concat(b.nP,"/").concat(e,"/analyses/rmsds/")),{loading:P,payload:T,error:E}=(0,y.A)(C?"".concat(b.nP,"/").concat(e,"/analyses/tmscores/"):null),[D,F]=(0,a.useState)(z[0]),[H,I]=(0,a.useState)({}),{rmsds:L,frameStep:O,xAxisStep:V,xAxisLabel:W,isEnsemble:Y,xTooltip:q,xWeights:B}=(0,a.useMemo)(()=>{let e;const r=D.type,n=D.reference;if("rmsd"===r)e=_;else{if("tmscore"!==r)throw new Error("Not supported type ".concat(r));e=T}if(!e)return{};if(k&&k.loading)return{};const a={},o={};let s=0;e.data.forEach(e=>{if(e.reference!==n)return;const t={};t.data=e.values;const{mean:r,stdv:c}=(0,g.G)(t.data);t.average=r,t.stddev=c,t.color=M[s],s+=1;const l=e.group;a[l]=t,o[l]=!0}),I(o);const c=e.step,l=t.FRAMESTEP,i="ensemble"===t.TYPE;let d,u,m,p;if(i||!l)d=c,u="Frames",m=e=>"frame "+e;else{d=c*l,u="Time (ns)",m=e=>+e.toFixed(2)+" ns"}if(k&&k.payload){p=[];for(let e=0;e<k.payload.length;e+=d)p.push(k.payload[e])}return{rmsds:a,frameStep:c,xAxisStep:d,xAxisLabel:u,isEnsemble:i,xTooltip:m,xWeights:p}},[t,_,T,D,k]),[G,X]=(0,a.useState)(null),J=G*O,K=(0,a.useMemo)(()=>[{x:G,attr:{fill:"#c8c8c8"}}],[G]);if(R||P||k&&k.loading)return(0,j.jsx)(A.A,{});if(N)return N.toString();if(E)return E.toString();if(k&&k.error)return k.error.toString();if(!_)return"Something bad happened with RMSD";if(C&&!T)return"Something bad happened with TM score";if(k&&!k.payload)return"Something bad happened with populations";let Q="RMSD (\xc5)";"tmscore"===D.type&&(Q="TM score");const U=e=>Math.round(100*e)/100;return(0,j.jsxs)(a.Suspense,{fallback:(0,j.jsx)(A.A,{}),children:[(0,j.jsx)(x.A,{className:S.default.card,children:(0,j.jsxs)(o.A,{children:[(0,j.jsx)(s.A,{value:D,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{X(null),F(t)},className:S.default["margined-bottom"],children:z.map((e,t)=>(0,j.jsx)(c.A,{value:e,label:e.label,disabled:"tmscore"===e.type&&!C},t))}),(0,j.jsxs)(l.A,{padding:"checkbox",children:[(0,j.jsx)(i.A,{children:(0,j.jsxs)(d.A,{children:[(0,j.jsx)(u.A,{children:"selected atoms"}),(0,j.jsx)(u.A,{children:"mean".concat("rmsd"===D.type?" (\xc5)":"")}),(0,j.jsx)(u.A,{children:"standard deviation".concat("rmsd"===D.type?" (\xc5)":"")})]})}),(0,j.jsx)(m.A,{children:Object.entries(L).map((e,t)=>{let[r,a]=e;return(0,j.jsxs)(d.A,{children:[(0,j.jsx)(u.A,{children:(0,j.jsx)(p.A,{onChange:()=>I(e=>(e[r]=!e[r],(0,n.A)({},e))),control:(0,j.jsx)(h.A,{checked:H[r],style:{color:M[t]}}),label:r})}),(0,j.jsx)(u.A,{children:U(a.average)}),(0,j.jsx)(u.A,{children:U(a.stddev)})]},r)})})]})]})}),(0,j.jsx)(x.A,{className:S.default.card,children:(0,j.jsx)(o.A,{children:(0,j.jsx)(w,{yData:L,step:V,xAxisLabel:W,type:Y?"dots":"line",xWeights:B,xTooltip:q,xScaleFactor:1,yAxisLabel:Q,onSelect:X,selfLegend:!1,dataDisplay:H,marks:K})})}),(0,j.jsx)(f.A,{newViewer:"number"===typeof G?{requestedFrame:J,xSelection:G}:null,onNail:e=>X(t=>e.xSelection===t?null:t),onClose:e=>X(t=>e.xSelection===t?null:t)})]})}},48940:(e,t,r)=>{r.d(t,{G:()=>a,c:()=>n});const n=e=>{if(!e)return;return e.reduce((e,t)=>e+t,0)/e.length},a=e=>{if(!e)return;const t=e.reduce((e,t)=>e+t,0),r=e.length,n=t/r,a=Math.sqrt(e.map(e=>Math.pow(e-n,2)).reduce((e,t)=>e+t)/r);return{mean:n,stdv:a}}},51962:(e,t,r)=>{r.d(t,{A:()=>C});var n=r(98587),a=r(58168),o=r(65043),s=r(58387),c=r(98610),l=r(60061),i=r(33064),d=r(59662),u=r(70579);const m=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var x=r(6803),f=r(98206),A=r(34535),y=r(61475),v=r(92532),b=r(72372);function g(e){return(0,b.Ay)("MuiCheckbox",e)}const S=(0,v.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),j=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],w=(0,A.Ay)(i.A,{shouldForwardProp:e=>(0,y.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t["size".concat((0,x.A)(r.size))],"default"!==r.color&&t["color".concat((0,x.A)(r.color))]]}})(e=>{let{theme:t,ownerState:r}=e;return(0,a.A)({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===r.color?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,l.X4)("default"===r.color?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&{["&.".concat(S.checked,", &.").concat(S.indeterminate)]:{color:(t.vars||t).palette[r.color].main},["&.".concat(S.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),z=(0,u.jsx)(p,{}),M=(0,u.jsx)(m,{}),k=(0,u.jsx)(h,{}),C=o.forwardRef(function(e,t){var r,l;const i=(0,f.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=z,color:m="primary",icon:p=M,indeterminate:h=!1,indeterminateIcon:A=k,inputProps:y,size:v="medium",className:b}=i,S=(0,n.A)(i,j),C=h?A:p,R=h?A:d,_=(0,a.A)({},i,{color:m,indeterminate:h,size:v}),N=(e=>{const{classes:t,indeterminate:r,color:n,size:o}=e,s={root:["root",r&&"indeterminate","color".concat((0,x.A)(n)),"size".concat((0,x.A)(o))]},l=(0,c.A)(s,g,t);return(0,a.A)({},t,l)})(_);return(0,u.jsx)(w,(0,a.A)({type:"checkbox",inputProps:(0,a.A)({"data-indeterminate":h},y),icon:o.cloneElement(C,{fontSize:null!=(r=C.props.fontSize)?r:v}),checkedIcon:o.cloneElement(R,{fontSize:null!=(l=R.props.fontSize)?l:v}),ownerState:_,ref:t,className:(0,s.A)(N.root,b)},S,{classes:N}))})}}]);
//# sourceMappingURL=5236.3e77ddf5.chunk.js.map