"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[5236,9373],{10939:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(65043),a=r(12110),o=r(17604);const s="style_container__M9GCG";var l=r(70579);const i={opacity:[0,1]};(0,o.A)()||(i.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,n.forwardRef)(((e,t)=>{let{overrideComponent:r,...o}=e;const d=(0,n.useRef)(null);(0,n.useLayoutEffect)((()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex((t=>e===t)),r=e.animate(i,{...c,delay:150*t});return()=>r.cancel()}),[]);const u=r?"section":a.A;return(0,l.jsx)("div",{ref:d,className:s,children:(0,l.jsx)(u,{component:"section",...o,ref:t})})}))},29373:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n={card:"style_card__7-6cg","margined-bottom":"style_margined-bottom__X+p3P"}},34088:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(65043),a=r(43126),o=r(10939);const s="style_rnd__Txifm",l="style_floating-card__HHpby";var i=r(70579);const c=(0,n.lazy)((()=>Promise.all([r.e(7784),r.e(8095),r.e(3845),r.e(9070),r.e(2594),r.e(7955),r.e(349),r.e(1235),r.e(9117)]).then(r.bind(r,92428))));let d=0;const u=e=>{const t=e.viewerRef||(0,n.useRef)(null),[r,u]=(0,n.useState)((()=>{const{innerWidth:e,innerHeight:t,scrollY:r}=window,n=document.querySelector("main").offsetTop,a=Math.max(Math.min(e/4,t/4),150),o=1.5*a;return{width:2*a,height:o,x:0,y:t-n-o-20+r}}));return(0,i.jsx)(a.p,{position:{x:r.x,y:r.y},size:{width:r.width,height:r.height},style:{zIndex:(d+=1,d)},className:s,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{u({...r})},onResizeStart:()=>{u({...r})},onDragStop:(e,t)=>{0===e.layerX&&0===e.layerY||r.x===t.x&&r.y===t.y||u({...r,x:t.x,y:t.y})},onResize:()=>t.current&&t.current.autoResize(),onResizeStop:(e,t,r,n,a)=>{u({width:r.style.width,height:r.style.height,...a})},children:(0,i.jsx)(o.A,{className:l,elevation:4,children:(0,i.jsx)(n.Suspense,{fallback:null,children:(0,i.jsx)(c,{className:l,ref:t,startsPlaying:!1,...e})})})})},m=e=>{let{newViewer:t,nailing:r=!0,onNail:a,onClose:o}=e;const[s,l]=(0,n.useState)([]),c=[...s],d=(0,n.useRef)([]);if(t){const e=()=>{let e=0;for(;e<999;){if(-1===d.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};t.id=e(),t.close=()=>{r&&l((e=>{const r=[...e],n=e.indexOf(t);return-1!==n&&r.splice(n,1),r})),o&&o(t),d.current.push(t.id)},r&&(t.nail=()=>{l((e=>[...e,t])),a&&a(t),d.current.push(t.id)}),c.push(t)}return c.map((e=>(0,i.jsx)(u,{...e},e.id)))}},45236:(e,t,r)=>{r.r(t),r.d(t,{default:()=>M});var n=r(65043),a=r(26494),o=r(8939),s=r(24056),l=r(71806),i=r(84882),c=r(28076),d=r(10039),u=r(73460),m=r(37597),p=r(51962),h=r(10939),x=r(34088),f=r(17545),y=r(58338),A=r(29449),v=r(95747),b=r(48940),g=r(29373),S=r(70579);const j=(0,n.lazy)((()=>Promise.all([r.e(2577),r.e(2460),r.e(5291),r.e(5077)]).then(r.bind(r,75291)))),w=[{reference:"firstframe",type:"rmsd",label:"First frame RMSd"},{reference:"average",type:"rmsd",label:"Average RMSd"},{reference:"firstframe",type:"tmscore",label:"First frame TM score"},{reference:"average",type:"tmscore",label:"Average TM score"}],z=["black","red","orange","yellow"],M=()=>{const{accessionAndMdNumber:e,metadata:t,analyses:r,populations:M}=(0,n.useContext)(A.f),k=r.includes("tmscores"),{loading:C,payload:R,error:_}=(0,y.A)(`${v.nP}/${e}/analyses/rmsds/`),{loading:N,payload:$,error:P}=(0,y.A)(k?`${v.nP}/${e}/analyses/tmscores/`:null),[T,E]=(0,n.useState)(w[0]),[F,H]=(0,n.useState)({}),{rmsds:I,frameStep:L,xAxisStep:D,xAxisLabel:O,isEnsemble:V,xTooltip:W,xWeights:Y}=(0,n.useMemo)((()=>{let e;const r=T.type,n=T.reference;if("rmsd"===r)e=R;else{if("tmscore"!==r)throw new Error(`Not supported type ${r}`);e=$}if(!e)return{};if(M&&M.loading)return{};const a={},o={};let s=0;e.data.forEach((e=>{if(e.reference!==n)return;const t={};t.data=e.values;const{mean:r,stdv:l}=(0,b.G)(t.data);t.average=r,t.stddev=l,t.color=z[s],s+=1;const i=e.group;a[i]=t,o[i]=!0})),H(o);const l=e.step,i=t.FRAMESTEP,c="ensemble"===t.TYPE;let d,u,m,p;if(c||!i)d=l,u="Frames",m=e=>"frame "+e;else{d=l*i,u="Time (ns)",m=e=>+e.toFixed(2)+" ns"}if(M&&M.payload){p=[];for(let e=0;e<M.payload.length;e+=d)p.push(M.payload[e])}return{rmsds:a,frameStep:l,xAxisStep:d,xAxisLabel:u,isEnsemble:c,xTooltip:m,xWeights:p}}),[t,R,$,T,M]),[q,B]=(0,n.useState)(null),G=q*L,X=(0,n.useMemo)((()=>[{x:q,attr:{fill:"#c8c8c8"}}]),[q]);if(C||N||M&&M.loading)return(0,S.jsx)(f.A,{});if(_)return _.toString();if(P)return P.toString();if(M&&M.error)return M.error.toString();if(!R)return"Something bad happened with RMSD";if(k&&!$)return"Something bad happened with TM score";if(M&&!M.payload)return"Something bad happened with populations";let J="RMSd (\xc5)";"tmscore"===T.type&&(J="TM score");const K=e=>Math.round(100*e)/100;return(0,S.jsxs)(n.Suspense,{fallback:(0,S.jsx)(f.A,{}),children:[(0,S.jsx)(h.A,{className:g.default.card,children:(0,S.jsxs)(a.A,{children:[(0,S.jsx)(o.A,{value:T,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{B(null),E(t)},className:g.default["margined-bottom"],children:w.map(((e,t)=>(0,S.jsx)(s.A,{value:e,label:e.label,disabled:"tmscore"===e.type&&!k},t)))}),(0,S.jsxs)(l.A,{padding:"checkbox",children:[(0,S.jsx)(i.A,{children:(0,S.jsxs)(c.A,{children:[(0,S.jsx)(d.A,{children:"selected atoms"}),(0,S.jsx)(d.A,{children:"mean"+("rmsd"===T.type?" (\xc5)":"")}),(0,S.jsx)(d.A,{children:"standard deviation"+("rmsd"===T.type?" (\xc5)":"")})]})}),(0,S.jsx)(u.A,{children:Object.entries(I).map(((e,t)=>{let[r,n]=e;return(0,S.jsxs)(c.A,{children:[(0,S.jsx)(d.A,{children:(0,S.jsx)(m.A,{onChange:()=>H((e=>(e[r]=!e[r],{...e}))),control:(0,S.jsx)(p.A,{checked:F[r],style:{color:z[t]}}),label:r})}),(0,S.jsx)(d.A,{children:K(n.average)}),(0,S.jsx)(d.A,{children:K(n.stddev)})]},r)}))})]})]})}),(0,S.jsx)(h.A,{className:g.default.card,children:(0,S.jsx)(a.A,{children:(0,S.jsx)(j,{yData:I,step:D,xAxisLabel:O,type:V?"dots":"line",xWeights:Y,xTooltip:W,xScaleFactor:1,yAxisLabel:J,onSelect:B,selfLegend:!1,dataDisplay:F,marks:X})})}),(0,S.jsx)(x.A,{newViewer:"number"===typeof q?{requestedFrame:G,xSelection:q}:null,onNail:e=>B((t=>e.xSelection===t?null:t)),onClose:e=>B((t=>e.xSelection===t?null:t))})]})}},48940:(e,t,r)=>{r.d(t,{G:()=>a,c:()=>n});const n=e=>{if(!e)return;return e.reduce(((e,t)=>e+t),0)/e.length},a=e=>{if(!e)return;const t=e.reduce(((e,t)=>e+t),0),r=e.length,n=t/r,a=Math.sqrt(e.map((e=>Math.pow(e-n,2))).reduce(((e,t)=>e+t))/r);return{mean:n,stdv:a}}},51962:(e,t,r)=>{r.d(t,{A:()=>C});var n=r(98587),a=r(58168),o=r(65043),s=r(58387),l=r(98610),i=r(60061),c=r(33064),d=r(59662),u=r(70579);const m=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var x=r(6803),f=r(98206),y=r(34535),A=r(61475),v=r(92532),b=r(72372);function g(e){return(0,b.Ay)("MuiCheckbox",e)}const S=(0,v.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),j=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],w=(0,y.Ay)(c.A,{shouldForwardProp:e=>(0,A.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${(0,x.A)(r.size)}`],"default"!==r.color&&t[`color${(0,x.A)(r.color)}`]]}})((e=>{let{theme:t,ownerState:r}=e;return(0,a.A)({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${"default"===r.color?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,i.X4)("default"===r.color?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&{[`&.${S.checked}, &.${S.indeterminate}`]:{color:(t.vars||t).palette[r.color].main},[`&.${S.disabled}`]:{color:(t.vars||t).palette.action.disabled}})})),z=(0,u.jsx)(p,{}),M=(0,u.jsx)(m,{}),k=(0,u.jsx)(h,{}),C=o.forwardRef((function(e,t){var r,i;const c=(0,f.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=z,color:m="primary",icon:p=M,indeterminate:h=!1,indeterminateIcon:y=k,inputProps:A,size:v="medium",className:b}=c,S=(0,n.A)(c,j),C=h?y:p,R=h?y:d,_=(0,a.A)({},c,{color:m,indeterminate:h,size:v}),N=(e=>{const{classes:t,indeterminate:r,color:n,size:o}=e,s={root:["root",r&&"indeterminate",`color${(0,x.A)(n)}`,`size${(0,x.A)(o)}`]},i=(0,l.A)(s,g,t);return(0,a.A)({},t,i)})(_);return(0,u.jsx)(w,(0,a.A)({type:"checkbox",inputProps:(0,a.A)({"data-indeterminate":h},A),icon:o.cloneElement(C,{fontSize:null!=(r=C.props.fontSize)?r:v}),checkedIcon:o.cloneElement(R,{fontSize:null!=(i=R.props.fontSize)?i:v}),ownerState:_,ref:t,className:(0,s.A)(N.root,b)},S,{classes:N}))}))}}]);
//# sourceMappingURL=5236.d60f5e93.chunk.js.map