"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[3016,5851],{507:(e,t,a)=>{a.d(t,{A:()=>v});var l=a(65043),n=a(2260),r=a(32143),s=a(57972),o=a(83558),i=a(14256),c=a(67784),d=a(17392),u=a(92127),h=a(12639),m=a(17545);const f="style_horizontal__2DIWx",p="style_horizontal-margined__e9fQR";var x=a(70579);const g=[{label:"All residues",value:"residue_indices"},{label:"Interface residues",value:"interface_indices"}],v=e=>{let{interactions:t,selectedInteraction:a,setSelectedInteraction:v,selectedResidues:y,setSelectedResidues:b,selectedOrder:A,handleToggleOrder:j,firstOrderLabel:k,firstOrderTooltip:S,secondOrderLabel:w,secondOrderTooltip:_,toggleOrderTooltip:I,interfaceOnly:z=!1}=e;const N=t[a];return(0,x.jsxs)(l.Suspense,{fallback:(0,x.jsx)(m.A,{}),children:[(0,x.jsx)(n.A,{value:a,onChange:e=>{v(e.target.value)},className:p,children:t.map(((e,t)=>(0,x.jsx)(r.A,{value:t,disabled:e.failed,children:e.label||e.name},t)))}),y&&(0,x.jsx)(s.A,{value:y,onChange:e=>{b(e.target.value)},className:f,children:g.map(((e,t)=>(0,x.jsx)(o.A,{value:e.value,control:(0,x.jsx)(i.A,{color:"primary"}),label:e.label,disabled:"All residues"===e.label&&z},t)))}),void 0!==A&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.A,{label:k,title:S,value:A?N.agent_1:N.agent_2}),(0,x.jsx)(d.A,{title:I,onClick:()=>{j()},size:"large",children:(0,x.jsx)(u.g,{icon:h._qq})}),(0,x.jsx)(c.A,{label:w,title:_,value:A?N.agent_2:N.agent_1})]})]})}},10419:(e,t,a)=>{a.d(t,{A:()=>s});var l=a(65043),n=a(29449),r=a(71261);const s=()=>{const{topology:e}=(0,l.useContext)(n.f);return(0,l.useMemo)((()=>{if(!e)return[];const t=[];return e.iterchains().forEach((a=>{const l=a.metadataChainName,n=l?`${l} (Chain ${a.name})`:`Chain ${a.name}`,s=a.residues,o=a=>{const l=s.filter((e=>e.classification===a));if(0===l.length)return;const o=l.filter((e=>e.isCg));if(o.length>0){const l=o.map((e=>e.index)),{rangedSelection:r}=e.residueIndices2Ngl(l);t.push({name:`${n} - ${a} polymer (coarse grain)`,selection:r,type:"spacefill",color:"chainid"})}const i=l.filter((e=>!e.isCg)).map((e=>e.index)),c=[...(0,r.Y$)(i)],d=c.filter((e=>e.length<=3));if(d.length>0){const l=d.reduce(((e,t)=>e.concat(t)),[]),{rangedSelection:r}=e.residueIndices2Ngl(l);t.push({name:`${n} - ${a} polymer (short)`,selection:r,type:"licorice",color:"chainid"})}const u=c.filter((e=>e.length>3));if(u.length>0){const l=u.reduce(((e,t)=>e.concat(t)),[]),{rangedSelection:r}=e.residueIndices2Ngl(l);t.push({name:`${n} - ${a} polymer`,selection:r,type:"cartoon",color:"chainid"});new Set(["dna","rna","nucleic"]).has(a)&&t.push({name:`${n} - ${a} bases`,selection:r,type:"base",color:"resname"})}};o("protein"),o("dna"),o("rna"),o("nucleic");const i=s.filter((e=>"ligand"===e.classification));if(i.length>0){const a=new Set(i.map((e=>e.referenceId)));for(const l of a){const a=i.filter((e=>e.referenceId===l)).map((e=>e.index)),{rangedSelection:r}=e.residueIndices2Ngl(a);t.push({name:`${n} - ligand ${l}`,selection:r,type:"ball+stick",color:"element"})}}const c=new Set(["fatty","steroid"]),d=s.filter((e=>c.has(e.classification)));if(d.length>0){const a=d.map((e=>e.index)),{rangedSelection:l}=e.residueIndices2Ngl(a);t.push({name:`${n} - lipids`,selection:l,type:"licorice",color:"grey",opacity:.5})}const u=s.filter((e=>"ion"===e.classification));if(u.length>0){const a=u.map((e=>e.index)),{rangedSelection:l}=e.residueIndices2Ngl(a);t.push({name:`${n} - ions`,selection:l,type:"spacefill",color:"element"})}const h=new Set(["solvent","unknown"]),m=s.filter((e=>h.has(e.classification)));if(m.length>0){const a=m.map((e=>e.index)),{rangedSelection:l}=e.residueIndices2Ngl(a);t.push({name:`${n} - other`,selection:l,type:"licorice",color:"purple",opacity:.3})}})),t}),[e])}},10939:(e,t,a)=>{a.d(t,{A:()=>d});var l=a(65043),n=a(12110),r=a(17604);const s="style_container__M9GCG";var o=a(70579);const i={opacity:[0,1]};(0,r.A)()||(i.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,l.forwardRef)(((e,t)=>{let{overrideComponent:a,...r}=e;const d=(0,l.useRef)(null);(0,l.useLayoutEffect)((()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex((t=>e===t)),a=e.animate(i,{...c,delay:150*t});return()=>a.cancel()}),[]);const u=a?"section":n.A;return(0,o.jsx)("div",{ref:d,className:s,children:(0,o.jsx)(u,{component:"section",...r,ref:t})})}))},23016:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});const l={card:"style_card__vXTgq",horizontal:"style_horizontal__t0owt","text-field":"style_text-field__bQrv2","margined-bottom":"style_margined-bottom__pVY9i"}},34088:(e,t,a)=>{a.d(t,{A:()=>h});var l=a(65043),n=a(43126),r=a(10939);const s="style_rnd__Txifm",o="style_floating-card__HHpby";var i=a(70579);const c=(0,l.lazy)((()=>Promise.all([a.e(7784),a.e(8095),a.e(3845),a.e(9070),a.e(247),a.e(7955),a.e(8677),a.e(3471),a.e(335),a.e(9117)]).then(a.bind(a,14696))));let d=0;const u=e=>{const t=e.viewerRef||(0,l.useRef)(null),[a,u]=(0,l.useState)((()=>{const{innerWidth:e,innerHeight:t,scrollY:a}=window,l=document.querySelector("main").offsetTop,n=Math.max(Math.min(e/4,t/4),150),r=1.5*n;return{width:2*n,height:r,x:0,y:t-l-r-20+a}}));return(0,i.jsx)(n.p,{position:{x:a.x,y:a.y},size:{width:a.width,height:a.height},style:{zIndex:(d+=1,d)},className:s,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{u({...a})},onResizeStart:()=>{u({...a})},onDragStop:(e,t)=>{0===e.layerX&&0===e.layerY||a.x===t.x&&a.y===t.y||u({...a,x:t.x,y:t.y})},onResize:()=>t.current&&t.current.autoResize(),onResizeStop:(e,t,a,l,n)=>{u({width:a.style.width,height:a.style.height,...n})},children:(0,i.jsx)(r.A,{className:o,elevation:4,children:(0,i.jsx)(l.Suspense,{fallback:null,children:(0,i.jsx)(c,{className:o,ref:t,startsPlaying:!1,...e})})})})},h=e=>{let{newViewer:t,nailing:a=!0,onNail:n,onClose:r}=e;const[s,o]=(0,l.useState)([]),c=[...s],d=(0,l.useRef)([]);if(t){const e=()=>{let e=0;for(;e<999;){if(-1===d.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};t.id=e(),t.close=()=>{a&&o((e=>{const a=[...e],l=e.indexOf(t);return-1!==l&&a.splice(l,1),a})),r&&r(t),d.current.push(t.id)},a&&(t.nail=()=>{o((e=>[...e,t])),n&&n(t),d.current.push(t.id)}),c.push(t)}return c.map((e=>(0,i.jsx)(u,{...e},e.id)))}},45851:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var l=a(65043),n=a(26494),r=a(85865),s=a(67784),o=a(10939),i=a(34088),c=a(10419),d=a(17545),u=a(58338),h=a(29449),m=a(95747),f=a(83558),p=a(51962);const x="style_graph-legend__TA-gh";var g=a(70579);const v=e=>{let{entries:t,onChange:a,onMouseOver:l,onMouseOut:n}=e;return(0,g.jsx)("div",{className:x,children:t.map((e=>{let{name:t,color:r,check:s}=e;return(0,g.jsx)(f.A,{"data-key":t,onChange:e=>a(e.target.dataset.key),onMouseOver:l,onMouseOut:n,control:(0,g.jsx)(p.A,{checked:s,style:{color:r||"black"},inputProps:{"data-key":t}}),label:t},t)}))})};var y=a(507),b=a(23016);const A=(0,l.lazy)((()=>Promise.all([a.e(7631),a.e(3969),a.e(5291),a.e(5077)]).then(a.bind(a,75291)))),j="guest",k=e=>{const t=e.reduce(((e,t)=>e+t),0);return Math.round(1e4*t)/1e4},S=()=>{const{accessionAndMdNumber:e,topology:t,interactions:a}=(0,l.useContext)(h.f),f=(0,c.A)(),{loading:p,payload:x,error:S}=(0,u.A)(`${m.nP}/${e}/analyses/energies/`),[w,_]=(0,l.useState)(0),[I,z]=(0,l.useState)(!0),[N,C]=(0,l.useState)(null),[$,T]=(0,l.useState)({all:!0,start:!0,end:!0}),[O,M]=(0,l.useState)(null),{data:D,dataError:V,strongBondMarks:R,esData:E,vdwData:W,bothData:L,xTooltip:P}=(0,l.useMemo)((()=>{if(!x||!t)return{};let e,l;const n=a[w],r=I?"agent1":"agent2",s=x.data.find((e=>e.name===n.name));let o;if(!s)return o=`Dataset for the interaction "${n.name}" not found`,{data:null,dataError:o};if(e=s[r],!e)return o=`Data for the interaction "${n.name}" not found`,{data:null,dataError:o};const i=I?n.interface_indices_2:n.interface_indices_1,{rangedSelection:c}=t.residueIndices2Ngl(i);l=c,e.xTags=[];(I?n.residue_indices_1:n.residue_indices_2).forEach((a=>{const l=t.getResidueByIndex(a);e.xTags.push(l.standardLabel)})),M((e=>{if(null===e)return[...f,{selection:l,name:"Guest elements",type:"ball+stick",color:"element",opacity:.3,reference:j}];return e.find((e=>e.reference===j)).selection=l,[...e]}));const d=n.strong_bonds,u=[].concat.apply([],d).map((e=>t.getAtomByIndex(e).residue.standardLabel)),h=[];u.forEach((t=>{const a=e.xTags.indexOf(t);-1!==a&&h.push({x:a,attr:{fill:"orange",opacity:.5}})}));const m={esi:{data:e.ies,color:"red"},esf:{data:e.fes,color:"blue"},es:{data:e.es,color:"black"}},p={vdwi:{data:e.ivdw,color:"red"},vdwf:{data:e.fvdw,color:"blue"},vdw:{data:e.vdw,color:"black"}},g={bothi:{data:e.iboth,color:"red"},bothf:{data:e.fboth,color:"blue"},both:{data:e.both,color:"black"}};return{data:e,dataError:o,strongBondMarks:h,esData:m,vdwData:p,bothData:g,xTooltip:(t,a)=>"residue "+(e.xTags&&e.xTags[a]||a)}}),[x,w,I,t,a,f]),H=(0,l.useMemo)((()=>{if(null===N)return R;return[{x:N,attr:{fill:"#c8c8c8"}},...R]}),[N,R]),{esDisplay:B,vdwDisplay:F,bothDisplay:Y}=(0,l.useMemo)((()=>({esDisplay:{esi:$.start,esf:$.end,es:$.all},vdwDisplay:{vdwi:$.start,vdwf:$.end,vdw:$.all},bothDisplay:{bothi:$.start,bothf:$.end,both:$.all}})),[$]),q=(0,l.useMemo)((()=>{if(null===N)return null;const e=a[w];return[(I?e.residue_indices_1:e.residue_indices_2)[N]]}),[N,a,w,I]);if(p)return(0,g.jsx)(d.A,{});if(S)return S.toString();if(!x)return"Something bad happened";if(!t)return(0,g.jsx)(d.A,{});const G=D&&1===D.es.length,X=e=>{C(e)};return(0,g.jsxs)(l.Suspense,{fallback:(0,g.jsx)(d.A,{}),children:[(0,g.jsxs)(o.A,{className:b.default.card,children:[(0,g.jsxs)(n.A,{className:b.default.horizontal,children:[(0,g.jsx)(r.A,{variant:"h6",children:"Interaction:"}),(0,g.jsx)(y.A,{interactions:a,selectedInteraction:w,setSelectedInteraction:_,selectedOrder:I,handleToggleOrder:()=>{z((e=>!e)),C(null)},firstOrderLabel:"Guest",firstOrderTooltip:"Interactor whose energies are to be shown",secondOrderLabel:"Host",secondOrderTooltip:"Interactor with the opposite energies",toggleOrderTooltip:"Toggle interactors"})]}),V||!D?null:(0,g.jsxs)(n.A,{children:[(0,g.jsx)("legend",{className:b.default["margined-bottom"],children:"Overall energies summatory"}),(0,g.jsxs)("div",{children:[(0,g.jsx)(s.A,{className:b.default["text-field"],label:"Electrostatic",title:"Sum electorstatic value along the whole trajectory",value:k(D.es)+" kcal/mol"}),(0,g.jsx)(s.A,{className:b.default["text-field"],label:"Electrostatic Initial",title:"Sum electorstatic value along the first 20% trajectory frames",value:k(D.ies)+" kcal/mol"}),(0,g.jsx)(s.A,{className:b.default["text-field"],label:"Electrostatic Final",title:"Sum electorstatic value along the last 20% trajectory frames",value:k(D.fes)+" kcal/mol"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)(s.A,{className:b.default["text-field"],label:"Van der Waals",title:"Sum Van der Waals value along the whole trajectory",value:k(D.vdw)+" kcal/mol"}),(0,g.jsx)(s.A,{className:b.default["text-field"],label:"Van der Waals Initial",title:"Sum Van der Waals value along the first 20% trajectory frames",value:k(D.ivdw)+" kcal/mol"}),(0,g.jsx)(s.A,{className:b.default["text-field"],label:"Van der Waals Final",title:"Sum Van der Waals value along the last 20% trajectory frames",value:k(D.fvdw)+" kcal/mol"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)(s.A,{className:b.default["text-field"],label:"Electrostatic + Van der Waals",title:"Sum electorstatic + Van der Waals value along the whole trajectory",value:k(D.both)+" kcal/mol"}),(0,g.jsx)(s.A,{className:b.default["text-field"],label:"Electrostatic + Van der Waals Initial",title:"Sum electorstatic + Van der Waals value along the first 20% trajectory frames",value:k(D.iboth)+" kcal/mol"}),(0,g.jsx)(s.A,{className:b.default["text-field"],label:"Electrostatic + Van der Waals Final",title:"Sum electorstatic + Van der Waals value along the last 20% trajectory frames",value:k(D.fboth)+" kcal/mol"})]})]}),V||G?(0,g.jsx)(n.A,{children:(0,g.jsx)(r.A,{variant:"h6",children:V||"The host has only 1 residue"})}):(0,g.jsxs)(n.A,{children:[(0,g.jsx)(A,{yData:E,xAxisValues:D.xTags,xTooltip:P,title:"Electrostatic",xScaleFactor:.001,yAxisLabel:"Interaction energy (kcal/mol)",onSelect:X,dataDisplay:B,fullPrecision:!0,marks:H}),(0,g.jsx)(A,{yData:W,title:"Van der Waals",xAxisValues:D.xTags,xTooltip:P,yAxisLabel:"Interaction energy (kcal/mol)",onSelect:X,dataDisplay:F,fullPrecision:!0,marks:H}),(0,g.jsx)(A,{yData:L,title:"Electrostatic + Van der Waals",xAxisLabel:"Residue",xAxisValues:D.xTags,xTooltip:P,yAxisLabel:"Interaction energy (kcal/mol)",onSelect:X,dataDisplay:Y,fullPrecision:!0,marks:H}),(0,g.jsx)(v,{entries:[{name:"all",color:"black",check:$.all},{name:"start",color:"red",check:$.start},{name:"end",color:"blue",check:$.end}],onChange:e=>T((t=>{const a={...t};return a[e]=!a[e],a}))})]})]}),(0,g.jsx)(i.A,{newViewer:q?{selectedResidueIndices:q,representationsState:[O,M]}:null,onNail:e=>C((t=>e.selectedResidueIndices===q?null:t)),onClose:e=>C((t=>e.selectedResidueIndices===q?null:t))})]})}},51962:(e,t,a)=>{a.d(t,{A:()=>z});var l=a(98587),n=a(58168),r=a(65043),s=a(58387),o=a(98610),i=a(60061),c=a(33064),d=a(59662),u=a(70579);const h=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),m=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),f=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var p=a(6803),x=a(98206),g=a(34535),v=a(61475),y=a(92532),b=a(72372);function A(e){return(0,b.Ay)("MuiCheckbox",e)}const j=(0,y.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),k=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],S=(0,g.Ay)(c.A,{shouldForwardProp:e=>(0,v.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,t[`size${(0,p.A)(a.size)}`],"default"!==a.color&&t[`color${(0,p.A)(a.color)}`]]}})((e=>{let{theme:t,ownerState:a}=e;return(0,n.A)({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${"default"===a.color?t.vars.palette.action.activeChannel:t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,i.X4)("default"===a.color?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==a.color&&{[`&.${j.checked}, &.${j.indeterminate}`]:{color:(t.vars||t).palette[a.color].main},[`&.${j.disabled}`]:{color:(t.vars||t).palette.action.disabled}})})),w=(0,u.jsx)(m,{}),_=(0,u.jsx)(h,{}),I=(0,u.jsx)(f,{}),z=r.forwardRef((function(e,t){var a,i;const c=(0,x.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=w,color:h="primary",icon:m=_,indeterminate:f=!1,indeterminateIcon:g=I,inputProps:v,size:y="medium",className:b}=c,j=(0,l.A)(c,k),z=f?g:m,N=f?g:d,C=(0,n.A)({},c,{color:h,indeterminate:f,size:y}),$=(e=>{const{classes:t,indeterminate:a,color:l,size:r}=e,s={root:["root",a&&"indeterminate",`color${(0,p.A)(l)}`,`size${(0,p.A)(r)}`]},i=(0,o.A)(s,A,t);return(0,n.A)({},t,i)})(C);return(0,u.jsx)(S,(0,n.A)({type:"checkbox",inputProps:(0,n.A)({"data-indeterminate":f},v),icon:r.cloneElement(z,{fontSize:null!=(a=z.props.fontSize)?a:y}),checkedIcon:r.cloneElement(N,{fontSize:null!=(i=N.props.fontSize)?i:y}),ownerState:C,ref:t,className:(0,s.A)($.root,b)},j,{classes:$}))}))}}]);
//# sourceMappingURL=5851.f0c0b49a.chunk.js.map