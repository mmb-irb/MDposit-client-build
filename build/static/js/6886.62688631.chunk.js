"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[6886],{17545:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(65043),n=s(64600),r=s.n(n),o=s(81637),a=s(92954);const c="style_loading__Vdgbc",h="style_show__wIdQ5";var d=s(70579);const u=750,l=e=>{let{wait:t=u}=e;const[s,n]=(0,a.A)(!1);return(0,i.useLayoutEffect)((()=>{const e=setTimeout((()=>{n()}),t);return()=>clearTimeout(e)}),[n,t]),(0,d.jsx)("div",{title:"loading...",className:r()(c,{[h]:s}),children:s&&(0,d.jsx)(o.A,{variant:"indeterminate",color:"primary",size:50,thickness:5})})}},92954:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(65043);const n=e=>{const[t,s]=(0,i.useState)(!!e),n=(0,i.useCallback)((e=>{switch(typeof e){case"function":s(e);break;case"boolean":case"number":case"string":s(Boolean(e));break;default:s((e=>!e))}}),[]);return[t,n]}},66062:(e,t,s)=>{s.d(t,{M:()=>a});var i=s(65043),n=s(58338),r=s(95747),o=s(66496);class a{constructor(e){var t=this;this._apiEndpoints={topology:"/topology",interactions:"/analyses/interactions",references:"/references",fileDescriptors:"/filenotes",populations:"/files/populations.json"},this._apiQuery=function(e){let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t._apiBaseUrl+t._apiEndpoints[e];s||(i=null),t._apiResponses[e]&&t._apiResponses[e].payload&&(i=null);const r=(0,n.A)(i);return null!==i&&(t._apiResponses[e]=r),t._apiResponses[e]},Object.entries(e).forEach((e=>{let[t,s]=e;this[t]=s})),this.metadata.mdFrames||(this.metadata.mdFrames=this.metadata.SNAPSHOTS),this.metadata.timeLength=this.metadata.FRAMESTEP&&this.metadata.mdFrames&&this.metadata.FRAMESTEP*this.metadata.mdFrames||null,this.mdCount=this.mds?this.mds.filter((e=>"(removed)"!==e.slice(-9))).length:0;const s=this.accession||this.identifier;this.accessionAndMdNumber=this.mds?"".concat(s,".").concat(this.mdNumber):s,this.hasInteractions=this.analyses.includes("interactions"),this.isPopulated=Boolean(this.files&&this.files.find((e=>"populations.json"===e))),this.directions={overview:!0,trajectory:!0,files:!0};const i=["rmsds","rgyr","fluctuation","pca","rmsd-perres","rmsd-pairwise","dist-perres","hbonds","energies","pockets","sasa"];for(const n of i)this.directions[n]=this.analyses.includes(n);if(this.directions.electrostatic=this.analyses.includes("interactions"),r._r.options.includes("covid")){const e=this.metadata&&this.metadata.REFERENCES&&this.metadata.REFERENCES.find((e=>r.kO.includes(e)));this.directions.mutations=Boolean(e);const t=this.metadata&&this.metadata.REFERENCES&&this.metadata.REFERENCES.find((e=>r.QO.includes(e)));this.directions.epitopes=Boolean(t)}this.metadata&&"Markov state model (MSM)"===this.metadata.METHOD&&(this.directions.populations=this.files&&this.files.find((e=>"populations.json"===e)),this.directions.markov=this.analyses.includes("markov")),this._apiResponses={topology:null,interactions:null,references:null,fileDescriptors:null,populations:null},this._topologyManager=null,this._apiBaseUrl="".concat(r.nP,"/").concat(this.accessionAndMdNumber)}get interactions(){const e=this._apiQuery("interactions",this.hasInteractions);if(!e)return null;if(e.loading)return null;if(e.error)throw new Error("Error when downloading project interactions: "+e.error.message);if(!e.payload)throw new Error("Something went wrong with project interactions");return e.payload}get references(){const e=this._apiQuery("references");if(e.loading)return null;if(e.error)throw new Error("Error when downloading project references: "+e.error.message);if(!e.payload)throw new Error("Something went wrong with project references");return e.payload}get proteinReferences(){const e=this.references;return(0,i.useMemo)((()=>e&&e.filter((e=>e.uniprot))),[e])}get ligandReferences(){const e=this.references;return(0,i.useMemo)((()=>e&&e.filter((e=>e.pubchem))),[e])}get topology(){const e=this.references,t=this._apiQuery("topology");if(t.loading)return null;if(t.error)throw new Error("Error when downloading project topology: "+t.error.message);if(!t.payload)throw new Error("Something went wrong with project topology");return this._topologyManager||(this._topologyManager=new o.ch(t.payload,this.metadata,e)),this._topologyManager}get fileDescriptors(){return this._apiQuery("fileDescriptors")}get populations(){return this._apiQuery("populations",this.isPopulated)}}},66496:(e,t,s)=>{s.d(t,{ch:()=>m,hR:()=>o,kn:()=>c,w1:()=>h});var i=s(48044);const n=s(82746),r=/^([0-9]*)-([0-9]*)$/,o=e=>{const t=e.split(", "),s=[];for(const n of t)if(n.match(r)){const e=r.exec(n),t=(0,i.A)(+e[1],+e[2]+1);s.push(...t)}else s.push(+n);return s},a={ALA:"A",ALAN:"A",ALAC:"A",ARG:"R",ARGN:"R",ARGC:"R",ASN:"N",ASNN:"N",ASNC:"N",ASP:"D",ASPN:"D",ASPC:"D",CYS:"C",CYSN:"C",CYSC:"C",CYH:"C",CSH:"C",CSS:"C",CYX:"C",CYP:"C",GLN:"Q",GLNN:"Q",GLNC:"Q",GLU:"E",GLUN:"E",GLUC:"E",GLY:"G",GLYN:"G",GLYC:"G",HIS:"H",HISN:"H",HISC:"H",HID:"H",HIE:"H",HIP:"H",HSD:"H",HSE:"H",ILE:"I",ILEN:"I",ILEC:"I",ILU:"I",LEU:"L",LEUN:"L",LEUC:"L",LYS:"K",LYSN:"K",LYSC:"K",MET:"M",METN:"M",METC:"M",PHE:"F",PHEN:"F",PHEC:"F",PRO:"P",PRON:"P",PROC:"P","PR\xd8":"P",PR0:"P",PRZ:"P",SER:"S",SERN:"S",SERC:"S",THR:"T",THRN:"T",THRC:"R",TRP:"W",TRPN:"W",TRPC:"W",TRY:"W",TYR:"Y",TYRN:"Y",TYRC:"Y",VAL:"V",VALN:"V",VALC:"V",A:"A",A3:"A",A5:"A",C:"C",C3:"C",C5:"C",T:"T",T3:"T",T5:"T",G:"G",G3:"G",G5:"G",U:"U",U3:"U",U5:"U",DA:"A",DT:"T",DC:"C",DG:"G"},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;const i=[],r=new n.Selection(e),o=s.getView(r);return t?o.eachResidue((e=>{var t;((t=e).isProtein()||t.isRna()||t.isDna())&&i.push(e.index)})):o.eachResidue((e=>{i.push(e.index)})),i},h=(e,t)=>{const s=new n.Selection(e);return 0!==t.getView(s).atomCount},d={H:"white",C:"grey",N:"blue",O:"red",S:"yellow",P:"orange"};class u{constructor(e,t){this.topology=e,this.index=t}get number(){return this.topology.residueNumbers[this.index]}get chainIndex(){return this.topology.residueChainIndices[this.index]}get chainName(){return this.topology.chainNames[this.chainIndex]}get chain(){return this.topology.getChainByIndex(this.chainIndex)}get icode(){return this.topology.residueIcodes?this.topology.residueIcodes[this.index]:null}get nglSelection(){let e=":".concat(this.chainName," and ").concat(this.number);return this.icode&&(e+=" ^".concat(this.icode)),e}get type(){return this.topology.residueNames[this.index]}get name(){return this.type}get letter(){return(e=>{if(!e)return;return a[e]||"X"})(this.type)}get referenceIndex(){return this.topology.residueReferenceIndices?this.topology.residueReferenceIndices[this.index]:null}get referenceId(){const e=this.referenceIndex;return null===e?null:this.topology.references[e]}get referenceType(){const e=this.referenceIndex;return null===e?null:this.topology.referenceTypes[e]}get referenceNumber(){return this.topology.residueReferenceNumbers?this.topology.residueReferenceNumbers[this.index]:null}get isProtein(){return"protein"===this.referenceType}get isLigand(){return"ligand"===this.referenceType}get referenceData(){if(null===this.referenceId)return null;if(this.isProtein){const e=this.topology.proteinReferences.find((e=>e.uniprot===this.referenceId));if(!e)throw new Error("Reference id ".concat(this.referenceId," is not found among protein references"));return e}if(this.isLigand){const e=this.topology.ligandReferences.find((e=>e.pubchem===this.referenceId));if(!e)throw new Error("Reference id ".concat(this.referenceId," is not found among ligand references"));return e}throw new Error("Not supported reference type ".concat(this.referenceType))}get referenceName(){const e=this.topology.metadataLigandNames&&this.topology.metadataLigandNames[this.referenceId];if(e)return e;const t=this.referenceData;return t?t.name:null}get isPbc(){return this.topology.pbcResidues.has(this.index)}get standardLabel(){let e="";this.topology.chainNames.length>1&&(e="".concat(this.chainName,":"));const t=this.referenceNumber;let s;s=null!==t?"".concat(t):"".concat(this.number,"*");let i=this.icode;i||(i="");return e+s+i+"(".concat(this.type,")")}get atomIndices(){return this.topology.residueAtomIndices[this.index]}get atomCount(){return this.atomIndices.length}get hasCAlpha(){for(const e of this.atomIndices){if("CA"===this.topology.getAtomName(e))return!0}return!1}}class l{constructor(e,t){this.topology=e,this.index=t}get name(){return this.topology.chainNames[this.index]}get letter(){return this.name}get metadataChainName(){const e=this.topology.metadataChainNames;return e?Array.isArray(e)?e[this.index]||"":e[this.name]||"":""}get residueIndices(){return this.topology.chainResidueIndices[this.index]}get residueNumbers(){return this.topology.chainResidueNumbers[this.index]}get residues(){return this.residueIndices.map((e=>new u(e)))}}class m{constructor(e,t,s){var i=this;this.getAtomName=e=>this.atomNames[e],this.getAtomResidueIndex=e=>this.atomResidueIndices[e],this.getResidueByIndex=e=>{const t=this.residueNumbers.length;if(e>=t)throw new Error("The residue index ".concat(e," is out of range. There are ").concat(t," residues in the topology"));return new u(this,e)},this.getResidueByParameters=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=i.getChainByName(e);for(const r of n.residueIndices){const e=new u(i,r);if(e.number===t&&e.icode===s)return e}throw new Error("Residue with chain ".concat(e,", number ").concat(t," and icode ").concat(s," does not exist"))},this.getChainByIndex=e=>{const t=this.chainNames.length;if(e>=t)throw new Error("The chain index ".concat(e," is out of range. There are ").concat(t," chains in the topology"));return new l(this,e)},this.getChainByName=e=>{const t=this.chainNames.indexOf(e);if(-1===t)throw new Error("Chain ".concat(e," is not found in the topology"));return new l(this,t)},this.getReferenceResidueIndices=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!i.references)return;const s=i.references.indexOf(e);if(-1===s)return;const n=[];return i.residueReferenceIndices.forEach(((e,r)=>{if(e!==s)return;if(null===t)return n.push(r);const o=i.residueReferenceNumbers[r];t.includes(o)&&n.push(r)})),n},this.residueIndices2Ngl=e=>{const t=[];let s=!1;const i=e.map((e=>this.getResidueByIndex(e)));i.map((e=>e.chainName)).filter(((e,t,s)=>s.indexOf(e)===t)).forEach((e=>{const n=i.filter((t=>t.chainName===e)).map((e=>e.number)),{rangedSelection:r,small:o}=function(e){const t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?",":", ";let s="",i=Number.POSITIVE_INFINITY;e.sort(((e,t)=>e-t));const n=e.length;if(1===n)return{rangedSelection:e[0].toString(),small:!0};for(let o=0;o<n;o++){const r=e[o];s+=t+r;for(let t=o+1;t<n;t++){const a=e[t];let c=t-o;if(a-r!==c){c-=1,i=Math.min(c,i),c>1&&(s+="-"+e[t-1],o=t-1);break}t===n-1&&(i=Math.min(c,i),c>1&&(s+="-"+a,o=t))}}const r=i<=3;return s=s.substring(t.length),{rangedSelection:s,small:r}}(n);t.push("(:".concat(e," and (").concat(r,"))")),o&&(s=!0)}));return{rangedSelection:t.join(" or "),small:s}},this.byChains=e=>{const t={};return e.forEach((e=>{const s=this.getResidueByIndex(e).chainName,i=t[s];i?i.push(e):t[s]=[e]})),t},this.getAtomElementColor=e=>{const t=this.atomElements[e],s=d[t];return s||"black"},this.getAtomElementColors=()=>this.atomElements.map((e=>{const t=d[e];return t||"black"})),this.atomNames=e.atom_names,this.atomElements=e.atom_elements,this.atomCharges=e.atom_charges,this.atomResidueIndices=e.atom_residue_indices,this.residueNames=e.residue_names,this.residueNumbers=e.residue_numbers;const n=e.residue_icodes;n?(this.residueIcodes=Array(this.residueNames.length).fill(""),Object.entries(n).forEach((e=>{let[t,s]=e;this.residueIcodes[+t]=s}))):this.residueIcodes="",this.residueChainIndices=e.residue_chain_indices,this.chainNames=e.chain_names,this.references=e.references,this.referenceTypes=e.reference_types,!this.referenceTypes&&this.references&&(this.referenceTypes=this.references.map((e=>"protein"))),this.residueReferenceIndices=e.residue_reference_indices,this.residueReferenceNumbers=e.residue_reference_numbers,this.pbcResidues=e.pbc_residues&&new Set(e.pbc_residues),this.residueAtomIndices=Array.from(Array(this.residueNames.length),(()=>[]));for(const[r,o]of this.atomResidueIndices.entries())this.residueAtomIndices[o].push(r);this.chainResidueIndices=Array.from(Array(this.chainNames.length),(()=>[]));for(const[r,o]of this.residueChainIndices.entries())this.chainResidueIndices[o].push(r);this.chainResidueNumbers=this.chainResidueIndices.map((e=>e.map((e=>this.residueNumbers[e])))),this.metadataChainNames=t.CHAINNAMES,this.metadataLigandNames=t.LIGANDNAMES,this.proteinReferences=s&&s.filter((e=>e.uniprot)),this.ligandReferences=s&&s.filter((e=>e.pubchem))}get residueCount(){return this.residueNumbers.length}}}}]);
//# sourceMappingURL=6886.62688631.chunk.js.map