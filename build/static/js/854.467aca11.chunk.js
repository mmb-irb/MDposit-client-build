"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[375,854],{1960:(e,t,a)=>{a.d(t,{A:()=>j});var r=a(65043),n=a(85865),o=a(98587),s=a(58168),l=a(58387),i=a(98610),c=a(60061),d=a(6803),u=a(33064),h=a(34535),m=a(98206),p=a(92532),g=a(72372);function f(e){return(0,g.Ay)("MuiSwitch",e)}const x=(0,p.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var b=a(70579);const v=["className","color","edge","size","sx"],y=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.edge&&t[`edge${(0,d.A)(a.edge)}`],t[`size${(0,d.A)(a.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${x.thumb}`]:{width:16,height:16},[`& .${x.switchBase}`]:{padding:4,[`&.${x.checked}`]:{transform:"translateX(16px)"}}}}]}),w=(0,h.Ay)(u.A,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.switchBase,{[`& .${x.input}`]:t.input},"default"!==a.color&&t[`color${(0,d.A)(a.color)}`]]}})(e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${"light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${x.checked}`]:{transform:"translateX(20px)"},[`&.${x.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${x.checked} + .${x.track}`]:{opacity:.5},[`&.${x.disabled} + .${x.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:""+("light"===t.palette.mode?.12:.2)},[`& .${x.input}`]:{left:"-100%",width:"300%"}}},e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,c.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[a]=e;return{props:{color:a},style:{[`&.${x.checked}`]:{color:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,c.X4)(t.palette[a].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${x.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${a}DisabledColor`]:`${"light"===t.palette.mode?(0,c.a)(t.palette[a].main,.62):(0,c.e$)(t.palette[a].main,.55)}`}},[`&.${x.checked} + .${x.track}`]:{backgroundColor:(t.vars||t).palette[a].main}}}})]}}),A=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${"light"===t.palette.mode?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:""+("light"===t.palette.mode?.38:.3)}}),k=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}}),C=r.forwardRef(function(e,t){const a=(0,m.b)({props:e,name:"MuiSwitch"}),{className:r,color:n="primary",edge:c=!1,size:u="medium",sx:h}=a,p=(0,o.A)(a,v),g=(0,s.A)({},a,{color:n,edge:c,size:u}),x=(e=>{const{classes:t,edge:a,size:r,color:n,checked:o,disabled:l}=e,c={root:["root",a&&`edge${(0,d.A)(a)}`,`size${(0,d.A)(r)}`],switchBase:["switchBase",`color${(0,d.A)(n)}`,o&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},u=(0,i.A)(c,f,t);return(0,s.A)({},t,u)})(g),C=(0,b.jsx)(k,{className:x.thumb,ownerState:g});return(0,b.jsxs)(y,{className:(0,l.A)(x.root,r),sx:h,ownerState:g,children:[(0,b.jsx)(w,(0,s.A)({type:"checkbox",icon:C,checkedIcon:C,ref:t,ownerState:g},p,{classes:(0,s.A)({},x,{root:x.switchBase})})),(0,b.jsx)(A,{className:x.track,ownerState:g})]})}),S="style_horizontal__wW0pI",j=e=>{let{firstLabel:t,secondLabel:a,isFirst:r,onChange:o}=e;return(0,b.jsxs)("div",{className:S,children:[(0,b.jsx)(n.A,{color:r?null:"textSecondary",variant:"h6",children:t}),(0,b.jsx)(C,{checked:!r,onChange:o}),(0,b.jsx)(n.A,{color:r?"textSecondary":null,variant:"h6",children:a})]})}},10939:(e,t,a)=>{a.d(t,{A:()=>d});var r=a(65043),n=a(12110),o=a(17604);const s="style_container__M9GCG";var l=a(70579);const i={opacity:[0,1]};(0,o.A)()||(i.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,r.forwardRef)((e,t)=>{let{overrideComponent:a,...o}=e;const d=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),a=e.animate(i,{...c,delay:150*t});return()=>a.cancel()},[]);const u=a?"section":n.A;return(0,l.jsx)("div",{ref:d,className:s,children:(0,l.jsx)(u,{component:"section",...o,ref:t})})})},20854:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var r=a(65043),n=a(95747),o=a(58338),s=a(29449),l=a(26494),i=a(67784),c=a(82746),d=a(57631),u=a(10939),h=a(34088),m=a(17545),p=a(38030),g=a(1960),f=a(71261),x=a(30375),b=a(70579);const v=(0,r.lazy)(()=>Promise.all([a.e(3969),a.e(5291),a.e(5077)]).then(a.bind(a,75291))),y=["grey","yellow","red"],w=e=>e.sort().join(),A=new Map([[w(["O3'","P","O5'","C5'"]),"alpha"],[w(["P","O5'","C5'","C4'"]),"beta"],[w(["O5'","C5'","C4'","C3'"]),"gamma"],[w(["C5'","C4'","C3'","O3'"]),"delta"],[w(["C4'","C3'","O3'","P"]),"epsilon"],[w(["C3'","O3'","P","O5'"]),"zeta"],[w(["C1'","C2'","C3'","C4'"]),"nu2"],[w(["O4'","C1'","N9","C8"]),"chi"],[w(["O4'","C1'","N1","C6"]),"chi"]]),k=Array.from(new Set(A.values())),C={alpha:"P",beta:"O5'",gamma:"C5'",delta:"C4'",epsilon:"C3'",zeta:"O3'",nu2:"C2'",chi:"C1'"},S=()=>{const{accessionAndMdNumber:e,topology:t}=(0,r.useContext)(s.f),a=`${n.nP}/${e}/analyses/dihenergies`,{loading:S,payload:j,error:$}=(0,o.A)(a),{dihedralsData:z,targetChains:_}=(0,r.useMemo)(()=>{if(!j||!t)return{};const e=[];k.forEach(t=>e[t]=[]),j.forEach(a=>{const r={...a},n=r.indices.map(e=>t.getAtomByIndex(e)),o=w(n.map(e=>e.name)),s=A.get(o);if(!s)return;r.name=s;const l=C[s],i=n.find(e=>e.name===l);r.residue=i.residue,r.label=`${r.residue.standardLabel} ${s}`,r.normee=r.ee?r.ee:0,r.normvdw=r.vdw?r.vdw:0,r.total=r.torsion+r.normee+r.normvdw,e.push(r)});const a=(0,f.Am)(e.map(e=>e.residue.chain.name));return{dihedralsData:e,targetChains:a}},[j,t]),[N,R]=(0,r.useState)(null),D=(0,r.useCallback)(e=>{const a=t.chainNames.indexOf(e);R(a),K(null)},[t]);(0,r.useEffect)(()=>{_&&D(_[0])},[_]);const[O,P]=(0,r.useState)("alpha"),M=(0,r.useCallback)(e=>{P(e),K(null)},[]),[I,B]=(0,r.useState)(!1),E=(0,r.useCallback)(()=>{B(e=>!e),K(null)},[]),{selectedData:T,summaryData:F,torsionData:W,eeData:L,vdwData:V,totalData:X,xAxisValues:Y,xTooltip:q,colorScheme:H}=(0,r.useMemo)(()=>{if(!z||null===N)return{};const e=z.filter(e=>e.residue.chainIndex===N),t=I?(e=>{const t={};return e.forEach(e=>{const a=t[e.residue.index];a?a.push(e):t[e.residue.index]=[e]}),t})(e):(e=>{const t={};return e.forEach(e=>{const a=t[e.name];a?a.push(e):t[e.name]=[e]}),t})(e),a=I?Object.values(t).map(e=>{const t=e[0].residue;return{residue:t,label:t.standardLabel,torsion:(0,f.WQ)(e.map(e=>e.torsion)),normee:(0,f.WQ)(e.map(e=>e.normee)),normvdw:(0,f.WQ)(e.map(e=>e.normvdw)),total:(0,f.WQ)(e.map(e=>e.total))}}):t[O],r=(0,f.Wd)(a.map(e=>e.torsion)),n=(0,f.Wd)(a.map(e=>e.normee)),o=(0,f.Wd)(a.map(e=>e.normvdw)),s=(0,f.Wd)(a.map(e=>e.total)),l={torsion:(0,f.wC)(r)+" kcal/mol",ee:(0,f.wC)(n)+" kcal/mol",vdw:(0,f.wC)(o)+" kcal/mol",total:(0,f.wC)(s)+" kcal/mol"},i={torsion:{data:a.map(e=>e.torsion),color:"black"}},u={ee:{data:a.map(e=>e.normee),color:"black"}},h={vdw:{data:a.map(e=>e.normvdw),color:"black"}},m=a.map(e=>e.total),p={total:{data:m,color:"black"}},g=a.map(e=>e.label),x=I?"residue":"dihedral",b={};a.forEach(e=>b[e.residue.index]=e.total);const v=(0,f.jk)(m),w=(0,f.T9)(m),A=(0,d.m4Y)().range(y).domain([v,(v+w)/2,w]),k=c.hD.addScheme(function(e){this.atomColor=e=>{const t=e.residueIndex,a=b[t];if(void 0===a)return 16777215;const r=(0,d.yWT)(A(a)).formatHex();return parseInt(r.substring(1),16)}});return{selectedData:a,summaryData:l,torsionData:i,eeData:u,vdwData:h,totalData:p,xAxisValues:g,xTooltip:(e,t)=>`${x} ${g[t]||t}`,colorScheme:k}},[N,z,O,I]),Q=t&&t.defaultRepresentations,[G,J]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!t||!Q)return;const e=":"+t.chainNames[N],a=[{name:"Dihedral energies",selection:e,color:"custom",customScheme:H,reference:"dihen_color"},{name:"Reference",selection:"not "+e,type:"licorice",color:"element",opacity:.2,reference:"dihen_ref"}];J(e=>{const t=null===e?Q:e.filter(e=>{e.reference&&e.reference.substr(0,5)});return[...a,...t]})},[t,Q,N,H]);const[Z,K]=(0,r.useState)(null),U=(0,r.useMemo)(()=>{if(null===Z)return[];return[{x:Z,attr:{fill:"#c8c8c8"}}]},[Z]),ee=(0,r.useCallback)(e=>K(t=>e&&e.selectedX===t?null:t),[]);return t?$?$.toString():S?(0,b.jsx)(m.A,{}):j?(0,b.jsxs)(r.Suspense,{fallback:(0,b.jsx)(m.A,{}),children:[(0,b.jsxs)(u.A,{className:x.default.card,children:[(0,b.jsxs)("div",{className:x.default.horizontal,children:[(0,b.jsx)(p.A,{label:"Chain",options:_,selection:t.chainNames[N],setter:D}),(0,b.jsx)(p.A,{label:"Dihedral",options:k,selection:O,setter:M,disabled:I}),(0,b.jsx)(g.A,{firstLabel:"Per dihedral",secondLabel:"Per residue",isFirst:!I,onChange:E})]}),(0,b.jsx)(l.A,{className:x.default.horizontal,children:F?(0,b.jsxs)(l.A,{children:[(0,b.jsx)("legend",{className:x.default["margined-bottom"],children:"Energy averages"}),(0,b.jsx)(i.A,{className:x.default["text-field"],label:"Torsion",title:"Average torsion energy",value:F.torsion}),(0,b.jsx)(i.A,{className:x.default["text-field"],label:"Electrostatic",title:"Average electorstatic energy",value:F.ee}),(0,b.jsx)(i.A,{className:x.default["text-field"],label:"Van Der Waals",title:"Average Van Der Waals energy",value:F.vdw}),(0,b.jsx)(i.A,{className:x.default["text-field"],label:"Total",title:"Average total energy",value:F.total})]}):null}),(0,b.jsxs)(l.A,{children:[(0,b.jsx)(v,{yData:W,xAxisValues:Y,xTooltip:q,title:"Torsions",yAxisLabel:"Energy (kcal/mol)",onSelect:K,fullPrecision:!0,marks:U}),(0,b.jsx)(v,{yData:L,xAxisValues:Y,xTooltip:q,title:"Electrostatic",yAxisLabel:"Energy (kcal/mol)",onSelect:K,fullPrecision:!0,marks:U}),(0,b.jsx)(v,{yData:V,xAxisValues:Y,xTooltip:q,title:"Van Der Waals",yAxisLabel:"Energy (kcal/mol)",onSelect:K,fullPrecision:!0,marks:U}),(0,b.jsx)(v,{yData:X,xAxisValues:Y,xTooltip:q,title:"Total",yAxisLabel:"Energy (kcal/mol)",onSelect:K,fullPrecision:!0,marks:U})]})]}),(0,b.jsx)(h.A,{newViewer:Z?{selectedResidueIndices:[T[Z].residue.index],representationsState:[G,J],selectedX:Z}:null,onNail:ee,onClose:ee})]}):"Something bad happened":(0,b.jsx)(m.A,{})}},30375:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});const r={card:"style_card__bFecw",horizontal:"style_horizontal__ZYIg8","text-field":"style_text-field__CSo-z","margined-bottom":"style_margined-bottom__kI93T",disabled:"style_disabled__kJ0uc"}},33064:(e,t,a)=>{a.d(t,{A:()=>w});var r=a(98587),n=a(58168),o=a(65043),s=a(58387),l=a(98610),i=a(6803),c=a(34535),d=a(61475),u=a(54516),h=a(85213),m=a(66236),p=a(92532),g=a(72372);function f(e){return(0,g.Ay)("PrivateSwitchBase",e)}(0,p.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var x=a(70579);const b=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],v=(0,c.Ay)(m.A,{name:"MuiSwitchBase"})(e=>{let{ownerState:t}=e;return(0,n.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),y=(0,c.Ay)("input",{name:"MuiSwitchBase",shouldForwardProp:d.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),w=o.forwardRef(function(e,t){const{autoFocus:a,checked:o,checkedIcon:c,className:d,defaultChecked:m,disabled:p,disableFocusRipple:g=!1,edge:w=!1,icon:A,id:k,inputProps:C,inputRef:S,name:j,onBlur:$,onChange:z,onFocus:_,readOnly:N,required:R=!1,tabIndex:D,type:O,value:P}=e,M=(0,r.A)(e,b),[I,B]=(0,u.A)({controlled:o,default:Boolean(m),name:"SwitchBase",state:"checked"}),E=(0,h.A)();let T=p;E&&"undefined"===typeof T&&(T=E.disabled);const F="checkbox"===O||"radio"===O,W=(0,n.A)({},e,{checked:I,disabled:T,disableFocusRipple:g,edge:w}),L=(e=>{const{classes:t,checked:a,disabled:r,edge:n}=e,o={root:["root",a&&"checked",r&&"disabled",n&&`edge${(0,i.A)(n)}`],input:["input"]};return(0,l.A)(o,f,t)})(W);return(0,x.jsxs)(v,(0,n.A)({component:"span",className:(0,s.A)(L.root,d),centerRipple:!0,focusRipple:!g,disabled:T,tabIndex:null,role:void 0,onFocus:e=>{_&&_(e),E&&E.onFocus&&E.onFocus(e)},onBlur:e=>{$&&$(e),E&&E.onBlur&&E.onBlur(e)},ownerState:W,ref:t},M,{children:[(0,x.jsx)(y,(0,n.A)({autoFocus:a,checked:o,defaultChecked:m,className:L.input,disabled:T,id:F?k:void 0,name:j,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;B(t),z&&z(e,t)},readOnly:N,ref:S,required:R,ownerState:W,tabIndex:D,type:O},"checkbox"===O&&void 0===P?{}:{value:P},C)),I?c:A]}))})},34088:(e,t,a)=>{a.d(t,{A:()=>h});var r=a(65043),n=a(43126),o=a(10939);const s="style_rnd__Txifm",l="style_floating-card__HHpby";var i=a(70579);const c=(0,r.lazy)(()=>Promise.all([a.e(7784),a.e(8095),a.e(3845),a.e(9070),a.e(247),a.e(7955),a.e(8677),a.e(3471),a.e(335),a.e(9117)]).then(a.bind(a,14696)));let d=0;const u=e=>{const t=e.viewerRef||(0,r.useRef)(null),[a,u]=(0,r.useState)(()=>{const{innerWidth:e,innerHeight:t,scrollY:a}=window,r=document.querySelector("main").offsetTop,n=Math.max(Math.min(e/4,t/4),150),o=1.5*n;return{width:2*n,height:o,x:0,y:t-r-o-20+a}});return(0,i.jsx)(n.p,{position:{x:a.x,y:a.y},size:{width:a.width,height:a.height},style:{zIndex:(d+=1,d)},className:s,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{u({...a})},onResizeStart:()=>{u({...a})},onDragStop:(e,t)=>{0===e.layerX&&0===e.layerY||a.x===t.x&&a.y===t.y||u({...a,x:t.x,y:t.y})},onResize:()=>t.current&&t.current.autoResize(),onResizeStop:(e,t,a,r,n)=>{u({width:a.style.width,height:a.style.height,...n})},children:(0,i.jsx)(o.A,{className:l,elevation:4,children:(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(c,{className:l,ref:t,startsPlaying:!1,...e})})})})},h=e=>{let{newViewer:t,nailing:a=!0,onNail:n,onClose:o}=e;const[s,l]=(0,r.useState)([]),c=[...s],d=(0,r.useRef)([]);if(t){const e=()=>{let e=0;for(;e<999;){if(-1===d.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};t.id=e(),t.close=()=>{a&&l(e=>{const a=[...e],r=e.indexOf(t);return-1!==r&&a.splice(r,1),a}),o&&o(t),d.current.push(t.id)},a&&(t.nail=()=>{l(e=>[...e,t]),n&&n(t),d.current.push(t.id)}),c.push(t)}return c.map(e=>(0,i.jsx)(u,{...e},e.id))}},38030:(e,t,a)=>{a.d(t,{A:()=>d});a(65043);var r=a(26494),n=a(85865),o=a(2260),s=a(32143);const l="style_content__eXhNP",i="style_horizontal-margined__w4tJp";var c=a(70579);const d=e=>{let{label:t,options:a,selection:d,setter:u,disabled:h}=e;if(!a)return"Missing options argument";if(!d)return"Missing selection argument";if(!u)return"Missing setter argument";return(0,c.jsxs)(r.A,{className:l,children:[t&&(0,c.jsx)(n.A,{variant:"h5",children:t}),(0,c.jsx)(o.A,{value:d,onChange:e=>{u(e.target.value)},className:i,disabled:h,children:a.map((e,t)=>(0,c.jsx)(s.A,{value:e,children:e},t))})]})}}}]);
//# sourceMappingURL=854.467aca11.chunk.js.map