"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[9219],{10939:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(65043),a=n(12110),s=n(17604);const o="style_container__M9GCG";var i=n(70579);const l={opacity:[0,1]};(0,s.A)()||(l.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,r.forwardRef)((e,t)=>{let{overrideComponent:n,...s}=e;const d=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),n=e.animate(l,{...c,delay:150*t});return()=>n.cancel()},[]);const u=n?"section":a.A;return(0,i.jsx)("div",{ref:d,className:o,children:(0,i.jsx)(u,{component:"section",...s,ref:t})})})},34088:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(65043),a=n(43126),s=n(10939);const o="style_rnd__Txifm",i="style_floating-card__HHpby";var l=n(70579);const c=(0,r.lazy)(()=>Promise.all([n.e(7784),n.e(8095),n.e(3845),n.e(9070),n.e(247),n.e(7955),n.e(8677),n.e(3471),n.e(335),n.e(9117)]).then(n.bind(n,14696)));let d=0;const u=e=>{const t=e.viewerRef||(0,r.useRef)(null),[n,u]=(0,r.useState)(()=>{const{innerWidth:e,innerHeight:t,scrollY:n}=window,r=document.querySelector("main").offsetTop,a=Math.max(Math.min(e/4,t/4),150),s=1.5*a;return{width:2*a,height:s,x:0,y:t-r-s-20+n}});return(0,l.jsx)(a.p,{position:{x:n.x,y:n.y},size:{width:n.width,height:n.height},style:{zIndex:(d+=1,d)},className:o,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{u({...n})},onResizeStart:()=>{u({...n})},onDragStop:(e,t)=>{0===e.layerX&&0===e.layerY||n.x===t.x&&n.y===t.y||u({...n,x:t.x,y:t.y})},onResize:()=>t.current&&t.current.autoResize(),onResizeStop:(e,t,n,r,a)=>{u({width:n.style.width,height:n.style.height,...a})},children:(0,l.jsx)(s.A,{className:i,elevation:4,children:(0,l.jsx)(r.Suspense,{fallback:null,children:(0,l.jsx)(c,{className:i,ref:t,startsPlaying:!1,...e})})})})},h=e=>{let{newViewer:t,nailing:n=!0,onNail:a,onClose:s}=e;const[o,i]=(0,r.useState)([]),c=[...o],d=(0,r.useRef)([]);if(t){const e=()=>{let e=0;for(;e<999;){if(-1===d.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};t.id=e(),t.close=()=>{n&&i(e=>{const n=[...e],r=e.indexOf(t);return-1!==r&&n.splice(r,1),n}),s&&s(t),d.current.push(t.id)},n&&(t.nail=()=>{i(e=>[...e,t]),a&&a(t),d.current.push(t.id)}),c.push(t)}return c.map(e=>(0,l.jsx)(u,{...e},e.id))}},39219:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var r=n(65043),a=n(26494),s=n(8939),o=n(24056),i=n(85865),l=n(71806),c=n(84882),d=n(28076),u=n(10039),h=n(73460),m=n(83558),p=n(51962),x=n(10939),f=n(34088),y=n(17545),v=n(58338),A=n(29449),g=n(95747),b=n(48940),j=n(75471),S=n(70579);const k=(0,r.lazy)(()=>Promise.all([n.e(3969),n.e(5291),n.e(5077)]).then(n.bind(n,75291))),w=["black","red","orange","yellow","green","blue","purple"],z=()=>{const{accession:e,accessionAndMdNumber:t,topology:n,inchikeyReferences:z}=(0,r.useContext)(A.f),{loading:M,payload:C,error:N}=(0,v.A)(`${g.nP}/${t}/analyses/lipid-order/`),[$,_]=(0,r.useState)(null),[R,I]=(0,r.useState)({}),[O,P]=(0,r.useState)(null),[D,H]=(0,r.useState)(null),[E,L]=(0,r.useState)(!1),[V,G]=(0,r.useState)(!0),T=(0,r.useMemo)(()=>C?Object.keys(C.data):[],[C]);(0,r.useEffect)(()=>{T.length&&!$&&_(T[0])},[T]);const Y=(0,r.useMemo)(()=>T.length&&z?T.reduce((e,t)=>{const n=z.find(e=>e.inchikey===t);let r,a,s;return n.lipidmaps.synonyms?(r=n.lipidmaps.name,a=n.lipidmaps.synonyms.split("; ").sort((e,t)=>e.length-t.length)[0],s=n.lipidmaps.sys_name):n.swisslipids.synonyms&&(r=a=n.swisslipids.synonyms.find(e=>"abbreviation"===e.type).name,s=n.swisslipids.entity_name),console.log("lipid",t,"name",r,"shortName",a,"longName",s),e[t]={name:r,shortName:a,longName:s},e},{}):{},[T,z]),B=(0,r.useMemo)(()=>T.length&&n?T.reduce((e,t)=>{const r=n.getReferenceResidueIndices(t),a=`( @${n.residue2atomIndices(r).join(",")} )`;return e[t]=a,e},{}):{},[T,n]),q=(0,r.useMemo)(()=>{if(!C||!$)return{};const e={},t={},n=C.data[$];return Object.entries(n).forEach(n=>{let[r,a]=n;const s=`Tail ${parseInt(r)+1}`,o={data:a.avg.map(e=>E?-e:e),areaStdDev:a.std,labels:a.atoms,color:w[parseInt(r)%w.length]},{mean:i,stdv:l}=(0,b.G)(o.data);o.average=i,o.stddev=l,e[s]=o,t[s]=!0}),I(t),e},[C,$,E,n]),W=(0,r.useMemo)(()=>q&&R?Math.max(...Object.entries(q).filter(e=>{let[t]=e;return R[t]}).map(e=>{let[t,n]=e;return Math.max(...n.areaStdDev||[])})):0,[q,R]),X=(0,r.useMemo)(()=>{if(Y[$]&&B[$])return{name:Y[$].synonym,type:"licorice",color:"orange",opacity:.5,selection:B[$],reference:$,show:!0}},[$,n]);(0,r.useEffect)(()=>{if(!R||!q)return;const e=[X];null!==O&&Object.keys(q).forEach((t,n)=>{const r=q[t].labels[O];r&&e.push({name:`${r}`,type:"ball+stick",color:w[n%w.length],opacity:.9,selection:`${B[$]} and .${r}`,other:{radius:.3},show:R[t],reference:`${$} ${n}`})}),H(e)},[X,$,O,R,q]);const F=(0,r.useMemo)(()=>null!==O?[{x:O,attr:{fill:"#c8c8c8"}}]:[],[O]);if(M)return(0,S.jsx)(y.A,{});if(N)return N.toString();if(!C)return"Something bad happened with Lipid Order analysis";const J=e=>Math.round(100*e)/100;return(0,S.jsxs)(r.Suspense,{fallback:(0,S.jsx)(y.A,{}),children:[(0,S.jsx)(x.A,{className:j.default.card,children:(0,S.jsxs)(a.A,{children:[(0,S.jsx)(s.A,{value:$,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{_(t)},className:j.default["margined-bottom"],children:T.map(e=>Y[e]&&(0,S.jsx)(o.A,{value:e,label:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,S.jsx)("span",{title:`${Y[e].longName}`,children:Y[e].name}),Y[e].shortName!==Y[e].name&&(0,S.jsx)(i.A,{variant:"caption",color:"text.secondary",title:`${Y[e].longName}`,children:Y[e].shortName})]})},e))}),(0,S.jsxs)(l.A,{padding:"checkbox",children:[(0,S.jsx)(c.A,{children:(0,S.jsxs)(d.A,{children:[(0,S.jsx)(u.A,{children:"Lipid"}),(0,S.jsx)(u.A,{children:"Mean Order Parameter"}),(0,S.jsx)(u.A,{children:"Standard Deviation"})]})}),(0,S.jsx)(h.A,{children:Object.entries(q).map((e,t)=>{let[n,r]=e;return(0,S.jsxs)(d.A,{children:[(0,S.jsx)(u.A,{children:(0,S.jsx)(m.A,{onChange:()=>I(e=>({...e,[n]:!e[n]})),control:(0,S.jsx)(p.A,{checked:R[n],style:{color:r.color}}),label:n})}),(0,S.jsx)(u.A,{children:J(r.average)}),(0,S.jsx)(u.A,{children:J(r.stddev)})]},n)})})]})]})}),(0,S.jsxs)(x.A,{className:j.default.card,children:[(0,S.jsx)(m.A,{control:(0,S.jsx)(p.A,{checked:V,onChange:e=>G(e.target.checked)}),label:"Show standard deviation"}),(0,S.jsx)(m.A,{control:(0,S.jsx)(p.A,{checked:E,onChange:e=>L(e.target.checked)}),label:"Invert Y-axis values"}),(0,S.jsx)(a.A,{children:(0,S.jsx)(k,{yData:q,xAxisLabel:"Carbon Position",yAxisLabel:"Order Parameter",type:"line",selfLegend:!1,dataDisplay:R,labelsOnHover:!0,xTooltip:(e,t)=>`Position ${t+1}`,onSelect:P,marks:F,areaStdDev:V,yPadding:V?W:0})})]}),(0,S.jsx)(f.A,{newViewer:"number"===typeof O?{accession:e,xSelection:O,representationsState:[D,H]}:null,onNail:e=>P(t=>e.xSelection===t?null:t),onClose:e=>P(t=>e.xSelection===t?null:t)})]})}},48940:(e,t,n)=>{n.d(t,{G:()=>a,c:()=>r});const r=e=>{if(!e)return;return e.reduce((e,t)=>e+t,0)/e.length},a=e=>{if(!e)return;const t=e.reduce((e,t)=>e+t,0),n=e.length,r=t/n,a=Math.sqrt(e.map(e=>Math.pow(e-r,2)).reduce((e,t)=>e+t)/n);return{mean:r,stdv:a}}},51962:(e,t,n)=>{n.d(t,{A:()=>C});var r=n(98587),a=n(58168),s=n(65043),o=n(58387),i=n(98610),l=n(60061),c=n(33064),d=n(59662),u=n(70579);const h=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),m=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),p=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var x=n(6803),f=n(98206),y=n(34535),v=n(61475),A=n(92532),g=n(72372);function b(e){return(0,g.Ay)("MuiCheckbox",e)}const j=(0,A.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),S=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],k=(0,y.Ay)(c.A,{shouldForwardProp:e=>(0,v.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${(0,x.A)(n.size)}`],"default"!==n.color&&t[`color${(0,x.A)(n.color)}`]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,a.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${"default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,l.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{[`&.${j.checked}, &.${j.indeterminate}`]:{color:(t.vars||t).palette[n.color].main},[`&.${j.disabled}`]:{color:(t.vars||t).palette.action.disabled}})}),w=(0,u.jsx)(m,{}),z=(0,u.jsx)(h,{}),M=(0,u.jsx)(p,{}),C=s.forwardRef(function(e,t){var n,l;const c=(0,f.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=w,color:h="primary",icon:m=z,indeterminate:p=!1,indeterminateIcon:y=M,inputProps:v,size:A="medium",className:g}=c,j=(0,r.A)(c,S),C=p?y:m,N=p?y:d,$=(0,a.A)({},c,{color:h,indeterminate:p,size:A}),_=(e=>{const{classes:t,indeterminate:n,color:r,size:s}=e,o={root:["root",n&&"indeterminate",`color${(0,x.A)(r)}`,`size${(0,x.A)(s)}`]},l=(0,i.A)(o,b,t);return(0,a.A)({},t,l)})($);return(0,u.jsx)(k,(0,a.A)({type:"checkbox",inputProps:(0,a.A)({"data-indeterminate":p},v),icon:s.cloneElement(C,{fontSize:null!=(n=C.props.fontSize)?n:A}),checkedIcon:s.cloneElement(N,{fontSize:null!=(l=N.props.fontSize)?l:A}),ownerState:$,ref:t,className:(0,o.A)(_.root,g)},j,{classes:_}))})},75471:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r={card:"style_card__Tu+j+","margined-bottom":"style_margined-bottom__WM5Gb"}}}]);
//# sourceMappingURL=9219.566bb271.chunk.js.map