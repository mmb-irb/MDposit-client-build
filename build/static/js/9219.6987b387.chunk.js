"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[9219],{10939:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(89379),r=n(80045),o=n(65043),s=n(12110),c=n(17604);const i="style_container__M9GCG";var l=n(70579);const d=["overrideComponent"],u={opacity:[0,1]};(0,c.A)()||(u.transform=["translateY(50px)","translateY(0)"]);const m={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},h=(0,o.forwardRef)((e,t)=>{let{overrideComponent:n}=e,c=(0,r.A)(e,d);const h=(0,o.useRef)(null);(0,o.useLayoutEffect)(()=>{const e=h.current&&h.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),n=e.animate(u,(0,a.A)((0,a.A)({},m),{},{delay:150*t}));return()=>n.cancel()},[]);const p=n?"section":s.A;return(0,l.jsx)("div",{ref:h,className:i,children:(0,l.jsx)(p,(0,a.A)((0,a.A)({component:"section"},c),{},{ref:t}))})})},34088:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(89379),r=n(65043),o=n(43126),s=n(10939);const c="style_rnd__Txifm",i="style_floating-card__HHpby";var l=n(70579);const d=(0,r.lazy)(()=>Promise.all([n.e(7784),n.e(8095),n.e(3845),n.e(9070),n.e(247),n.e(7955),n.e(8677),n.e(4061),n.e(335),n.e(9117)]).then(n.bind(n,14696)));let u=0;const m=e=>{const t=e.viewerRef||(0,r.useRef)(null),[n,m]=(0,r.useState)(()=>{const{innerWidth:e,innerHeight:t,scrollY:n}=window,a=document.querySelector("main").offsetTop,r=Math.max(Math.min(e/4,t/4),150),o=1.5*r;return{width:2*r,height:o,x:0,y:t-a-o-20+n}});return(0,l.jsx)(o.p,{position:{x:n.x,y:n.y},size:{width:n.width,height:n.height},style:{zIndex:(u+=1,u)},className:c,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{m((0,a.A)({},n))},onResizeStart:()=>{m((0,a.A)({},n))},onDragStop:(e,t)=>{0===e.layerX&&0===e.layerY||n.x===t.x&&n.y===t.y||m((0,a.A)((0,a.A)({},n),{},{x:t.x,y:t.y}))},onResize:()=>t.current&&t.current.autoResize(),onResizeStop:(e,t,n,r,o)=>{m((0,a.A)({width:n.style.width,height:n.style.height},o))},children:(0,l.jsx)(s.A,{className:i,elevation:4,children:(0,l.jsx)(r.Suspense,{fallback:null,children:(0,l.jsx)(d,(0,a.A)({className:i,ref:t,startsPlaying:!1},e))})})})},h=e=>{let{newViewer:t,nailing:n=!0,onNail:o,onClose:s}=e;const[c,i]=(0,r.useState)([]),d=[...c],u=(0,r.useRef)([]);if(t){const e=()=>{let e=0;for(;e<999;){if(-1===u.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};t.id=e(),t.close=()=>{n&&i(e=>{const n=[...e],a=e.indexOf(t);return-1!==a&&n.splice(a,1),n}),s&&s(t),u.current.push(t.id)},n&&(t.nail=()=>{i(e=>[...e,t]),o&&o(t),u.current.push(t.id)}),d.push(t)}return d.map(e=>(0,l.jsx)(m,(0,a.A)({},e),e.id))}},39219:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var a=n(89379),r=n(65043),o=n(26494),s=n(8939),c=n(24056),i=n(85865),l=n(71806),d=n(84882),u=n(28076),m=n(10039),h=n(73460),p=n(83558),x=n(51962),f=n(10939),y=n(34088),A=n(17545),v=n(58338),g=n(29449),b=n(95747),j=n(48940),S=n(75471),k=n(70579);const w=(0,r.lazy)(()=>Promise.all([n.e(3969),n.e(5291),n.e(5077)]).then(n.bind(n,75291))),z=["black","red","orange","yellow","green","blue","purple"],C=()=>{const{accession:e,accessionAndMdNumber:t,topology:n,inchikeyReferences:C}=(0,r.useContext)(g.f),{loading:M,payload:N,error:_}=(0,v.A)("".concat(b.nP,"/").concat(t,"/analyses/lipid-order/")),[R,I]=(0,r.useState)(null),[O,P]=(0,r.useState)({}),[D,H]=(0,r.useState)(null),[E,L]=(0,r.useState)(null),[V,G]=(0,r.useState)(!1),[T,Y]=(0,r.useState)(!0),B=(0,r.useMemo)(()=>N?Object.keys(N.data):[],[N]);(0,r.useEffect)(()=>{B.length&&!R&&I(B[0])},[B]);const q=(0,r.useMemo)(()=>B.length&&C?B.reduce((e,t)=>{const n=C.find(e=>e.inchikey===t);let a,r,o;return n.lipidmaps.synonyms?(a=n.lipidmaps.name,r=n.lipidmaps.synonyms.split("; ").sort((e,t)=>e.length-t.length)[0],o=n.lipidmaps.sys_name):n.swisslipids.synonyms&&(a=r=n.swisslipids.synonyms.find(e=>"abbreviation"===e.type).name,o=n.swisslipids.entity_name),console.log("lipid",t,"name",a,"shortName",r,"longName",o),e[t]={name:a,shortName:r,longName:o},e},{}):{},[B,C]),W=(0,r.useMemo)(()=>B.length&&n?B.reduce((e,t)=>{const a=n.getReferenceResidueIndices(t),r="( @".concat(n.residue2atomIndices(a).join(",")," )");return e[t]=r,e},{}):{},[B,n]),X=(0,r.useMemo)(()=>{if(!N||!R)return{};const e={},t={},n=N.data[R];return Object.entries(n).forEach(n=>{let[a,r]=n;const o="Tail ".concat(parseInt(a)+1),s={data:r.avg.map(e=>V?-e:e),areaStdDev:r.std,labels:r.atoms,color:z[parseInt(a)%z.length]},{mean:c,stdv:i}=(0,j.G)(s.data);s.average=c,s.stddev=i,e[o]=s,t[o]=!0}),P(t),e},[N,R,V,n]),F=(0,r.useMemo)(()=>X&&O?Math.max(...Object.entries(X).filter(e=>{let[t]=e;return O[t]}).map(e=>{let[t,n]=e;return Math.max(...n.areaStdDev||[])})):0,[X,O]),J=(0,r.useMemo)(()=>{if(q[R]&&W[R])return{name:q[R].synonym,type:"licorice",color:"orange",opacity:.5,selection:W[R],reference:R,show:!0}},[R,n]);(0,r.useEffect)(()=>{if(!O||!X)return;const e=[J];null!==D&&Object.keys(X).forEach((t,n)=>{const a=X[t].labels[D];a&&e.push({name:"".concat(a),type:"ball+stick",color:z[n%z.length],opacity:.9,selection:"".concat(W[R]," and .").concat(a),other:{radius:.3},show:O[t],reference:"".concat(R," ").concat(n)})}),L(e)},[J,R,D,O,X]);const K=(0,r.useMemo)(()=>null!==D?[{x:D,attr:{fill:"#c8c8c8"}}]:[],[D]);if(M)return(0,k.jsx)(A.A,{});if(_)return _.toString();if(!N)return"Something bad happened with Lipid Order analysis";const Q=e=>Math.round(100*e)/100;return(0,k.jsxs)(r.Suspense,{fallback:(0,k.jsx)(A.A,{}),children:[(0,k.jsx)(f.A,{className:S.default.card,children:(0,k.jsxs)(o.A,{children:[(0,k.jsx)(s.A,{value:R,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{I(t)},className:S.default["margined-bottom"],children:B.map(e=>q[e]&&(0,k.jsx)(c.A,{value:e,label:(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,k.jsx)("span",{title:"".concat(q[e].longName),children:q[e].name}),q[e].shortName!==q[e].name&&(0,k.jsx)(i.A,{variant:"caption",color:"text.secondary",title:"".concat(q[e].longName),children:q[e].shortName})]})},e))}),(0,k.jsxs)(l.A,{padding:"checkbox",children:[(0,k.jsx)(d.A,{children:(0,k.jsxs)(u.A,{children:[(0,k.jsx)(m.A,{children:"Lipid"}),(0,k.jsx)(m.A,{children:"Mean Order Parameter"}),(0,k.jsx)(m.A,{children:"Standard Deviation"})]})}),(0,k.jsx)(h.A,{children:Object.entries(X).map((e,t)=>{let[n,r]=e;return(0,k.jsxs)(u.A,{children:[(0,k.jsx)(m.A,{children:(0,k.jsx)(p.A,{onChange:()=>P(e=>(0,a.A)((0,a.A)({},e),{},{[n]:!e[n]})),control:(0,k.jsx)(x.A,{checked:O[n],style:{color:r.color}}),label:n})}),(0,k.jsx)(m.A,{children:Q(r.average)}),(0,k.jsx)(m.A,{children:Q(r.stddev)})]},n)})})]})]})}),(0,k.jsxs)(f.A,{className:S.default.card,children:[(0,k.jsx)(p.A,{control:(0,k.jsx)(x.A,{checked:T,onChange:e=>Y(e.target.checked)}),label:"Show standard deviation"}),(0,k.jsx)(p.A,{control:(0,k.jsx)(x.A,{checked:V,onChange:e=>G(e.target.checked)}),label:"Invert Y-axis values"}),(0,k.jsx)(o.A,{children:(0,k.jsx)(w,{yData:X,xAxisLabel:"Carbon Position",yAxisLabel:"Order Parameter",type:"line",selfLegend:!1,dataDisplay:O,labelsOnHover:!0,xTooltip:(e,t)=>"Position ".concat(t+1),onSelect:H,marks:K,areaStdDev:T,yPadding:T?F:0})})]}),(0,k.jsx)(y.A,{newViewer:"number"===typeof D?{accession:e,xSelection:D,representationsState:[E,L]}:null,onNail:e=>H(t=>e.xSelection===t?null:t),onClose:e=>H(t=>e.xSelection===t?null:t)})]})}},48940:(e,t,n)=>{n.d(t,{G:()=>r,c:()=>a});const a=e=>{if(!e)return;return e.reduce((e,t)=>e+t,0)/e.length},r=e=>{if(!e)return;const t=e.reduce((e,t)=>e+t,0),n=e.length,a=t/n,r=Math.sqrt(e.map(e=>Math.pow(e-a,2)).reduce((e,t)=>e+t)/n);return{mean:a,stdv:r}}},51962:(e,t,n)=>{n.d(t,{A:()=>M});var a=n(98587),r=n(58168),o=n(65043),s=n(58387),c=n(98610),i=n(60061),l=n(33064),d=n(59662),u=n(70579);const m=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),h=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),p=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var x=n(6803),f=n(98206),y=n(34535),A=n(61475),v=n(92532),g=n(72372);function b(e){return(0,g.Ay)("MuiCheckbox",e)}const j=(0,v.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),S=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],k=(0,y.Ay)(l.A,{shouldForwardProp:e=>(0,A.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t["size".concat((0,x.A)(n.size))],"default"!==n.color&&t["color".concat((0,x.A)(n.color))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,r.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,i.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(j.checked,", &.").concat(j.indeterminate)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(j.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),w=(0,u.jsx)(h,{}),z=(0,u.jsx)(m,{}),C=(0,u.jsx)(p,{}),M=o.forwardRef(function(e,t){var n,i;const l=(0,f.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=w,color:m="primary",icon:h=z,indeterminate:p=!1,indeterminateIcon:y=C,inputProps:A,size:v="medium",className:g}=l,j=(0,a.A)(l,S),M=p?y:h,N=p?y:d,_=(0,r.A)({},l,{color:m,indeterminate:p,size:v}),R=(e=>{const{classes:t,indeterminate:n,color:a,size:o}=e,s={root:["root",n&&"indeterminate","color".concat((0,x.A)(a)),"size".concat((0,x.A)(o))]},i=(0,c.A)(s,b,t);return(0,r.A)({},t,i)})(_);return(0,u.jsx)(k,(0,r.A)({type:"checkbox",inputProps:(0,r.A)({"data-indeterminate":p},A),icon:o.cloneElement(M,{fontSize:null!=(n=M.props.fontSize)?n:v}),checkedIcon:o.cloneElement(N,{fontSize:null!=(i=N.props.fontSize)?i:v}),ownerState:_,ref:t,className:(0,s.A)(R.root,g)},j,{classes:R}))})},75471:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});const a={card:"style_card__Tu+j+","margined-bottom":"style_margined-bottom__WM5Gb"}}}]);
//# sourceMappingURL=9219.6987b387.chunk.js.map