"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[953,5144],{10939:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(65043),s=t(12110),r=t(17604);const l="style_container__M9GCG";var i=t(70579);const o={opacity:[0,1]};(0,r.A)()||(o.transform=["translateY(50px)","translateY(0)"]);const u={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,n.forwardRef)((e,a)=>{let{overrideComponent:t,...r}=e;const d=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const a=Array.from(document.querySelectorAll("main section")).findIndex(a=>e===a),t=e.animate(o,{...u,delay:150*a});return()=>t.cancel()},[]);const c=t?"section":s.A;return(0,i.jsx)("div",{ref:d,className:l,children:(0,i.jsx)(c,{component:"section",...r,ref:a})})})},20953:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var n=t(65043),s=t(10939),r=t(34088),l=t(85144),i=t(58338),o=t(41399),u=t(29449),d=t(95747),c=t(17545),h=t(26494),f=t(85865),m=t(99070),p=t(70579);const x=(0,n.lazy)(()=>t.e(1483).then(t.bind(t,53099))),y=()=>{const{accessionAndMdNumber:e,files:a}=(0,n.useContext)(u.f),[t,y]=(0,n.useState)(null),[g,b]=(0,n.useState)(14),[v,w]=(0,n.useState)(20),{loading:_,payload:j,error:A}=(0,i.A)(`${d.nP}/${e}/analyses/markov/`),N=(0,n.useMemo)(()=>a.filter(e=>e.includes("markov_screenshot")).sort().map(a=>`${d.nP}/${e}/files/${a}`),[a]),S=(0,o.A)(N),z=S.some(e=>e.loading),C=(0,n.useMemo)(()=>{if(!z)return S.map(e=>e&&e.payload?"data:image/png;base64,"+Buffer.from(e.payload,"binary").toString("base64"):null)},[S,z]),{graphData:M,availableLinks:k}=(0,n.useMemo)(()=>{if(!j)return{};const e=j.populations[0],a=[];j.populations.forEach((t,n)=>{if(n>=g)return;const s=1e4*t/e,r={id:n,radius:Math.sqrt(s/Math.PI),value:j.frames[n],text:`Population: ${Math.round(1e4*t)/100} %\nFrame: ${j.frames[n]}`};a.push(r)});const t=a.length,n=[];j.rmsd_matrix.forEach((e,a)=>{a>=t||e.forEach((e,s)=>{s>=t||a>=s||n.push(e)})});const s=n.length,r=[];if(v>0){const e=n.sort(),a=e[0],l=v<s?e[v-1]:e[s-1],i=l===a?1:9/(l-a);j.rmsd_matrix.forEach((e,n)=>{n>=t||e.forEach((e,s)=>{if(s>=t)return;if(n>=s)return;if(e>l)return;const o={source:n,target:s,width:10-(e-a)*i};r.push(o)})})}return{graphData:{nodes:a,links:r},availableLinks:s}},[j,g,v]),R=(0,n.useCallback)(e=>{y(e.value)},[y]);return _?(0,p.jsx)(c.A,{}):A?A.toString():j?z?(0,p.jsx)(c.A,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(s.A,{children:[(0,p.jsx)(x,{data:M,images:C,selectedNodeValue:t,onSelectNode:R,className:l.default.graph}),(0,p.jsxs)(h.A,{children:[(0,p.jsxs)("div",{className:l.default.horizontal,children:[(0,p.jsx)(f.A,{variant:"h7",className:l.default.wide25,children:"Number of nodes: "}),(0,p.jsx)(m.Ay,{title:"Change number of nodes",value:g,"aria-labelledby":"continuous-slider",onChange:(e,a)=>{b(a)},min:2,max:j.populations.length,valueLabelDisplay:"auto",className:l.default.wide75})]}),(0,p.jsxs)("div",{className:l.default.horizontal,children:[(0,p.jsx)(f.A,{variant:"h7",className:l.default.wide25,children:"Number of links: "}),(0,p.jsx)(m.Ay,{title:"Change the RMSD cutoff",value:v,"aria-labelledby":"continuous-slider",onChange:(e,a)=>{w(a)},min:0,max:k,valueLabelDisplay:"auto",className:l.default.wide75})]})]})]}),(0,p.jsx)(r.A,{newViewer:t?{requestedFrame:t}:null,onNail:e=>y(a=>e.requestedFrame===a?null:a),onClose:e=>y(a=>e.requestedFrame===a?null:a)})]}):"Something bad happened"}},34088:(e,a,t)=>{t.d(a,{A:()=>h});var n=t(65043),s=t(43126),r=t(10939);const l="style_rnd__Txifm",i="style_floating-card__HHpby";var o=t(70579);const u=(0,n.lazy)(()=>Promise.all([t.e(7784),t.e(8095),t.e(3845),t.e(9070),t.e(247),t.e(7955),t.e(8677),t.e(3471),t.e(335),t.e(9117)]).then(t.bind(t,14696)));let d=0;const c=e=>{const a=e.viewerRef||(0,n.useRef)(null),[t,c]=(0,n.useState)(()=>{const{innerWidth:e,innerHeight:a,scrollY:t}=window,n=document.querySelector("main").offsetTop,s=Math.max(Math.min(e/4,a/4),150),r=1.5*s;return{width:2*s,height:r,x:0,y:a-n-r-20+t}});return(0,o.jsx)(s.p,{position:{x:t.x,y:t.y},size:{width:t.width,height:t.height},style:{zIndex:(d+=1,d)},className:l,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{c({...t})},onResizeStart:()=>{c({...t})},onDragStop:(e,a)=>{0===e.layerX&&0===e.layerY||t.x===a.x&&t.y===a.y||c({...t,x:a.x,y:a.y})},onResize:()=>a.current&&a.current.autoResize(),onResizeStop:(e,a,t,n,s)=>{c({width:t.style.width,height:t.style.height,...s})},children:(0,o.jsx)(r.A,{className:i,elevation:4,children:(0,o.jsx)(n.Suspense,{fallback:null,children:(0,o.jsx)(u,{className:i,ref:a,startsPlaying:!1,...e})})})})},h=e=>{let{newViewer:a,nailing:t=!0,onNail:s,onClose:r}=e;const[l,i]=(0,n.useState)([]),u=[...l],d=(0,n.useRef)([]);if(a){const e=()=>{let e=0;for(;e<999;){if(-1===d.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};a.id=e(),a.close=()=>{t&&i(e=>{const t=[...e],n=e.indexOf(a);return-1!==n&&t.splice(n,1),t}),r&&r(a),d.current.push(a.id)},t&&(a.nail=()=>{i(e=>[...e,a]),s&&s(a),d.current.push(a.id)}),u.push(a)}return u.map(e=>(0,o.jsx)(c,{...e},e.id))}},85144:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});const n={graph:"style_graph__hjtUJ",horizontal:"style_horizontal__xMVF8",wide25:"style_wide25__aa51e",wide75:"style_wide75__n-46i"}}}]);
//# sourceMappingURL=953.201de712.chunk.js.map