"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[2633,9117,9696],{10939:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(65043),r=n(12110),o=n(17604);const l="style_container__M9GCG";var s=n(70579);const i={opacity:[0,1]};(0,o.A)()||(i.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,a.forwardRef)((e,t)=>{let{overrideComponent:n,...o}=e;const d=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),n=e.animate(i,{...c,delay:150*t});return()=>n.cancel()},[]);const u=n?"section":r.A;return(0,s.jsx)("div",{ref:d,className:l,children:(0,s.jsx)(u,{component:"section",...o,ref:t})})})},12110:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(58168),r=n(98587),o=n(65043),l=n(58387),s=n(98610),i=n(34535),c=n(98206),d=n(63336),u=n(92532),h=n(72372);function p(e){return(0,h.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var f=n(70579);const m=["className","raised"],x=(0,i.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),g=o.forwardRef(function(e,t){const n=(0,c.b)({props:e,name:"MuiCard"}),{className:o,raised:i=!1}=n,d=(0,r.A)(n,m),u=(0,a.A)({},n,{raised:i}),h=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},p,t)})(u);return(0,f.jsx)(x,(0,a.A)({className:(0,l.A)(h.root,o),elevation:i?8:void 0,ref:t,ownerState:u},d))})},32633:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});const a={card:"style_card__pEq-k",tabs:"style_tabs__HhB5H",nglcard:"style_nglcard__3eXUT",container:"style_container__eab4U",legend_container:"style_legend_container__swfrT",legend:"style_legend__SS-DS"}},55308:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(65043),r=n(89257),o=n(26494),l=n(8939),s=n(24056),i=n(10939),c=n(14696),d=n(17545),u=(n(60676),n(58338)),h=n(29449),p=n(95747),f=n(32633),m=n(82746),x=n(70579);const g={triggerOnce:!0,rootMargin:"100px"},y=()=>{const{accessionAndMdNumber:e,metadata:t,chains:n}=(0,a.useContext)(h.f),[y,v]=(0,r.Wx)(g),A=(0,a.useRef)(null),b=topology&&topology.defaultRepresentations,{loading:_,payload:w,error:M}=(0,u.A)(`${p.nP}/${e}/analyses/lipid-inter/`),{loading:j,payload:C,error:S}=(0,u.A)(`${p.nP}/${e}/analyses/mem-map/`),[N,E]=(0,a.useState)(null),[k,V]=(0,a.useState)(null),R=(0,a.useRef)({}),L=(0,a.useMemo)(()=>w&&w.data?Object.keys(w.data):[],[w]);(0,a.useMemo)(()=>{L.length&&!N&&E(L[0])},[L,N]);const Y=e=>{if(!w||!w.data||!e)return null;const t=Math.max(...w.data[e]);return m.hD.addScheme(function(n){this.atomColor=function(n){if(!n.residueIndex)return 13421772;const a=n.residueIndex,r=w.data[e];if(r&&a<r.length){const e=r[a];if(e<0)return 13421772;const n=e/t;let o,l,s=255;return n<.5?(o=255-Math.floor(128*n*2),l=255-Math.floor(255*n*2)):(o=127-Math.floor(127*(n-.5)*2),l=0),s<<16|o<<8|l}return 13421772}})};return(0,a.useEffect)(()=>{if(!b||0===b.length||!N)return;const e=(t=N,R.current[t]||(R.current[t]=Y(t)),R.current[t]);var t;b.forEach(t=>{-1!==n.indexOf(t.selection.slice(1,2))||"Protein"===t.name?(t.color="custom",t.type="spacefill",t.customScheme=e):"Membrane"!==t.name&&"M"!==t.name||(t.color="orange",t.opacity=0)});const a={name:N,type:"licorice",color:"orange",opacity:.3,selection:`( ${N} )`};V([...b,a])},[N,b,C]),_||j?(0,x.jsx)(d.A,{}):M?M.toString():S?S.toString():w&&C?(0,x.jsxs)(a.Suspense,{fallback:(0,x.jsx)(d.A,{}),children:[(0,x.jsx)(i.A,{className:f.default.card,children:(0,x.jsx)(o.A,{children:(0,x.jsx)(l.A,{value:N,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{E(t)},className:f.default.tabs,children:L.map(e=>{var t,n;return(0,x.jsx)(s.A,{value:e,label:(0,x.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,x.jsx)("span",{children:(null===C||void 0===C||null===(t=C.references)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.resname)||e})})},e)})})})}),(0,x.jsx)(i.A,{className:f.default.nglcard,ref:y,children:v?(0,x.jsx)(c.default,{className:f.default.container,representationsState:[k,V],ref:A,rotateX:!0}):(0,x.jsx)("div",{style:{height:"50vh"}})})]}):"Something bad happened with Lipid Interactions analysis"}},60676:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(65043),r=n(26494);const o="style_horizontal__KW-k9",l="style_vertical__YKrT2",s="style_heatmap-horizontal__HjdIF",i="style_heatmap-vertical__utgJY";var c=n(85941),d=n(70579);const u=e=>{let{title:t="",maxValue:n=1,minValue:u=0,colorPlan:h,splits:p=19,vertical:f=!1,flip:m=!1,className:x}=e;const{legendData:g,legendLabels:y}=(0,a.useMemo)(()=>{const e=[];if(u===n)e.push(u);else for(let r=u;r<=n;r+=(n-u)/p)e.push(r);let t=e.map(e=>Math.round(e));if(t.length>1)for(let n=1;new Set(t).size<t.length;n++)t=e.map(e=>Math.round(e*10**n)/10**n);const a=f?e.map(e=>[e]):[e];return m&&(a.reverse(),t.reverse()),{legendData:a,legendLabels:t}},[n,u,p,f]);return(0,d.jsxs)(r.A,{className:x||(f?l:o),children:[t,(0,d.jsx)(c.A,{data:g,xAxisValues:f?[""]:y,yAxisValues:f?y:[""],colorPlan:h,flippedXAxisValues:!1,className:f?i:s})]})}},77691:(e,t,n)=>{n.d(t,{jY:()=>r,q_:()=>a});const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bold 10px sans-serif";const n=(a.canvas||(a.canvas=document.createElement("canvas"))).getContext("2d");n.font=t;return n.measureText(e).width},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bold 10px sans-serif";const n=document.createElement("div"),a=document.createTextNode(e);return n.appendChild(a),Object.assign(n.style,{font:t,position:"absolute",visibility:"hidden",height:"auto",width:"auto","white-space":"nowrap"}),document.body.appendChild(n),{width:n.clientWidth,height:n.clientHeight}}},85941:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(65043),r=n(77691),o=n(57631),l=n(13232),s=n(70579);const i="normal 10px sans-serif",c="normal 14px sans-serif",d=(0,a.memo)(e=>{let{data:t,xAxisValues:n=[],yAxisValues:d=[],xAxisLabel:u,yAxisLabel:h,verticalPadding:p=0,colorPlan:f=["red","white","blue"],colorScale:m,onTooltip:x,onClick:g,flippedXAxisValues:y=!0,margin:v={top:10,right:10,bottom:10,left:10},className:A,NaNColor:b="#ffffff",minValue:_,maxValue:w,addBorder:M=!0}=e;if(!t)throw new Error("Data is missing. Data is mandatory for the heatmap representation");if(n.length!==new Set(n).size)throw console.log(n),new Error("Duplicated values in the X axis. See console logs");if(d.length!==new Set(d).size)throw console.log(d),new Error("Duplicated values in the Y axis. See console logs");0===n.length&&(n=Array.from(Array(t[0].length).keys())),0===d.length&&(d=Array.from(Array(t[0].length).keys()));const j=[].concat(...t),C=j.filter(e=>!isNaN(e)),S=null!==w&&void 0!==w?w:Math.max(...C),N=null!==_&&void 0!==_?_:Math.min(...C),E=[].concat(...Array(t.length).fill(n)),k=[];for(const a of d)k.push(...Array(n.length).fill(a));const V=[];for(const a in j)V.push({v:j[a],x:E[a],y:k[a]});const R=(0,a.useRef)(null),L=(0,a.useRef)(null),[,Y]=(0,a.useState)(null),W=(0,r.jY)("|",i).height,D=(0,r.jY)("|",c).height+9,H=Math.max(...n.map(e=>(0,r.q_)(e,i)))+9,I=Math.max(...d.map(e=>(0,r.q_)(e,i))),z=u?D:0,P=h?D+9:0,T=y?H+z:W+z,X=1===d.length?Math.max(I,(0,r.q_)(h,c)):I+P,q={top:v.top,right:v.right,bottom:T+v.bottom,left:X+v.left};return(0,a.useEffect)(()=>{L.current&&L.current.forEach(e=>e.remove());const e=R.current,{clientWidth:a,clientHeight:r}=e.parentElement,s=a-q.left-q.right,i=r-q.top-q.bottom,c=s/(1.05*(y?W:H)),A=i/(1.05*W),_=Math.ceil(n.length/c),w=Math.ceil(d.length/A),j=document.createElement("CANVAS");(0,o.Ltv)(e).node().appendChild(j);const C=(0,o.Ltv)(j).attr("id","canvas").attr("width",s).attr("height",i).style("position","absolute").style("top",q.top+"px").style("left",q.left+"px").style("cursor",g?"pointer":void 0),E=C.node().getContext("2d"),k=(0,o.Ltv)(e).append("svg").attr("id","svg").attr("viewBox",[0,0,a,r]),V=(0,o.WH)().range([q.left,s+q.left]).domain(n).paddingInner(0),D=k.append("g").attr("transform","translate(0,"+(i+q.top)+")").call((0,o.l78)(V).tickFormat((e,t)=>t%_===0?e:"")).selectAll("text");y&&D.style("text-anchor","end").attr("dx","-9px").attr("dy","-9px").attr("transform","rotate(-90)"),k.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",q.left+s/2).attr("y",q.top+i+T).text(u);const I=(0,o.WH)().domain(d).range([q.top,i+q.top]).padding(p);k.append("g").attr("transform","translate("+q.left+", 0)").call((0,o.V4s)(I).tickFormat((e,t)=>t%w===0?e:"")),1===d.length?k.append("text").attr("class","y label").attr("text-anchor","start").attr("x",0).attr("y",v.top+i).text(h):k.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-(q.top+i/2)).attr("y",v.left+P-9-9).attr("transform","rotate(-90)").text(h);const z=e=>{if(isNaN(e))return b;return(m||(0,o.m4Y)().range(f).domain([N,(N+S)/2,S]))(e)},X=V.bandwidth(),O=I.bandwidth();t.forEach((e,t)=>{const a=I(d[t])-q.top;e.forEach((e,t)=>{const r=V(n[t])-q.left;E.fillStyle=z(e),E.fillRect(r,a,X,O),M&&(E.strokeStyle=z(e),E.lineWidth=1,E.strokeRect(r,a,X,O))})});const $=e=>{const a=j.getBoundingClientRect(),r=e.clientX-a.left,o=e.clientY-a.top;let l=Math.floor(r/V.step()),s=Math.floor(o/I.step());const i=t[0].length-1;l<0&&(l=0),l>i&&(l=i);const c=t.length-1;s<0&&(s=0),s>c&&(s=c);const u=n[l],h=d[s];return{xIndex:l,yIndex:s,value:t[s][l],xAxisValue:u,yAxisValue:h}};let B;x&&(B=document.createElement("div"),Object.assign(B.style,{display:"none",position:"absolute",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),e.appendChild(B),j.onmousemove=t=>{const n=$(t);B.innerText=x(n),B.style.display="inline-block";const{x:a,y:r}=(0,l.L)(e,B,{x:t.clientX,y:t.clientY},3);B.style.left=a+"px",B.style.top=r+"px"},j.onmouseleave=()=>{B.style.display="none"}),g&&(j.onmousedown=e=>{const t=$(e);g(t)}),L.current=B?[k,C,B]:[k,C];const F=()=>{Y({innerWidth:window.innerWidth,innerHeight:window.innerHeight})};return window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}}),(0,s.jsx)("div",{className:A,style:A?void 0:{height:"600px",width:"600px"},children:(0,s.jsx)("div",{ref:R,id:"container",style:{position:"relative",width:"100%",height:"100%"}})})})}}]);
//# sourceMappingURL=9696.b55b1540.chunk.js.map