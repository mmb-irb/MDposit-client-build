"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[2633,9117,9696],{10939:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(65043),r=n(12110),o=n(17604);const l="style_container__M9GCG";var s=n(70579);const i={opacity:[0,1]};(0,o.A)()||(i.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,a.forwardRef)((e,t)=>{let{overrideComponent:n,...o}=e;const d=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),n=e.animate(i,{...c,delay:150*t});return()=>n.cancel()},[]);const u=n?"section":r.A;return(0,s.jsx)("div",{ref:d,className:l,children:(0,s.jsx)(u,{component:"section",...o,ref:t})})})},12110:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(58168),r=n(98587),o=n(65043),l=n(58387),s=n(98610),i=n(34535),c=n(98206),d=n(63336),u=n(92532),h=n(72372);function p(e){return(0,h.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var f=n(70579);const m=["className","raised"],x=(0,i.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),g=o.forwardRef(function(e,t){const n=(0,c.b)({props:e,name:"MuiCard"}),{className:o,raised:i=!1}=n,d=(0,r.A)(n,m),u=(0,a.A)({},n,{raised:i}),h=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},p,t)})(u);return(0,f.jsx)(x,(0,a.A)({className:(0,l.A)(h.root,o),elevation:i?8:void 0,ref:t,ownerState:u},d))})},32633:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});const a={card:"style_card__pEq-k",tabs:"style_tabs__HhB5H",nglcard:"style_nglcard__3eXUT",container:"style_container__eab4U",legend_container:"style_legend_container__swfrT",legend:"style_legend__SS-DS"}},55308:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(65043),r=n(89257),o=n(26494),l=n(8939),s=n(24056),i=n(10939),c=n(14696),d=n(17545),u=(n(60676),n(58338)),h=n(29449),p=n(95747),f=n(32633),m=n(82746),x=n(70579);const g={triggerOnce:!0,rootMargin:"100px"},y=()=>{const{accessionAndMdNumber:e,metadata:t,chains:n,topology:y}=(0,a.useContext)(h.f),[v,A]=(0,r.Wx)(g),b=(0,a.useRef)(null),w=y&&y.defaultRepresentations,{loading:_,payload:j,error:C}=(0,u.A)(`${p.nP}/${e}/analyses/lipid-inter/`),{loading:M,payload:S,error:N}=(0,u.A)(`${p.nP}/${e}/analyses/mem-map/`),[E,k]=(0,a.useState)(null),[V,L]=(0,a.useState)(null),R=(0,a.useRef)({}),Y=(0,a.useMemo)(()=>j&&j.data?Object.keys(j.data):[],[j]);(0,a.useMemo)(()=>{Y.length&&!E&&k(Y[0])},[Y,E]);const W=e=>{if(!j||!j.data||!e)return null;const t=Math.max(...j.data[e]);return m.hD.addScheme(function(n){this.atomColor=function(n){if(!n.residueIndex)return 13421772;const a=n.residueIndex,r=j.data[e];if(r&&a<r.length){const e=r[a];if(e<0)return 13421772;const n=e/t;let o,l,s=255;return n<.5?(o=255-Math.floor(128*n*2),l=255-Math.floor(255*n*2)):(o=127-Math.floor(127*(n-.5)*2),l=0),s<<16|o<<8|l}return 13421772}})};return(0,a.useEffect)(()=>{if(!w||0===w.length||!E)return;const e=(t=E,R.current[t]||(R.current[t]=W(t)),R.current[t]);var t;w.forEach(t=>{"cartoon"===t.type?(t.color="custom",t.type="spacefill",t.customScheme=e):t.name.toLowerCase().includes("lipid")&&(t.color="grey",t.opacity=.1)});const n={name:E,type:"licorice",color:"orange",opacity:.3,selection:`( ${E} )`};L([...w,n])},[E,w,S]),_||M?(0,x.jsx)(d.A,{}):C?C.toString():N?N.toString():j&&S?(0,x.jsxs)(a.Suspense,{fallback:(0,x.jsx)(d.A,{}),children:[(0,x.jsx)(i.A,{className:f.default.card,children:(0,x.jsx)(o.A,{children:(0,x.jsx)(l.A,{value:E,variant:"fullWidth",indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{k(t)},className:f.default.tabs,children:Y.map(e=>{var t,n;return(0,x.jsx)(s.A,{value:e,label:(0,x.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,x.jsx)("span",{children:(null===S||void 0===S||null===(t=S.references)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.resname)||e})})},e)})})})}),(0,x.jsx)(i.A,{className:f.default.nglcard,ref:v,children:A?(0,x.jsx)(c.default,{className:f.default.container,representationsState:[V,L],ref:b,rotateX:!0}):(0,x.jsx)("div",{style:{height:"50vh"}})})]}):"Something bad happened with Lipid Interactions analysis"}},60676:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(65043),r=n(26494);const o="style_horizontal__KW-k9",l="style_vertical__YKrT2",s="style_heatmap-horizontal__HjdIF",i="style_heatmap-vertical__utgJY";var c=n(85941),d=n(70579);const u=e=>{let{title:t="",maxValue:n=1,minValue:u=0,colorPlan:h,splits:p=19,vertical:f=!1,flip:m=!1,className:x}=e;const{legendData:g,legendLabels:y}=(0,a.useMemo)(()=>{const e=[];if(u===n)e.push(u);else for(let r=u;r<=n;r+=(n-u)/p)e.push(r);let t=e.map(e=>Math.round(e));if(t.length>1)for(let n=1;new Set(t).size<t.length;n++)t=e.map(e=>Math.round(e*10**n)/10**n);const a=f?e.map(e=>[e]):[e];return m&&(a.reverse(),t.reverse()),{legendData:a,legendLabels:t}},[n,u,p,f]);return(0,d.jsxs)(r.A,{className:x||(f?l:o),children:[t,(0,d.jsx)(c.A,{data:g,xAxisValues:f?[""]:y,yAxisValues:f?y:[""],colorPlan:h,flippedXAxisValues:!1,className:f?i:s})]})}},77691:(e,t,n)=>{n.d(t,{jY:()=>r,q_:()=>a});const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bold 10px sans-serif";const n=(a.canvas||(a.canvas=document.createElement("canvas"))).getContext("2d");n.font=t;return n.measureText(e).width},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bold 10px sans-serif";const n=document.createElement("div"),a=document.createTextNode(e);return n.appendChild(a),Object.assign(n.style,{font:t,position:"absolute",visibility:"hidden",height:"auto",width:"auto","white-space":"nowrap"}),document.body.appendChild(n),{width:n.clientWidth,height:n.clientHeight}}},85941:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(65043),r=n(77691),o=n(57631),l=n(13232),s=n(70579);const i="normal 10px sans-serif",c="normal 14px sans-serif",d=(0,a.memo)(e=>{let{data:t,xAxisValues:n=[],yAxisValues:d=[],xAxisLabel:u,yAxisLabel:h,verticalPadding:p=0,colorPlan:f=["red","white","blue"],colorScale:m,onTooltip:x,onClick:g,flippedXAxisValues:y=!0,margin:v={top:10,right:10,bottom:10,left:10},className:A,NaNColor:b="#ffffff",minValue:w,maxValue:_,addBorder:j=!0}=e;if(!t)throw new Error("Data is missing. Data is mandatory for the heatmap representation");if(n.length!==new Set(n).size)throw console.log(n),new Error("Duplicated values in the X axis. See console logs");if(d.length!==new Set(d).size)throw console.log(d),new Error("Duplicated values in the Y axis. See console logs");0===n.length&&(n=Array.from(Array(t[0].length).keys())),0===d.length&&(d=Array.from(Array(t[0].length).keys()));const C=[].concat(...t),M=C.filter(e=>!isNaN(e)),S=null!==_&&void 0!==_?_:Math.max(...M),N=null!==w&&void 0!==w?w:Math.min(...M),E=[].concat(...Array(t.length).fill(n)),k=[];for(const a of d)k.push(...Array(n.length).fill(a));const V=[];for(const a in C)V.push({v:C[a],x:E[a],y:k[a]});const L=(0,a.useRef)(null),R=(0,a.useRef)(null),[,Y]=(0,a.useState)(null),W=(0,r.jY)("|",i).height,D=(0,r.jY)("|",c).height+9,H=Math.max(...n.map(e=>(0,r.q_)(e,i)))+9,I=Math.max(...d.map(e=>(0,r.q_)(e,i))),z=u?D:0,T=h?D+9:0,X=y?H+z:W+z,q=1===d.length?Math.max(I,(0,r.q_)(h,c)):I+T,P={top:v.top,right:v.right,bottom:X+v.bottom,left:q+v.left};return(0,a.useEffect)(()=>{R.current&&R.current.forEach(e=>e.remove());const e=L.current,{clientWidth:a,clientHeight:r}=e.parentElement,s=a-P.left-P.right,i=r-P.top-P.bottom,c=s/(1.05*(y?W:H)),A=i/(1.05*W),w=Math.ceil(n.length/c),_=Math.ceil(d.length/A),C=document.createElement("CANVAS");(0,o.Ltv)(e).node().appendChild(C);const M=(0,o.Ltv)(C).attr("id","canvas").attr("width",s).attr("height",i).style("position","absolute").style("top",P.top+"px").style("left",P.left+"px").style("cursor",g?"pointer":void 0),E=M.node().getContext("2d"),k=(0,o.Ltv)(e).append("svg").attr("id","svg").attr("viewBox",[0,0,a,r]),V=(0,o.WH)().range([P.left,s+P.left]).domain(n).paddingInner(0),D=k.append("g").attr("transform","translate(0,"+(i+P.top)+")").call((0,o.l78)(V).tickFormat((e,t)=>t%w===0?e:"")).selectAll("text");y&&D.style("text-anchor","end").attr("dx","-9px").attr("dy","-9px").attr("transform","rotate(-90)"),k.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",P.left+s/2).attr("y",P.top+i+X).text(u);const I=(0,o.WH)().domain(d).range([P.top,i+P.top]).padding(p);k.append("g").attr("transform","translate("+P.left+", 0)").call((0,o.V4s)(I).tickFormat((e,t)=>t%_===0?e:"")),1===d.length?k.append("text").attr("class","y label").attr("text-anchor","start").attr("x",0).attr("y",v.top+i).text(h):k.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-(P.top+i/2)).attr("y",v.left+T-9-9).attr("transform","rotate(-90)").text(h);const z=e=>{if(isNaN(e))return b;return(m||(0,o.m4Y)().range(f).domain([N,(N+S)/2,S]))(e)},q=V.bandwidth(),$=I.bandwidth();t.forEach((e,t)=>{const a=I(d[t])-P.top;e.forEach((e,t)=>{const r=V(n[t])-P.left;E.fillStyle=z(e),E.fillRect(r,a,q,$),j&&(E.strokeStyle=z(e),E.lineWidth=1,E.strokeRect(r,a,q,$))})});const B=e=>{const a=C.getBoundingClientRect(),r=e.clientX-a.left,o=e.clientY-a.top;let l=Math.floor(r/V.step()),s=Math.floor(o/I.step());const i=t[0].length-1;l<0&&(l=0),l>i&&(l=i);const c=t.length-1;s<0&&(s=0),s>c&&(s=c);const u=n[l],h=d[s];return{xIndex:l,yIndex:s,value:t[s][l],xAxisValue:u,yAxisValue:h}};let F;x&&(F=document.createElement("div"),Object.assign(F.style,{display:"none",position:"absolute",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),e.appendChild(F),C.onmousemove=t=>{const n=B(t);F.innerText=x(n),F.style.display="inline-block";const{x:a,y:r}=(0,l.L)(e,F,{x:t.clientX,y:t.clientY},3);F.style.left=a+"px",F.style.top=r+"px"},C.onmouseleave=()=>{F.style.display="none"}),g&&(C.onmousedown=e=>{const t=B(e);g(t)}),R.current=F?[k,M,F]:[k,M];const O=()=>{Y({innerWidth:window.innerWidth,innerHeight:window.innerHeight})};return window.addEventListener("resize",O),()=>{window.removeEventListener("resize",O)}}),(0,s.jsx)("div",{className:A,style:A?void 0:{height:"600px",width:"600px"},children:(0,s.jsx)("div",{ref:L,id:"container",style:{position:"relative",width:"100%",height:"100%"}})})})}}]);
//# sourceMappingURL=9696.ee548803.chunk.js.map