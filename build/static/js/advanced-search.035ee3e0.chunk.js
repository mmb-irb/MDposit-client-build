"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[510],{10939:(e,r,t)=>{t.d(r,{A:()=>d});var o=t(65043),a=t(12110),n=t(17604);const s="style_container__M9GCG";var l=t(70579);const i={opacity:[0,1]};(0,n.A)()||(i.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,o.forwardRef)(((e,r)=>{let{overrideComponent:t,...n}=e;const d=(0,o.useRef)(null);(0,o.useLayoutEffect)((()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const r=Array.from(document.querySelectorAll("main section")).findIndex((r=>e===r)),t=e.animate(i,{...c,delay:150*r});return()=>t.cancel()}),[]);const p=t?"section":a.A;return(0,l.jsx)("div",{ref:d,className:s,children:(0,l.jsx)(p,{component:"section",...n,ref:r})})}))},12110:(e,r,t)=>{t.d(r,{A:()=>v});var o=t(58168),a=t(98587),n=t(65043),s=t(58387),l=t(98610),i=t(34535),c=t(98206),d=t(63336),p=t(92532),u=t(72372);function m(e){return(0,u.Ay)("MuiCard",e)}(0,p.A)("MuiCard",["root"]);var f=t(70579);const h=["className","raised"],g=(0,i.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({overflow:"hidden"}))),v=n.forwardRef((function(e,r){const t=(0,c.b)({props:e,name:"MuiCard"}),{className:n,raised:i=!1}=t,d=(0,a.A)(t,h),p=(0,o.A)({},t,{raised:i}),u=(e=>{const{classes:r}=e;return(0,l.A)({root:["root"]},m,r)})(p);return(0,f.jsx)(g,(0,o.A)({className:(0,s.A)(u.root,n),elevation:i?8:void 0,ref:r,ownerState:p},d))}))},17392:(e,r,t)=>{t.d(r,{A:()=>y});var o=t(98587),a=t(58168),n=t(65043),s=t(58387),l=t(98610),i=t(60061),c=t(34535),d=t(98206),p=t(66236),u=t(6803),m=t(92532),f=t(72372);function h(e){return(0,f.Ay)("MuiIconButton",e)}const g=(0,m.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var v=t(70579);const x=["edge","children","className","color","disabled","disableFocusRipple","size"],A=(0,c.Ay)(p.A,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,"default"!==t.color&&r[`color${(0,u.A)(t.color)}`],t.edge&&r[`edge${(0,u.A)(t.edge)}`],r[`size${(0,u.A)(t.size)}`]]}})((e=>{let{theme:r,ownerState:t}=e;return(0,a.A)({textAlign:"center",flex:"0 0 auto",fontSize:r.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(r.vars||r).palette.action.active,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:(0,i.X4)(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),(e=>{let{theme:r,ownerState:t}=e;var o;const n=null==(o=(r.vars||r).palette)?void 0:o[t.color];return(0,a.A)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&(0,a.A)({color:null==n?void 0:n.main},!t.disableRipple&&{"&:hover":(0,a.A)({},n&&{backgroundColor:r.vars?`rgba(${n.mainChannel} / ${r.vars.palette.action.hoverOpacity})`:(0,i.X4)(n.main,r.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===t.size&&{padding:5,fontSize:r.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:r.typography.pxToRem(28)},{[`&.${g.disabled}`]:{backgroundColor:"transparent",color:(r.vars||r).palette.action.disabled}})})),y=n.forwardRef((function(e,r){const t=(0,d.b)({props:e,name:"MuiIconButton"}),{edge:n=!1,children:i,className:c,color:p="default",disabled:m=!1,disableFocusRipple:f=!1,size:g="medium"}=t,y=(0,o.A)(t,x),b=(0,a.A)({},t,{edge:n,color:p,disabled:m,disableFocusRipple:f,size:g}),j=(e=>{const{classes:r,disabled:t,color:o,edge:a,size:n}=e,s={root:["root",t&&"disabled","default"!==o&&`color${(0,u.A)(o)}`,a&&`edge${(0,u.A)(a)}`,`size${(0,u.A)(n)}`]};return(0,l.A)(s,h,r)})(b);return(0,v.jsx)(A,(0,a.A)({className:(0,s.A)(j.root,c),centerRipple:!0,focusRipple:!f,disabled:m,ref:r},y,{ownerState:b,children:i}))}))},26494:(e,r,t)=>{t.d(r,{A:()=>g});var o=t(58168),a=t(98587),n=t(65043),s=t(58387),l=t(98610),i=t(34535),c=t(98206),d=t(92532),p=t(72372);function u(e){return(0,p.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var m=t(70579);const f=["className","component"],h=(0,i.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),g=n.forwardRef((function(e,r){const t=(0,c.b)({props:e,name:"MuiCardContent"}),{className:n,component:i="div"}=t,d=(0,a.A)(t,f),p=(0,o.A)({},t,{component:i}),g=(e=>{const{classes:r}=e;return(0,l.A)({root:["root"]},u,r)})(p);return(0,m.jsx)(h,(0,o.A)({as:i,className:(0,s.A)(g.root,n),ownerState:p,ref:r},d))}))},28316:(e,r,t)=>{t.r(r),t.d(r,{default:()=>L});var o=t(65043),a=t(73216),n=t(10939),s=t(53193),l=t(2260),i=t(32143),c=t(81673),d=t(90469),p=t(83558),u=t(51962),m=t(67784),f=t(17392),h=t(26494),g=t(11906),v=t(12639),x=t(92127);const A="style_tall__uLxlS",y="style_margined__hiFK4",b="style_spaced__jKimP",j="style_trash__JtAQQ",C="style_grey__f3+Yh",_="style_unpadded__QkJ-Y",N="style_outlined__b4B+l",R="style_right__ci4FV",z="style_search__JEl1-";var $=t(17604),k=t(95747),S=t(70579);const M=k._r.queryFields,w=Object.values(M).reduce(((e,r)=>e.concat(r)),[]),O={opacity:[0,1]};(0,$.A)()||(O.transform=["translateX(2.5%)","translateX(0)"]);const I=[{name:"AND",operator:"$and",noperator:"$not"},{name:"OR",operator:"$or",noperator:"$nor"}],T=(e,r)=>({[e]:r,$options:"i"}),q=(e,r)=>({[e]:+r}),E=(e,r)=>"true"===e,B={string:[{name:"contains",operator:"$regex",formatter:(e,r)=>{const t=r.replace(/[-[/\]{}()*+?.,\\^$|#\s]/g,"\\$&");return T(e,t)}},{name:"equals",operator:"$eq",formatter:(e,r)=>({[e]:r})},{name:"regular expression",operator:"$regex",formatter:T}],float:[{name:"greater than",operator:"$gt",formatter:q},{name:"lower than",operator:"$lt",formatter:q}],int:[{name:"equals",operator:"$eq",formatter:q},{name:"greater than",operator:"$gt",formatter:q},{name:"lower than",operator:"$lt",formatter:q}],boolean:[{name:"true",operator:"true",formatter:E},{name:"false",operator:"false",formatter:E}]},G={logic:"AND",is:!0,fields:[{field:"",is:!0,comparator:"",value:""},{field:"",is:!0,comparator:"",value:""}]},L=()=>{const e=(0,o.useRef)(G),[r,t]=(0,o.useState)(!1),$=(0,a.Zp)(),[,k]=(0,o.useState)(!0),O=()=>{k((e=>!e))};let T=!1;const q=e=>{let{object:r,label:t,options:o,handleChange:a,error:n,helpText:d}=e;return(0,S.jsxs)(s.A,{className:b,children:[(0,S.jsxs)(l.A,{id:"select",title:"Select the desired "+t,value:r[t],onChange:a,displayEmpty:!0,error:n,children:[(0,S.jsx)(i.A,{disabled:!0,value:"",children:(0,S.jsx)("em",{className:C,children:t})},"placeholder"),o.map((e=>(0,S.jsx)(i.A,{value:e,children:e},e)))]}),d&&(0,S.jsx)(c.A,{children:d})]})},E=e=>{let{object:r,label:t,options:o,handleChange:a}=e;return(0,S.jsx)(s.A,{className:b,children:(0,S.jsxs)(l.A,{id:"select",title:"Select the desired "+t,value:r[t],onChange:a,displayEmpty:!0,children:[(0,S.jsx)(i.A,{disabled:!0,value:"",children:(0,S.jsx)("em",{className:C,children:t})},"placeholder"),o.map((e=>{const[r,t]=Object.entries(e)[0];return[(0,S.jsx)(d.A,{color:"primary",children:r}),...t.map((e=>(0,S.jsx)(i.A,{value:e,children:e},e)))]}))]})})},L={string:{inputMode:"text"},int:{inputMode:"numeric",pattern:"[0-9+-]*",helpText:"integer numbers accepted only"},float:{inputMode:"numeric",pattern:"[0-9.,+-]*",helpText:"numbers accepted only"}},F=e=>{let{object:t,parent:o,index:a}=e;const n=I.map((e=>e.name)),s=Object.entries(M).map((e=>{let[r,t]=e;return{[r]:t.map((e=>e.name))}})),l=[{"Logic operators":n},...s];if(void 0!==t.field){const e=w.find((e=>e.name===t.field)),s=e&&B[e.type].map((e=>e.name)),i=e&&"boolean"===e.type,c=e&&!t.comparator,d=c&&"please select a comparator",h=e&&!i&&!t.value,g=e&&!i&&L[e.type],A=e&&!i&&g.pattern&&t.value.match(g.pattern),b=A&&A[0]!==t.value,C=h?"please specify a value":b&&g.helpText;(c||h||b)&&(T=!0);const _=e=>{const r=e.target.value;t.value=r,O()};return(0,S.jsxs)("div",{className:y,children:[(0,S.jsx)(E,{object:t,label:"field",options:l,handleChange:e=>{const r=e.target.value;if(n.includes(r))return delete t.field,delete t.comparator,delete t.value,t.logic=r,t.is=!0,t.fields=[],void O();t.field=r;const o=w.find((e=>e.name===r));-1===(o&&B[o.type].map((e=>e.name))).indexOf(t.comparator)&&(t.comparator=""),O()}}),e&&!i&&(0,S.jsx)(p.A,{onChange:()=>{t.is=!t.is,O()},control:(0,S.jsx)(u.A,{checked:!t.is,icon:(0,S.jsx)(x.g,{icon:v.GRI,size:"xs",style:{visibility:"hidden"}}),checkedIcon:(0,S.jsx)(x.g,{icon:v.GRI,size:"xs"}),style:{color:"black"}}),label:"NOT",style:t.is?{color:"lightgrey"}:{color:"black"},className:N}),e&&(0,S.jsx)(q,{object:t,label:"comparator",options:s,handleChange:e=>{const r=e.target.value;t.comparator=r,O()},helpText:r&&d,error:r&&c}),e&&!i&&(0,S.jsx)(m.A,{title:"Type here the value for the specified field",defaultValue:t.value,onKeyPress:e=>{"Enter"===e.key&&_(e)},onBlur:_,placeholder:"e.g. "+e.example,inputProps:{inputMode:g.inputMode},helperText:r&&C,error:r&&(h||b)}),(0,S.jsx)(f.A,{variant:"contained",onClick:()=>{o.splice(a,1),O()},className:j,size:"large",children:(0,S.jsx)(x.g,{icon:v.yLS,size:"xs"})})]})}if(void 0!==t.fields)return(0,S.jsxs)("div",{className:y,children:[(0,S.jsx)(E,{object:t,label:"logic",options:l,handleChange:e=>{const r=e.target.value;if(-1===n.indexOf(r))return delete t.fields,delete t.logic,t.field=r,t.is=!0,t.comparator="",t.value="",void O();t.logic=r,O()}}),(0,S.jsx)(p.A,{onChange:()=>{t.is=!t.is,O()},control:(0,S.jsx)(u.A,{checked:!t.is,icon:(0,S.jsx)(x.g,{icon:v.GRI,size:"xs",style:{visibility:"hidden"}}),checkedIcon:(0,S.jsx)(x.g,{icon:v.GRI,size:"xs"}),style:{color:"black"}}),label:"NOT",style:t.is?{color:"lightgrey"}:{color:"black"},className:N}),(0,S.jsx)(f.A,{variant:"contained",onClick:()=>{t.fields.unshift({field:"",is:!0,comparator:"",value:""}),O()},className:_,size:"large",children:(0,S.jsx)(x.g,{icon:v.OQW})}),o&&(0,S.jsx)(f.A,{variant:"contained",onClick:()=>{o.splice(a,1),O()},className:_,size:"large",children:(0,S.jsx)(x.g,{icon:v.yLS,size:"xs"})}),t.fields.map(((e,r)=>(0,S.jsx)(F,{object:e,parent:t.fields,index:r},r)))]})},J=e=>{if(void 0!==e.field){const r=w.find((r=>r.name===e.field)),t=r.path,o=(r&&B[r.type]).find((r=>r.name===e.comparator)),a=o.operator,n=o.formatter;return e.is?{[t]:n(a,e.value)}:{[t]:{$not:n(a,e.value)}}}if(void 0!==e.logic){const r=e.logic,t=I.find((e=>e.name===r))[e.is?"operator":"noperator"],o=e.fields.filter((e=>e.field||e.logic));if(0===o.length)return;if(1===o.length){const r=o[0];return r.is=((e,r)=>{if(e){if(r)return!0;if(!r)return!1}else{if(r)return!1;if(!r)return!0}})(r.is,e.is),J(r)}return{[t]:o.map((e=>J(e)))}}};return(0,S.jsx)(n.A,{className:A,children:(0,S.jsxs)(h.A,{children:["Use the ",(0,S.jsx)("b",{children:"advanced search"})," query builder to create complex database queries.",(0,S.jsx)("br",{}),(0,S.jsx)("hr",{style:{color:"lightGrey"}}),(0,S.jsx)(F,{object:e.current}),(0,S.jsx)("div",{className:R,children:(0,S.jsxs)(g.A,{variant:"contained",onClick:()=>{if(T)return void t(!0);const r=e.current,o=J(r),a=JSON.stringify(o);a&&$("/browse?query="+a)},className:z,children:[(0,S.jsx)(x.g,{icon:v.MjD}),"\xa0",(0,S.jsx)("span",{children:"Search"})]})})]})})}}}]);
//# sourceMappingURL=advanced-search.035ee3e0.chunk.js.map