"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[510],{10939:(e,r,t)=>{t.d(r,{A:()=>d});var a=t(65043),o=t(12110),n=t(17604);const i="style_container__M9GCG";var s=t(70579);const l={opacity:[0,1]};(0,n.A)()||(l.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,a.forwardRef)((e,r)=>{let{overrideComponent:t,...n}=e;const d=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const r=Array.from(document.querySelectorAll("main section")).findIndex(r=>e===r),t=e.animate(l,{...c,delay:150*r});return()=>t.cancel()},[]);const p=t?"section":o.A;return(0,s.jsx)("div",{ref:d,className:i,children:(0,s.jsx)(p,{component:"section",...n,ref:r})})})},12110:(e,r,t)=>{t.d(r,{A:()=>v});var a=t(58168),o=t(98587),n=t(65043),i=t(58387),s=t(98610),l=t(34535),c=t(98206),d=t(63336),p=t(92532),u=t(72372);function m(e){return(0,u.Ay)("MuiCard",e)}(0,p.A)("MuiCard",["root"]);var h=t(70579);const g=["className","raised"],f=(0,l.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({overflow:"hidden"})),v=n.forwardRef(function(e,r){const t=(0,c.b)({props:e,name:"MuiCard"}),{className:n,raised:l=!1}=t,d=(0,o.A)(t,g),p=(0,a.A)({},t,{raised:l}),u=(e=>{const{classes:r}=e;return(0,s.A)({root:["root"]},m,r)})(p);return(0,h.jsx)(f,(0,a.A)({className:(0,i.A)(u.root,n),elevation:l?8:void 0,ref:r,ownerState:p},d))})},17392:(e,r,t)=>{t.d(r,{A:()=>A});var a=t(98587),o=t(58168),n=t(65043),i=t(58387),s=t(98610),l=t(60061),c=t(34535),d=t(98206),p=t(66236),u=t(6803),m=t(92532),h=t(72372);function g(e){return(0,h.Ay)("MuiIconButton",e)}const f=(0,m.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var v=t(70579);const y=["edge","children","className","color","disabled","disableFocusRipple","size"],x=(0,c.Ay)(p.A,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,"default"!==t.color&&r[`color${(0,u.A)(t.color)}`],t.edge&&r[`edge${(0,u.A)(t.edge)}`],r[`size${(0,u.A)(t.size)}`]]}})(e=>{let{theme:r,ownerState:t}=e;return(0,o.A)({textAlign:"center",flex:"0 0 auto",fontSize:r.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(r.vars||r).palette.action.active,transition:r.transitions.create("background-color",{duration:r.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:(0,l.X4)(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})},e=>{let{theme:r,ownerState:t}=e;var a;const n=null==(a=(r.vars||r).palette)?void 0:a[t.color];return(0,o.A)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&(0,o.A)({color:null==n?void 0:n.main},!t.disableRipple&&{"&:hover":(0,o.A)({},n&&{backgroundColor:r.vars?`rgba(${n.mainChannel} / ${r.vars.palette.action.hoverOpacity})`:(0,l.X4)(n.main,r.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===t.size&&{padding:5,fontSize:r.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:r.typography.pxToRem(28)},{[`&.${f.disabled}`]:{backgroundColor:"transparent",color:(r.vars||r).palette.action.disabled}})}),A=n.forwardRef(function(e,r){const t=(0,d.b)({props:e,name:"MuiIconButton"}),{edge:n=!1,children:l,className:c,color:p="default",disabled:m=!1,disableFocusRipple:h=!1,size:f="medium"}=t,A=(0,a.A)(t,y),b=(0,o.A)({},t,{edge:n,color:p,disabled:m,disableFocusRipple:h,size:f}),j=(e=>{const{classes:r,disabled:t,color:a,edge:o,size:n}=e,i={root:["root",t&&"disabled","default"!==a&&`color${(0,u.A)(a)}`,o&&`edge${(0,u.A)(o)}`,`size${(0,u.A)(n)}`]};return(0,s.A)(i,g,r)})(b);return(0,v.jsx)(x,(0,o.A)({className:(0,i.A)(j.root,c),centerRipple:!0,focusRipple:!h,disabled:m,ref:r},A,{ownerState:b,children:l}))})},26494:(e,r,t)=>{t.d(r,{A:()=>f});var a=t(58168),o=t(98587),n=t(65043),i=t(58387),s=t(98610),l=t(34535),c=t(98206),d=t(92532),p=t(72372);function u(e){return(0,p.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var m=t(70579);const h=["className","component"],g=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),f=n.forwardRef(function(e,r){const t=(0,c.b)({props:e,name:"MuiCardContent"}),{className:n,component:l="div"}=t,d=(0,o.A)(t,h),p=(0,a.A)({},t,{component:l}),f=(e=>{const{classes:r}=e;return(0,s.A)({root:["root"]},u,r)})(p);return(0,m.jsx)(g,(0,a.A)({as:l,className:(0,i.A)(f.root,n),ownerState:p,ref:r},d))})},28316:(e,r,t)=>{t.r(r),t.d(r,{default:()=>L});var a=t(65043),o=t(73216),n=t(10939),i=t(53193),s=t(2260),l=t(32143),c=t(81673),d=t(90469),p=t(83558),u=t(51962),m=t(67784),h=t(17392),g=t(26494),f=t(11906),v=t(12639),y=t(92127);const x="style_tall__uLxlS",A="style_margined__hiFK4",b="style_spaced__jKimP",j="style_trash__JtAQQ",C="style_grey__f3+Yh",N="style_unpadded__QkJ-Y",R="style_outlined__b4B+l",_="style_right__ci4FV",$="style_search__JEl1-";var S=t(17604),z=t(95747),M=t(70579);const w=z._r.queryFields,k=Object.values(w).reduce((e,r)=>e.concat(r),[]),B={opacity:[0,1]};(0,S.A)()||(B.transform=["translateX(2.5%)","translateX(0)"]);const T=[{name:"AND",operator:"$and",noperator:"$not"},{name:"OR",operator:"$or",noperator:"$nor"}],O=(e,r)=>({[e]:r,$options:"i"}),I=(e,r)=>({[e]:+r}),W=(e,r)=>"true"===e,q={string:[{name:"contains",operator:"$regex",formatter:(e,r)=>{const t=r.replace(/[-[/\]{}()*+?.,\\^$|#\s]/g,"\\$&");return O(e,t)}},{name:"equals",operator:"$eq",formatter:(e,r)=>({[e]:r})},{name:"regular expression",operator:"$regex",formatter:O}],float:[{name:"greater than",operator:"$gt",formatter:I},{name:"lower than",operator:"$lt",formatter:I}],int:[{name:"equals",operator:"$eq",formatter:I},{name:"greater than",operator:"$gt",formatter:I},{name:"lower than",operator:"$lt",formatter:I}],boolean:[{name:"true",operator:"true",formatter:W},{name:"false",operator:"false",formatter:W}]},E={logic:"AND",is:!0,fields:[{field:"",is:!0,comparator:"",value:""},{field:"",is:!0,comparator:"",value:""}]},L=()=>{const e=(0,a.useRef)(E),[r,t]=(0,a.useState)(!1),S=(0,o.Zp)(),[,z]=(0,a.useState)(!0),B=()=>{z(e=>!e)};let O=!1;const I=e=>{let{object:r,label:t,options:a,handleChange:o,error:n,helpText:d}=e;return(0,M.jsxs)(i.A,{className:b,children:[(0,M.jsxs)(s.A,{id:"select",title:"Select the desired "+t,value:r[t],onChange:o,displayEmpty:!0,error:n,children:[(0,M.jsx)(l.A,{disabled:!0,value:"",children:(0,M.jsx)("em",{className:C,children:t})},"placeholder"),a.map(e=>(0,M.jsx)(l.A,{value:e,children:e},e))]}),d&&(0,M.jsx)(c.A,{children:d})]})},W=e=>{let{object:r,label:t,options:a,handleChange:o}=e;return(0,M.jsx)(i.A,{className:b,children:(0,M.jsxs)(s.A,{id:"select",title:"Select the desired "+t,value:r[t],onChange:o,displayEmpty:!0,children:[(0,M.jsx)(l.A,{disabled:!0,value:"",children:(0,M.jsx)("em",{className:C,children:t})},"placeholder"),a.map(e=>{const[r,t]=Object.entries(e)[0];return[(0,M.jsx)(d.A,{color:"primary",children:r}),...t.map(e=>(0,M.jsx)(l.A,{value:e,children:e},e))]})]})})},L={string:{inputMode:"text"},int:{inputMode:"numeric",pattern:"[0-9+-]*",helpText:"integer numbers accepted only"},float:{inputMode:"numeric",pattern:"[0-9.,+-]*",helpText:"numbers accepted only"}},G=e=>{let{object:t,parent:a,index:o}=e;const n=T.map(e=>e.name),i=Object.entries(w).map(e=>{let[r,t]=e;return{[r]:t.map(e=>e.name)}}),s=[{"Logic operators":n},...i];if(void 0!==t.field){const e=k.find(e=>e.name===t.field),i=e&&q[e.type].map(e=>e.name),l=e&&"boolean"===e.type,c=e&&!t.comparator,d=c&&"please select a comparator",g=e&&!l&&!t.value,f=e&&!l&&L[e.type],x=e&&!l&&f.pattern&&t.value.match(f.pattern),b=x&&x[0]!==t.value,C=g?"please specify a value":b&&f.helpText;(c||g||b)&&(O=!0);const N=e=>{const r=e.target.value;t.value=r,B()};return(0,M.jsxs)("div",{className:A,children:[(0,M.jsx)(W,{object:t,label:"field",options:s,handleChange:e=>{const r=e.target.value;if(n.includes(r))return delete t.field,delete t.comparator,delete t.value,t.logic=r,t.is=!0,t.fields=[],void B();t.field=r;const a=k.find(e=>e.name===r);-1===(a&&q[a.type].map(e=>e.name)).indexOf(t.comparator)&&(t.comparator=""),B()}}),e&&!l&&(0,M.jsx)(p.A,{onChange:()=>{t.is=!t.is,B()},control:(0,M.jsx)(u.A,{checked:!t.is,icon:(0,M.jsx)(y.g,{icon:v.GRI,size:"xs",style:{visibility:"hidden"}}),checkedIcon:(0,M.jsx)(y.g,{icon:v.GRI,size:"xs"}),style:{color:"black"}}),label:"NOT",style:t.is?{color:"lightgrey"}:{color:"black"},className:R}),e&&(0,M.jsx)(I,{object:t,label:"comparator",options:i,handleChange:e=>{const r=e.target.value;t.comparator=r,B()},helpText:r&&d,error:r&&c}),e&&!l&&(0,M.jsx)(m.A,{title:"Type here the value for the specified field",defaultValue:t.value,onKeyPress:e=>{"Enter"===e.key&&N(e)},onBlur:N,placeholder:"e.g. "+e.example,inputProps:{inputMode:f.inputMode},helperText:r&&C,error:r&&(g||b)}),(0,M.jsx)(h.A,{variant:"contained",onClick:()=>{a.splice(o,1),B()},className:j,size:"large",children:(0,M.jsx)(y.g,{icon:v.yLS,size:"xs"})})]})}if(void 0!==t.fields)return(0,M.jsxs)("div",{className:A,children:[(0,M.jsx)(W,{object:t,label:"logic",options:s,handleChange:e=>{const r=e.target.value;if(-1===n.indexOf(r))return delete t.fields,delete t.logic,t.field=r,t.is=!0,t.comparator="",t.value="",void B();t.logic=r,B()}}),(0,M.jsx)(p.A,{onChange:()=>{t.is=!t.is,B()},control:(0,M.jsx)(u.A,{checked:!t.is,icon:(0,M.jsx)(y.g,{icon:v.GRI,size:"xs",style:{visibility:"hidden"}}),checkedIcon:(0,M.jsx)(y.g,{icon:v.GRI,size:"xs"}),style:{color:"black"}}),label:"NOT",style:t.is?{color:"lightgrey"}:{color:"black"},className:R}),(0,M.jsx)(h.A,{variant:"contained",onClick:()=>{t.fields.unshift({field:"",is:!0,comparator:"",value:""}),B()},className:N,size:"large",children:(0,M.jsx)(y.g,{icon:v.OQW})}),a&&(0,M.jsx)(h.A,{variant:"contained",onClick:()=>{a.splice(o,1),B()},className:N,size:"large",children:(0,M.jsx)(y.g,{icon:v.yLS,size:"xs"})}),t.fields.map((e,r)=>(0,M.jsx)(G,{object:e,parent:t.fields,index:r},r))]})},F=e=>{if(void 0!==e.field){const r=k.find(r=>r.name===e.field),t=r.path,a=(r&&q[r.type]).find(r=>r.name===e.comparator),o=a.operator,n=a.formatter;return e.is?{[t]:n(o,e.value)}:{[t]:{$not:n(o,e.value)}}}if(void 0!==e.logic){const r=e.logic,t=T.find(e=>e.name===r)[e.is?"operator":"noperator"],a=e.fields.filter(e=>e.field||e.logic);if(0===a.length)return;if(1===a.length){const r=a[0];return r.is=((e,r)=>{if(e){if(r)return!0;if(!r)return!1}else{if(r)return!1;if(!r)return!0}})(r.is,e.is),F(r)}return{[t]:a.map(e=>F(e))}}};return(0,M.jsx)(n.A,{className:x,children:(0,M.jsxs)(g.A,{children:["Use the ",(0,M.jsx)("b",{children:"advanced search"})," query builder to create complex database queries.",(0,M.jsx)("br",{}),(0,M.jsx)("hr",{style:{color:"lightGrey"}}),(0,M.jsx)(G,{object:e.current}),(0,M.jsx)("div",{className:_,children:(0,M.jsxs)(f.A,{variant:"contained",onClick:()=>{if(O)return void t(!0);const r=e.current,a=F(r),o=JSON.stringify(a);o&&S("/browse?query="+o)},className:$,children:[(0,M.jsx)(y.g,{icon:v.MjD}),"\xa0",(0,M.jsx)("span",{children:"Search"})]})})]})})}},85865:(e,r,t)=>{t.d(r,{A:()=>A});var a=t(98587),o=t(58168),n=t(65043),i=t(58387),s=t(41989),l=t(98610),c=t(34535),d=t(98206),p=t(6803),u=t(92532),m=t(72372);function h(e){return(0,m.Ay)("MuiTypography",e)}(0,u.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var g=t(70579);const f=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],v=(0,c.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,t.variant&&r[t.variant],"inherit"!==t.align&&r[`align${(0,p.A)(t.align)}`],t.noWrap&&r.noWrap,t.gutterBottom&&r.gutterBottom,t.paragraph&&r.paragraph]}})(e=>{let{theme:r,ownerState:t}=e;return(0,o.A)({margin:0},"inherit"===t.variant&&{font:"inherit"},"inherit"!==t.variant&&r.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})}),y={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},x={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},A=n.forwardRef(function(e,r){const t=(0,d.b)({props:e,name:"MuiTypography"}),n=(e=>x[e]||e)(t.color),c=(0,s.A)((0,o.A)({},t,{color:n})),{align:u="inherit",className:m,component:A,gutterBottom:b=!1,noWrap:j=!1,paragraph:C=!1,variant:N="body1",variantMapping:R=y}=c,_=(0,a.A)(c,f),$=(0,o.A)({},c,{align:u,color:n,className:m,component:A,gutterBottom:b,noWrap:j,paragraph:C,variant:N,variantMapping:R}),S=A||(C?"p":R[N]||y[N])||"span",z=(e=>{const{align:r,gutterBottom:t,noWrap:a,paragraph:o,variant:n,classes:i}=e,s={root:["root",n,"inherit"!==e.align&&`align${(0,p.A)(r)}`,t&&"gutterBottom",a&&"noWrap",o&&"paragraph"]};return(0,l.A)(s,h,i)})($);return(0,g.jsx)(v,(0,o.A)({as:S,ref:r,ownerState:$,className:(0,i.A)(z.root,m)},_))})}}]);
//# sourceMappingURL=advanced-search.2d1a8d50.chunk.js.map