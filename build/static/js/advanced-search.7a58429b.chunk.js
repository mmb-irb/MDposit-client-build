"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[510],{10939:(e,t,r)=>{r.d(t,{A:()=>m});var o=r(89379),a=r(80045),n=r(65043),s=r(12110),l=r(17604);const i="style_container__M9GCG";var c=r(70579);const d=["overrideComponent"],p={opacity:[0,1]};(0,l.A)()||(p.transform=["translateY(50px)","translateY(0)"]);const u={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},m=(0,n.forwardRef)((e,t)=>{let{overrideComponent:r}=e,l=(0,a.A)(e,d);const m=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{const e=m.current&&m.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex(t=>e===t),r=e.animate(p,(0,o.A)((0,o.A)({},u),{},{delay:150*t}));return()=>r.cancel()},[]);const f=r?"section":s.A;return(0,c.jsx)("div",{ref:m,className:i,children:(0,c.jsx)(f,(0,o.A)((0,o.A)({component:"section"},l),{},{ref:t}))})})},12110:(e,t,r)=>{r.d(t,{A:()=>v});var o=r(58168),a=r(98587),n=r(65043),s=r(58387),l=r(98610),i=r(34535),c=r(98206),d=r(63336),p=r(92532),u=r(72372);function m(e){return(0,u.Ay)("MuiCard",e)}(0,p.A)("MuiCard",["root"]);var f=r(70579);const h=["className","raised"],g=(0,i.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),v=n.forwardRef(function(e,t){const r=(0,c.b)({props:e,name:"MuiCard"}),{className:n,raised:i=!1}=r,d=(0,a.A)(r,h),p=(0,o.A)({},r,{raised:i}),u=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},m,t)})(p);return(0,f.jsx)(g,(0,o.A)({className:(0,s.A)(u.root,n),elevation:i?8:void 0,ref:t,ownerState:p},d))})},17392:(e,t,r)=>{r.d(t,{A:()=>y});var o=r(98587),a=r(58168),n=r(65043),s=r(58387),l=r(98610),i=r(60061),c=r(34535),d=r(98206),p=r(66236),u=r(6803),m=r(92532),f=r(72372);function h(e){return(0,f.Ay)("MuiIconButton",e)}const g=(0,m.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var v=r(70579);const x=["edge","children","className","color","disabled","disableFocusRipple","size"],A=(0,c.Ay)(p.A,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"default"!==r.color&&t["color".concat((0,u.A)(r.color))],r.edge&&t["edge".concat((0,u.A)(r.edge))],t["size".concat((0,u.A)(r.size))]]}})(e=>{let{theme:t,ownerState:r}=e;return(0,a.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,i.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===r.edge&&{marginLeft:"small"===r.size?-3:-12},"end"===r.edge&&{marginRight:"small"===r.size?-3:-12})},e=>{let{theme:t,ownerState:r}=e;var o;const n=null==(o=(t.vars||t).palette)?void 0:o[r.color];return(0,a.A)({},"inherit"===r.color&&{color:"inherit"},"inherit"!==r.color&&"default"!==r.color&&(0,a.A)({color:null==n?void 0:n.main},!r.disableRipple&&{"&:hover":(0,a.A)({},n&&{backgroundColor:t.vars?"rgba(".concat(n.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,i.X4)(n.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===r.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===r.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{["&.".concat(g.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),y=n.forwardRef(function(e,t){const r=(0,d.b)({props:e,name:"MuiIconButton"}),{edge:n=!1,children:i,className:c,color:p="default",disabled:m=!1,disableFocusRipple:f=!1,size:g="medium"}=r,y=(0,o.A)(r,x),b=(0,a.A)({},r,{edge:n,color:p,disabled:m,disableFocusRipple:f,size:g}),j=(e=>{const{classes:t,disabled:r,color:o,edge:a,size:n}=e,s={root:["root",r&&"disabled","default"!==o&&"color".concat((0,u.A)(o)),a&&"edge".concat((0,u.A)(a)),"size".concat((0,u.A)(n))]};return(0,l.A)(s,h,t)})(b);return(0,v.jsx)(A,(0,a.A)({className:(0,s.A)(j.root,c),centerRipple:!0,focusRipple:!f,disabled:m,ref:t},y,{ownerState:b,children:i}))})},26494:(e,t,r)=>{r.d(t,{A:()=>g});var o=r(58168),a=r(98587),n=r(65043),s=r(58387),l=r(98610),i=r(34535),c=r(98206),d=r(92532),p=r(72372);function u(e){return(0,p.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var m=r(70579);const f=["className","component"],h=(0,i.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),g=n.forwardRef(function(e,t){const r=(0,c.b)({props:e,name:"MuiCardContent"}),{className:n,component:i="div"}=r,d=(0,a.A)(r,f),p=(0,o.A)({},r,{component:i}),g=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},u,t)})(p);return(0,m.jsx)(h,(0,o.A)({as:i,className:(0,s.A)(g.root,n),ownerState:p,ref:t},d))})},28316:(e,t,r)=>{r.r(t),r.d(t,{default:()=>L});var o=r(65043),a=r(73216),n=r(10939),s=r(53193),l=r(2260),i=r(32143),c=r(81673),d=r(90469),p=r(83558),u=r(51962),m=r(67784),f=r(17392),h=r(26494),g=r(11906),v=r(12639),x=r(92127);const A="style_tall__uLxlS",y="style_margined__hiFK4",b="style_spaced__jKimP",j="style_trash__JtAQQ",C="style_grey__f3+Yh",_="style_unpadded__QkJ-Y",N="style_outlined__b4B+l",R="style_right__ci4FV",z="style_search__JEl1-";var k=r(17604),S=r(95747),M=r(70579);const w=S._r.queryFields,$=Object.values(w).reduce((e,t)=>e.concat(t),[]),O={opacity:[0,1]};(0,k.A)()||(O.transform=["translateX(2.5%)","translateX(0)"]);const I=[{name:"AND",operator:"$and",noperator:"$not"},{name:"OR",operator:"$or",noperator:"$nor"}],T=(e,t)=>({[e]:t,$options:"i"}),q=(e,t)=>({[e]:+t}),E=(e,t)=>"true"===e,B={string:[{name:"contains",operator:"$regex",formatter:(e,t)=>{const r=t.replace(/[-[/\]{}()*+?.,\\^$|#\s]/g,"\\$&");return T(e,r)}},{name:"equals",operator:"$eq",formatter:(e,t)=>({[e]:t})},{name:"regular expression",operator:"$regex",formatter:T}],float:[{name:"greater than",operator:"$gt",formatter:q},{name:"lower than",operator:"$lt",formatter:q}],int:[{name:"equals",operator:"$eq",formatter:q},{name:"greater than",operator:"$gt",formatter:q},{name:"lower than",operator:"$lt",formatter:q}],boolean:[{name:"true",operator:"true",formatter:E},{name:"false",operator:"false",formatter:E}]},G={logic:"AND",is:!0,fields:[{field:"",is:!0,comparator:"",value:""},{field:"",is:!0,comparator:"",value:""}]},L=()=>{const e=(0,o.useRef)(G),[t,r]=(0,o.useState)(!1),k=(0,a.Zp)(),[,S]=(0,o.useState)(!0),O=()=>{S(e=>!e)};let T=!1;const q=e=>{let{object:t,label:r,options:o,handleChange:a,error:n,helpText:d}=e;return(0,M.jsxs)(s.A,{className:b,children:[(0,M.jsxs)(l.A,{id:"select",title:"Select the desired "+r,value:t[r],onChange:a,displayEmpty:!0,error:n,children:[(0,M.jsx)(i.A,{disabled:!0,value:"",children:(0,M.jsx)("em",{className:C,children:r})},"placeholder"),o.map(e=>(0,M.jsx)(i.A,{value:e,children:e},e))]}),d&&(0,M.jsx)(c.A,{children:d})]})},E=e=>{let{object:t,label:r,options:o,handleChange:a}=e;return(0,M.jsx)(s.A,{className:b,children:(0,M.jsxs)(l.A,{id:"select",title:"Select the desired "+r,value:t[r],onChange:a,displayEmpty:!0,children:[(0,M.jsx)(i.A,{disabled:!0,value:"",children:(0,M.jsx)("em",{className:C,children:r})},"placeholder"),o.map(e=>{const[t,r]=Object.entries(e)[0];return[(0,M.jsx)(d.A,{color:"primary",children:t}),...r.map(e=>(0,M.jsx)(i.A,{value:e,children:e},e))]})]})})},L={string:{inputMode:"text"},int:{inputMode:"numeric",pattern:"[0-9+-]*",helpText:"integer numbers accepted only"},float:{inputMode:"numeric",pattern:"[0-9.,+-]*",helpText:"numbers accepted only"}},F=e=>{let{object:r,parent:o,index:a}=e;const n=I.map(e=>e.name),s=Object.entries(w).map(e=>{let[t,r]=e;return{[t]:r.map(e=>e.name)}}),l=[{"Logic operators":n},...s];if(void 0!==r.field){const e=$.find(e=>e.name===r.field),s=e&&B[e.type].map(e=>e.name),i=e&&"boolean"===e.type,c=e&&!r.comparator,d=c&&"please select a comparator",h=e&&!i&&!r.value,g=e&&!i&&L[e.type],A=e&&!i&&g.pattern&&r.value.match(g.pattern),b=A&&A[0]!==r.value,C=h?"please specify a value":b&&g.helpText;(c||h||b)&&(T=!0);const _=e=>{const t=e.target.value;r.value=t,O()};return(0,M.jsxs)("div",{className:y,children:[(0,M.jsx)(E,{object:r,label:"field",options:l,handleChange:e=>{const t=e.target.value;if(n.includes(t))return delete r.field,delete r.comparator,delete r.value,r.logic=t,r.is=!0,r.fields=[],void O();r.field=t;const o=$.find(e=>e.name===t);-1===(o&&B[o.type].map(e=>e.name)).indexOf(r.comparator)&&(r.comparator=""),O()}}),e&&!i&&(0,M.jsx)(p.A,{onChange:()=>{r.is=!r.is,O()},control:(0,M.jsx)(u.A,{checked:!r.is,icon:(0,M.jsx)(x.g,{icon:v.GRI,size:"xs",style:{visibility:"hidden"}}),checkedIcon:(0,M.jsx)(x.g,{icon:v.GRI,size:"xs"}),style:{color:"black"}}),label:"NOT",style:r.is?{color:"lightgrey"}:{color:"black"},className:N}),e&&(0,M.jsx)(q,{object:r,label:"comparator",options:s,handleChange:e=>{const t=e.target.value;r.comparator=t,O()},helpText:t&&d,error:t&&c}),e&&!i&&(0,M.jsx)(m.A,{title:"Type here the value for the specified field",defaultValue:r.value,onKeyPress:e=>{"Enter"===e.key&&_(e)},onBlur:_,placeholder:"e.g. "+e.example,inputProps:{inputMode:g.inputMode},helperText:t&&C,error:t&&(h||b)}),(0,M.jsx)(f.A,{variant:"contained",onClick:()=>{o.splice(a,1),O()},className:j,size:"large",children:(0,M.jsx)(x.g,{icon:v.yLS,size:"xs"})})]})}if(void 0!==r.fields)return(0,M.jsxs)("div",{className:y,children:[(0,M.jsx)(E,{object:r,label:"logic",options:l,handleChange:e=>{const t=e.target.value;if(-1===n.indexOf(t))return delete r.fields,delete r.logic,r.field=t,r.is=!0,r.comparator="",r.value="",void O();r.logic=t,O()}}),(0,M.jsx)(p.A,{onChange:()=>{r.is=!r.is,O()},control:(0,M.jsx)(u.A,{checked:!r.is,icon:(0,M.jsx)(x.g,{icon:v.GRI,size:"xs",style:{visibility:"hidden"}}),checkedIcon:(0,M.jsx)(x.g,{icon:v.GRI,size:"xs"}),style:{color:"black"}}),label:"NOT",style:r.is?{color:"lightgrey"}:{color:"black"},className:N}),(0,M.jsx)(f.A,{variant:"contained",onClick:()=>{r.fields.unshift({field:"",is:!0,comparator:"",value:""}),O()},className:_,size:"large",children:(0,M.jsx)(x.g,{icon:v.OQW})}),o&&(0,M.jsx)(f.A,{variant:"contained",onClick:()=>{o.splice(a,1),O()},className:_,size:"large",children:(0,M.jsx)(x.g,{icon:v.yLS,size:"xs"})}),r.fields.map((e,t)=>(0,M.jsx)(F,{object:e,parent:r.fields,index:t},t))]})},J=e=>{if(void 0!==e.field){const t=$.find(t=>t.name===e.field),r=t.path,o=(t&&B[t.type]).find(t=>t.name===e.comparator),a=o.operator,n=o.formatter;return e.is?{[r]:n(a,e.value)}:{[r]:{$not:n(a,e.value)}}}if(void 0!==e.logic){const t=e.logic,r=I.find(e=>e.name===t)[e.is?"operator":"noperator"],o=e.fields.filter(e=>e.field||e.logic);if(0===o.length)return;if(1===o.length){const t=o[0];return t.is=((e,t)=>{if(e){if(t)return!0;if(!t)return!1}else{if(t)return!1;if(!t)return!0}})(t.is,e.is),J(t)}return{[r]:o.map(e=>J(e))}}};return(0,M.jsx)(n.A,{className:A,children:(0,M.jsxs)(h.A,{children:["Use the ",(0,M.jsx)("b",{children:"advanced search"})," query builder to create complex database queries.",(0,M.jsx)("br",{}),(0,M.jsx)("hr",{style:{color:"lightGrey"}}),(0,M.jsx)(F,{object:e.current}),(0,M.jsx)("div",{className:R,children:(0,M.jsxs)(g.A,{variant:"contained",onClick:()=>{if(T)return void r(!0);const t=e.current,o=J(t),a=JSON.stringify(o);a&&k("/browse?query="+a)},className:z,children:[(0,M.jsx)(x.g,{icon:v.MjD}),"\xa0",(0,M.jsx)("span",{children:"Search"})]})})]})})}}}]);
//# sourceMappingURL=advanced-search.7a58429b.chunk.js.map