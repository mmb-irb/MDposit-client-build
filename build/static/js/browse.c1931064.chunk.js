"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[421],{10939:(e,s,t)=>{t.d(s,{A:()=>d});var r=t(65043),a=t(12110),i=t(17604);const l="style_container__M9GCG";var n=t(70579);const c={opacity:[0,1]};(0,i.A)()||(c.transform=["translateY(50px)","translateY(0)"]);const o={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},d=(0,r.forwardRef)(((e,s)=>{let{overrideComponent:t,...i}=e;const d=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{const e=d.current&&d.current.firstElementChild;if(!e||!e.animate)return;const s=Array.from(document.querySelectorAll("main section")).findIndex((s=>e===s)),t=e.animate(c,{...o,delay:150*s});return()=>t.cancel()}),[]);const h=t?"section":a.A;return(0,n.jsx)("div",{ref:d,className:l,children:(0,n.jsx)(h,{component:"section",...i,ref:s})})}))},11567:(e,s,t)=>{t.r(s),t.d(s,{default:()=>je});var r=t(65043),a=t(35475),i=t(73216),l=t(22908),n=t(64600),c=t.n(n),o=t(28076),d=t(10039),h=t(43845),u=t(26494),m=t(53193),p=t(79190),f=t(2260),x=t(32143),_=t(85865),j=t(71806),y=t(84882),A=t(11906),g=t(73460),N=t(207),v=t(67803),b=t(83150),C=t(10939),P=t(10312),S=t(70008);const $="style_highlightable__biB77";var w=t(70579);const k=/\s+/,E=(0,P.A)((e=>new RegExp(`(${e.toString().trim().split(k).map(S.A).join("|")})`,"i"))),D=r.memo((e=>{let{highlight:s,children:t}=e;if(Array.isArray(t))return t.map(((e,t)=>(0,w.jsx)(D,{highlight:s,children:e},t)));if(!s||!t||"string"!==typeof t&&!Number.isFinite(t))return t||null;const a=E(s);return(0,w.jsx)("span",{className:$,children:t.toString().split(a).filter(Boolean).map(((e,s)=>r.createElement(a.test(e)?"mark":"span",{key:s},e)))})})),M=D;var q=t(17545),z=t(58338),I=t(95747);const O="style_table-body__UaSDI",F="style_invalid-results__xfJgr",R="style_table-head__tmuYe",B="style_not-published__KTvNz",J="style_error-row__LE6tS",L="style_center__5C2Uk",Q="style_sort__d7lWZ",U="style_no-results-card__hJ248",X="style_minheight__Qpr-9",Y="style_no-results-text__PtOSj",T="style_analysis__M4Th0",Z="style_small__QxCJm",G="style_horizontal__f42Xi",V="style_selector__XVrF1",W="style_fillheight__1UWvV";var K=t(17604),H=t(66062),ee=t(88058),se=t(51787),te=t(67784),re=t(92127),ae=t(12639),ie=t(1198);const le="style_searchbar__L3fSk",ne="style_searchbar-icon__o1zED",ce="style_searchbar-letters__NY7xQ",oe={"aria-label":"Search projects by text",startAdornment:(0,w.jsx)(se.A,{position:"start",children:(0,w.jsx)(re.g,{icon:ae.MjD,size:"2x",className:ne})}),classes:{input:ce}},de=(0,ee.A)(((e,s,t)=>{const{search:r,...a}=(0,l.parse)(e.search,{ignoreQueryPrefix:!0}),i=Boolean(r)===Boolean(t);t&&(a.search=t),r!==t&&(a.page=void 0,s({...e,search:(0,l.stringify)(a),replace:i}))}),500),he=()=>{const e=(0,i.zy)(),s=(0,i.Zp)(),[t,a]=(0,r.useState)((0,l.parse)(e.search,{ignoreQueryPrefix:!0}).search);(0,r.useEffect)((()=>de.cancel),[]);const n=(0,r.useCallback)((t=>{let{target:{value:r}}=t;a(r),de(e,s,r)}),[e,s]),c=ie.m.find((e=>"browser"===e.id));return(0,w.jsx)(te.A,{title:c.text,value:t||"",onChange:n,className:le,InputProps:oe,placeholder:I._r.searchExample})},ue="All results",me=[5,10,25,50],pe={title:"Previous page"},fe={title:"Next page"},xe={opacity:[0,1]};(0,K.A)()||(xe.transform=["translateX(2.5%)","translateX(0)"]);const _e=e=>{let{projectData:s,highlight:t,index:i,previewUrl:l}=e;const n=new H.M(s),{identifier:u,accession:m,published:p,pdbInfo:f,metadata:x,mdCount:_,directions:j}=n,y=(0,r.useRef)(null);return(0,r.useLayoutEffect)((()=>{if(!y.current||!y.current.animate)return;const e=y.current.animate(xe,{fill:"both",easing:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",duration:750,delay:100+75*i});return()=>e.cancel()}),[i]),n.error?(0,w.jsxs)(o.A,{ref:y,className:J,children:[(0,w.jsxs)(d.A,{className:L,children:[" ",n.accession," "]}),(0,w.jsxs)(d.A,{className:L,children:[" ",n.error," "]}),(0,w.jsx)(d.A,{className:L,children:" - "}),(0,w.jsx)(d.A,{className:L,children:" - "})]}):(0,w.jsxs)(o.A,{ref:y,className:c()({[B]:!p}),children:[(0,w.jsxs)(d.A,{className:L,children:[(0,w.jsx)(a.N_,{to:{pathname:`/id/${m||u}/overview`,state:{projectData:n}},children:(0,w.jsxs)(M,{highlight:t,children:[m||u,!p&&(0,w.jsx)("div",{children:"(not published)"})]})}),_>1&&(0,w.jsx)("div",{className:Z,children:`${_} MDs`})]}),(0,w.jsx)(d.A,{className:L,children:(0,w.jsx)(M,{highlight:t,children:x&&x.NAME?x.NAME:f&&f.compound?f.compound:"Not available"})}),(0,w.jsx)(d.A,{className:L,children:(0,w.jsx)(b.A,{src:l,width:"110",height:"110",loading:"lazy",alt:"Project preview"})}),(0,w.jsx)(d.A,{className:L,children:Object.entries(j).filter((e=>{let[s,t]=e;return t})).map((e=>{let[s,t]=e;return(0,w.jsx)(h.A,{clickable:!0,className:T,component:a.N_,to:{pathname:`/id/${m||u}/${s}`,state:{projectData:n}},label:I.h7.get(s)||s,variant:"outlined"},s)}))})]})},je=()=>{const e=(0,i.zy)(),s=(0,i.Zp)(),t=decodeURIComponent(e.search),a=(0,l.parse)(t,{ignoreQueryPrefix:!0,decoder:e=>e}),[n,h]=(0,r.useState)(a.option||ue),[b,P]=(0,r.useState)({field:"added",direction:-1}),[S,$]=(0,r.useState)(a.sortField&&a.sortDirection?`${a.sortField}-${a.sortDirection}`:"added-desc"),k=[{value:"accession-desc",label:"Accession \u25bc",field:"accession",direction:"desc"},{value:"accession-asc",label:"Accession \u25b2",field:"accession",direction:"asc"},{value:"name-desc",label:"Name \u25bc",field:"name",direction:"desc"},{value:"name-asc",label:"Name \u25b2",field:"name",direction:"asc"},{value:"added-desc",label:"Added Date \u25bc",field:"added",direction:"desc"},{value:"added-asc",label:"Added Date \u25b2",field:"added",direction:"asc"}],E=(0,r.useCallback)((t=>{let{target:{value:r}}=t;s({...e,search:(0,l.stringify)({search:a.search,query:a.query,option:r&&r!==ue?r:void 0})}),h(r)}),[e,a,h]),D=(0,r.useCallback)((e=>{let{target:{value:s}}=e;$(s);const t=k.find((e=>e.value===s));t&&M(t.field,t.direction)}),[]),M=(t,r)=>{const i="asc"===r?1:-1;P({field:t,direction:i});let n=t;"name"===t?n="metadata.NAME":"added"===t&&(n="_id"),s({...e,search:(0,l.stringify)({...a,sort:JSON.stringify({[n]:i}),sortField:t,sortDirection:r})})},B=e=>{const s=b.field===e&&1===b.direction?"desc":"asc";$(`${e}-${s}`),M(e,s)},J=I._r.optionsField,T=n&&n!==ue&&`${J}+*${n}`,Z=(0,l.stringify)({search:a.search,query:a.query,ref:a.ref,page:a.page||1,limit:a.limit||10,filter:T,sort:JSON.stringify({["name"===b.field?"metadata.NAME":"added"===b.field?"_id":b.field]:b.direction})});(0,r.useEffect)((()=>{window.scrollTo(0,0)}),[a.page]),(0,r.useEffect)((()=>{if(a.sort)try{const e=JSON.parse(a.sort),s=Object.keys(e)[0],t=e[s];let r=s;"metadata.NAME"===s?r="name":"_id"===s&&(r="added");const i=1===t?"asc":"desc";P({field:r,direction:t}),$(`${a.sortField||r}-${a.sortDirection||i}`)}catch(e){console.error("Invalid sort parameter",e)}}),[a.sort]);const K=(0,r.useRef)(null),H=J?`${I.nP}/options?projection=${J}`:null,{payload:ee,error:se}=(0,z.A)(H),te=(0,r.useMemo)((()=>{let e=[];return ee&&(e=Object.keys(ee[J]).filter((e=>"null"!==e))),[ue,...e]}),[ee]),re=`${I.nP}?${Z}`,{loading:ae,payload:ie,error:le}=(0,z.A)(re);if(ae&&!K.current)return(0,w.jsx)(q.A,{});if(le)return le.toString();if(se)return se.toString();let ne,ce=0;ie?(ne=ie.projects,ce=ie.filteredCount,K.current=ie):K.current?(ne=K.current.projects,ce=K.current.filteredCount):ne=[];const oe=ne.map((e=>`${I.nP}/${e.identifier}/files/${I.pP}`));return(0,w.jsx)(C.A,{children:(0,w.jsxs)(u.A,{className:X,children:[(0,w.jsxs)("div",{className:G,children:[(0,w.jsx)(he,{}),J&&(0,w.jsxs)(m.A,{className:V,children:[(0,w.jsx)(p.A,{children:I._r.optionsLabel}),(0,w.jsx)(f.A,{label:I._r.optionsLabel,value:n!==ue?n:"",onChange:E,className:W,children:te.map(((e,s)=>(0,w.jsx)(x.A,{value:e,children:I._r.optionsNiceNames[e]||e},s)))})]}),(0,w.jsxs)(m.A,{className:V,children:[(0,w.jsx)(p.A,{children:"Sort by"}),(0,w.jsx)(f.A,{label:"Sort by",value:S,onChange:D,className:W,children:k.map((e=>(0,w.jsx)(x.A,{value:e.value,children:e.label},e.value)))})]})]}),ae||ie?[]:(0,w.jsx)(C.A,{className:U,children:(0,w.jsx)(_.A,{variant:"h5",className:Y,children:"No results were found"})}),(0,w.jsxs)(j.A,{children:[(0,w.jsx)(y.A,{className:R,children:(0,w.jsxs)(o.A,{children:[(0,w.jsxs)(d.A,{className:L,children:["accession",(0,w.jsx)(A.A,{className:Q,onClick:()=>B("accession"),children:"accession"===b.field?1===b.direction?"\u25b2":"\u25bc":"\u22ee"})]}),(0,w.jsxs)(d.A,{className:L,children:["name",(0,w.jsx)(A.A,{className:Q,onClick:()=>B("name"),children:"name"===b.field?1===b.direction?"\u25b2":"\u25bc":"\u22ee"})]}),(0,w.jsx)(d.A,{className:L,children:"preview"}),(0,w.jsx)(d.A,{className:L,children:"analyses"})]})}),(0,w.jsx)(g.A,{className:ie?c()(O):c()(O,F),children:ne.map(((e,s)=>(0,w.jsx)(_e,{projectData:e,highlight:a.search,index:s,previewUrl:oe[s]},s)))}),(0,w.jsx)(N.A,{children:(0,w.jsx)(o.A,{children:(0,w.jsx)(v.A,{rowsPerPageOptions:me,colSpan:6,count:ce,rowsPerPage:+a.limit||10,page:(+a.page||1)-1,onPageChange:(t,r)=>{s({...e,search:(0,l.stringify)({search:a.search,query:a.query,option:a.option,page:r+1===1?void 0:r+1,limit:a.limit&&10!==+a.limit?+a.limit:void 0})})},onRowsPerPageChange:t=>{let{target:{value:r}}=t;s({...e,search:(0,l.stringify)({search:a.search,query:a.query,option:a.option,limit:10===+r?void 0:r})})},backIconButtonProps:pe,nextIconButtonProps:fe})})})]})]})})}}}]);
//# sourceMappingURL=browse.c1931064.chunk.js.map