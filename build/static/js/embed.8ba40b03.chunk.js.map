{"version":3,"file":"static/js/embed.8ba40b03.chunk.js","mappings":"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","sources":["webpack://mdposit/./src/components/animated-card/style.module.css?d4d9","components/animated-card/index.js","../node_modules/@mui/material/Card/cardClasses.js","../node_modules/@mui/material/Card/Card.js","contexts/index.js","webpack://mdposit/./src/pages/embed/style.module.css?241c","pages/embed/index.js","webpack://mdposit/./src/components/info/style.module.css?e5b4","components/info/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"style_container__M9GCG\"};","import React, { useLayoutEffect, useRef, forwardRef } from 'react';\nimport { Card } from '@mui/material';\n\nimport reducedMotion from '../../utils/reduced-motion';\n\nimport style from './style.module.css';\n\nconst KEYFRAMES = { opacity: [0, 1] };\n\nif (!reducedMotion()) {\n  KEYFRAMES.transform = ['translateY(50px)', 'translateY(0)'];\n}\n\nconst ANIMATION_OPTIONS = {\n  fill: 'both',\n  easing: 'cubic-bezier(0, .99, .56, 1.1)',\n  duration: 500,\n};\n\n// Make the card appear and slide softly from down to up when the page is loaded\nconst AnimatedCard = forwardRef(({ overrideComponent, ...props }, ref) => {\n  const containerRef = useRef(null);\n\n  useLayoutEffect(() => {\n    const node = containerRef.current && containerRef.current.firstElementChild;\n    if (!(node && node.animate)) return;\n\n    const index = Array.from(\n      document.querySelectorAll('main section'),\n    ).findIndex(section => node === section);\n\n    const animation = node.animate(KEYFRAMES, {\n      ...ANIMATION_OPTIONS,\n      delay: index * 150,\n    });\n\n    return () => animation.cancel();\n  }, []);\n\n  const Component = overrideComponent ? 'section' : Card;\n\n  return (\n    <div ref={containerRef} className={style.container}>\n      <Component component=\"section\" {...props} ref={ref} />\n    </div>\n  );\n});\n\nexport default AnimatedCard;\n","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardUtilityClass(slot) {\n  return generateUtilityClass('MuiCard', slot);\n}\nconst cardClasses = generateUtilityClasses('MuiCard', ['root']);\nexport default cardClasses;","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"raised\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport chainPropTypes from '@mui/utils/chainPropTypes';\nimport composeClasses from '@mui/utils/composeClasses';\nimport styled from '../styles/styled';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport Paper from '../Paper';\nimport { getCardUtilityClass } from './cardClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getCardUtilityClass, classes);\n};\nconst CardRoot = styled(Paper, {\n  name: 'MuiCard',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(() => {\n  return {\n    overflow: 'hidden'\n  };\n});\nconst Card = /*#__PURE__*/React.forwardRef(function Card(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCard'\n  });\n  const {\n      className,\n      raised = false\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    raised\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardRoot, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : undefined,\n    ref: ref,\n    ownerState: ownerState\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Card.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the card will use raised styling.\n   * @default false\n   */\n  raised: chainPropTypes(PropTypes.bool, props => {\n    if (props.raised && props.variant === 'outlined') {\n      return new Error('MUI: Combining `raised={true}` with `variant=\"outlined\"` has no effect.');\n    }\n    return null;\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default Card;","import { createContext } from 'react';\n\n// These 3 context are used by React hooks\n// They are accessed from different scripts (e.g. the accession page)\nexport const ProjectCtx = createContext(null);\n","// extracted by mini-css-extract-plugin\nexport default {\"ngl-card\":\"style_ngl-card__dSFfi\",\"container\":\"style_container__sVFS+\"};","import React, { useState } from 'react';\n\nimport useAPI from '../../hooks/use-api';\n\nimport ErrorBoundary from '../../components/error-boundary';\n\nimport { ProjectCtx } from '../../contexts';\n\nimport Card from '../../components/animated-card';\nimport ViewerWithControls from '../../components/viewer-with-controls';\nimport Loading from '../../components/loading';\n\nimport style from './style.module.css';\n\nimport { BASE_PATH_PROJECTS, MAIN_STRUCTURE_FILENAME } from '../../utils/constants';\n\n// Load the project class\nimport { Project } from '../../utils/project-manager';\nimport { useParams } from 'react-router-dom';\n\nconst Embed = () => {\n  const { accession: accessionAndMdNumber } = useParams();\n  const [project, setProject] = useState(null);\n\n  // Get project data from the API if the current context data is wrong. 'payload' contains the main data.\n  const projectRequest = useAPI(`${BASE_PATH_PROJECTS}/${accessionAndMdNumber}/`);\n\n  // While loading\n  if (projectRequest.loading) return <Loading />;\n  if (projectRequest.error) return projectRequest.error.toString();\n  // This should never happen\n  if (!projectRequest.payload) return null;\n\n  // Set the final project data to be loaded in context\n  const projectData = new Project(projectRequest.payload);\n  if (!project) {\n    setProject(projectData);\n    return;\n  }\n\n  // Make some modifications to the project data once loaded\n  // If accession is missing then set the identifier as the accession\n  if (!project.accession) project.accession = project.identifier;\n  // Order chain indices by alphabetic number when we have new project data\n  if (project.chains) project.chains.sort();\n\n  return (\n    <ErrorBoundary>\n      <ProjectCtx.Provider value={project}>\n        <Card className={style['ngl-card']}>\n          <ViewerWithControls className={style.container} />\n        </Card>\n      </ProjectCtx.Provider>\n    </ErrorBoundary>\n  );\n};\n\nexport default Embed;\n","// extracted by mini-css-extract-plugin\nexport default {\"default\":\"style_default__DjLzc\"};","import React, { useState, forwardRef } from 'react';\n\nimport { IconButton, Tooltip, ClickAwayListener } from '@mui/material';\nimport { tooltipClasses } from '@mui/material/Tooltip';\nimport { styled } from '@mui/material/styles';\n//import { makeStyles } from '@mui/styles';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { faInfoCircle } from '@fortawesome/free-solid-svg-icons';\n\nimport style from './style.module.css';\n\n// WARNING: Some styling parameters has no effect through the classic css way\n// They must be declared this way\n// The forwardRef and passing the ref to the tooltip is necessary for this to work since React 18 / Material UI v5\n// Here is explained why: https://mui.com/material-ui/guides/composition/#caveat-with-refs\nconst CustomTooltip = styled(\n  forwardRef(({ className, ...props }, ref) => {\n    return <Tooltip {...props} classes={{ popper: className }} ref={ref} />;\n  }),\n)(({ theme }) => ({\n  [`& .${tooltipClasses.tooltip}`]: {\n    fontSize: '1em',\n    maxWidth: '100%',\n    margin: '0',\n  },\n}));\n\nconst Info = ({\n  // Message to be displayed when the mouse is over the info icon\n  tooltip,\n  // Set a custom styling\n  className,\n  // Set a custom styling for the tooltip\n  sx\n}) => {\n  const [open, setOpen] = useState(false);\n\n  const toogleOpen = () => setOpen(previous => !previous);\n  const closeIt = () => setOpen(false);\n\n  // Render\n  return (\n    <ClickAwayListener onClickAway={closeIt}>\n      <CustomTooltip\n        title={tooltip}\n        disableFocusListener\n        disableHoverListener\n        disableTouchListener\n        open={open}\n      >\n        <IconButton\n          className={className || style.default}\n          color={open ? 'info' : 'primary'}\n          onClick={toogleOpen}\n          sx={sx}\n        >\n          <FontAwesomeIcon icon={faInfoCircle} size={'lg'} />\n        </IconButton>\n      </CustomTooltip>\n    </ClickAwayListener>\n  );\n};\n\nexport default Info;\n"],"names":["KEYFRAMES","opacity","reducedMotion","transform","ANIMATION_OPTIONS","fill","easing","duration","forwardRef","_ref","ref","overrideComponent","props","_objectWithoutProperties","_excluded","containerRef","useRef","useLayoutEffect","node","current","firstElementChild","animate","index","Array","from","document","querySelectorAll","findIndex","section","animation","_objectSpread","delay","cancel","Component","Card","_jsx","className","style","children","component","getCardUtilityClass","slot","generateUtilityClass","generateUtilityClasses","CardRoot","styled","Paper","name","overridesResolver","styles","root","overflow","React","inProps","useDefaultProps","raised","other","_objectWithoutPropertiesLoose","ownerState","_extends","classes","composeClasses","useUtilityClasses","clsx","elevation","undefined","ProjectCtx","createContext","Embed","accession","accessionAndMdNumber","useParams","project","setProject","useState","projectRequest","useAPI","concat","BASE_PATH_PROJECTS","loading","Loading","error","toString","payload","projectData","Project","identifier","chains","sort","ErrorBoundary","Provider","value","ViewerWithControls","CustomTooltip","Tooltip","popper","_ref2","theme","tooltipClasses","tooltip","fontSize","maxWidth","margin","_ref3","sx","open","setOpen","ClickAwayListener","onClickAway","closeIt","title","disableFocusListener","disableHoverListener","disableTouchListener","IconButton","color","onClick","toogleOpen","previous","FontAwesomeIcon","icon","faInfoCircle","size"],"ignoreList":[],"sourceRoot":""}