"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[1483],{53099:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var s=r(65043),l=r(40830),a=r(32577);const n="style_default__5Q58A",i="style_flexible__YWXe-",c="style_graph-container__X1--T";var o=r(583),d=r(70579);const u={nodes:[],links:[]},f="black",h="blue",p="green",v=2,k=3,y=4,g=(0,s.forwardRef)(((e,t)=>{let{data:r,images:g,selectedNodeValue:m,onSelectNode:w,className:x}=e;r||(r=u);const A=(0,s.useRef)(null),N=(0,s.useRef)(l.A),_=(0,s.useRef)(l.A),R=(0,s.useRef)(l.A),S=(0,s.useRef)(l.A),b=(0,s.useRef)(l.A);return(0,s.useEffect)((()=>{const e=(0,a.Ltv)(A.current).append("svg"),t=e.append("svg:defs"),r=e.append("g"),s=e.append("g"),l=(0,a.tXi)();return N.current=e=>{let{data:n}=e,{nodes:i,links:c}=n,d=r.selectAll("line");c=c.map((e=>Object.assign({},e)));const u=d.data(c);u.exit().remove(),u.enter().append("line").style("stroke","#aaa"),d=r.selectAll("line"),d.attr("stroke-width",(e=>e.width));let x=s.selectAll("circle");const A=new Map(x.data().map((e=>[e.id,e])));i=i.map((e=>Object.assign(A.get(e.id)||{},e)));const N=x.data(i);N.exit().remove(),N.enter().append("circle").style("fill","#fff"),x=s.selectAll("circle"),x.attr("r",(e=>e.radius)).style("stroke",(e=>m===e.value?p:f)).style("stroke-width",(e=>m===e.value?y:v)).style("cursor",w&&"pointer").on("mouseover",(function(){(0,a.Ltv)(this).style("stroke",h).style("stroke-width",k)})).on("mouseout",(function(){(0,a.Ltv)(this).style("stroke",(e=>m===e.value?p:f)).style("stroke-width",(e=>m===e.value?y:v))})).on("click",w).append("svg:title").text((e=>e.text));let R=t.selectAll("pattern");const S=R.data(i);S.exit().remove(),S.enter().append("pattern").attr("patternUnits","userSpaceOnUse"),R=t.selectAll("pattern"),R.attr("id",(e=>"img"+e.id)).attr("width",(e=>2*e.radius)).attr("height",(e=>2*e.radius)).selectAll("image").remove();const b=R.append("image").attr("xlink:href",((e,t)=>g&&g[t]||o)).attr("width",(e=>2*e.radius)).attr("height",(e=>2*e.radius));_.current=e=>{let{images:t}=e;b.attr("xlink:href",((e,r)=>t&&t[r]||o))},x.style("fill",(e=>"url(#img".concat(e.id,")"))),l.nodes(i).force("link",(0,a.kJC)().strength((e=>.01*e.width)).id((e=>e.id)).links(c)).force("charge",(0,a.xJS)().strength((e=>-20*e.radius))).force("collision",(0,a.eRw)().radius((e=>1.5*e.radius))).on("tick",(()=>{d.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)),x.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)),R.attr("x",(e=>e.x+e.radius)).attr("y",(e=>e.y+e.radius))})),l.alpha(1).restart()},R.current=e=>{let{selectedNodeValue:t}=e;s.selectAll("circle").style("stroke",(e=>t===e.value?p:f)).style("stroke-width",(e=>t===e.value?y:v)).on("mouseover",(function(){(0,a.Ltv)(this).style("stroke",h).style("stroke-width",k)})).on("mouseout",(function(){(0,a.Ltv)(this).style("stroke",(e=>t===e.value?p:f)).style("stroke-width",(e=>t===e.value?y:v))}))},S.current=e=>{let{onSelectNode:t}=e;s.selectAll("circle").style("cursor",t&&"pointer").on("click",t)},b.current=()=>{const{clientWidth:t,clientHeight:r}=A.current;e.attr("width",t).attr("height",r),l.force("x",(0,a.KS8)(t/2).strength(100/t)).force("y",(0,a.TSS)(r/2).strength(100/r)).alpha(1).restart()},b.current(),window.addEventListener("resize",b.current),()=>{e.remove(),l.stop(),window.removeEventListener("resize",b.current)}}),[]),(0,s.useEffect)((()=>{N.current({data:r})}),[r]),(0,s.useEffect)((()=>{_.current({images:g})}),[g]),(0,s.useEffect)((()=>{R.current({selectedNodeValue:m})}),[m]),(0,s.useEffect)((()=>{S.current({onSelectNode:w})}),[w]),(0,d.jsx)("div",{className:x||n,children:(0,d.jsx)("div",{className:i,children:(0,d.jsx)("div",{className:c,ref:A})})})}))},40830:(e,t,r)=>{r.d(t,{A:()=>s});const s=function(){}}}]);
//# sourceMappingURL=graph-msm.614f3f6e.chunk.js.map