"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[9683],{10939:(e,n,a)=>{a.d(n,{A:()=>u});var t=a(65043),r=a(12110),s=a(17604);const o="style_container__M9GCG";var l=a(70579);const i={opacity:[0,1]};(0,s.A)()||(i.transform=["translateY(50px)","translateY(0)"]);const c={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},u=(0,t.forwardRef)(((e,n)=>{let{overrideComponent:a,...s}=e;const u=(0,t.useRef)(null);(0,t.useLayoutEffect)((()=>{const e=u.current&&u.current.firstElementChild;if(!e||!e.animate)return;const n=Array.from(document.querySelectorAll("main section")).findIndex((n=>e===n)),a=e.animate(i,{...c,delay:150*n});return()=>a.cancel()}),[]);const d=a?"section":r.A;return(0,l.jsx)("div",{ref:u,className:o,children:(0,l.jsx)(d,{component:"section",...s,ref:n})})}))},34088:(e,n,a)=>{a.d(n,{A:()=>h});var t=a(65043),r=a(43126),s=a(10939);const o="style_rnd__Txifm",l="style_floating-card__HHpby";var i=a(70579);const c=(0,t.lazy)((()=>Promise.all([a.e(7784),a.e(8095),a.e(3845),a.e(2594),a.e(9070),a.e(8280),a.e(6190),a.e(1235),a.e(9117)]).then(a.bind(a,92428))));let u=0;const d=e=>{const n=e.viewerRef||(0,t.useRef)(null),[a,d]=(0,t.useState)((()=>{const{innerWidth:e,innerHeight:n,scrollY:a}=window,t=document.querySelector("main").offsetTop,r=Math.max(Math.min(e/4,n/4),150),s=1.5*r;return{width:2*r,height:s,x:0,y:n-t-s-20+a}}));return(0,i.jsx)(r.p,{position:{x:a.x,y:a.y},size:{width:a.width,height:a.height},style:{zIndex:(u+=1,u)},className:o,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize",onDragStart:()=>{d({...a})},onResizeStart:()=>{d({...a})},onDragStop:(e,n)=>{0===e.layerX&&0===e.layerY||a.x===n.x&&a.y===n.y||d({...a,x:n.x,y:n.y})},onResize:()=>n.current&&n.current.autoResize(),onResizeStop:(e,n,a,t,r)=>{d({width:a.style.width,height:a.style.height,...r})},children:(0,i.jsx)(s.A,{className:l,elevation:4,children:(0,i.jsx)(t.Suspense,{fallback:null,children:(0,i.jsx)(c,{className:l,ref:n,startsPlaying:!1,...e})})})})},h=e=>{let{newViewer:n,nailing:a=!0,onNail:r,onClose:s}=e;const[o,l]=(0,t.useState)([]),c=[...o],u=(0,t.useRef)([]);if(n){const e=()=>{let e=0;for(;e<999;){if(-1===u.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};n.id=e(),n.close=()=>{a&&l((e=>{const a=[...e],t=e.indexOf(n);return-1!==t&&a.splice(t,1),a})),s&&s(n),u.current.push(n.id)},a&&(n.nail=()=>{l((e=>[...e,n])),r&&r(n),u.current.push(n.id)}),c.push(n)}return c.map((e=>(0,i.jsx)(d,{...e},e.id)))}},41399:(e,n,a)=>{a.d(n,{A:()=>i});var t=a(65043),r=a(40854),s=a.n(r);const o={loading:!1,payload:null,error:null},l={loading:!0},i=e=>{const[n,a]=(0,t.useState)(e.map((e=>o)));return(0,t.useEffect)((()=>{const n=s().CancelToken.source();let t=!1;return a((n=>e.map((e=>{if(!e)throw new Error("Missing URL in batch API call");const a=n.find((n=>n.url===e));return a||l})))),e.forEach(((e,r)=>{s()(e,{cancelToken:n.token,startTime:new Date,responseType:"arraybuffer"}).then((n=>{if(t)return;const s=new Date-n.config.startTime,o={url:e,loading:!1,payload:n.data,error:null,time:s};a((e=>{const n=[...e];return n[r]=o,n}))})).catch((n=>{if(t)return;const s={url:e,loading:!1,payload:null,error:n};a((e=>{const n=[...e];return n[r]=s,n}))}))})),()=>{n.cancel(),t=!0}}),[e]),e?n:[]}},26379:(e,n,a)=>{a.r(n),a.d(n,{default:()=>v});var t=a(65043),r=a(10939),s=a(34088);const o="style_graph__hjtUJ",l="style_horizontal__xMVF8",i="style_wide25__aa51e",c="style_wide75__n-46i";var u=a(58338),d=a(41399),h=a(29449),m=a(95747),f=a(17545),p=a(26494),y=a(85865),x=a(99070),g=a(70579);const b=(0,t.lazy)((()=>Promise.all([a.e(2577),a.e(1483)]).then(a.bind(a,53099)))),v=()=>{const{accessionAndMdNumber:e,files:n}=(0,t.useContext)(h.f),[a,v]=(0,t.useState)(null),[w,_]=(0,t.useState)(14),[j,A]=(0,t.useState)(20),{loading:S,payload:N,error:k}=(0,u.A)("".concat(m.nP,"/").concat(e,"/analyses/markov/")),C=(0,t.useMemo)((()=>n.filter((e=>e.includes("markov_screenshot"))).map((n=>"".concat(m.nP,"/").concat(e,"/files/").concat(n)))),[n]),M=(0,d.A)(C),z=M.some((e=>e.loading)),R=(0,t.useMemo)((()=>{if(!z)return M.map((e=>e&&e.payload?"data:image/png;base64,"+Buffer.from(e.payload,"binary").toString("base64"):null))}),[M,z]),{graphData:D,availableLinks:E}=(0,t.useMemo)((()=>{if(!N)return{};const e=N.populations[0],n=[];N.populations.forEach(((a,t)=>{if(t>=w)return;const r=1e4*a/e,s={id:t,radius:Math.sqrt(r/Math.PI),value:N.frames[t],text:"Population: ".concat(Math.round(1e4*a)/100," %\nFrame: ").concat(N.frames[t])};n.push(s)}));const a=n.length,t=[];N.rmsd_matrix.forEach(((e,n)=>{n>=a||e.forEach(((e,r)=>{r>=a||n>=r||t.push(e)}))}));const r=t.length,s=[];if(j>0){const e=t.sort(),n=e[0],o=j<r?e[j-1]:e[r-1],l=o===n?1:9/(o-n);N.rmsd_matrix.forEach(((e,t)=>{t>=a||e.forEach(((e,r)=>{if(r>=a)return;if(t>=r)return;if(e>o)return;const i={source:t,target:r,width:10-(e-n)*l};s.push(i)}))}))}return{graphData:{nodes:n,links:s},availableLinks:r}}),[N,w,j]),P=(0,t.useCallback)((e=>{v(e.value)}),[v]);return S?(0,g.jsx)(f.A,{}):k?k.toString():N?z?(0,g.jsx)(f.A,{}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(r.A,{children:[(0,g.jsx)(b,{data:D,images:R,selectedNodeValue:a,onSelectNode:P,className:o}),(0,g.jsxs)(p.A,{children:[(0,g.jsxs)("div",{className:l,children:[(0,g.jsx)(y.A,{variant:"h7",className:i,children:"Number of nodes: "}),(0,g.jsx)(x.Ay,{title:"Change number of nodes",value:w,"aria-labelledby":"continuous-slider",onChange:(e,n)=>{_(n)},min:2,max:N.populations.length,valueLabelDisplay:"auto",className:c})]}),(0,g.jsxs)("div",{className:l,children:[(0,g.jsx)(y.A,{variant:"h7",className:i,children:"Number of links: "}),(0,g.jsx)(x.Ay,{title:"Change the RMSD cutoff",value:j,"aria-labelledby":"continuous-slider",onChange:(e,n)=>{A(n)},min:0,max:E,valueLabelDisplay:"auto",className:c})]})]})]}),(0,g.jsx)(s.A,{newViewer:a?{requestedFrame:a}:null,onNail:e=>v((n=>e.requestedFrame===n?null:n)),onClose:e=>v((n=>e.requestedFrame===n?null:n))})]}):"Something bad happened"}}}]);
//# sourceMappingURL=markov.8816f785.chunk.js.map