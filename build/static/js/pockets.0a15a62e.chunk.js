"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[5748,9117],{10939:(e,t,o)=>{o.d(t,{A:()=>u});var r=o(65043),n=o(12110),a=o(17604);const c="style_container__M9GCG";var s=o(70579);const l={opacity:[0,1]};(0,a.A)()||(l.transform=["translateY(50px)","translateY(0)"]);const i={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},u=(0,r.forwardRef)(((e,t)=>{let{overrideComponent:o,...a}=e;const u=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{const e=u.current&&u.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex((t=>e===t)),o=e.animate(l,{...i,delay:150*t});return()=>o.cancel()}),[]);const d=o?"section":n.A;return(0,s.jsx)("div",{ref:u,className:c,children:(0,s.jsx)(d,{component:"section",...a,ref:t})})}))},97318:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(65043);const n=["red","green","blue","orange","purple"],a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";const o=(0,r.useRef)([]);return(0,r.useMemo)((()=>[()=>{for(const t of e){if(-1===o.current.indexOf(t))return o.current.push(t),t}return t},e=>{if(e===t)return;const r=o.current.indexOf(e);if(-1===r)throw new Error("Color ".concat(e," is not used"));o.current.splice(r,1)},()=>{o.current=[]}]),[e,t])}},44564:(e,t,o)=>{o.r(t),o.d(t,{default:()=>O});var r=o(65043),n=o(89257),a=o(71806),c=o(84882),s=o(28076),l=o(10039),i=o(68577),u=o(51962),d=o(73460),m=o(85865),p=o(10939),h=o(92428),f=o(10419);const A="style_paper__3rwjT",v="style_tablecard__zkclz",x="style_nglcard__Giv4e",y="style_container__LW09U",j="style_selectedrow__J0gnV",k="style_graph__tgzxk",b="style_graph-placeholder__QpX0O";var g=o(29449),C=o(17545),M=o(58338),w=o(97318),S=o(95747),z=o(70579);const _=(0,r.lazy)((()=>Promise.all([o.e(4040),o.e(2577),o.e(5291),o.e(5077)]).then(o.bind(o,75291)))),N={triggerOnce:!0,rootMargin:"100px"},R="pocket",P="pocket surface",E=e=>{const t=e.reduce(((e,t)=>e+t),0)/e.length;return Math.round(10*t)/10},O=()=>{const[e,t]=(0,n.Wx)(N),{accessionAndMdNumber:o,metadata:O}=(0,r.useContext)(g.f),I=(0,r.useContext)(g.I),L=(0,r.useRef)(null),F=(0,r.useRef)(null),[D,H]=(0,w.A)(),[B,V]=(0,r.useState)(!1),[T,G]=(0,r.useState)(null),[U,W]=(0,r.useState)([]),[X,Y]=(0,r.useState)(0),{loading:q,payload:J,error:Q}=(0,M.A)("".concat(S.nP,"/").concat(o,"/analyses/pockets/")),{data:K,frameStep:Z}=(0,r.useMemo)((()=>{if(!J)return{};const e=J&&J.data,t=e.length,o=e[0].volumes.length,r=J.step||Math.floor(O.mdFrames/(o-1));return W(new Array(t).fill(null)),{data:e,frameStep:r}}),[J,O]),$=(0,f.A)(),ee=(0,r.useMemo)((()=>{if(!K)return;const e="".concat(S.nP,"/").concat(o,"/trajectory");return[{trajectoryURLs:["".concat(e,"?frames=1:").concat(O.mdFrames,":").concat(Z)]},...K.map((e=>({name:e.name,topologyURL:"".concat(S.nP,"/").concat(o,"/files/").concat(e.name,".pdb"),onlyTopology:!0})))]}),[K,o,O,Z]),[te,oe]=(0,r.useState)(null);(0,r.useMemo)((()=>{ee&&$&&oe((e=>{if(null!==e)return e;$.forEach((e=>{e.color="black",e.opacity=.3}));const t=K.map((e=>({name:e.name+" surface",selection:"@"+e.atoms.join(","),type:"surface",color:"grey",show:!1,reference:P}))),o=ee.slice(1).map((e=>({name:e.name,type:"surface",other:{contour:!0},label:e.name,component:e.name,show:!1,reference:R})));return[...$,...t,...o]}))}),[ee,$]);const{graphInputData:re,dataDisplay:ne}=(0,r.useMemo)((()=>{if(!K||!O)return{};const e={},t={};return K.forEach(((o,r)=>{const n=o.name;e[n]={data:o.volumes,color:U[r]},t[n]=!!U[r]})),{graphInputData:e,dataDisplay:t}}),[K,O,U]),ae=(0,r.useMemo)((()=>[{x:X,attr:{fill:"#c8c8c8"}}]),[X]),ce=(0,r.useMemo)((()=>e=>"frame "+e));return(0,r.useEffect)((()=>{F.current&&(F.current.currentFrame=X)}),[X]),(0,r.useEffect)((()=>{oe((e=>{if(null===e)return null;e.filter((e=>e.reference===R)).forEach(((e,t)=>{if(T===t)e.show=!0,e.color="yellow";else{const o=U[t];e.show=!!o||B,e.color=o||"grey"}}));return e.filter((e=>e.reference===P)).forEach(((e,t)=>{const o=U[t];e.show=!!o})),[...e]}))}),[U,T,B]),q?(0,z.jsx)(C.A,{}):Q?Q.toString():J?O&&I.file?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(p.A,{className:v,children:(0,z.jsx)("div",{className:A,children:(0,z.jsxs)(a.A,{stickyHeader:!0,size:"small",padding:"checkbox",children:[(0,z.jsx)(c.A,{children:(0,z.jsxs)(s.A,{children:[(0,z.jsx)(l.A,{children:(0,z.jsx)(i.A,{onChange:()=>V((e=>!e)),control:(0,z.jsx)(u.A,{checked:B}),label:"Pockets"})},0),(0,z.jsx)(l.A,{children:"Average volume (\xc5\xb3)"},1)]})}),(0,z.jsx)(d.A,{children:K.map(((e,t)=>{const o=e.name;return(0,z.jsx)(s.A,{role:"checkbox",className:t===T?j:void 0,onMouseOver:()=>G(t),onMouseOut:()=>G((e=>e===t?null:e)),children:[(0,z.jsx)(i.A,{"data-key":o,onMouseOver:()=>{L.current=t},onMouseOut:()=>{L.current=null},onChange:()=>W((e=>(e[t]?(H(e[t]),e[t]=null):e[t]=D(),[...e]))),control:(0,z.jsx)(u.A,{checked:!!U[t],style:{color:U[t]?U[t]:"black"},inputProps:{"data-key":o}}),label:o},o),E(e.volumes)].map((e=>(0,z.jsx)(l.A,{children:e},e)))},o)}))})]})})}),(0,z.jsx)(p.A,{className:x,ref:e,children:t?(0,z.jsx)(h.default,{className:y,startingComponents:ee,representationsState:[te,oe],preventTrajectory:!0,ref:F}):(0,z.jsx)("div",{style:{height:"50vh"}})}),(0,z.jsxs)(p.A,{className:k,children:[U.every((e=>null===e))&&(0,z.jsx)("div",{className:b,children:(0,z.jsx)(m.A,{variant:"h6",children:"No pocket selected"})}),(0,z.jsx)(_,{yData:re,step:Z,xTooltip:ce,xScaleFactor:1,xAxisLabel:"Frames",yAxisLabel:"Pocket volume (\xc5\xb3)",dataDisplay:ne,showPrecisionSlider:!1,blockMaxPrecision:!0,roundcents:!1,onSelect:Y,className:k,marks:ae})]})]}):(0,z.jsx)(C.A,{}):"Something bad happened"}},12110:(e,t,o)=>{o.d(t,{A:()=>v});var r=o(58168),n=o(98587),a=o(65043),c=o(58387),s=o(98610),l=o(34535),i=o(98206),u=o(63336),d=o(92532),m=o(72372);function p(e){return(0,m.Ay)("MuiCard",e)}(0,d.A)("MuiCard",["root"]);var h=o(70579);const f=["className","raised"],A=(0,l.Ay)(u.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),v=a.forwardRef((function(e,t){const o=(0,i.b)({props:e,name:"MuiCard"}),{className:a,raised:l=!1}=o,u=(0,n.A)(o,f),d=(0,r.A)({},o,{raised:l}),m=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},p,t)})(d);return(0,h.jsx)(A,(0,r.A)({className:(0,c.A)(m.root,a),elevation:l?8:void 0,ref:t,ownerState:d},u))}))},26494:(e,t,o)=>{o.d(t,{A:()=>A});var r=o(58168),n=o(98587),a=o(65043),c=o(58387),s=o(98610),l=o(34535),i=o(98206),u=o(92532),d=o(72372);function m(e){return(0,d.Ay)("MuiCardContent",e)}(0,u.A)("MuiCardContent",["root"]);var p=o(70579);const h=["className","component"],f=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),A=a.forwardRef((function(e,t){const o=(0,i.b)({props:e,name:"MuiCardContent"}),{className:a,component:l="div"}=o,u=(0,n.A)(o,h),d=(0,r.A)({},o,{component:l}),A=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},m,t)})(d);return(0,p.jsx)(f,(0,r.A)({as:l,className:(0,c.A)(A.root,a),ownerState:d,ref:t},u))}))},51962:(e,t,o)=>{o.d(t,{A:()=>z});var r=o(98587),n=o(58168),a=o(65043),c=o(58387),s=o(98610),l=o(67266),i=o(33064),u=o(59662),d=o(70579);const m=(0,u.A)((0,d.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,u.A)((0,d.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,u.A)((0,d.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var f=o(6803),A=o(98206),v=o(34535),x=o(61475),y=o(92532),j=o(72372);function k(e){return(0,j.Ay)("MuiCheckbox",e)}const b=(0,y.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),g=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],C=(0,v.Ay)(i.A,{shouldForwardProp:e=>(0,x.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.indeterminate&&t.indeterminate,t["size".concat((0,f.A)(o.size))],"default"!==o.color&&t["color".concat((0,f.A)(o.color))]]}})((e=>{let{theme:t,ownerState:o}=e;return(0,n.A)({color:(t.vars||t).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===o.color?t.vars.palette.action.activeChannel:t.vars.palette[o.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,l.X4)("default"===o.color?t.palette.action.active:t.palette[o.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==o.color&&{["&.".concat(b.checked,", &.").concat(b.indeterminate)]:{color:(t.vars||t).palette[o.color].main},["&.".concat(b.disabled)]:{color:(t.vars||t).palette.action.disabled}})})),M=(0,d.jsx)(p,{}),w=(0,d.jsx)(m,{}),S=(0,d.jsx)(h,{}),z=a.forwardRef((function(e,t){var o,l;const i=(0,A.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:u=M,color:m="primary",icon:p=w,indeterminate:h=!1,indeterminateIcon:v=S,inputProps:x,size:y="medium",className:j}=i,b=(0,r.A)(i,g),z=h?v:p,_=h?v:u,N=(0,n.A)({},i,{color:m,indeterminate:h,size:y}),R=(e=>{const{classes:t,indeterminate:o,color:r,size:a}=e,c={root:["root",o&&"indeterminate","color".concat((0,f.A)(r)),"size".concat((0,f.A)(a))]},l=(0,s.A)(c,k,t);return(0,n.A)({},t,l)})(N);return(0,d.jsx)(C,(0,n.A)({type:"checkbox",inputProps:(0,n.A)({"data-indeterminate":h},x),icon:a.cloneElement(z,{fontSize:null!=(o=z.props.fontSize)?o:y}),checkedIcon:a.cloneElement(_,{fontSize:null!=(l=_.props.fontSize)?l:y}),ownerState:N,ref:t,className:(0,c.A)(R.root,j)},b,{classes:R}))}))}}]);
//# sourceMappingURL=pockets.0a15a62e.chunk.js.map