"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[5748,9117],{10939:(e,r,t)=>{t.d(r,{A:()=>u});var o=t(65043),n=t(12110),a=t(17604);const s="style_container__M9GCG";var c=t(70579);const l={opacity:[0,1]};(0,a.A)()||(l.transform=["translateY(50px)","translateY(0)"]);const i={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},u=(0,o.forwardRef)(((e,r)=>{let{overrideComponent:t,...a}=e;const u=(0,o.useRef)(null);(0,o.useLayoutEffect)((()=>{const e=u.current&&u.current.firstElementChild;if(!e||!e.animate)return;const r=Array.from(document.querySelectorAll("main section")).findIndex((r=>e===r)),t=e.animate(l,{...i,delay:150*r});return()=>t.cancel()}),[]);const d=t?"section":n.A;return(0,c.jsx)("div",{ref:u,className:s,children:(0,c.jsx)(d,{component:"section",...a,ref:r})})}))},97318:(e,r,t)=>{t.d(r,{A:()=>a});var o=t(65043);const n=["red","green","blue","orange","purple"],a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";const t=(0,o.useRef)([]);return(0,o.useMemo)((()=>[()=>{for(const r of e){if(-1===t.current.indexOf(r))return t.current.push(r),r}return r},e=>{if(e===r)return;const o=t.current.indexOf(e);if(-1===o)throw new Error(`Color ${e} is not used`);t.current.splice(o,1)},()=>{t.current=[]}]),[e,r])}},44564:(e,r,t)=>{t.r(r),t.d(r,{default:()=>E});var o=t(65043),n=t(89257),a=t(71806),s=t(84882),c=t(28076),l=t(10039),i=t(68577),u=t(51962),d=t(73460),m=t(85865),p=t(10939),h=t(92428),f=t(10419);const A="style_paper__3rwjT",v="style_tablecard__zkclz",x="style_nglcard__Giv4e",y="style_container__LW09U",j="style_selectedrow__J0gnV",k="style_graph__tgzxk",b="style_graph-placeholder__QpX0O";var g=t(29449),C=t(17545),M=t(58338),w=t(97318),S=t(95747),z=t(70579);const _=(0,o.lazy)((()=>Promise.all([t.e(4040),t.e(2577),t.e(5291),t.e(5077)]).then(t.bind(t,75291)))),N={triggerOnce:!0,rootMargin:"100px"},$="pocket",R="pocket surface",P=e=>{const r=e.reduce(((e,r)=>e+r),0)/e.length;return Math.round(10*r)/10},E=()=>{const[e,r]=(0,n.Wx)(N),{accessionAndMdNumber:t,metadata:E}=(0,o.useContext)(g.f),O=(0,o.useContext)(g.I),I=(0,o.useRef)(null),L=(0,o.useRef)(null),[F,D]=(0,w.A)(),[H,B]=(0,o.useState)(!1),[V,T]=(0,o.useState)(null),[G,U]=(0,o.useState)([]),[W,X]=(0,o.useState)(0),{loading:Y,payload:q,error:J}=(0,M.A)(`${S.nP}/${t}/analyses/pockets/`),{data:Q,frameStep:K}=(0,o.useMemo)((()=>{if(!q)return{};const e=q&&q.data,r=e.length,t=e[0].volumes.length,o=q.step||Math.floor(E.mdFrames/(t-1));return U(new Array(r).fill(null)),{data:e,frameStep:o}}),[q,E]),Z=(0,f.A)(),ee=(0,o.useMemo)((()=>{if(!Q)return;return[{trajectoryURLs:[`${`${S.nP}/${t}/trajectory`}?frames=1:${E.mdFrames}:${K}`]},...Q.map((e=>({name:e.name,topologyURL:`${S.nP}/${t}/files/${e.name}.pdb`,onlyTopology:!0})))]}),[Q,t,E,K]),[re,te]=(0,o.useState)(null);(0,o.useMemo)((()=>{ee&&Z&&te((e=>{if(null!==e)return e;Z.forEach((e=>{e.color="black",e.opacity=.3}));const r=Q.map((e=>({name:e.name+" surface",selection:"@"+e.atoms.join(","),type:"surface",color:"grey",show:!1,reference:R}))),t=ee.slice(1).map((e=>({name:e.name,type:"surface",other:{contour:!0},label:e.name,component:e.name,show:!1,reference:$})));return[...Z,...r,...t]}))}),[ee,Z]);const{graphInputData:oe,dataDisplay:ne}=(0,o.useMemo)((()=>{if(!Q||!E)return{};const e={},r={};return Q.forEach(((t,o)=>{const n=t.name;e[n]={data:t.volumes,color:G[o]},r[n]=!!G[o]})),{graphInputData:e,dataDisplay:r}}),[Q,E,G]),ae=(0,o.useMemo)((()=>[{x:W,attr:{fill:"#c8c8c8"}}]),[W]),se=(0,o.useMemo)((()=>e=>"frame "+e));return(0,o.useEffect)((()=>{L.current&&(L.current.currentFrame=W)}),[W]),(0,o.useEffect)((()=>{te((e=>{if(null===e)return null;e.filter((e=>e.reference===$)).forEach(((e,r)=>{if(V===r)e.show=!0,e.color="yellow";else{const t=G[r];e.show=!!t||H,e.color=t||"grey"}}));return e.filter((e=>e.reference===R)).forEach(((e,r)=>{const t=G[r];e.show=!!t})),[...e]}))}),[G,V,H]),Y?(0,z.jsx)(C.A,{}):J?J.toString():q?E&&O.file?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(p.A,{className:v,children:(0,z.jsx)("div",{className:A,children:(0,z.jsxs)(a.A,{stickyHeader:!0,size:"small",padding:"checkbox",children:[(0,z.jsx)(s.A,{children:(0,z.jsxs)(c.A,{children:[(0,z.jsx)(l.A,{children:(0,z.jsx)(i.A,{onChange:()=>B((e=>!e)),control:(0,z.jsx)(u.A,{checked:H}),label:"Pockets"})},0),(0,z.jsx)(l.A,{children:"Average volume (\xc5\xb3)"},1)]})}),(0,z.jsx)(d.A,{children:Q.map(((e,r)=>{const t=e.name;return(0,z.jsx)(c.A,{role:"checkbox",className:r===V?j:void 0,onMouseOver:()=>T(r),onMouseOut:()=>T((e=>e===r?null:e)),children:[(0,z.jsx)(i.A,{"data-key":t,onMouseOver:()=>{I.current=r},onMouseOut:()=>{I.current=null},onChange:()=>U((e=>(e[r]?(D(e[r]),e[r]=null):e[r]=F(),[...e]))),control:(0,z.jsx)(u.A,{checked:!!G[r],style:{color:G[r]?G[r]:"black"},inputProps:{"data-key":t}}),label:t},t),P(e.volumes)].map((e=>(0,z.jsx)(l.A,{children:e},e)))},t)}))})]})})}),(0,z.jsx)(p.A,{className:x,ref:e,children:r?(0,z.jsx)(h.default,{className:y,startingComponents:ee,representationsState:[re,te],preventTrajectory:!0,ref:L}):(0,z.jsx)("div",{style:{height:"50vh"}})}),(0,z.jsxs)(p.A,{className:k,children:[G.every((e=>null===e))&&(0,z.jsx)("div",{className:b,children:(0,z.jsx)(m.A,{variant:"h6",children:"No pocket selected"})}),(0,z.jsx)(_,{yData:oe,step:K,xTooltip:se,xScaleFactor:1,xAxisLabel:"Frames",yAxisLabel:"Pocket volume (\xc5\xb3)",dataDisplay:ne,showPrecisionSlider:!1,blockMaxPrecision:!0,roundcents:!1,onSelect:X,className:k,marks:ae})]})]}):(0,z.jsx)(C.A,{}):"Something bad happened"}},12110:(e,r,t)=>{t.d(r,{A:()=>v});var o=t(58168),n=t(98587),a=t(65043),s=t(58387),c=t(98610),l=t(34535),i=t(98206),u=t(63336),d=t(92532),m=t(72372);function p(e){return(0,m.Ay)("MuiCard",e)}(0,d.A)("MuiCard",["root"]);var h=t(70579);const f=["className","raised"],A=(0,l.Ay)(u.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({overflow:"hidden"}))),v=a.forwardRef((function(e,r){const t=(0,i.b)({props:e,name:"MuiCard"}),{className:a,raised:l=!1}=t,u=(0,n.A)(t,f),d=(0,o.A)({},t,{raised:l}),m=(e=>{const{classes:r}=e;return(0,c.A)({root:["root"]},p,r)})(d);return(0,h.jsx)(A,(0,o.A)({className:(0,s.A)(m.root,a),elevation:l?8:void 0,ref:r,ownerState:d},u))}))},26494:(e,r,t)=>{t.d(r,{A:()=>A});var o=t(58168),n=t(98587),a=t(65043),s=t(58387),c=t(98610),l=t(34535),i=t(98206),u=t(92532),d=t(72372);function m(e){return(0,d.Ay)("MuiCardContent",e)}(0,u.A)("MuiCardContent",["root"]);var p=t(70579);const h=["className","component"],f=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),A=a.forwardRef((function(e,r){const t=(0,i.b)({props:e,name:"MuiCardContent"}),{className:a,component:l="div"}=t,u=(0,n.A)(t,h),d=(0,o.A)({},t,{component:l}),A=(e=>{const{classes:r}=e;return(0,c.A)({root:["root"]},m,r)})(d);return(0,p.jsx)(f,(0,o.A)({as:l,className:(0,s.A)(A.root,a),ownerState:d,ref:r},u))}))},51962:(e,r,t)=>{t.d(r,{A:()=>z});var o=t(98587),n=t(58168),a=t(65043),s=t(58387),c=t(98610),l=t(67266),i=t(33064),u=t(59662),d=t(70579);const m=(0,u.A)((0,d.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,u.A)((0,d.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,u.A)((0,d.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var f=t(6803),A=t(98206),v=t(34535),x=t(61475),y=t(92532),j=t(72372);function k(e){return(0,j.Ay)("MuiCheckbox",e)}const b=(0,y.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),g=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],C=(0,v.Ay)(i.A,{shouldForwardProp:e=>(0,x.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,t.indeterminate&&r.indeterminate,r[`size${(0,f.A)(t.size)}`],"default"!==t.color&&r[`color${(0,f.A)(t.color)}`]]}})((e=>{let{theme:r,ownerState:t}=e;return(0,n.A)({color:(r.vars||r).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:r.vars?`rgba(${"default"===t.color?r.vars.palette.action.activeChannel:r.vars.palette[t.color].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:(0,l.X4)("default"===t.color?r.palette.action.active:r.palette[t.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${b.checked}, &.${b.indeterminate}`]:{color:(r.vars||r).palette[t.color].main},[`&.${b.disabled}`]:{color:(r.vars||r).palette.action.disabled}})})),M=(0,d.jsx)(p,{}),w=(0,d.jsx)(m,{}),S=(0,d.jsx)(h,{}),z=a.forwardRef((function(e,r){var t,l;const i=(0,A.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:u=M,color:m="primary",icon:p=w,indeterminate:h=!1,indeterminateIcon:v=S,inputProps:x,size:y="medium",className:j}=i,b=(0,o.A)(i,g),z=h?v:p,_=h?v:u,N=(0,n.A)({},i,{color:m,indeterminate:h,size:y}),$=(e=>{const{classes:r,indeterminate:t,color:o,size:a}=e,s={root:["root",t&&"indeterminate",`color${(0,f.A)(o)}`,`size${(0,f.A)(a)}`]},l=(0,c.A)(s,k,r);return(0,n.A)({},r,l)})(N);return(0,d.jsx)(C,(0,n.A)({type:"checkbox",inputProps:(0,n.A)({"data-indeterminate":h},x),icon:a.cloneElement(z,{fontSize:null!=(t=z.props.fontSize)?t:y}),checkedIcon:a.cloneElement(_,{fontSize:null!=(l=_.props.fontSize)?l:y}),ownerState:N,ref:r,className:(0,s.A)($.root,j)},b,{classes:$}))}))}}]);
//# sourceMappingURL=pockets.840216fb.chunk.js.map