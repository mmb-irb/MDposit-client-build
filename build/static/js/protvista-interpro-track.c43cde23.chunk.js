"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[6525],{10500:(t,e,i)=>{i.d(e,{A:()=>a});const a=function(t,e){for(var i=-1,a=null==t?0:t.length,n=Array(a);++i<a;)n[i]=e(t[i],i,t);return n}},4796:(t,e,i)=>{i.d(e,{A:()=>c});var a=i(32880),n=i(54577),r=i(94443),s=i(28593),o=n.A?n.A.isConcatSpreadable:void 0;const h=function(t){return(0,s.A)(t)||(0,r.A)(t)||!!(o&&t&&t[o])};const c=function t(e,i,n,r,s){var o=-1,c=e.length;for(n||(n=h),s||(s=[]);++o<c;){var l=e[o];i>0&&n(l)?i>1?t(l,i-1,n,r,s):(0,a.A)(s,l):r||(s[s.length]=l)}return s}},10709:(t,e,i)=>{i.d(e,{A:()=>a});const a=function(t){return function(e){return null==e?void 0:e[t]}}},6376:(t,e,i)=>{i.d(e,{A:()=>d});var a=i(21584);const n=function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)};var r=Math.max;const s=function(t,e,i){return e=r(void 0===e?t.length-1:e,0),function(){for(var a=arguments,s=-1,o=r(a.length-e,0),h=Array(o);++s<o;)h[s]=a[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=a[s];return c[e]=i(h),n(t,this,c)}};const o=function(t){return function(){return t}};var h=i(87371);const c=h.A?function(t,e){return(0,h.A)(t,"toString",{configurable:!0,enumerable:!1,value:o(e),writable:!0})}:a.A;var l=Date.now;const u=function(t){var e=0,i=0;return function(){var a=l(),n=16-(a-i);if(i=a,n>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(c);const d=function(t,e){return u(s(t,e,a.A),t+"")}},21584:(t,e,i)=>{i.d(e,{A:()=>a});const a=function(t){return t}},29533:(t,e,i)=>{i.d(e,{A:()=>r});var a=i(59758),n=i(10666);const r=function(t){return(0,n.A)(t)&&(0,a.A)(t)}},10312:(t,e,i)=>{i.d(e,{A:()=>r});var a=i(67522);function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var a=arguments,n=e?e.apply(this,a):a[0],r=i.cache;if(r.has(n))return r.get(n);var s=t.apply(this,a);return i.cache=r.set(n,s)||r,s};return i.cache=new(n.Cache||a.A),i}n.Cache=a.A;const r=n},40830:(t,e,i)=>{i.d(e,{A:()=>a});const a=function(){}},3777:(t,e,i)=>{i.d(e,{A:()=>n});var a=i(99944);const n=function(t){var e=(0,a.A)(t),i=e%1;return e===e?i?e-i:e:0}},3152:(t,e,i)=>{i.d(e,{A:()=>l});var a=i(54577),n=i(10500),r=i(28593),s=i(28666),o=a.A?a.A.prototype:void 0,h=o?o.toString:void 0;const c=function t(e){if("string"==typeof e)return e;if((0,r.A)(e))return(0,n.A)(e,t)+"";if((0,s.A)(e))return h?h.call(e):"";var i=e+"";return"0"==i&&1/e==-1/0?"-0":i};const l=function(t){return null==t?"":c(t)}},88393:(t,e,i)=>{i.r(e),i.d(e,{default:()=>ue});var a=i(32577);const n=function(t,e,i,a){for(var n=t.length,r=i+(a?1:-1);a?r--:++r<n;)if(e(t[r],r,t))return r;return-1};const r=function(t){return t!==t};const s=function(t,e,i){for(var a=i-1,n=t.length;++a<n;)if(t[a]===e)return a;return-1};const o=function(t,e,i){return e===e?s(t,e,i):n(t,r,i)};var h=i(59758),c=i(66445),l=i(28593),u=i(10666);const d=function(t){return"string"==typeof t||!(0,l.A)(t)&&(0,u.A)(t)&&"[object String]"==(0,c.A)(t)};var g=i(3777),f=i(10500);const p=function(t,e){return(0,f.A)(e,(function(e){return t[e]}))};var _=i(21251);const m=function(t){return null==t?[]:p(t,(0,_.A)(t))};var v=Math.max;const b=function(t,e,i,a){t=(0,h.A)(t)?t:m(t),i=i&&!a?(0,g.A)(i):0;var n=t.length;return i<0&&(i=v(n+i,0)),d(t)?i<=n&&t.indexOf(e,i)>-1:!!n&&o(t,e,i)>-1};var y=i(13808);const A=function(t,e,i,a){for(var n=-1,r=null==t?0:t.length;++n<r;){var s=t[n];e(a,s,i(s),t)}return a};const L=function(t){return function(e,i,a){for(var n=-1,r=Object(e),s=a(e),o=s.length;o--;){var h=s[t?o:++n];if(!1===i(r[h],h,r))break}return e}}();const F=function(t,e){return function(i,a){if(null==i)return i;if(!(0,h.A)(i))return t(i,a);for(var n=i.length,r=e?n:-1,s=Object(i);(e?r--:++r<n)&&!1!==a(s[r],r,s););return i}}((function(t,e){return t&&L(t,e,_.A)}));const C=function(t,e,i,a){return F(t,(function(t,n,r){e(a,t,i(t),r)})),a};var S=i(52607),O=i(67522);const P=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};const x=function(t){return this.__data__.has(t)};function w(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new O.A;++e<i;)this.add(t[e])}w.prototype.add=w.prototype.push=P,w.prototype.has=x;const M=w;const H=function(t,e){for(var i=-1,a=null==t?0:t.length;++i<a;)if(e(t[i],i,t))return!0;return!1};const j=function(t,e){return t.has(e)};const k=function(t,e,i,a,n,r){var s=1&i,o=t.length,h=e.length;if(o!=h&&!(s&&h>o))return!1;var c=r.get(t);if(c&&r.get(e))return c==e;var l=-1,u=!0,d=2&i?new M:void 0;for(r.set(t,e),r.set(e,t);++l<o;){var g=t[l],f=e[l];if(a)var p=s?a(f,g,l,e,t,r):a(g,f,l,t,e,r);if(void 0!==p){if(p)continue;u=!1;break}if(d){if(!H(e,(function(t,e){if(!j(d,e)&&(g===t||n(g,t,i,a,r)))return d.push(e)}))){u=!1;break}}else if(g!==f&&!n(g,f,i,a,r)){u=!1;break}}return r.delete(t),r.delete(e),u};var N=i(54577),W=i(37524),E=i(32424);const T=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t,a){i[++e]=[a,t]})),i};const R=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i};var q=N.A?N.A.prototype:void 0,B=q?q.valueOf:void 0;const I=function(t,e,i,a,n,r,s){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!r(new W.A(t),new W.A(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,E.A)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var o=T;case"[object Set]":var h=1&a;if(o||(o=R),t.size!=e.size&&!h)return!1;var c=s.get(t);if(c)return c==e;a|=2,s.set(t,e);var l=k(o(t),o(e),a,n,r,s);return s.delete(t),l;case"[object Symbol]":if(B)return B.call(t)==B.call(e)}return!1};var D=i(71394),Y=Object.prototype.hasOwnProperty;const Z=function(t,e,i,a,n,r){var s=1&i,o=(0,D.A)(t),h=o.length;if(h!=(0,D.A)(e).length&&!s)return!1;for(var c=h;c--;){var l=o[c];if(!(s?l in e:Y.call(e,l)))return!1}var u=r.get(t);if(u&&r.get(e))return u==e;var d=!0;r.set(t,e),r.set(e,t);for(var g=s;++c<h;){var f=t[l=o[c]],p=e[l];if(a)var _=s?a(p,f,l,e,t,r):a(f,p,l,t,e,r);if(!(void 0===_?f===p||n(f,p,i,a,r):_)){d=!1;break}g||(g="constructor"==l)}if(d&&!g){var m=t.constructor,v=e.constructor;m==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v||(d=!1)}return r.delete(t),r.delete(e),d};var G=i(26346),U=i(17526),z=i(18732),X="[object Arguments]",V="[object Array]",Q="[object Object]",$=Object.prototype.hasOwnProperty;const K=function(t,e,i,a,n,r){var s=(0,l.A)(t),o=(0,l.A)(e),h=s?V:(0,G.A)(t),c=o?V:(0,G.A)(e),u=(h=h==X?Q:h)==Q,d=(c=c==X?Q:c)==Q,g=h==c;if(g&&(0,U.A)(t)){if(!(0,U.A)(e))return!1;s=!0,u=!1}if(g&&!u)return r||(r=new S.A),s||(0,z.A)(t)?k(t,e,i,a,n,r):I(t,e,h,i,a,n,r);if(!(1&i)){var f=u&&$.call(t,"__wrapped__"),p=d&&$.call(e,"__wrapped__");if(f||p){var _=f?t.value():t,m=p?e.value():e;return r||(r=new S.A),n(_,m,i,a,r)}}return!!g&&(r||(r=new S.A),Z(t,e,i,a,n,r))};const J=function t(e,i,a,n,r){return e===i||(null==e||null==i||!(0,u.A)(e)&&!(0,u.A)(i)?e!==e&&i!==i:K(e,i,a,n,t,r))};const tt=function(t,e,i,a){var n=i.length,r=n,s=!a;if(null==t)return!r;for(t=Object(t);n--;){var o=i[n];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<r;){var h=(o=i[n])[0],c=t[h],l=o[1];if(s&&o[2]){if(void 0===c&&!(h in t))return!1}else{var u=new S.A;if(a)var d=a(c,l,h,t,e,u);if(!(void 0===d?J(l,c,3,a,u):d))return!1}}return!0};var et=i(65709);const it=function(t){return t===t&&!(0,et.A)(t)};const at=function(t){for(var e=(0,_.A)(t),i=e.length;i--;){var a=e[i],n=t[a];e[i]=[a,n,it(n)]}return e};const nt=function(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}};const rt=function(t){var e=at(t);return 1==e.length&&e[0][2]?nt(e[0][0],e[0][1]):function(i){return i===t||tt(i,t,e)}};var st=i(28666),ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ht=/^\w*$/;const ct=function(t,e){if((0,l.A)(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!(0,st.A)(t))||(ht.test(t)||!ot.test(t)||null!=e&&t in Object(e))};var lt=i(10312);var ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dt=/\\(\\)?/g;const gt=function(t){var e=(0,lt.A)(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ut,(function(t,i,a,n){e.push(a?n.replace(dt,"$1"):i||t)})),e}));var ft=i(3152);const pt=function(t,e){return(0,l.A)(t)?t:ct(t,e)?[t]:gt((0,ft.A)(t))};const _t=function(t){if("string"==typeof t||(0,st.A)(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};const mt=function(t,e){for(var i=0,a=(e=pt(e,t)).length;null!=t&&i<a;)t=t[_t(e[i++])];return i&&i==a?t:void 0};const vt=function(t,e,i){var a=null==t?void 0:mt(t,e);return void 0===a?i:a};const bt=function(t,e){return null!=t&&e in Object(t)};var yt=i(94443),At=i(26761),Lt=i(902);const Ft=function(t,e,i){for(var a=-1,n=(e=pt(e,t)).length,r=!1;++a<n;){var s=_t(e[a]);if(!(r=null!=t&&i(t,s)))break;t=t[s]}return r||++a!=n?r:!!(n=null==t?0:t.length)&&(0,Lt.A)(n)&&(0,At.A)(s,n)&&((0,l.A)(t)||(0,yt.A)(t))};const Ct=function(t,e){return null!=t&&Ft(t,e,bt)};const St=function(t,e){return ct(t)&&it(e)?nt(_t(t),e):function(i){var a=vt(i,t);return void 0===a&&a===e?Ct(i,t):J(e,a,3)}};var Ot=i(21584),Pt=i(10709);const xt=function(t){return function(e){return mt(e,t)}};const wt=function(t){return ct(t)?(0,Pt.A)(_t(t)):xt(t)};const Mt=function(t){return"function"==typeof t?t:null==t?Ot.A:"object"==typeof t?(0,l.A)(t)?St(t[0],t[1]):rt(t):wt(t)};const Ht=function(t,e){return function(i,a){var n=(0,l.A)(i)?A:C,r=e?e():{};return n(i,t,Mt(a,2),r)}};var jt=Object.prototype.hasOwnProperty;const kt=Ht((function(t,e,i){jt.call(t,i)?t[i].push(e):(0,y.A)(t,i,[e])}));var Nt=i(4796),Wt=i(6376);const Et=function(t,e){return!!(null==t?0:t.length)&&o(t,e,0)>-1};const Tt=function(t,e,i){for(var a=-1,n=null==t?0:t.length;++a<n;)if(i(e,t[a]))return!0;return!1};var Rt=i(94993),qt=i(40830),Bt=Rt.A&&1/R(new Rt.A([,-0]))[1]==1/0?function(t){return new Rt.A(t)}:qt.A;const It=Bt;const Dt=function(t,e,i){var a=-1,n=Et,r=t.length,s=!0,o=[],h=o;if(i)s=!1,n=Tt;else if(r>=200){var c=e?null:It(t);if(c)return R(c);s=!1,n=j,h=new M}else h=e?[]:o;t:for(;++a<r;){var l=t[a],u=e?e(l):l;if(l=i||0!==l?l:0,s&&u===u){for(var d=h.length;d--;)if(h[d]===u)continue t;e&&h.push(u),o.push(l)}else n(h,u,i)||(h!==o&&h.push(u),o.push(l))}return o};var Yt=i(29533);const Zt=(0,Wt.A)((function(t){return Dt((0,Nt.A)(t,1,Yt.A,!0))}));var Gt=i(88981),Ut=Math.min;const zt=function(t,e,i){for(var a=i?Tt:Et,n=t[0].length,r=t.length,s=r,o=Array(r),h=1/0,c=[];s--;){var l=t[s];s&&e&&(l=(0,f.A)(l,(0,Gt.A)(e))),h=Ut(l.length,h),o[s]=!i&&(e||n>=120&&l.length>=120)?new M(s&&l):void 0}l=t[0];var u=-1,d=o[0];t:for(;++u<n&&c.length<h;){var g=l[u],p=e?e(g):g;if(g=i||0!==g?g:0,!(d?j(d,p):a(c,p,i))){for(s=r;--s;){var _=o[s];if(!(_?j(_,p):a(t[s],p,i)))continue t}d&&d.push(p),c.push(g)}}return c};const Xt=function(t){return(0,Yt.A)(t)?t:[]};const Vt=(0,Wt.A)((function(t){var e=(0,f.A)(t,Xt);return e.length&&e[0]===t[0]?zt(e):[]}));var Qt=i(41502);const $t=10;class Kt{getFeatureShape(t,e,i,a){return a=a||"rectangle",this._ftLength=i,this._ftHeight=e,this._ftWidth=t*i,"function"!==typeof this["_"+a]&&(a="rectangle"),this["_"+a]()}static isContinuous(t){return"bridge"!==(t=t.toLowerCase())}_rectangle(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}_roundRectangle(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 "+"-6,6h"+(12-this._ftWidth)+"a6,6 0 0 1 "+"-6,"+"-6v"+(12-this._ftHeight)+"a6,6 0 0 1 6,"+"-6Z"}_line(){return"M0,".concat(this._ftHeight/2," L").concat(this._ftWidth,",").concat(this._ftHeight/2)}_bridge(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}_getMiddleLine(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}_diamond(){const t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+","+"10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}_chevron(){const t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+","+"10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_catFace(){const t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+","+"10L"+(2+t)+","+"10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_triangle(){const t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+","+"10L"+(-5+t)+","+$t;return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_wave(){const t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_getPolygon(t){let e="M ";const i=this._ftWidth/2;for(let a=0;a<t;a++)e+=5*Math.cos(2*Math.PI*a/t)+i+","+(5*Math.sin(2*Math.PI*a/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+i)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_hexagon(){return this._getPolygon(6)}_pentagon(){return this._getPolygon(5)}_circle(){const t=this._ftWidth/2,e=Math.sqrt($t/Math.PI),i="M"+t+",0A"+e+","+e+" 0 1,1 "+t+","+"10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?i+this._getMiddleLine(5,this._ftWidth)+"Z":i+"Z"}_arrow(){const t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_doubleBar(){const t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+","+"10L"+t+","+"10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_getBrokenEnd(){const t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}_getBrokenStart(){const t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}_discontinuosStart(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}_discontinuos(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}_discontinuosEnd(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}_helix(){const t=2.5;let e=2.5;const i=Math.round(this._ftWidth/5);let a="";for(let n=0;n<i;n++){a+="M"+(-2.5+e)+","+this._ftHeight+" C"+(e+t)+",7.5 "+(2.5+e)+","+t+" "+e+", 0 C"+(e-t)+","+t+" "+e+",7.5 "+(2.5+e)+","+this._ftHeight,e+=5}return a}_strand(){let t=0;this._ftWidth>5&&(t=this._ftWidth-5);const e=this._ftHeight/4;return"M0,"+e+"L"+t+","+e+"L"+t+","+3*e+"L0,"+3*e+"L0,"+e+("M"+t+",0L"+this._ftWidth+","+2*e+"L"+t+","+this._ftHeight+"Z")}}class Jt{constructor(t){let{layoutHeight:e,padding:i=1,minHeight:a=17}=t;this._padding=i,this._minHeight=a,this._layoutHeight=e}init(t){this._features=t}getFeatureYPos(){const t=this.getFeatureHeight();return this._layoutHeight/2-t/2}getFeatureHeight(){return Math.min(this._layoutHeight,this._minHeight)-this._padding}}const te=(t,e)=>e.some((e=>{return i=t,a=e,!(Number(a.start)>Number(i.end)||Number(a.end)<Number(i.start));var i,a}));class ee extends Jt{constructor(t){super(t),this.featuresMap=new Map,this._rowHeight=0,this._rows=[],this._minHeight=15}init(t){t.forEach((t=>{const e=this._rows.findIndex((e=>!te(t,e)));e>=0?(this._rows[e].push(t),this.featuresMap.set(t,e)):(this._rows.push([t]),this.featuresMap.set(t,this._rows.length-1))})),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)}getOffset(){return this._rows.length*this._rowHeight<this._layoutHeight?this._layoutHeight/2-this._rows.length*this._rowHeight/2:0}getFeatureYPos(t){const e=this.featuresMap.get(t);return this.getOffset()+this._rowHeight*e+2*this._padding}getFeatureHeight(){return this._rowHeight-2*this._padding}}const ie={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},ae=t=>{if(ie[t.toUpperCase()])return ie[t.toUpperCase()].shape;const e=Object.values(ie).find((e=>e.name.toUpperCase()===t.toUpperCase()));return e?e.shape:"rectangle"},ne=t=>{if(ie[t.toUpperCase()])return ie[t.toUpperCase()].color;const e=Object.values(ie).find((e=>e.name.toUpperCase()===t.toUpperCase()));return e||console.log(t),e?e.color:"black"};class re extends Qt.A{getLayout(){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new ee({layoutHeight:this._height}):new Jt({layoutHeight:this._height})}connectedCallback(){super.connectedCallback(),this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new Kt,this._layoutObj=this.getLayout(),this._data&&this._createTrack(),this.addEventListener("load",(t=>{b(this.children,t.target)&&(this.data=t.detail.payload)}))}static normalizeLocations(t){return t.map((t=>{const{locations:e,start:i,end:a}=t;return e?t:Object.assign(t,{locations:[{fragments:[{start:i,end:a}]}]})}))}processData(t){this._originalData=re.normalizeLocations(t)}set data(t){this.processData(t),this._applyFilters(),this._layoutObj=this.getLayout(),this._createTrack()}set filters(t){this._filters=t,this._applyFilters(),this._createTrack()}static get observedAttributes(){return Qt.A.observedAttributes.concat(["highlight","color","shape","filters"])}_getFeatureColor(t){return t.color?t.color:t.feature&&t.feature.color?t.feature.color:this._color?this._color:t.type?ne(t.type):t.feature&&t.feature.type?ne(t.feature.type):"black"}_getFeatureFillColor(t){return t.fill?t.fill:t.feature&&t.feature.fill?t.feature.fill:this._getFeatureColor(t)}_getShape(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:t.type?ae(t.type):t.feature&&t.feature.type?ae(t.feature.type):"rectangle"}_createTrack(){this._layoutObj.init(this._data),(0,a.Ltv)(this).selectAll("div").remove(),this.svg=(0,a.Ltv)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this.seq_g=this.svg.append("g").attr("class","sequence-features"),this._createFeatures()}_createFeatures(){this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",(t=>"g_".concat(t.accession))).selectAll("g.location-group").data((t=>t.locations.map((e=>Object.assign({},e,{feature:t}))))).enter().append("g").attr("class","location-group");const t=this.locations.selectAll("g.fragment-group").data((t=>t.fragments.map((e=>Object.assign({},e,{feature:t.feature}))))).enter().append("g").attr("class","fragment-group");t.append("path").attr("class",(t=>"".concat(this._getShape(t)," feature"))).attr("d",(t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t)))).attr("transform",(t=>"translate(".concat(this.getXFromSeqPosition(t.start),",").concat(this._layoutObj.getFeatureYPos(t.feature),")"))).attr("fill",(t=>this._getFeatureFillColor(t))).attr("stroke",(t=>this._getFeatureColor(t))).style("fill-opacity",(t=>{let{feature:e}=t;return e.opacity?e.opacity:.9})).style("stroke-opacity",(t=>{let{feature:e}=t;return e.opacity?e.opacity:.9}));const e=t.selectAll("g.residue-group").data((t=>{var e;return t.feature.ptms?[null===(e=t.feature.ptms)||void 0===e?void 0:e.map((e=>Object.assign({},e,{feature:t.feature,position:e.position})))]:[]})).enter().append("g").attr("class","residue-group");t.append("rect").attr("class","outer-rectangle feature").attr("width",(t=>this.getSingleBaseWidth()*(t.end?t.end-t.start+1:1))).attr("height",(t=>this._layoutObj.getFeatureHeight(t))).attr("transform",(t=>"translate(".concat(this.getXFromSeqPosition(t.start),",").concat(this._layoutObj.getFeatureYPos(t.feature),")"))).attr("fill","transparent").attr("stroke","transparent").call(this.bindEvents,this),e.selectAll("g.residue").data((t=>t)).enter().append("path").attr("class",(t=>"".concat(this._getShape(t)," residue"))).attr("d",(t=>{let e=1;return this.length>500&&(e=this.getSingleBaseWidth()<4?4:1),this._featureShape.getFeatureShape(this.getSingleBaseWidth()/2,this._layoutObj.getFeatureHeight(),e,this._getShape(t))})).attr("transform",(t=>"translate(".concat(this.getXFromSeqPosition(Number(t.feature.start)+Number(t.position)-1)+this.getSingleBaseWidth()/4,",\n          ").concat(this._layoutObj.getFeatureYPos(t.feature),")"))).attr("fill","#06038D").style("fill-opacity",(t=>{let{feature:e}=t;return e.opacity?e.opacity:.9})).style("stroke-opacity",(t=>{let{feature:e}=t;return e.opacity?e.opacity:.9})).call(this.bindEvents,this)}_applyFilters(){if(!this._filters||this._filters.length<=0)return void(this._data=this._originalData);const t=kt(this._filters,"category"),e=Object.values(t).map((t=>{const e=t.map((t=>t.filterFn(this._originalData)));return Zt(...e)})),i=Vt(...e);this._data=i}refresh(){if(this.xScale&&this.seq_g){const t=this.seq_g.selectAll("g.fragment-group").data(this._data.reduce(((t,e)=>t.concat(e.locations.reduce(((t,i)=>t.concat(i.fragments.map((t=>Object.assign({},t,{feature:e}))))),[]))),[])),e=this.seq_g.selectAll("g.residue-group").data(this._data.reduce(((t,e)=>{var i;return t.concat([null===(i=e.ptms)||void 0===i?void 0:i.reduce((t=>t.concat((t=>Object.assign({},t,{feature:e,position:t.position})))),[])])}),[]));t.selectAll("path.feature").attr("d",(t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t)))).attr("transform",(t=>"translate(".concat(this.getXFromSeqPosition(t.start),",").concat(this._layoutObj.getFeatureYPos(t.feature),")"))),e.selectAll("path.residue").attr("d",(t=>{let e=1;return this.length>500&&(e=this.getSingleBaseWidth()<4?4:1),this._featureShape.getFeatureShape(this.getSingleBaseWidth()/2,this._layoutObj.getFeatureHeight(t),e,this._getShape(t))})).attr("transform",(t=>"translate(".concat(this.getXFromSeqPosition(Number(t.feature.start)+Number(t.position)-1)+this.getSingleBaseWidth()/4,",").concat(this._layoutObj.getFeatureYPos(t.feature),")"))),t.selectAll("rect.outer-rectangle").attr("width",(t=>this.getSingleBaseWidth()*(t.end?t.end-t.start+1:1))).attr("height",(t=>this._layoutObj.getFeatureHeight(t))).attr("transform",(t=>"translate(".concat(this.getXFromSeqPosition(t.start),",").concat(this._layoutObj.getFeatureYPos(t.feature),")"))),this._updateHighlight()}}_updateHighlight(){this.trackHighlighter.updateHighlight()}}const se=re;class oe extends Jt{init(t,e){let i=0;if(this.height={},this.yPos={},this.maxYPos=0,!t)return;this.innerPadding=3;const a={};for(let n=0;n<t.length;n++){const e=t[n];this.height[e.accession]=this.expanded?14:16,this.yPos[e.accession]=this._padding,i=this.height[e.accession]+2*this._padding,this.maxYPos=Math.max(this.maxYPos,i),e.accession in a||(a[e.accession]={}),e.residues&&(i=this._initResidues(e.residues,e.accession,e.locations,this.expanded?i:this.yPos[e.accession],n,a,this.expanded))}if(e)for(let n=0;n<e.length;n++){const t=e[n];t.accession in this.height||(this.height[t.accession]=10,this.yPos[t.accession]=(this.expanded?this.maxYPos:this.innerPadding)+this._padding,i+=2*this._padding+(this.expanded?this.height[t.accession]:0),this.maxYPos=Math.max(this.maxYPos,i)),t.accession in a||(a[t.accession]={}),t.residues&&(i=this._initResidues(t.residues,t.accession,t.locations,t.expanded?i:this.yPos[t.accession],n,a,t.expanded))}this.maxYPos+=this._padding}_initResidues(t,e,i,a,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];for(let o=0;o<t.length;o++){const h=t[o];oe._filterOutResidueFragmentsOutOfLocation(h,i),h.accession in r[e]||(r[e][h.accession]={});for(let t=0;t<h.locations.length;t++){const i=h.locations[t].description;i in r[e][h.accession]||(r[e][h.accession][i]={height:s?10:this.height[e]-2*this.innerPadding,yPos:s?this.maxYPos+this._padding:a+this.innerPadding},a=s?this.maxYPos+2*this._padding+10:a),this.height["".concat(h.accession,"_").concat(n,"_").concat(o,"_").concat(t)]=r[e][h.accession][i].height,this.yPos["".concat(h.accession,"_").concat(n,"_").concat(o,"_").concat(t)]=r[e][h.accession][i].yPos,this.maxYPos=Math.max(this.maxYPos,a)}}return s?a:this.maxYPos+2*this._padding}static _filterOutResidueFragmentsOutOfLocation(t,e){t.locations.forEach((t=>t.fragments=t.fragments.filter((t=>e.some((e=>e.fragments.some((e=>t.start>=e.start&&t.end<=e.end)))))))),t.locations=t.locations.filter((t=>t.fragments.length))}static _getAccFromFeature(t){let e="";return"string"===typeof t?e=t:t.accession&&(e=t.accession),e}getFeatureYPos(t){const e=oe._getAccFromFeature(t);return e in this.yPos?this.yPos[e]:0}getFeatureHeight(t){const e=oe._getAccFromFeature(t);return e in this.height?this.height[e]:0}}const he=(t,e)=>{let i={value:1,...t};const a=[];for(const n of e)i?i.end<n.start?(a.push(i),i=null,a.push(n)):i.start<n.start&&i.end>=n.end?(a.push({start:i.start,end:n.start-1,value:i.value}),a.push({start:n.start,end:n.end,value:n.value+i.value}),i=n.end===i.end?null:{start:n.end+1,end:i.end,value:i.value}):n.start<i.start&&n.end>i.end?(a.push({start:n.start,end:i.start-1,value:n.value}),a.push({start:i.start,end:i.end,value:n.value+i.value}),a.push({start:i.end+1,end:n.end,value:n.value}),i=null):n.end>=i.start&&n.end<=i.end?(n.start<i.start&&a.push({start:n.start,end:i.start-1,value:n.value}),a.push({start:i.start,end:n.end,value:n.value+i.value}),i=n.end<i.end?{start:n.end+1,end:i.end,value:i.value}:null):i.end>=n.start&&i.end<n.end?(a.push({start:i.start,end:n.start-1,value:i.value}),a.push({start:n.start,end:i.end,value:n.value+i.value}),a.push({start:i.end+1,end:n.end,value:n.value}),i=null):a.push(n):a.push(n);return i&&a.push(i),a},ce=2;class le extends se{_createTrack(){this._layoutObj.expanded=this._expanded,super._createTrack(),this.children_g=null}connectedCallback(){super.connectedCallback(),this._expanded=this.hasAttribute("expanded"),this._haveCreatedFeatures=!1}attributeChangedCallback(t,e,i){if("expanded"===t&&e!==i&&this._contributors)for(const a of this._contributors)a.expanded=!e;super.attributeChangedCallback(t,e,i)}set contributors(t){this._contributors=le.normalizeLocations(t),this._coverage=function(t){let e=[];return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e=he({start:1,end:arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,value:0},e)),t.forEach((t=>t.locations.forEach((t=>t.fragments.forEach((t=>{e=he(t,e)})))))),e}(this._contributors,this._length),this._data&&this._createTrack()}getLayout(){return new oe({layoutHeight:this._height,expanded:this._expanded,padding:2})}static get observedAttributes(){return se.observedAttributes.concat(["expanded","color"])}set color(t){this._color!==t&&(this._color=t,this.refresh())}static _createResidueGroup(t){return t.selectAll("g.residues-group").data((t=>t.residues?t.residues.map(((e,i)=>({...e,feature:t,i:i}))):[])).enter().append("g").attr("class","residues-group").selectAll("g.residues-locations").data((t=>t.locations.map(((e,i)=>({...e,accession:t.accession,feature:t.feature,location:e,i:t.i,j:i}))))).enter().append("g").attr("class","residues-locations")}_createResiduePaths(t){return t.selectAll("g.residue").data((t=>t.fragments.map((e=>({...e,accession:t.accession,feature:{...t.feature,currentResidue:{...e,description:t.location.description}},location:t.location,k:t.feature.k,i:t.i,j:t.j}))))).enter().append("path").attr("class","feature rectangle residue").attr("d",(t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),t.end?t.end-t.start+1:1,"rectangle"))).attr("transform",(t=>"translate(".concat(this.getXFromSeqPosition(t.start),",").concat(ce+this._layoutObj.getFeatureYPos("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),")"))).attr("fill",(t=>this._getFeatureColor(t))).attr("stroke","transparent").call(this.bindEvents,this)}_refreshResiduePaths(t,e){const i=new Set(t.data().map((t=>"".concat(t.feature.accession,"-").concat(t.location.description)))).size;t.attr("d",(t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),t.end?t.end-t.start+1:1,"rectangle"))).attr("transform",(t=>"translate(".concat(this.getXFromSeqPosition(t.start),",").concat(ce+this._layoutObj.getFeatureYPos("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),")"))).style("pointer-events",(t=>e||t.feature&&t.feature.expanded?"auto":"none")).style("stroke",(()=>e?null:"none")).style("opacity",(()=>e?null:.8/i)).attr("fill",(t=>e||t.feature&&t.feature.expanded?this._getFeatureColor(t):"white"))}_createFeatures(){if(this._layoutObj.init(this._data,this._contributors),this._data.forEach(((t,e)=>t.k=e)),this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data).enter().append("g").attr("class","feature-group").attr("id",(t=>"g_".concat(t.accession))),this.locations=this.featuresG.selectAll("g.location-group").data((t=>t.locations.map((e=>({...e,feature:t}))))).enter().append("g").attr("class","location-group"),this.coverLines=this.locations.selectAll("line.cover").data((t=>[t.fragments.reduce(((e,i)=>({start:Math.min(e.start,i.start),end:Math.max(e.end,i.end),feature:t.feature})),{start:1/0,end:-1/0})])).enter().append("line").attr("class","cover"),this.features=this.locations.selectAll("path.feature").data((t=>t.fragments.map((e=>({...e,feature:t.feature,fragments:t.fragments}))))).enter().append("path").attr("class",(t=>"".concat(this._getShape(t)," feature"))).on("click.expanded",(()=>{this._expanded?this.removeAttribute("expanded"):this.setAttribute("expanded","expanded")})).call(this.bindEvents,this),this.residues_g=le._createResidueGroup(this.featuresG),this.residues_loc=this._createResiduePaths(this.residues_g),this._contributors){this._contributors.forEach(((t,e)=>t.k=e)),this.children_g||(this.children_g=this.svg.append("g").attr("class","children-features")),this.childrenGroup=this.children_g.append("g").attr("class","children-group"),this.childGroup=this.childrenGroup.selectAll("g.child-group").data(this._contributors).enter().append("g").attr("class","child-group");const t=this.childGroup.selectAll("g.child-location-group").data((t=>(t.expanded=this._expanded,t.locations.map((e=>({...e,feature:t})))))).enter().append("g").attr("class",((t,e)=>"child-location-group clg-".concat(e)));this.coverLinesChildren=t.selectAll("line.cover").data((t=>[t.fragments.reduce(((e,i)=>({start:Math.min(e.start,i.start),end:Math.max(e.end,i.end),feature:t.feature})),{start:1/0,end:-1/0})])).enter().append("line").attr("class","cover"),this.featureChildren=t.selectAll("path.child-fragment").data((t=>t.fragments.map((e=>({...e,feature:t.feature,fragments:t.fragments}))))).enter().append("path").attr("class",(t=>"".concat(this._getShape(t)," child-fragment feature"))).call(this.bindEvents,this).on("click.expanded",(t=>{t.feature.expanded=!t.feature.expanded,this.refresh()})),this.child_residues_g=le._createResidueGroup(this.childGroup),this.child_residues_loc=this._createResiduePaths(this.child_residues_g),this._coverage&&this._coverage.length&&this._createCoverage()}this.svg.attr("height",this._layoutObj.maxYPos),this._haveCreatedFeatures=!0}_createCoverage(){this._accession=this._data&&this._data[0]&&this._data[0].accession||"_",this.coverage_mask=this.svg.append("defs").append("mask").attr("id","mask-".concat(this._accession)),this.coverageMaskFragment=this.coverage_mask.selectAll("rect").data(this._coverage).enter().append("rect").attr("y",0).attr("height",this._height)}_refreshCoverage(){this.featuresG.attr("mask",this._expanded?null:"url(#mask-".concat(this._accession,")")),this.coverageMaskFragment.attr("x",(t=>this.getXFromSeqPosition(t.start))).attr("width",(t=>this.getSingleBaseWidth()*(t.end-t.start+1))).attr("fill","white").attr("opacity",(t=>(t.value/this._contributors.length+.3)/1.3))}_refreshFeatures(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new Set(t.data().map((t=>t.feature.accession))).size;t.attr("d",(t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t.feature),t.end?t.end-t.start+1:1,e?this._getShape(t.shape?t:t.feature):"rectangle"))).attr("fill",(t=>e?this._getFeatureColor(t.feature):"white")).attr("opacity",e?1:.8/i).style("stroke",(t=>e?this._getFeatureColor(t.feature):"none")).attr("transform",(t=>"translate(".concat(this.getXFromSeqPosition(t.start),",").concat(ce+this._layoutObj.getFeatureYPos(t.feature),")"))).style("pointer-events",e?"auto":"none")}_refreshCoverLine(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.attr("x1",(t=>this.getXFromSeqPosition(t.start))).attr("x2",(t=>this.getXFromSeqPosition(t.end+1))).attr("y1",(t=>ce+this._layoutObj.getFeatureYPos(t.feature)+this._layoutObj.getFeatureHeight(t.feature)/2)).attr("y2",(t=>ce+this._layoutObj.getFeatureYPos(t.feature)+this._layoutObj.getFeatureHeight(t.feature)/2)).attr("stroke",(t=>this._getFeatureColor(t.feature))).attr("visibility",e?"visible":"hidden")}refresh(){this._haveCreatedFeatures&&(this._layoutObj.expanded=this._expanded,this._layoutObj.init(this._data,this._contributors),this.height=this._layoutObj.maxYPos,this._refreshCoverLine(this.coverLines),this._refreshFeatures(this.features),this._refreshResiduePaths(this.residues_loc,this._expanded),this._contributors&&(this.childrenGroup.attr("visibility",this._expanded?"visible":"hidden"),this._refreshCoverLine(this.coverLinesChildren,this._expanded),this._refreshFeatures(this.featureChildren,this._expanded),this.child_residues_g.attr("visibility",(()=>this._expanded?"visible":"hidden")),this._refreshResiduePaths(this.child_residues_loc),this._coverage&&this._coverage.length&&this._refreshCoverage()),this._updateHighlight(),this.svg.attr("height",this._layoutObj.maxYPos))}}const ue=le}}]);
//# sourceMappingURL=protvista-interpro-track.c43cde23.chunk.js.map