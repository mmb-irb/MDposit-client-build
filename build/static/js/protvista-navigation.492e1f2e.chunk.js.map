{"version":3,"file":"static/js/protvista-navigation.492e1f2e.chunk.js","mappings":"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","sources":["../node_modules/protvista-utils/src/Region.js","../node_modules/protvista-utils/src/TrackHighlighter.js","../node_modules/protvista-utils/src/ColorScaleParser.js","../node_modules/protvista-utils/src/String2Object.js","../node_modules/protvista-utils/src/withMargin.js","../node_modules/protvista-utils/src/index.js","../node_modules/protvista-utils/src/ScrollFilter.js","../node_modules/protvista-navigation/src/protvista-navigation.js"],"sourcesContent":["export default class Region {\n  constructor({ min = -Infinity, max = Infinity } = {}) {\n    this.segments = [];\n    this.max = max;\n    this.min = min;\n    this.regionString = null;\n  }\n\n  encode(full = false) {\n    return this.segments\n      .map(({ start, end, color }) => {\n        if (full) return `${start}:${end}${color ? `:${color}` : \"\"}`;\n        const s = start === this.min ? \"\" : start;\n        const e = end === this.max ? \"\" : end;\n        return `${s}:${e}${color ? `:${color}` : \"\"}`;\n      })\n      .join(\",\");\n  }\n\n  decode(regionString) {\n    if (typeof regionString !== \"undefined\") this.regionString = regionString;\n    if (!this.regionString) {\n      this.segments = [];\n      return;\n    }\n    this.segments = this.regionString.split(\",\").map((region) => {\n      const [_start, _end, _color, _] = region.split(\":\");\n      if (typeof _ !== \"undefined\")\n        throw new Error(\n          `there should be at most 2 ':' per region. Region: ${region}`\n        );\n      let start = _start ? Number(_start) : this.min;\n      let end = _end ? Number(_end) : this.max;\n      const color = _color !== \"\" ? _color : undefined;\n      if (start > end) [start, end] = [end, start];\n      if (start < this.min) start = this.min;\n      if (end > this.max) end = this.max;\n      if (Number.isNaN(start))\n        throw new Error(\n          `The parsed value of ${_start} is NaN. Region: ${region}`\n        );\n      if (Number.isNaN(end))\n        throw new Error(\n          `The parsed value of ${_end} is NaN. Region: ${region}`\n        );\n      if (color && !color.match(/^#[0-9a-f]{6,8}$/i))\n        throw new Error(\n          `The parsed value of ${_color} is not a color in hex format. Region: ${region}`\n        );\n\n      return {\n        start,\n        end,\n        color,\n      };\n    });\n  }\n}\n","import Region from \"./Region\";\n\nconst DEFAULT_HIGLIGHT_COLOR = \"#FFEB3B66\";\n\nconst combineRegions = (region1, region2) => {\n  if (!region1) return region2;\n  if (!region2) return region1;\n  return `${region1},${region2}`;\n};\nexport default class TrackHighlighter {\n  constructor({ element, min, max }) {\n    this.element = element;\n    this.element._highlightcolor = DEFAULT_HIGLIGHT_COLOR;\n    this.region = new Region({ min, max });\n    this.fixedHighlight = null;\n  }\n\n  set max(max) {\n    this.region.max = max;\n  }\n\n  setAttributesInElement() {\n    this.region.decode(this.element.getAttribute(\"highlight\"));\n    if (this.region.segments.length === 0) {\n      this.element._highlightstart = Number(\n        this.element.getAttribute(\"highlightstart\")\n      );\n      this.element._highlightend = Number(\n        this.element.getAttribute(\"highlightend\")\n      );\n      this.element._highlightcolor =\n        this.element.getAttribute(\"highlightcolor\") || DEFAULT_HIGLIGHT_COLOR;\n      if (\n        this.element._highlightstart !== null &&\n        this.element._highlightend !== null &&\n        typeof this.element._highlightstart === \"number\" &&\n        typeof this.element._highlightend === \"number\"\n      ) {\n        this.element._highlight = `${this.element._highlightstart}:${this.element._highlightend}`;\n        this.region.decode(\n          combineRegions(this.fixedHighlight, this.element._highlight)\n        );\n      }\n    }\n  }\n\n  setFloatAttribute(name, strValue) {\n    const value = parseFloat(strValue);\n    this.element[`_${name}`] = Number.isNaN(value) ? strValue : value;\n  }\n\n  changedCallBack(name, newValue) {\n    switch (name) {\n      case \"highlightstart\":\n      case \"highlightend\":\n        this.setFloatAttribute(name, newValue);\n        this.element._highlight =\n          Number.isNaN(this.element._highlightstart) ||\n          Number.isNaN(this.element._highlightend) ||\n          this.element._highlightstart === undefined ||\n          this.element._highlightend === undefined ||\n          this.element._highlightstart === null ||\n          this.element._highlightend === null\n            ? \"\"\n            : `${Math.max(\n                this.region.min,\n                this.element._highlightstart\n              )}:${Math.min(this.region.max, this.element._highlightend)}`;\n        break;\n      default:\n        this.element._highlight = newValue;\n    }\n    this.region.decode(\n      combineRegions(this.fixedHighlight, this.element._highlight)\n    );\n    this.element.refresh();\n  }\n\n  setFixedHighlight(region) {\n    this.fixedHighlight = region;\n    this.region.decode(combineRegions(region, this.element._highlight));\n    this.element.refresh();\n  }\n\n  appendHighlightTo(svg) {\n    this.highlighted = svg.append(\"g\").attr(\"class\", \"highlighted\");\n  }\n\n  updateHighlight() {\n    const highlighs = this.highlighted\n      .selectAll(\"rect\")\n      .data(this.region.segments);\n    highlighs\n      .enter()\n      .append(\"rect\")\n      .style(\"pointer-events\", \"none\")\n      .merge(highlighs)\n      .attr(\"fill\", (d) => (d.color ? d.color : this.element._highlightcolor))\n      .attr(\"height\", this.element._height)\n      .attr(\"x\", (d) => this.element.getXFromSeqPosition(d.start))\n      .attr(\n        \"width\",\n        (d) => this.element.getSingleBaseWidth() * (d.end - d.start + 1)\n      );\n    highlighs.exit().remove();\n  }\n}\n","export function isColorValid(color) {\n  const fakeElement = document.createElement(\"div\");\n  fakeElement.style.borderColor = \"\";\n  fakeElement.style.borderColor = color;\n  if (fakeElement.style.borderColor === \"\") return false;\n  return true;\n}\n\nexport default (text = null) => {\n  let range = [];\n  let domain = [];\n  if (text !== null && typeof text !== \"string\")\n    throw new Error(\"The attribute text has to be of type string\");\n  if (text && text.trim() !== \"\") {\n    const blocks = text.split(\",\").map(bl => bl.split(\":\"));\n    if (blocks.length < 2)\n      throw new Error(\"There should be at least 2 points to create a scale\");\n\n    range = blocks.map(bl => {\n      const color = bl[0].trim().toUpperCase();\n      if (!isColorValid(color)) {\n        throw new Error(`The color '${color} is not valid'`);\n      }\n      return color;\n    });\n    domain = blocks.map((bl, i) => {\n      const number = parseFloat(bl[1]);\n      if (Number.isNaN(number))\n        throw new Error(\n          `The second part of every point should be a number. Error in point ${i}: ${bl}`\n        );\n      return number;\n    });\n  }\n  return {\n    range,\n    domain\n  };\n};\n","const identity = x => x;\n\nexport default (\n  string = null,\n  { keyFormatter = identity, valueFormatter = identity } = {}\n) => {\n  if (string !== null && typeof string !== \"string\")\n    throw new Error(\"The attribute text has to be of type string\");\n  if (string && string.trim() !== \"\") {\n    const blocks = string.split(\",\").map(bl => bl.split(\":\"));\n    const obj = {};\n    blocks.forEach(bl => {\n      if (bl.length !== 2)\n        throw new Error(\n          `Bad block: ${bl.join(\n            \":\"\n          )}\\n The blocks of the string should follow the format KEY:VALUE`\n        );\n      obj[keyFormatter(bl[0])] = valueFormatter(bl[1]);\n    });\n    return obj;\n  }\n  return {};\n};\n","const sides = [\"left\", \"right\", \"top\", \"bottom\"];\nconst marginSides = sides.map((side) => `margin${side}`);\n\nconst withMargin = (\n  Element,\n  options = {\n    initialValue: {\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n    },\n  }\n) => {\n  class ElementWithMargin extends Element {\n    constructor() {\n      super();\n      this.margin = options.initialValue;\n    }\n\n    static get observedAttributes() {\n      return [...super.observedAttributes, ...marginSides];\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (oldValue !== newValue) {\n        if (marginSides.includes(name)) {\n          this[name] = newValue;\n        }\n      }\n      super.attributeChangedCallback(name, oldValue, newValue);\n    }\n  }\n  for (const side of sides) {\n    Object.defineProperty(ElementWithMargin.prototype, `margin${side}`, {\n      get() {\n        return this.margin[side] || 0;\n      },\n      set(value) {\n        this.margin[side] = +value;\n      },\n    });\n  }\n  return ElementWithMargin;\n};\n\nexport default withMargin;\n","import _Region from \"./Region\";\nimport _th from \"./TrackHighlighter\";\nimport _csp from \"./ColorScaleParser\";\nimport _s2o from \"./String2Object\";\nimport _sf from \"./ScrollFilter\";\nimport _withMargin from \"./withMargin\";\n\nexport const Region = _Region;\nexport const TrackHighlighter = _th;\nexport const ColorScaleParser = _csp;\nexport const String2Object = _s2o;\nexport const ScrollFilter = _sf;\nexport const withMargin = _withMargin;\n","export default class ScrollFilter {\n  constructor(element, scrollDelay = 400) {\n    this.element = element;\n    this.timeStampWheelOutside = 0;\n    this.resetScrollableTimeout = null;\n    this.scrollDelay = scrollDelay;\n  }\n\n  setElementScrollable(scrollable) {\n    this.element.setAttribute(\"scrollable\", scrollable);\n  }\n\n  startResetScrollableTimer() {\n    if (this.resetScrollableTimeout) {\n      clearTimeout(this.resetScrollableTimeout);\n    }\n    // Reset scrollable to true after a small period of time\n    this.resetScrollableTimeout = setTimeout(() => {\n      this.setElementScrollable(true);\n      this.resetScrollableTimeout = null;\n    }, this.scrollDelay);\n  }\n\n  blockScroll(timeStamp) {\n    this.timeStampWheelOutside = timeStamp;\n    this.setElementScrollable(false);\n    this.startResetScrollableTimer();\n  }\n\n  wheel({ target, timeStamp }) {\n    if (this.element.contains(target)) {\n      if (timeStamp < this.timeStampWheelOutside + this.scrollDelay) {\n        // Count this as an outside scroll as it's within the delay and it's\n        // inferred the user is doing a continuous scroll past the component\n        this.blockScroll(timeStamp);\n      } else {\n        this.setElementScrollable(true);\n      }\n    } else {\n      // Block scrolling and remember the time when the last scroll outside occurred.\n      this.blockScroll(timeStamp);\n    }\n  }\n}\n","import {\n  scaleLinear,\n  axisBottom,\n  brushX,\n  format,\n  select,\n  event as d3Event,\n} from \"d3\";\n\nimport { withMargin } from \"protvista-utils\";\n\nclass ProtVistaNavigation extends HTMLElement {\n  constructor() {\n    super();\n    this._x = null;\n    this._padding = 0;\n    this.height = 40;\n    this.dontDispatch = false;\n  }\n\n  _refreshWidth() {\n    this.style.display = \"block\";\n    this.style.width = \"100%\";\n    this.width = this.offsetWidth - this.margin.left - this.margin.right;\n    if (this.width > 0) {\n      this._padding = 10;\n    }\n  }\n\n  connectedCallback() {\n    this._refreshWidth();\n    if (this.closest(\"protvista-manager\")) {\n      this.manager = this.closest(\"protvista-manager\");\n      this.manager.register(this);\n    }\n    this._length = parseFloat(this.getAttribute(\"length\"));\n    this._displaystart = parseFloat(this.getAttribute(\"displaystart\")) || 1;\n    this._displayend =\n      parseFloat(this.getAttribute(\"displayend\")) || this._length;\n    this._highlightStart = parseFloat(this.getAttribute(\"highlightStart\"));\n    this._highlightEnd = parseFloat(this.getAttribute(\"highlightEnd\"));\n    this._rulerstart = parseFloat(this.getAttribute(\"rulerStart\")) || 1;\n\n    this._onResize = this._onResize.bind(this);\n\n    this._createNavRuler();\n  }\n\n  disconnectedCallback() {\n    if (this.manager) {\n      this.manager.unregister(this);\n    }\n    if (this._ro) {\n      this._ro.unobserve(this);\n    }\n    window.removeEventListener(\"resize\", this._onResize);\n  }\n\n  static get observedAttributes() {\n    return [\n      \"length\",\n      \"displaystart\",\n      \"displayend\",\n      \"highlightStart\",\n      \"highlightEnd\",\n      \"width\",\n      \"rulerstart\",\n    ];\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue !== newValue) {\n      this[`_${name}`] = parseFloat(newValue);\n      this._updateNavRuler();\n    }\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  set width(width) {\n    this._width = width;\n  }\n\n  _createNavRuler() {\n    this._x = scaleLinear().range([this._padding, this.width - this._padding]);\n    this._x.domain([this._rulerstart, this._rulerstart + this._length - 1]);\n\n    select(this).selectAll(\"div\").remove();\n    this._container = select(this).append(\"div\").attr(\"class\", \"container\");\n\n    this._svg = this._container\n      .append(\"svg\")\n      .attr(\"id\", \"\")\n      .attr(\"width\", this.width)\n      .attr(\"height\", this.height);\n\n    this._xAxis = axisBottom(this._x);\n\n    this._displaystartLabel = this._svg\n      .append(\"text\")\n      .attr(\"class\", \"start-label\")\n      .attr(\"x\", 0)\n      .attr(\"y\", this.height - this._padding);\n\n    this._displayendLabel = this._svg\n      .append(\"text\")\n      .attr(\"class\", \"end-label\")\n      .attr(\"x\", this.width)\n      .attr(\"y\", this.height - this._padding)\n      .attr(\"text-anchor\", \"end\");\n    this._axis = this._svg\n      .append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .call(this._xAxis);\n\n    this._viewport = brushX()\n      .extent([\n        [this._padding, 0],\n        [this.width - this._padding, this.height * 0.51],\n      ])\n      .on(\"brush\", () => {\n        if (d3Event.selection) {\n          this._displaystart = format(\"d\")(\n            this._x.invert(d3Event.selection[0])\n          );\n          this._displayend = format(\"d\")(this._x.invert(d3Event.selection[1]));\n          if (!this.dontDispatch)\n            this.dispatchEvent(\n              new CustomEvent(\"change\", {\n                detail: {\n                  displayend: this._displayend,\n                  displaystart: this._displaystart,\n                  extra: { transform: d3Event.transform },\n                },\n                bubbles: true,\n                cancelable: true,\n              })\n            );\n          this._updateLabels();\n          this._updatePolygon();\n        }\n      });\n\n    this._brushG = this._svg\n      .append(\"g\")\n      .attr(\"class\", \"brush\")\n      .call(this._viewport);\n\n    this._brushG.call(this._viewport.move, [\n      this._x(this._displaystart),\n      this._x(this._displayend),\n    ]);\n\n    this.polygon = this._svg\n      .append(\"polygon\")\n      .attr(\"class\", \"zoom-polygon\")\n      .attr(\"fill\", \"#777\")\n      .attr(\"fill-opacity\", \"0.3\");\n    this._updateNavRuler();\n\n    if (\"ResizeObserver\" in window) {\n      this._ro = new ResizeObserver(this._onResize);\n      this._ro.observe(this);\n    }\n    window.addEventListener(\"resize\", this._onResize);\n  }\n\n  _onResize() {\n    this._refreshWidth();\n    this._x = this._x.range([this._padding, this.width - this._padding]);\n    this._svg.attr(\"width\", this.width);\n    this._viewport.extent([\n      [this._padding, 0],\n      [this.width - this._padding, this.height * 0.51],\n    ]);\n    this._brushG.call(this._viewport);\n    this._updateNavRuler();\n  }\n\n  _updateNavRuler() {\n    if (this._x) {\n      this._container\n        .style(\"padding-left\", `${this.margin.left}px`)\n        .style(\"padding-right\", `${this.margin.right}px`)\n        .style(\"padding-top\", `${this.margin.top}px`)\n        .style(\"padding-bottom\", `${this.margin.bottom}px`);\n      this._x.domain([this._rulerstart, this._rulerstart + this._length - 1]);\n      this._axis.call(this._xAxis);\n      this._updatePolygon();\n      this._updateLabels();\n      if (this._brushG) {\n        this.dontDispatch = true;\n        this._brushG.call(this._viewport.move, [\n          this._x(this._displaystart),\n          this._x(this._displayend),\n        ]);\n        this.dontDispatch = false;\n      }\n    }\n  }\n\n  _updateLabels() {\n    if (this._displaystartLabel)\n      this._displaystartLabel.text(this._displaystart);\n    if (this._displayendLabel)\n      this._displayendLabel.attr(\"x\", this.width).text(this._displayend);\n  }\n\n  _updatePolygon() {\n    if (this.polygon)\n      this.polygon.attr(\n        \"points\",\n        `${this._x(this._displaystart)},${this.height / 2}\n        ${this._x(this._displayend)},${this.height / 2}\n        ${this.width},${this.height}\n        0,${this.height}`\n      );\n  }\n}\n\nexport default withMargin(ProtVistaNavigation);\n"],"names":["Region","constructor","min","Infinity","max","arguments","length","undefined","this","segments","regionString","encode","full","map","_ref","start","end","color","join","decode","split","region","_start","_end","_color","_","Error","Number","isNaN","match","DEFAULT_HIGLIGHT_COLOR","combineRegions","region1","region2","identity","x","sides","marginSides","side","Element","options","initialValue","top","bottom","left","right","ElementWithMargin","super","margin","observedAttributes","attributeChangedCallback","name","oldValue","newValue","includes","Object","defineProperty","prototype","get","set","value","TrackHighlighter","element","_highlightcolor","fixedHighlight","setAttributesInElement","getAttribute","_highlightstart","_highlightend","_highlight","setFloatAttribute","strValue","parseFloat","changedCallBack","Math","refresh","setFixedHighlight","appendHighlightTo","svg","highlighted","append","attr","updateHighlight","highlighs","selectAll","data","enter","style","merge","d","_height","getXFromSeqPosition","getSingleBaseWidth","exit","remove","ColorScaleParser","text","range","domain","trim","blocks","bl","toUpperCase","fakeElement","document","createElement","borderColor","isColorValid","i","number","String2Object","string","keyFormatter","valueFormatter","obj","forEach","ScrollFilter","scrollDelay","timeStampWheelOutside","resetScrollableTimeout","setElementScrollable","scrollable","setAttribute","startResetScrollableTimer","clearTimeout","setTimeout","blockScroll","timeStamp","wheel","target","contains","withMargin","_withMargin","ProtVistaNavigation","HTMLElement","_x","_padding","height","dontDispatch","_refreshWidth","display","width","offsetWidth","connectedCallback","closest","manager","register","_length","_displaystart","_displayend","_highlightStart","_highlightEnd","_rulerstart","_onResize","bind","_createNavRuler","disconnectedCallback","unregister","_ro","unobserve","window","removeEventListener","_updateNavRuler","_width","scaleLinear","select","_container","_svg","_xAxis","axisBottom","_displaystartLabel","_displayendLabel","_axis","call","_viewport","brushX","extent","on","d3Event","selection","format","invert","dispatchEvent","CustomEvent","detail","displayend","displaystart","extra","transform","bubbles","cancelable","_updateLabels","_updatePolygon","_brushG","move","polygon","ResizeObserver","observe","addEventListener"],"sourceRoot":""}