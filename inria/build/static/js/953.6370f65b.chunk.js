"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[953,5144],{10939:(e,a,t)=>{t.d(a,{A:()=>f});var n=t(89379),s=t(80045),r=t(65043),l=t(12110),o=t(17604);const i="style_container__M9GCG";var c=t(70579);const u=["overrideComponent"],d={opacity:[0,1]};(0,o.A)()||(d.transform=["translateY(50px)","translateY(0)"]);const h={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},f=(0,r.forwardRef)(((e,a)=>{let{overrideComponent:t}=e,o=(0,s.A)(e,u);const f=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{const e=f.current&&f.current.firstElementChild;if(!e||!e.animate)return;const a=Array.from(document.querySelectorAll("main section")).findIndex((a=>e===a)),t=e.animate(d,(0,n.A)((0,n.A)({},h),{},{delay:150*a}));return()=>t.cancel()}),[]);const m=t?"section":l.A;return(0,c.jsx)("div",{ref:f,className:i,children:(0,c.jsx)(m,(0,n.A)((0,n.A)({component:"section"},o),{},{ref:a}))})}))},34088:(e,a,t)=>{t.d(a,{A:()=>f});var n=t(89379),s=t(65043),r=t(43126),l=t(10939);const o="style_rnd__Txifm",i="style_floating-card__HHpby";var c=t(70579);const u=(0,s.lazy)((()=>Promise.all([t.e(7784),t.e(8095),t.e(3845),t.e(9070),t.e(2594),t.e(8280),t.e(7955),t.e(6064),t.e(1235),t.e(9117)]).then(t.bind(t,92428))));let d=0;const h=e=>{const a=e.viewerRef||(0,s.useRef)(null),[t,h]=(0,s.useState)((()=>{const{innerWidth:e,innerHeight:a,scrollY:t}=window,n=document.querySelector("main").offsetTop,s=Math.max(Math.min(e/4,a/4),150),r=1.5*s;return{width:2*s,height:r,x:0,y:a-n-r-20+t}}));return(0,c.jsx)(r.p,{position:{x:t.x,y:t.y},size:{width:t.width,height:t.height},style:{zIndex:(d+=1,d)},className:o,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{h((0,n.A)({},t))},onResizeStart:()=>{h((0,n.A)({},t))},onDragStop:(e,a)=>{0===e.layerX&&0===e.layerY||t.x===a.x&&t.y===a.y||h((0,n.A)((0,n.A)({},t),{},{x:a.x,y:a.y}))},onResize:()=>a.current&&a.current.autoResize(),onResizeStop:(e,a,t,s,r)=>{h((0,n.A)({width:t.style.width,height:t.style.height},r))},children:(0,c.jsx)(l.A,{className:i,elevation:4,children:(0,c.jsx)(s.Suspense,{fallback:null,children:(0,c.jsx)(u,(0,n.A)({className:i,ref:a,startsPlaying:!1},e))})})})},f=e=>{let{newViewer:a,nailing:t=!0,onNail:r,onClose:l}=e;const[o,i]=(0,s.useState)([]),u=[...o],d=(0,s.useRef)([]);if(a){const e=()=>{let e=0;for(;e<999;){if(-1===d.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};a.id=e(),a.close=()=>{t&&i((e=>{const t=[...e],n=e.indexOf(a);return-1!==n&&t.splice(n,1),t})),l&&l(a),d.current.push(a.id)},t&&(a.nail=()=>{i((e=>[...e,a])),r&&r(a),d.current.push(a.id)}),u.push(a)}return u.map((e=>(0,c.jsx)(h,(0,n.A)({},e),e.id)))}},20953:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});var n=t(65043),s=t(10939),r=t(34088),l=t(85144),o=t(58338),i=t(41399),c=t(29449),u=t(95747),d=t(17545),h=t(26494),f=t(85865),m=t(99070),p=t(70579);const x=(0,n.lazy)((()=>Promise.all([t.e(2577),t.e(1483)]).then(t.bind(t,53099)))),y=()=>{const{accessionAndMdNumber:e,files:a}=(0,n.useContext)(c.f),[t,y]=(0,n.useState)(null),[g,A]=(0,n.useState)(14),[v,b]=(0,n.useState)(20),{loading:w,payload:_,error:j}=(0,o.A)("".concat(u.nP,"/").concat(e,"/analyses/markov/")),N=(0,n.useMemo)((()=>a.filter((e=>e.includes("markov_screenshot"))).sort().map((a=>"".concat(u.nP,"/").concat(e,"/files/").concat(a)))),[a]),S=(0,i.A)(N),z=S.some((e=>e.loading)),C=(0,n.useMemo)((()=>{if(!z)return S.map((e=>e&&e.payload?"data:image/png;base64,"+Buffer.from(e.payload,"binary").toString("base64"):null))}),[S,z]),{graphData:M,availableLinks:k}=(0,n.useMemo)((()=>{if(!_)return{};const e=_.populations[0],a=[];_.populations.forEach(((t,n)=>{if(n>=g)return;const s=1e4*t/e,r={id:n,radius:Math.sqrt(s/Math.PI),value:_.frames[n],text:"Population: ".concat(Math.round(1e4*t)/100," %\nFrame: ").concat(_.frames[n])};a.push(r)}));const t=a.length,n=[];_.rmsd_matrix.forEach(((e,a)=>{a>=t||e.forEach(((e,s)=>{s>=t||a>=s||n.push(e)}))}));const s=n.length,r=[];if(v>0){const e=n.sort(),a=e[0],l=v<s?e[v-1]:e[s-1],o=l===a?1:9/(l-a);_.rmsd_matrix.forEach(((e,n)=>{n>=t||e.forEach(((e,s)=>{if(s>=t)return;if(n>=s)return;if(e>l)return;const i={source:n,target:s,width:10-(e-a)*o};r.push(i)}))}))}return{graphData:{nodes:a,links:r},availableLinks:s}}),[_,g,v]),R=(0,n.useCallback)((e=>{y(e.value)}),[y]);return w?(0,p.jsx)(d.A,{}):j?j.toString():_?z?(0,p.jsx)(d.A,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(s.A,{children:[(0,p.jsx)(x,{data:M,images:C,selectedNodeValue:t,onSelectNode:R,className:l.default.graph}),(0,p.jsxs)(h.A,{children:[(0,p.jsxs)("div",{className:l.default.horizontal,children:[(0,p.jsx)(f.A,{variant:"h7",className:l.default.wide25,children:"Number of nodes: "}),(0,p.jsx)(m.Ay,{title:"Change number of nodes",value:g,"aria-labelledby":"continuous-slider",onChange:(e,a)=>{A(a)},min:2,max:_.populations.length,valueLabelDisplay:"auto",className:l.default.wide75})]}),(0,p.jsxs)("div",{className:l.default.horizontal,children:[(0,p.jsx)(f.A,{variant:"h7",className:l.default.wide25,children:"Number of links: "}),(0,p.jsx)(m.Ay,{title:"Change the RMSD cutoff",value:v,"aria-labelledby":"continuous-slider",onChange:(e,a)=>{b(a)},min:0,max:k,valueLabelDisplay:"auto",className:l.default.wide75})]})]})]}),(0,p.jsx)(r.A,{newViewer:t?{requestedFrame:t}:null,onNail:e=>y((a=>e.requestedFrame===a?null:a)),onClose:e=>y((a=>e.requestedFrame===a?null:a))})]}):"Something bad happened"}},85144:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});const n={graph:"style_graph__hjtUJ",horizontal:"style_horizontal__xMVF8",wide25:"style_wide25__aa51e",wide75:"style_wide75__n-46i"}}}]);
//# sourceMappingURL=953.6370f65b.chunk.js.map