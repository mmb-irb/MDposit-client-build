"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[1772],{10939:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(89379),s=n(80045),a=n(65043),l=n(12110),o=n(17604);const i="style_container__M9GCG";var c=n(70579);const d=["overrideComponent"],u={opacity:[0,1]};(0,o.A)()||(u.transform=["translateY(50px)","translateY(0)"]);const m={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},h=(0,a.forwardRef)(((e,t)=>{let{overrideComponent:n}=e,o=(0,s.A)(e,d);const h=(0,a.useRef)(null);(0,a.useLayoutEffect)((()=>{const e=h.current&&h.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex((t=>e===t)),n=e.animate(u,(0,r.A)((0,r.A)({},m),{},{delay:150*t}));return()=>n.cancel()}),[]);const p=n?"section":l.A;return(0,c.jsx)("div",{ref:h,className:i,children:(0,c.jsx)(p,(0,r.A)((0,r.A)({component:"section"},o),{},{ref:t}))})}))},60676:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(65043),s=n(26494);const a="style_horizontal__KW-k9",l="style_vertical__YKrT2",o="style_heatmap-horizontal__HjdIF",i="style_heatmap-vertical__utgJY";var c=n(85941),d=n(70579);const u=e=>{let{title:t="",maxValue:n=1,minValue:u=0,colorPlan:m,splits:h=19,vertical:p=!1,className:f}=e;const{legendData:x,legendLabels:g}=(0,r.useMemo)((()=>{const e=[];if(u===n)e.push(u);else for(let r=u;r<=n;r+=(n-u)/h)e.push(r);let t=e.map((e=>Math.round(e)));if(t.length>1)for(let n=1;new Set(t).size<t.length;n++)t=e.map((e=>Math.round(e*10**n)/10**n));return{legendData:p?e.map((e=>[e])):[e],legendLabels:t}}),[n,u,h,p]);return(0,d.jsxs)(s.A,{className:f||(p?l:a),children:[t,(0,d.jsx)(c.A,{data:x,xAxisValues:p?[""]:g,yAxisValues:p?g:[""],colorPlan:m,flippedXAxisValues:!1,className:p?i:o})]})}},85941:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(65043),s=n(77691),a=n(32577),l=n(13232),o=n(70579);const i="normal 10px sans-serif",c="normal 14px sans-serif",d=(0,r.memo)((e=>{let{data:t,xAxisValues:n=[],yAxisValues:d=[],xAxisLabel:u,yAxisLabel:m,verticalPadding:h=0,colorPlan:p=["red","white","blue"],colorScale:f,onTooltip:x,onClick:g,flippedXAxisValues:y=!0,margin:v={top:10,right:10,bottom:10,left:10},className:_}=e;if(!t)throw new Error("Data is missing. Data is mandatory for the heatmap representation");if(n.length!==new Set(n).size)throw console.log(n),new Error("Duplicated values in the X axis. See console logs");if(d.length!==new Set(d).size)throw console.log(d),new Error("Duplicated values in the Y axis. See console logs");0===n.length&&(n=Array.from(Array(t[0].length).keys())),0===d.length&&(d=Array.from(Array(t[0].length).keys()));const A=[].concat(...t),w=Math.max(...A),b=Math.min(...A),C=[].concat(...Array(t.length).fill(n)),E=[];for(const r of d)E.push(...Array(n.length).fill(r));const j=[];for(const r in A)j.push({v:A[r],x:C[r],y:E[r]});const N=(0,r.useRef)(null),M=(0,r.useRef)(null),[,V]=(0,r.useState)(null),L=(0,s.jY)("|",i).height,k=(0,s.jY)("|",c).height+9,S=Math.max(...n.map((e=>(0,s.q_)(e,i))))+9,R=Math.max(...d.map((e=>(0,s.q_)(e,i)))),Y=u?k:0,z=m?k+9:0,D=y?S+Y:L+Y,I=1===d.length?Math.max(R,(0,s.q_)(m,c)):R+z,O={top:v.top,right:v.right,bottom:D+v.bottom,left:I+v.left};return(0,r.useEffect)((()=>{M.current&&M.current.forEach((e=>e.remove()));const e=N.current,{clientWidth:r,clientHeight:s}=e.parentElement,o=r-O.left-O.right,i=s-O.top-O.bottom,c=o/(1.05*(y?L:S)),_=i/(1.05*L),A=Math.ceil(n.length/c),C=Math.ceil(d.length/_),E=document.createElement("CANVAS");(0,a.Ltv)(e).node().appendChild(E);const j=(0,a.Ltv)(E).attr("id","canvas").attr("width",o).attr("height",i).style("position","absolute").style("top",O.top+"px").style("left",O.left+"px").style("cursor",g?"pointer":void 0),k=j.node().getContext("2d"),R=(0,a.Ltv)(e).append("svg").attr("id","svg").attr("viewBox",[0,0,r,s]),Y=(0,a.WH)().range([O.left,o+O.left]).domain(n).paddingInner(0),I=R.append("g").attr("transform","translate(0,"+(i+O.top)+")").call((0,a.l78)(Y).tickFormat(((e,t)=>t%A===0?e:""))).selectAll("text");y&&I.style("text-anchor","end").attr("dx","-9px").attr("dy","-9px").attr("transform","rotate(-90)"),R.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",O.left+o/2).attr("y",O.top+i+D).text(u);const F=(0,a.WH)().domain(d).range([O.top,i+O.top]).padding(h);R.append("g").attr("transform","translate("+O.left+", 0)").call((0,a.V4s)(F).tickFormat(((e,t)=>t%C===0?e:""))),1===d.length?R.append("text").attr("class","y label").attr("text-anchor","start").attr("x",0).attr("y",v.top+i).text(m):R.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-(O.top+i/2)).attr("y",v.left+z-9-9).attr("transform","rotate(-90)").text(m);const H=f||(0,a.m4Y)().range(p).domain([b,(b+w)/2,w]),q=Y.bandwidth(),P=F.bandwidth();t.forEach(((e,t)=>{const r=F(d[t])-O.top;e.forEach(((e,t)=>{const s=Y(n[t])-O.left;k.fillStyle=H(e),k.fillRect(s,r,q,P)}))}));const T=e=>{const r=E.getBoundingClientRect(),s=e.clientX-r.left,a=e.clientY-r.top;let l=Math.floor(s/Y.step()),o=Math.floor(a/F.step());const i=t[0].length-1;l<0&&(l=0),l>i&&(l=i);const c=t.length-1;o<0&&(o=0),o>c&&(o=c);const u=n[l],m=d[o];return{xIndex:l,yIndex:o,value:t[o][l],xAxisValue:u,yAxisValue:m}};let W;x&&(W=document.createElement("div"),Object.assign(W.style,{display:"none",position:"absolute",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),e.appendChild(W),E.onmousemove=t=>{const n=T(t);W.innerText=x(n),W.style.display="inline-block";const{x:r,y:s}=(0,l.L)(e,W,{x:t.clientX,y:t.clientY},3);W.style.left=r+"px",W.style.top=s+"px"},E.onmouseleave=()=>{W.style.display="none"}),g&&(E.onmousedown=e=>{const t=T(e);g(t)}),M.current=W?[R,j,W]:[R,j];const X=()=>{V({innerWidth:window.innerWidth,innerHeight:window.innerHeight})};return window.addEventListener("resize",X),()=>{window.removeEventListener("resize",X)}})),(0,o.jsx)("div",{className:_,style:_?void 0:{height:"600px",width:"600px"},children:(0,o.jsx)("div",{ref:N,id:"container",style:{position:"relative",width:"100%",height:"100%"}})})}))},48838:(e,t,n)=>{n.d(t,{A:()=>M});var r=n(65043);const s="style_default__XssaH",a="style_horizontal__FFwZj",l="style_thin__lEVc2",o="style_scroll__uw-00",i="style_flexible__Jijoh",c="style_normal__ymO1T",d="style_letter__NUedA",u="style_margined__ItdEs",m="style_extra-right-margin__ixA6k",h="style_small-up-number__6VamN",p="style_pivot__Q44O7",f="style_pointer__QFoOj",x="style_button__9jcdg";var g=n(26494),y=n(17392),v=n(92127),_=n(12639),A=n(60676),w=n(97318),b=n(32577),C=n(29449),E=n(70579);const j=e=>{const t=document.createElement("span");t.className=p;const n=document.createElement("span");return n.className=f,n.lang="pointer",t.appendChild(n),e.appendChild(t),n},N=["white","yellow","red"],M=e=>{let{residueValues:t,colorPlan:n=N,legendTitle:p,onSelect:f,onDeselect:M,onClean:V,onTooltip:L,forcedResiduesSelection:k,className:S}=e;const{topology:R}=(0,r.useContext)(C.f),{sequences:Y,residueData:z,maxValue:D,minValue:I}=(0,r.useMemo)((()=>{if(!R)return{};const e=R.residueCount,r={},s=new Array(e).fill(null);for(let n=0;n<e;n++){const e=t[n];if(null===e)continue;const a=R.getResidueByIndex(n),l={index:n,letter:a.letter,number:a.referenceNumber||a.number,value:e};s[n]=l;const o=a.chainName,i=r[o];i?i.push(l):r[o]=[l]}const a=Object.entries(r).map((e=>{let[t,n]=e;return{name:"Chain "+t,residues:n}})),l=Math.max(...t),o=Math.min(...t);if(n){const e=(0,b.m4Y)().range(n).domain([o,(o+l)/2,l]);s.forEach((t=>{t&&(t.color=e(t.value))}))}return{sequences:a,residueData:s,maxValue:l,minValue:o}}),[t,n,R]),[O,F,H]=(0,w.A)(),q=(0,r.useRef)([]),P=(0,r.useState)([]),[T,W]=k||P,X=(0,r.useRef)(T);(0,r.useEffect)((()=>{X.current=T}),[T]),(0,r.useEffect)((()=>{const e=document.getElementById("manager");if(!e)return;const t=e=>{const t=e.target;"residue"===t.lang&&j(t)},n=e=>{const t=e.target;"residue"===t.lang&&t.removeChild(t.lastChild)},r=e=>{const t=e.target;if("residue"!==t.lang)return;t.removeChild(t.lastChild);const n=t.getAttribute("residueindex"),r=z[n],s=X.current.indexOf(r),a=-1===s,l=r.tagcolor?r.tagcolor:O();if(a){r.tagcolor=l,f&&f(r,n,l);const e=j(t);e.style["border-top-color"]=l,q.current.push(e),X.current.push(r)}else{r.tagcolor=null,M&&M(r,n,l);const e=t.lastChild;F(l),t.removeChild(e),q.current.splice(s,1),X.current.splice(s,1)}j(t),W([...X.current])};return e.addEventListener("mouseover",t,!0),e.addEventListener("mouseout",n,!0),e.addEventListener("mousedown",r,!0),()=>{e.removeEventListener("mouseover",t,!0),e.removeEventListener("mouseout",n,!0),e.removeEventListener("mousedown",r,!0),H()}}),[Y,W,z,f,M,O,F,H]);if(R)return(0,E.jsx)("div",{className:S||s,children:(0,E.jsxs)("div",{className:a,children:[n&&(0,E.jsx)(A.A,{title:p,minValue:I,maxValue:D,colorPlan:n,vertical:!0,className:l}),(0,E.jsx)(g.A,{className:o,id:"manager",children:Y.map((e=>(0,E.jsxs)("details",{open:!0,children:[(0,E.jsx)("summary",{style:{cursor:"pointer"},children:e.name}),(0,E.jsx)("span",{className:i,children:e.residues.reduce(((e,t,n)=>{n%10===0&&e.push([]);return e[e.length-1].push(t),e}),[]).map(((e,t)=>{const n=e[e.length-1].number||10*(t+1),r=e.map(((e,t)=>(0,E.jsx)("span",{lang:"residue",className:c,title:L&&L(e,e.index),residueindex:e.index,children:(0,E.jsx)("span",{className:d,style:{backgroundColor:e.color},children:e.letter})},t)));return(0,E.jsxs)("span",{className:u,children:[r,10===r.length&&(0,E.jsx)("span",{className:m,children:(0,E.jsx)("span",{className:h,children:n})})]},t)}))})]},e.name)))}),T.length>0&&(0,E.jsx)(y.A,{title:"Clean selections",onClick:()=>{for(const e of q.current){const t=e.parentElement;t.parentElement.removeChild(t)}q.current=[],H(),T.forEach((e=>{e.tagcolor=null})),W([]),V&&V()},className:x,size:"large",children:(0,E.jsx)(v.g,{icon:_.yLS})})]})})}},97318:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(65043);const s=["red","green","blue","orange","purple"],a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";const n=(0,r.useRef)([]);return(0,r.useMemo)((()=>[()=>{for(const t of e){if(-1===n.current.indexOf(t))return n.current.push(t),t}return t},e=>{if(e===t)return;const r=n.current.indexOf(e);if(-1===r)throw new Error("Color ".concat(e," is not used"));n.current.splice(r,1)},()=>{n.current=[]}]),[e,t])}},12110:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(58168),s=n(98587),a=n(65043),l=n(58387),o=n(98610),i=n(34535),c=n(98206),d=n(63336),u=n(92532),m=n(72372);function h(e){return(0,m.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var p=n(70579);const f=["className","raised"],x=(0,i.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),g=a.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiCard"}),{className:a,raised:i=!1}=n,d=(0,s.A)(n,f),u=(0,r.A)({},n,{raised:i}),m=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},h,t)})(u);return(0,p.jsx)(x,(0,r.A)({className:(0,l.A)(m.root,a),elevation:i?8:void 0,ref:t,ownerState:u},d))}))}}]);
//# sourceMappingURL=1772.4b414292.chunk.js.map