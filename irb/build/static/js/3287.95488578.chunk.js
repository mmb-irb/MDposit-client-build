"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[134,3287],{10939:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(89379),r=n(80045),o=n(65043),s=n(12110),c=n(17604);const i="style_container__M9GCG";var l=n(70579);const d=["overrideComponent"],u={opacity:[0,1]};(0,c.A)()||(u.transform=["translateY(50px)","translateY(0)"]);const h={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},m=(0,o.forwardRef)(((e,t)=>{let{overrideComponent:n}=e,c=(0,r.A)(e,d);const m=(0,o.useRef)(null);(0,o.useLayoutEffect)((()=>{const e=m.current&&m.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex((t=>e===t)),n=e.animate(u,(0,a.A)((0,a.A)({},h),{},{delay:150*t}));return()=>n.cancel()}),[]);const x=n?"section":s.A;return(0,l.jsx)("div",{ref:m,className:i,children:(0,l.jsx)(x,(0,a.A)((0,a.A)({component:"section"},c),{},{ref:t}))})}))},34088:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(89379),r=n(65043),o=n(43126),s=n(10939);const c="style_rnd__Txifm",i="style_floating-card__HHpby";var l=n(70579);const d=(0,r.lazy)((()=>Promise.all([n.e(7784),n.e(8095),n.e(3845),n.e(9070),n.e(2594),n.e(8280),n.e(7955),n.e(6064),n.e(1235),n.e(9117)]).then(n.bind(n,92428))));let u=0;const h=e=>{const t=e.viewerRef||(0,r.useRef)(null),[n,h]=(0,r.useState)((()=>{const{innerWidth:e,innerHeight:t,scrollY:n}=window,a=document.querySelector("main").offsetTop,r=Math.max(Math.min(e/4,t/4),150),o=1.5*r;return{width:2*r,height:o,x:0,y:t-a-o-20+n}}));return(0,l.jsx)(o.p,{position:{x:n.x,y:n.y},size:{width:n.width,height:n.height},style:{zIndex:(u+=1,u)},className:c,"data-rnd":!0,bounds:"window",cancel:"canvas, [data-popover], #preventDragSize, .prevent-drag",onDragStart:()=>{h((0,a.A)({},n))},onResizeStart:()=>{h((0,a.A)({},n))},onDragStop:(e,t)=>{0===e.layerX&&0===e.layerY||n.x===t.x&&n.y===t.y||h((0,a.A)((0,a.A)({},n),{},{x:t.x,y:t.y}))},onResize:()=>t.current&&t.current.autoResize(),onResizeStop:(e,t,n,r,o)=>{h((0,a.A)({width:n.style.width,height:n.style.height},o))},children:(0,l.jsx)(s.A,{className:i,elevation:4,children:(0,l.jsx)(r.Suspense,{fallback:null,children:(0,l.jsx)(d,(0,a.A)({className:i,ref:t,startsPlaying:!1},e))})})})},m=e=>{let{newViewer:t,nailing:n=!0,onNail:o,onClose:s}=e;const[c,i]=(0,r.useState)([]),d=[...c],u=(0,r.useRef)([]);if(t){const e=()=>{let e=0;for(;e<999;){if(-1===u.current.indexOf(e))return e;e+=1}console.error("Maximum number of viewers reached")};t.id=e(),t.close=()=>{n&&i((e=>{const n=[...e],a=e.indexOf(t);return-1!==a&&n.splice(a,1),n})),s&&s(t),u.current.push(t.id)},n&&(t.nail=()=>{i((e=>[...e,t])),o&&o(t),u.current.push(t.id)}),d.push(t)}return d.map((e=>(0,l.jsx)(h,(0,a.A)({},e),e.id)))}},53287:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var a=n(89379),r=n(65043),o=n(26494),s=n(71806),c=n(84882),i=n(28076),l=n(10039),d=n(73460),u=n(37597),h=n(51962),m=n(10939),x=n(34088),p=n(17545),A=n(58338),f=n(29449),y=n(95747),v=n(48940),b=n(10134),j=n(70579);const S=(0,r.lazy)((()=>Promise.all([n.e(2577),n.e(2460),n.e(5291),n.e(5077)]).then(n.bind(n,75291)))),g=["black","red","orange","yellow","blue","green","purple"],z=()=>{const{accession:e,accessionAndMdNumber:t,metadata:n,analyses:z}=(0,r.useContext)(f.f),{loading:k,payload:w,error:C}=(0,A.A)("".concat(y.nP,"/").concat(t,"/analyses/density/")),[M,_]=(0,r.useState)({}),{densityData:R,frameStep:N,xAxisStep:D,xAxisLabel:P,isEnsemble:E,xTooltip:H}=(0,r.useMemo)((()=>{if(!w||!w.data||!w.data.comps)return{};const e={},t={};w.data.comps.forEach(((n,a)=>{const r={};r.data=n.dens,r.color=g[a%g.length],r.average=(0,v.c)(r.data),r.stddev=(0,v.c)(n.stdv),r.densityStdDev=n.stdv;const o=n.name;e[o]=r,t[o]=!0})),_(t);const a="ensemble"===n.TYPE,r=w.data.z,o=r[1]-r[0];return{densityData:e,frameStep:1,xAxisStep:o,xAxisLabel:"Distance (\xc5)",isEnsemble:a,xTooltip:e=>"".concat(e.toFixed(2)," \xc5"),xValues:r}}),[n,w]),[I,L]=(0,r.useState)(null),O=(0,r.useMemo)((()=>[{x:I,attr:{fill:"#c8c8c8"}}]),[I]);if(k)return(0,j.jsx)(p.A,{});if(C)return C.toString();if(!w)return"Something bad happened loading density data";const V=e=>Math.round(100*e)/100;return console.log("Render"),(0,j.jsxs)(r.Suspense,{fallback:(0,j.jsx)(p.A,{}),children:[(0,j.jsx)(m.A,{className:b.default.card,children:(0,j.jsx)(o.A,{children:(0,j.jsxs)(s.A,{padding:"checkbox",children:[(0,j.jsx)(c.A,{children:(0,j.jsxs)(i.A,{children:[(0,j.jsx)(l.A,{children:"selected chains"}),(0,j.jsx)(l.A,{children:"mean"}),(0,j.jsx)(l.A,{children:"mean of standard deviations"})]})}),(0,j.jsx)(d.A,{children:Object.entries(R).map(((e,t)=>{let[n,r]=e;return(0,j.jsxs)(i.A,{children:[(0,j.jsx)(l.A,{children:(0,j.jsx)(u.A,{onChange:()=>_((e=>(e[n]=!e[n],(0,a.A)({},e)))),control:(0,j.jsx)(h.A,{checked:M[n],style:{color:g[t]}}),label:n})}),(0,j.jsx)(l.A,{children:V(r.average)}),(0,j.jsx)(l.A,{children:V(r.stddev)})]},n)}))})]})})}),(0,j.jsx)(m.A,{className:b.default.card,children:(0,j.jsx)(o.A,{children:(0,j.jsx)(S,{yData:R,step:D,xAxisLabel:P,type:E?"dots":"line",xTooltip:H,xScaleFactor:1,yAxisLabel:"Density",onSelect:L,selfLegend:!1,dataDisplay:M,marks:O,densityStdDev:!0})})}),(0,j.jsx)(x.A,{newViewer:"number"===typeof I?{accession:e,xSelection:I,xAxisStep:D}:null,onNail:e=>L((t=>e.xSelection===t?null:t)),onClose:e=>L((t=>e.xSelection===t?null:t))})]})}},48940:(e,t,n)=>{n.d(t,{G:()=>r,c:()=>a});const a=e=>{if(!e)return;return e.reduce(((e,t)=>e+t),0)/e.length},r=e=>{if(!e)return;const t=e.reduce(((e,t)=>e+t),0),n=e.length,a=t/n,r=Math.sqrt(e.map((e=>Math.pow(e-a,2))).reduce(((e,t)=>e+t))/n);return{mean:a,stdv:r}}},51962:(e,t,n)=>{n.d(t,{A:()=>M});var a=n(98587),r=n(58168),o=n(65043),s=n(58387),c=n(98610),i=n(60061),l=n(33064),d=n(59662),u=n(70579);const h=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),m=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),x=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var p=n(6803),A=n(98206),f=n(34535),y=n(61475),v=n(92532),b=n(72372);function j(e){return(0,b.Ay)("MuiCheckbox",e)}const S=(0,v.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),g=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],z=(0,f.Ay)(l.A,{shouldForwardProp:e=>(0,y.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t["size".concat((0,p.A)(n.size))],"default"!==n.color&&t["color".concat((0,p.A)(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,r.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,i.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(S.checked,", &.").concat(S.indeterminate)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(S.disabled)]:{color:(t.vars||t).palette.action.disabled}})})),k=(0,u.jsx)(m,{}),w=(0,u.jsx)(h,{}),C=(0,u.jsx)(x,{}),M=o.forwardRef((function(e,t){var n,i;const l=(0,A.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=k,color:h="primary",icon:m=w,indeterminate:x=!1,indeterminateIcon:f=C,inputProps:y,size:v="medium",className:b}=l,S=(0,a.A)(l,g),M=x?f:m,_=x?f:d,R=(0,r.A)({},l,{color:h,indeterminate:x,size:v}),N=(e=>{const{classes:t,indeterminate:n,color:a,size:o}=e,s={root:["root",n&&"indeterminate","color".concat((0,p.A)(a)),"size".concat((0,p.A)(o))]},i=(0,c.A)(s,j,t);return(0,r.A)({},t,i)})(R);return(0,u.jsx)(z,(0,r.A)({type:"checkbox",inputProps:(0,r.A)({"data-indeterminate":x},y),icon:o.cloneElement(M,{fontSize:null!=(n=M.props.fontSize)?n:v}),checkedIcon:o.cloneElement(_,{fontSize:null!=(i=_.props.fontSize)?i:v}),ownerState:R,ref:t,className:(0,s.A)(N.root,b)},S,{classes:N}))}))},10134:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});const a={card:"style_card__+sr5O","margined-bottom":"style_margined-bottom__qKmBu"}}}]);
//# sourceMappingURL=3287.95488578.chunk.js.map