{"version":3,"file":"static/js/9302.119b6bda.chunk.js","mappings":"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","sources":["webpack://mdposit/./src/components/animated-card/style.module.css?d4d9","components/animated-card/index.js","webpack://mdposit/./src/components/viewer-spawner/style.module.css?df6e","components/viewer-spawner/index.js","webpack://mdposit/./src/components/eigenvalue-graph/style.module.css?cb8d","components/eigenvalue-graph/index.js","pages/accession/pca/index.js","pages/accession/pca/plain-text-explanation/index.js","../node_modules/lodash-es/_arrayMap.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/noop.js","../node_modules/lodash-es/_createRound.js","../node_modules/lodash-es/round.js","../node_modules/lodash-es/toInteger.js","../node_modules/lodash-es/_baseToString.js","../node_modules/lodash-es/toString.js","webpack://mdposit/./src/pages/accession/pca/style.module.css?8369"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"style_container__M9GCG\"};","import React, { useLayoutEffect, useRef, forwardRef } from 'react';\nimport { Card } from '@mui/material';\n\nimport reducedMotion from '../../utils/reduced-motion';\n\nimport style from './style.module.css';\n\nconst KEYFRAMES = { opacity: [0, 1] };\n\nif (!reducedMotion()) {\n  KEYFRAMES.transform = ['translateY(50px)', 'translateY(0)'];\n}\n\nconst ANIMATION_OPTIONS = {\n  fill: 'both',\n  easing: 'cubic-bezier(0, .99, .56, 1.1)',\n  duration: 500,\n};\n\n// Make the card appear and slide softly from down to up when the page is loaded\nconst AnimatedCard = forwardRef(({ overrideComponent, ...props }, ref) => {\n  const containerRef = useRef(null);\n\n  useLayoutEffect(() => {\n    const node = containerRef.current && containerRef.current.firstElementChild;\n    if (!(node && node.animate)) return;\n\n    const index = Array.from(\n      document.querySelectorAll('main section'),\n    ).findIndex(section => node === section);\n\n    const animation = node.animate(KEYFRAMES, {\n      ...ANIMATION_OPTIONS,\n      delay: index * 150,\n    });\n\n    return () => animation.cancel();\n  }, []);\n\n  const Component = overrideComponent ? 'section' : Card;\n\n  return (\n    <div ref={containerRef} className={style.container}>\n      <Component component=\"section\" {...props} ref={ref} />\n    </div>\n  );\n});\n\nexport default AnimatedCard;\n","// extracted by mini-css-extract-plugin\nexport default {\"rnd\":\"style_rnd__Txifm\",\"floating-card\":\"style_floating-card__HHpby\"};","import React, { lazy, Suspense, useRef, useState } from 'react';\n\n// Rnd is the resizable and draggable system where the ngl viewer is placed\nimport { Rnd } from 'react-rnd';\n\nimport Card from '../animated-card';\n\nimport style from './style.module.css';\n\nconst ViewerWithControls = lazy(() =>\n  import(\n    /* webpackChunkName: 'viewer-with-controls' */ '../viewer-with-controls'\n  ),\n);\n\n// Minimal ngl window height\nconst MIN_NGL_DIMENSION = 150;\n\n// Counter to get always the maximum zIndex\n// This is useful to set a new or currently dragged/resized ngl window over the others\nlet maxZ = 0;\nconst nextZ = () => {\n  maxZ += 1;\n  return maxZ;\n};\n\n// This function spawns all the NGL viewers needed\n// i.e. one viewer with the requested 'props' and all previous viewers which have been nailed\nconst ViewerSpawner = ({ newViewer, nailing = true, onNail, onClose }) => {\n  // Store here all nailed NGL viewers\n  const [nailedViewers, setNailedViewers] = useState([]);\n\n  // Set the viewers as the nailed viewers and the new viewer\n  const viewers = [...nailedViewers];\n\n  // Keep listed all arrays which have been used (i.e. ngl viewers which have been nailed or closed)\n  const usedIds = useRef([]);\n\n  if (newViewer) {\n    // Find a new suitable Id that meet 2 conditions:\n    // - There is never 2 viewers with the same id, so we avoid errors\n    // - If we pick diferent frames in the graph without nailing anything, the current viewer has always the same id\n    // (This way the current viewer does not appear in the origin position every time)\n    const getNewId = () => {\n      let id = 0;\n      while (id < 999) {\n        if (usedIds.current.indexOf(id) === -1) return id;\n        id += 1;\n      }\n      console.error('Maximum number of viewers reached');\n    };\n\n    // Set a unique id for this props based in the last nailed viewer\n    newViewer.id = getNewId();\n    newViewer.close = () => {\n      if (nailing) {\n        setNailedViewers(nailed => {\n          const newNailed = [...nailed];\n          const index = nailed.indexOf(newViewer);\n          if (index !== -1) newNailed.splice(index, 1);\n          return newNailed;\n        });\n      }\n      if (onClose) onClose(newViewer);\n      usedIds.current.push(newViewer.id);\n    };\n    // If the nailer function is passed, add the logic for the viewer to be nailed further\n    if (nailing)\n      newViewer.nail = () => {\n        setNailedViewers(nailed => [...nailed, newViewer]);\n        if (onNail) onNail(newViewer);\n        usedIds.current.push(newViewer.id);\n      };\n    // Add the current viewer to the viewers list\n    viewers.push(newViewer);\n  }\n\n  // Render a viewer for each prop. Use the 'selected' parameter as unique id\n  return viewers.map(viewer => <NGLViewerInDND key={viewer.id} {...viewer} />);\n};\n\n// This component render a small NGL viewer\n// It is called when user clicks in a point in the projections component\n// Also it is called by the generic analysis page\nconst NGLViewerInDND = props => {\n  // Set a reference for the viewer\n  // If a reference is passed among the viewer arguments then use it instead\n  const viewerRef = props.viewerRef || useRef(null);\n\n  // Set the default position and size\n  const [place, setPlace] = useState(() => {\n    // Set an extra margin\n    const MARGIN = 20;\n    // Get the screen pixel sizes and vertical scroll position\n    const { innerWidth, innerHeight, scrollY } = window;\n    // The spawned elements are parented to the 'main' element, not to the 'body'\n    // We have to take this in count, since the header adds an extra offset in vertical position\n    const offsetHeight = document.querySelector('main').offsetTop;\n    // Set a reasonable dimension for the ngl window\n    const dimension = Math.max(\n      Math.min(innerWidth / 4, innerHeight / 4),\n      MIN_NGL_DIMENSION,\n    );\n    const reasonableHeight = 1.5 * dimension;\n    const reasonableWidth = 2 * dimension;\n    return {\n      // WARNING: If you set the width as 'auto' the window stays very wide when exiting fullscreen\n      width: reasonableWidth, // Let the Rnd logic set the width automatically\n      height: reasonableHeight, // Reasonable height\n      x: 0, // Left border\n      y: innerHeight - offsetHeight - reasonableHeight - MARGIN + scrollY, // Bottom border\n    };\n  });\n\n  return (\n    // Rnd is the draggable and resizable system where the ngl viewer is placed\n    <Rnd\n      position={{ x: place.x, y: place.y }}\n      size={{ width: place.width, height: place.height }}\n      // Update the zIndex to make this window the first visible\n      style={{ zIndex: nextZ() }}\n      className={style.rnd}\n      data-rnd\n      // Limits where the window can be dragged/resized to\n      // WARNING: bounds=\"main\" is problematic since the window may appear out of bounds\n      // WARNING: Then when it is moved for the first time it jumps inside the bonds, not elegant\n      bounds=\"window\"\n      // Prevent the mouse to drag/resize the window when it is over specific elements\n      cancel=\"canvas, [data-popover], #preventDragSize, .prevent-drag\"\n      // On drag/resize starts we do not change anything, but use the hook to re-render this component\n      // The Z Index is updated and the selected window becomes the first in the z axis automatically\n      // WARNING: Drag functions are also called when you just click (e.g. clicking buttons)\n      onDragStart={() => {\n        setPlace({ ...place });\n      }}\n      onResizeStart={() => {\n        setPlace({ ...place });\n      }}\n      onDragStop={(e, d) => {\n        // Use this to reject some bugged event calls: e.g. the frames number selector\n        if (e.layerX === 0 && e.layerY === 0) return;\n        // We re-render only if the new position does not equal the old position\n        if (place.x !== d.x || place.y !== d.y)\n          setPlace({\n            ...place,\n            x: d.x,\n            y: d.y,\n          });\n      }}\n      // Re-adapt the viewer and update the position/size when the window is resized\n      onResize={() => viewerRef.current && viewerRef.current.autoResize()}\n      onResizeStop={(e, direction, ref, delta, position) => {\n        setPlace({\n          width: ref.style.width,\n          height: ref.style.height,\n          ...position,\n        });\n        // if (!viewerRef.current) return;\n        // viewerRef.current.autoResize();\n        // viewerRef.current.autoResize.flush();\n      }}\n    >\n      <Card className={style['floating-card']} elevation={4}>\n        <Suspense fallback={null}>\n          <ViewerWithControls\n            className={style['floating-card']}\n            ref={viewerRef}\n            startsPlaying={false}\n            {...props}\n          />\n        </Suspense>\n      </Card>\n    </Rnd>\n  );\n};\n\nexport default ViewerSpawner;\n","// extracted by mini-css-extract-plugin\nexport default {\"delete\":\"style_delete__BYITu\",\"graph-container\":\"style_graph-container__2Y--C\",\"axis\":\"style_axis__z8ryu\",\"bar-legend\":\"style_bar-legend__joJyl\",\"visual\":\"style_visual__S4w3g\",\"bars\":\"style_bars__p3cKG\",\"has-projection\":\"style_has-projection__R+xxb\",\"projected\":\"style_projected__M7dqT\",\"target\":\"style_target__Kzgs+\",\"explanation\":\"style_explanation__kphn8\",\"top-line\":\"style_top-line__WYRxq\",\"area\":\"style_area__BwFoU\",\"tooltip\":\"style_tooltip__ZrzAO\"};","import React, { useRef, useEffect } from 'react';\nimport { noop, round } from 'lodash-es';\nimport {\n  select,\n  scaleLinear,\n  scaleBand,\n  line,\n  area,\n  axisBottom,\n  axisLeft,\n  axisRight,\n  //event, // This is used to know the mouse cursor position\n  easeBackOut,\n} from 'd3';\n\nimport {\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n  Button,\n} from '@mui/material';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\n\nimport reducedMotion from '../../utils/reduced-motion';\n\nimport style from './style.module.css';\n\nconst MARGIN = { top: 20, right: 40, bottom: 20, left: 30 };\nconst MIN_DISPLAY_INDEX = 14; // display at least 14 components\nconst MIN_DISPLAY_EXPL = 0.8; // display at least components for 80% explanation\n\nconst EigenvalueGraph = ({\n  eigenvalues,\n  totalEigenvalue,\n  projectionsData,\n  projections = [],\n  setProjections,\n}) => {\n  const containerRef = useRef(null);\n  const tooltipRef = useRef(null);\n  const drawRef = useRef(noop);\n  const processedRef = useRef(null);\n\n  // should only be run once\n  useEffect(() => {\n    const graph = select(containerRef.current).append('svg');\n    graph\n      .append('defs')\n      .append('clipPath')\n      .attr('id', 'clip-reveal')\n      .append('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('height', '100%')\n      .attr('width', 0)\n      // transition on first display, uncover from left to right\n      .transition()\n      .duration(reducedMotion() ? 0 : 50 * 43)\n      .attr('width', '100%');\n\n    const refs = {\n      xAxis: graph.append('g').attr('class', style.axis),\n      yExplAxis: graph.append('g').attr('class', style.axis),\n      yEigenAxis: graph.append('g').attr('class', style.axis),\n      explanationArea: graph.append('g').attr('class', style.explanation),\n      visualBars: graph\n        .append('g')\n        .attr('class', `${style.visual} ${style.bars}`),\n      targetBars: graph\n        .append('g')\n        .attr('class', `${style.target} ${style.bars}`),\n    };\n\n    drawRef.current = ({ processed = processedRef.current } = {}) => {\n      // container size\n      const { clientWidth: width, clientHeight: height } = containerRef.current;\n      graph.attr('width', width).attr('height', height);\n\n      // x axis\n      const x = scaleBand()\n        .domain(processed.map((_, i) => i))\n        .range([MARGIN.left, width - MARGIN.right])\n        .padding(0.1);\n\n      // visual x axis\n      const xAxis = g =>\n        g\n          .attr('transform', `translate(0, ${height - MARGIN.bottom})`)\n          .call(axisBottom(x).tickFormat(d => d + 1));\n      refs.xAxis.call(xAxis);\n\n      // explained variance\n      // y axis\n      const yExpl = scaleLinear()\n        .domain([0, 1])\n        .range([height - MARGIN.bottom, MARGIN.top])\n        .nice();\n\n      // visual y axis\n      const yExplAxis = g =>\n        g.attr('transform', `translate(${width - MARGIN.right}, 0)`).call(\n          axisRight(yExpl)\n            .ticks(6)\n            .tickFormat(d => `${(typeof d === 'number' ? d : 0) * 100}%`),\n        );\n      refs.yExplAxis.call(yExplAxis);\n\n      // line\n      const lineFn = line()\n        .x((_, i) => x(i) + x.bandwidth() / 2)\n        .y(yExpl);\n\n      const explLine = refs.explanationArea\n        .selectAll(`path.${style['top-line']}`)\n        .data([processed]);\n      explLine\n        .enter()\n        .append('path')\n        .attr('class', style['top-line'])\n        .attr('clip-path', 'url(#clip-reveal)')\n        .attr('opacity', 0)\n        .merge(explLine)\n        .attr('d', d => lineFn(d.map(item => item.cumulativeExplained)))\n        .transition()\n        .duration(2500)\n        .attr('opacity', 1);\n\n      // area\n      const areaFn = area()\n        .x((_, i) => x(i) + x.bandwidth() / 2)\n        .y0(height - MARGIN.bottom)\n        .y1(d => yExpl(d));\n\n      const explArea = refs.explanationArea\n        .selectAll(`path.${style.area}`)\n        .data([processed]);\n      explArea\n        .enter()\n        .append('path')\n        .attr('class', style.area)\n        .attr('clip-path', 'url(#clip-reveal)')\n        .attr('opacity', 0)\n        .merge(explArea)\n        .attr('d', d => areaFn(d.map(item => item.cumulativeExplained)))\n        .transition()\n        .duration(2500)\n        .attr('opacity', 1);\n\n      // eigenvalue\n      // y axis\n      const yEigen = scaleLinear()\n        .domain([0, eigenvalues[0]])\n        .range([height - MARGIN.bottom, MARGIN.top])\n        .nice();\n\n      // visual y axis\n      const yEigenAxis = g =>\n        g\n          .attr('transform', `translate(${MARGIN.left}, 0)`)\n          .call(axisLeft(yEigen).ticks(5));\n      refs.yEigenAxis.call(yEigenAxis);\n\n      // bars\n      const bars = refs.visualBars.selectAll('rect').data(processed);\n      bars\n        .enter()\n        .append('rect')\n        .attr('y', yEigen(0))\n        .attr('height', 0)\n        .merge(bars)\n        .attr(\n          'class',\n          ({ hasProjection, projected }) =>\n            `${hasProjection ? style['has-projection'] : ''} ${\n              projected ? style.projected : ''\n            }`.trim() || null,\n        )\n        .attr('x', (_, i) => x(i))\n        .attr('width', x.bandwidth())\n        .transition()\n        .ease(easeBackOut.overshoot(5))\n        .duration(reducedMotion() ? 0 : 500)\n        .delay(reducedMotion() ? 0 : (_, i) => i * 50)\n        .attr('y', d => yEigen(d.eigenvalue))\n        .attr('height', d => height - MARGIN.bottom - yEigen(d.eigenvalue));\n      // full-height bars (for click and hover handlers)\n      if (!tooltipRef.current) return;\n      const clickBars = refs.targetBars.selectAll('rect').data(processed);\n      clickBars\n        .enter()\n        .append('rect')\n        .attr('y', 0)\n        .attr('height', '100%')\n        .on('click', ({ hasProjection }, i) => {\n          if (!hasProjection) return;\n          setProjections(projections => {\n            const set = new Set(projections);\n            set[set.has(i) ? 'delete' : 'add'](i);\n            return Array.from(set).sort((a, b) => a - b);\n          });\n        })\n        .on('mousemove', (d, i) => {\n          tooltipRef.current.innerHTML = `\n            <div>\n              <p>Principal component ${i + 1}</p>\n              <p>Eigenvalue: ${(Math.round(d.eigenvalue * 100) / 100).toFixed(\n                2,\n              )}</p>\n              <p>\n                Explained variance: ${(\n                  Math.round((d.eigenvalue / totalEigenvalue) * 1000) / 10\n                ).toFixed(1)}%\n              </p>\n              <p>\n                Cumulative explained variance: ${(\n                  Math.round(d.cumulativeExplained * 1000) / 10\n                ).toFixed(1)}%\n              </p>\n              <p>Projection data is ${\n                d.hasProjection ? '' : 'not'\n              } available</p>\n            </div>\n          `;\n          // Display the tooltip (this is internally softed)\n          tooltipRef.current.style.opacity = 1;\n          //const { width, height } = tooltipRef.current.getBoundingClientRect();\n          //tooltipRef.current.style.transform = `translate(${event.pageX -\n          //  width / 2}px, ${event.pageY - height - 5}px)`;\n        })\n        // Hide the tooltip (this is internally softed)\n        .on('mouseout', () => (tooltipRef.current.style.opacity = 0))\n        .merge(clickBars)\n        .attr('class', ({ hasProjection }) =>\n          hasProjection ? style['has-projection'] : '' || null,\n        )\n        .attr('x', (_, i) => x(i))\n        .attr('width', x.bandwidth());\n    };\n\n    window.addEventListener('resize', drawRef.current);\n\n    return () => window.removeEventListener('resize', drawRef.current);\n  }, [eigenvalues, setProjections, totalEigenvalue]);\n\n  // data massaging\n  useEffect(() => {\n    let acc = 0;\n    const processed = [];\n    for (const [index, eigenvalue] of eigenvalues.entries()) {\n      const projectionData = projectionsData[index];\n      acc += eigenvalue;\n      const cumulativeExplained = acc / totalEigenvalue;\n      processed.push({\n        cumulativeExplained,\n        eigenvalue,\n        projected: projections.includes(index),\n        hasProjection: !!projectionData,\n      });\n      if (\n        index >= MIN_DISPLAY_INDEX &&\n        cumulativeExplained >= MIN_DISPLAY_EXPL\n      ) {\n        break;\n      }\n    }\n\n    processedRef.current = processed;\n\n    drawRef.current({ processed });\n  }, [eigenvalues, projectionsData, totalEigenvalue, projections]);\n\n  return (\n    <>\n      <div className={style['graph-container']} ref={containerRef} />\n      <div className={style.tooltip} ref={tooltipRef} />\n      {!!projections.length && (\n        <>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Principal component</TableCell>\n                <TableCell>Eigenvalue</TableCell>\n                <TableCell>Explained variance</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {projections.map(p => (\n                <TableRow key={p}>\n                  <TableCell>{p + 1}</TableCell>\n                  <TableCell>{round(eigenvalues[p], 2)}</TableCell>\n                  <TableCell>\n                    {round((eigenvalues[p] / totalEigenvalue) * 100, 1)} %\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          <Button\n            variant=\"contained\"\n            onClick={() => setProjections([])}\n            className={style.delete}\n          >\n            <FontAwesomeIcon icon={faTrashAlt} />\n            &nbsp;\n            <span>Clear selection</span>\n          </Button>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default EigenvalueGraph;\n","import React, { useContext, useState, useMemo, lazy, Suspense } from 'react';\nimport cn from 'classnames';\n\nimport { CardContent, Typography } from '@mui/material';\n\nimport Card from '../../../components/animated-card';\nimport ViewerSpawner from '../../../components/viewer-spawner';\nimport EigenvalueGraph from '../../../components/eigenvalue-graph';\nimport Loading from '../../../components/loading';\n\nimport useAPI from '../../../hooks/use-api';\n\nimport { ProjectCtx } from '../../../contexts';\n\nimport { BASE_PATH_PROJECTS } from '../../../utils/constants';\n\nimport plainTextExplanation from './plain-text-explanation';\n\nimport style from './style.module.css';\n\nconst ViewerWithControls = lazy(() => import(\n  /* webpackChunkName: 'viewer-with-controls' */ '../../../components/viewer-with-controls'\n));\nconst Projections = lazy(() => import(\n  /* webpackChunkName: 'projections' */ '../../../components/projections'\n));\n\nconst projectionPlaceholder = (\n  <div className={cn(style.placeholder, style.projection)} />\n);\nconst nglPlaceholder = (\n  <div className={cn(style.placeholder, style['viewer-with-controls'])} />\n);\n\nconst PCA = () => {\n  // Get the current project metadata\n  const { accession, accessionAndMdNumber, metadata, files } = useContext(ProjectCtx);\n\n  // Load the main data from the API\n  const { loading, payload, error } = useAPI(\n    `${BASE_PATH_PROJECTS}/${accessionAndMdNumber}/analyses/pca/`,\n  );\n  const data = payload && payload.data;\n\n  const [projections, setProjections] = useState([]);\n  const [requestedFrame, setRequestedFrame] = useState(null);\n\n  // Get the expalined variance of every eigenvector and the total explained variance\n  const [explanation, totalEigenvalue] = useMemo(() => {\n    setRequestedFrame(null);\n    if (!data) return [];\n    const eigenvalues = data.eigenvalues;\n    if (!eigenvalues.length) return [];\n    const totalEigenvalue = eigenvalues.reduce((acc, curr) => acc + curr, 0);\n    const explanation =\n      projections.reduce(\n        (acc, projection) => acc + eigenvalues[projection],\n        0,\n      ) / totalEigenvalue;\n    return [explanation, totalEigenvalue];\n  }, [data, projections]);\n\n  // Set the component to be passed to the NGL\n  const [representations, components] = useMemo(() => {\n    if (!data || !files) return [undefined, undefined];\n    // Only backbon atoms will be shown so they are better represented in spacefill\n    const representations = [\n      {\n        name: 'PC projection',\n        type: 'spacefill',\n      },\n    ];\n\n    // Get the API URL to the requested projection trajectory\n    let trajectoryURLs;\n    if (projections[0] !== undefined) {\n      const projectionNumber = ('0' + (projections[0] + 1)).slice(-2);\n      const projectionURL = `${BASE_PATH_PROJECTS}/${accessionAndMdNumber}/files/pca_trajectory_${projectionNumber}.bin`;\n      trajectoryURLs = [ projectionURL ];\n    }\n\n    // Get the topology URL\n    // It has to be the main topology but with a specific selection of atoms\n    const topologyURL = `${BASE_PATH_PROJECTS}/${accessionAndMdNumber}/files/structure`;\n\n    // Set the NGL component\n    const components = [\n      {\n        topologyURL: topologyURL,\n        // WARNING: NGL does not support ranged syntax with atom indices (e.g. @0-2,13-15)\n        atomSelection: '@' + data.atoms.join(','),\n        trajectoryURLs: trajectoryURLs,\n      },\n    ];\n\n    return [representations, components];\n  }, [data, files, projections, accession]);\n\n  if (loading) {\n    return <Loading />;\n  }\n  if (error) {\n    return error.toString();\n  }\n\n  return (\n    <>\n      <Card className={style.card}>\n        <CardContent>\n          <Typography variant=\"h6\">PCA eigenvalues</Typography>\n          {/* Bars graph which allows to select a specific projection */}\n          <EigenvalueGraph\n            eigenvalues={data.eigenvalues}\n            totalEigenvalue={totalEigenvalue}\n            projectionsData={data.projections}\n            projections={projections}\n            setProjections={setProjections}\n          />\n        </CardContent>\n      </Card>\n      <Card className={style.card}>\n        <div>\n          <CardContent>\n            <Typography variant=\"h6\">PCA projections</Typography>\n            {/* Show a brief explanation about selected projection and their explained variance accounting */}\n            <p>{plainTextExplanation(projections, explanation)}</p>\n          </CardContent>\n          {/* When only 1 eigenvector is selected use the regula ngl viewer */}\n          {projections.length === 1 && (\n            <Suspense fallback={nglPlaceholder}>\n              <CardContent className={style['ngl-card']}>\n                <ViewerWithControls\n                  className={style['viewer-with-controls']}\n                  projection={projections[0]}\n                  framesSelect={false}\n                  // Projections are backbone trajectories, same as the average.pdb topology\n                  startingRepresentations={representations}\n                  startingComponents={components}\n                  bounce={true}\n                />\n              </CardContent>\n            </Suspense>\n          )}\n          {/* When only 2 eigenvectors are selected use the projections graph */}\n          {projections.length === 2 && (\n            <Suspense fallback={projectionPlaceholder}>\n              <CardContent>\n                <Projections\n                  framestep={data.framestep}\n                  projectionsData={data.projections}\n                  projections={projections}\n                  datumRange={data.eigenvalues.length}\n                  totalFrames={metadata.mdFrames}\n                  setRequestedFrame={setRequestedFrame}\n                />\n              </CardContent>\n            </Suspense>\n          )}\n          {/* When more than 2 frames are selected display nothing but the plain text explanation*/}\n        </div>\n      </Card>\n      <ViewerSpawner\n        // Set the new viewer or null if there is not a proper \"selected\" value\n        newViewer={Number.isFinite(requestedFrame)\n          ? { requestedFrame: requestedFrame }\n          : null\n        }\n        // If the nailed/closed viewer is the current viewer then reset the 'selected'\n        onNail={viewer =>\n          setRequestedFrame(previous => {\n            if (viewer.requestedFrame === previous) return null;\n            else return previous;\n          })\n        }\n        onClose={viewer =>\n          setRequestedFrame(previous => {\n            if (viewer.requestedFrame === previous) return null;\n            else return previous;\n          })\n        }\n      />\n    </>\n  );\n};\n\nexport default PCA;\n","import { round } from 'lodash-es';\n\nconst plainTextExplanation = (projections, explanation) => {\n  if (!projections.length) {\n    return `No projection selected, please select one or multiple projections to\n    visualise its or their related data. Only the darker blue bars correspond to\n    projections for which data has been calculated.`;\n  }\n  let projectionText;\n  if (projections.length === 1) {\n    projectionText = projections[0] + 1;\n  } else if (projections.length === 2) {\n    projectionText = `${projections[0] + 1} and ${projections[1] + 1}`;\n  } else {\n    projectionText = projections.reduce(\n      (acc, projection, i, { length }) =>\n        `${acc}${acc ? ',' : ''}${i === length - 1 ? ' and' : ''} ${projection +\n          1}`,\n      '',\n    );\n  }\n  return `Selected principal component${\n    projections.length > 1 ? 's' : ''\n  } ${projectionText}, accounting for ${round(\n    explanation * 100,\n    1,\n  )}% of explained variance`;\n};\n\nexport default plainTextExplanation;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nexport default noop;\n","import root from './_root.js';\nimport toInteger from './toInteger.js';\nimport toNumber from './toNumber.js';\nimport toString from './toString.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsFinite = root.isFinite,\n    nativeMin = Math.min;\n\n/**\n * Creates a function like `_.round`.\n *\n * @private\n * @param {string} methodName The name of the `Math` method to use when rounding.\n * @returns {Function} Returns the new round function.\n */\nfunction createRound(methodName) {\n  var func = Math[methodName];\n  return function(number, precision) {\n    number = toNumber(number);\n    precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n    if (precision && nativeIsFinite(number)) {\n      // Shift with exponential notation to avoid floating-point issues.\n      // See [MDN](https://mdn.io/round#Examples) for more details.\n      var pair = (toString(number) + 'e').split('e'),\n          value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n      pair = (toString(value) + 'e').split('e');\n      return +(pair[0] + 'e' + (+pair[1] - precision));\n    }\n    return func(number);\n  };\n}\n\nexport default createRound;\n","import createRound from './_createRound.js';\n\n/**\n * Computes `number` rounded to `precision`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Math\n * @param {number} number The number to round.\n * @param {number} [precision=0] The precision to round to.\n * @returns {number} Returns the rounded number.\n * @example\n *\n * _.round(4.006);\n * // => 4\n *\n * _.round(4.006, 2);\n * // => 4.01\n *\n * _.round(4060, -2);\n * // => 4100\n */\nvar round = createRound('round');\n\nexport default round;\n","import toFinite from './toFinite.js';\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nexport default toInteger;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"style_card__6C+Fc\",\"ngl-card\":\"style_ngl-card__+pU8V\",\"placeholder\":\"style_placeholder__2w0--\",\"projection\":\"style_projection__v0o3I\",\"viewer-with-controls\":\"style_viewer-with-controls__nFIv5\"};"],"names":["KEYFRAMES","opacity","reducedMotion","transform","ANIMATION_OPTIONS","fill","easing","duration","forwardRef","_ref","ref","overrideComponent","props","_objectWithoutProperties","_excluded","containerRef","useRef","useLayoutEffect","node","current","firstElementChild","animate","index","Array","from","document","querySelectorAll","findIndex","section","animation","_objectSpread","delay","cancel","Component","Card","_jsx","className","style","children","component","ViewerWithControls","lazy","maxZ","NGLViewerInDND","viewerRef","place","setPlace","useState","innerWidth","innerHeight","scrollY","window","offsetHeight","querySelector","offsetTop","dimension","Math","max","min","reasonableHeight","width","height","x","y","Rnd","position","size","zIndex","bounds","onDragStart","onResizeStart","onDragStop","e","d","layerX","layerY","onResize","autoResize","onResizeStop","direction","delta","elevation","Suspense","fallback","startsPlaying","newViewer","nailing","onNail","onClose","nailedViewers","setNailedViewers","viewers","usedIds","getNewId","id","indexOf","console","error","close","nailed","newNailed","splice","push","nail","map","viewer","MARGIN","eigenvalues","totalEigenvalue","projectionsData","projections","setProjections","tooltipRef","drawRef","noop","processedRef","useEffect","graph","select","append","attr","transition","refs","xAxis","yExplAxis","yEigenAxis","explanationArea","visualBars","concat","targetBars","processed","arguments","length","undefined","clientWidth","clientHeight","scaleBand","domain","_","i","range","padding","call","g","axisBottom","tickFormat","yExpl","scaleLinear","nice","axisRight","ticks","lineFn","line","bandwidth","explLine","selectAll","data","enter","merge","item","cumulativeExplained","areaFn","area","y0","y1","explArea","yEigen","axisLeft","bars","_ref2","hasProjection","projected","trim","ease","easeBackOut","overshoot","eigenvalue","clickBars","on","_ref3","set","Set","has","sort","a","b","innerHTML","round","toFixed","_ref4","addEventListener","removeEventListener","acc","entries","projectionData","includes","_jsxs","_Fragment","Table","TableHead","TableRow","TableCell","TableBody","p","Button","variant","onClick","FontAwesomeIcon","icon","faTrashAlt","Projections","projectionPlaceholder","cn","placeholder","projection","nglPlaceholder","PCA","accession","accessionAndMdNumber","metadata","files","useContext","ProjectCtx","loading","payload","useAPI","BASE_PATH_PROJECTS","requestedFrame","setRequestedFrame","explanation","useMemo","reduce","curr","representations","components","trajectoryURLs","projectionNumber","slice","name","type","topologyURL","atomSelection","atoms","join","Loading","toString","card","CardContent","Typography","EigenvalueGraph","plainTextExplanation","framesSelect","startingRepresentations","startingComponents","bounce","framestep","datumRange","totalFrames","mdFrames","ViewerSpawner","Number","isFinite","previous","projectionText","array","iteratee","result","isArray","nativeIsFinite","root","nativeMin","methodName","func","number","precision","toNumber","toInteger","pair","split","value","createRound","toFinite","remainder","symbolProto","Symbol","prototype","symbolToString","baseToString","arrayMap","isSymbol"],"sourceRoot":""}