{"version":3,"file":"static/js/3715.36206675.chunk.js","mappings":"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","sources":["webpack://mdposit/./src/components/animated-card/style.module.css?d4d9","components/animated-card/index.js","pages/accession/populations/index.js","../node_modules/@mui/material/Card/cardClasses.js","../node_modules/@mui/material/Card/Card.js","webpack://mdposit/./src/pages/accession/populations/style.module.css?57ea"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"style_container__M9GCG\"};","import React, { useLayoutEffect, useRef, forwardRef } from 'react';\nimport { Card } from '@mui/material';\n\nimport reducedMotion from '../../utils/reduced-motion';\n\nimport style from './style.module.css';\n\nconst KEYFRAMES = { opacity: [0, 1] };\n\nif (!reducedMotion()) {\n  KEYFRAMES.transform = ['translateY(50px)', 'translateY(0)'];\n}\n\nconst ANIMATION_OPTIONS = {\n  fill: 'both',\n  easing: 'cubic-bezier(0, .99, .56, 1.1)',\n  duration: 500,\n};\n\n// Make the card appear and slide softly from down to up when the page is loaded\nconst AnimatedCard = forwardRef(({ overrideComponent, ...props }, ref) => {\n  const containerRef = useRef(null);\n\n  useLayoutEffect(() => {\n    const node = containerRef.current && containerRef.current.firstElementChild;\n    if (!(node && node.animate)) return;\n\n    const index = Array.from(\n      document.querySelectorAll('main section'),\n    ).findIndex(section => node === section);\n\n    const animation = node.animate(KEYFRAMES, {\n      ...ANIMATION_OPTIONS,\n      delay: index * 150,\n    });\n\n    return () => animation.cancel();\n  }, []);\n\n  const Component = overrideComponent ? 'section' : Card;\n\n  return (\n    <div ref={containerRef} className={style.container}>\n      <Component component=\"section\" {...props} ref={ref} />\n    </div>\n  );\n});\n\nexport default AnimatedCard;\n","import React, { useContext, useState, useRef, useMemo } from 'react';\n// A hook to track whenever some element is on screen\nimport { useInView } from 'react-intersection-observer';\n\nimport {\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n} from '@mui/material';\n\nimport Card from '../../../components/animated-card';\nimport ViewerWithControls from '../../../components/viewer-with-controls';\n\nimport style from './style.module.css';\n\nimport { ProjectCtx, PdbCtx } from '../../../contexts';\n\nimport Loading from '../../../components/loading';\n\n// Define permanent options for the \"useInView\"\nconst useInViewOptions = { triggerOnce: true, rootMargin: '100px' };\n\n// Set the meaningless populations cutoff\nconst populationsCutoff = 0.001;\n\n// Set a function to calculate the average value from a values array\nconst roundedPercent = value => {\n  const percent = value * 100;\n  const rounded = Math.round(percent * 100) / 100;\n  const label = rounded.toString().padEnd(4, '0');\n  return label;\n};\n\nconst Populations = () => {\n  // Track if the NGL viewer\n  // The status isNglVisible is returned true/false when the element is in/out the screen respectively\n  const [nglRef, isNglVisible] = useInView(useInViewOptions);\n\n  // Get the current project metadata\n  const { metadata, populations } = useContext(ProjectCtx);\n  // Get the current topology, including the residue names\n  const pdbData = useContext(PdbCtx);\n\n  // Set a ref to the ngl which allows access to the ngl viewer exposed methods\n  const viewerRef = useRef(null);\n\n  // Set when one point in the graph is selected\n  const [selectedFrame, setSelectedFrame] = useState(0);\n\n  // Send a request to the API with the url of the rgyr analysis\n  const { loading, payload, error } = populations;\n\n  // Set an array of objects, where each object includes the population value and the frame it belongs to\n  // Populations are sorted so the biggest populations are first and there is a cutoff to exclude meaningless populations\n  const sortedPopulations = useMemo(() => {\n    if (!payload) return;\n    const formatedPopulations = [];\n    payload.forEach((population, i) => {\n      if (population < populationsCutoff) return;\n      formatedPopulations.push({\n        pop: population,\n        frame: i,\n      });\n    });\n    formatedPopulations.sort((a, b) => {\n      return a.pop < b.pop ? 1 : a.pop > b.pop ? -1 : 0;\n    });\n    return formatedPopulations;\n  }, [payload]);\n\n  // Render loading or error messages according with the API response\n  if (loading) return <Loading />;\n  else if (error) return error.toString();\n  else if (!payload) return 'Something bad happened';\n\n  if (!metadata || !pdbData.file) return <Loading />;\n\n  return (\n    <>\n      <Card className={style.tablecard}>\n        <div className={style.paper}>\n          <Table stickyHeader size=\"small\">\n            <TableHead>\n              <TableRow>\n                <TableCell key={0}>{'Population (%)'}</TableCell>\n                <TableCell key={1}>{'Frame'}</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {sortedPopulations.map((population, i) => {\n                const frame = population.frame;\n                return (\n                  <TableRow\n                    key={i}\n                    // Hover only when it is not already selected\n                    hover={frame !== selectedFrame}\n                    className={\n                      frame === selectedFrame ? style.selectedrow : style.row\n                    }\n                    onClick={() => setSelectedFrame(frame)}\n                  >\n                    <TableCell key={0}>\n                      {roundedPercent(population.pop)}\n                    </TableCell>\n                    <TableCell key={1}>{frame}</TableCell>\n                  </TableRow>\n                );\n              })}\n            </TableBody>\n          </Table>\n        </div>\n      </Card>\n      <Card className={style.nglcard} ref={nglRef}>\n        {/* Render the NGL viewer when it is on screen*/}\n        {isNglVisible ? (\n          <ViewerWithControls\n            className={style.container}\n            requestedFrame={selectedFrame}\n            ref={viewerRef}\n          />\n        ) : (\n          <div style={{ height: '50vh' }} />\n        )}\n      </Card>\n    </>\n  );\n};\n\nexport default Populations;\n","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCardUtilityClass(slot) {\n  return generateUtilityClass('MuiCard', slot);\n}\nconst cardClasses = generateUtilityClasses('MuiCard', ['root']);\nexport default cardClasses;","'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"raised\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport chainPropTypes from '@mui/utils/chainPropTypes';\nimport composeClasses from '@mui/utils/composeClasses';\nimport styled from '../styles/styled';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport Paper from '../Paper';\nimport { getCardUtilityClass } from './cardClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getCardUtilityClass, classes);\n};\nconst CardRoot = styled(Paper, {\n  name: 'MuiCard',\n  slot: 'Root',\n  overridesResolver: (props, styles) => styles.root\n})(() => {\n  return {\n    overflow: 'hidden'\n  };\n});\nconst Card = /*#__PURE__*/React.forwardRef(function Card(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCard'\n  });\n  const {\n      className,\n      raised = false\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    raised\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(CardRoot, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : undefined,\n    ref: ref,\n    ownerState: ownerState\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Card.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * If `true`, the card will use raised styling.\n   * @default false\n   */\n  raised: chainPropTypes(PropTypes.bool, props => {\n    if (props.raised && props.variant === 'outlined') {\n      return new Error('MUI: Combining `raised={true}` with `variant=\"outlined\"` has no effect.');\n    }\n    return null;\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default Card;","// extracted by mini-css-extract-plugin\nexport default {\"paper\":\"style_paper__-IPRl\",\"tablecard\":\"style_tablecard__36QJ9\",\"nglcard\":\"style_nglcard__UaXJ8\",\"container\":\"style_container__4ECe+\",\"selectedrow\":\"style_selectedrow__yv8kY\",\"row\":\"style_row__fdlru\"};"],"names":["KEYFRAMES","opacity","reducedMotion","transform","ANIMATION_OPTIONS","fill","easing","duration","forwardRef","_ref","ref","overrideComponent","props","_objectWithoutProperties","_excluded","containerRef","useRef","useLayoutEffect","node","current","firstElementChild","animate","index","Array","from","document","querySelectorAll","findIndex","section","animation","_objectSpread","delay","cancel","Component","Card","_jsx","className","style","children","component","useInViewOptions","triggerOnce","rootMargin","roundedPercent","value","percent","Math","round","toString","padEnd","Populations","nglRef","isNglVisible","useInView","metadata","populations","useContext","ProjectCtx","pdbData","PdbCtx","viewerRef","selectedFrame","setSelectedFrame","useState","loading","payload","error","sortedPopulations","useMemo","formatedPopulations","forEach","population","i","push","pop","frame","sort","a","b","Loading","file","_jsxs","_Fragment","tablecard","paper","Table","stickyHeader","size","TableHead","TableRow","TableCell","TableBody","map","hover","selectedrow","row","onClick","nglcard","ViewerWithControls","container","requestedFrame","height","getCardUtilityClass","slot","generateUtilityClass","generateUtilityClasses","CardRoot","styled","Paper","name","overridesResolver","styles","root","overflow","React","inProps","useDefaultProps","raised","other","_objectWithoutPropertiesLoose","ownerState","_extends","classes","composeClasses","useUtilityClasses","clsx","elevation","undefined"],"sourceRoot":""}