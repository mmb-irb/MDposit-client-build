"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[421],{10939:(e,t,r)=>{r.d(t,{A:()=>p});var s=r(89379),a=r(80045),n=r(65043),i=r(12110),l=r(17604);const c="style_container__M9GCG";var o=r(70579);const h=["overrideComponent"],d={opacity:[0,1]};(0,l.A)()||(d.transform=["translateY(50px)","translateY(0)"]);const u={fill:"both",easing:"cubic-bezier(0, .99, .56, 1.1)",duration:500},p=(0,n.forwardRef)(((e,t)=>{let{overrideComponent:r}=e,l=(0,a.A)(e,h);const p=(0,n.useRef)(null);(0,n.useLayoutEffect)((()=>{const e=p.current&&p.current.firstElementChild;if(!e||!e.animate)return;const t=Array.from(document.querySelectorAll("main section")).findIndex((t=>e===t)),r=e.animate(d,(0,s.A)((0,s.A)({},u),{},{delay:150*t}));return()=>r.cancel()}),[]);const m=r?"section":i.A;return(0,o.jsx)("div",{ref:p,className:c,children:(0,o.jsx)(m,(0,s.A)((0,s.A)({component:"section"},l),{},{ref:t}))})}))},11567:(e,t,r)=>{r.r(t),r.d(t,{default:()=>je});var s=r(89379),a=r(65043),n=r(35475),i=r(73216),l=r(22908),c=r(64600),o=r.n(c),h=r(28076),d=r(10039),u=r(43845),p=r(26494),m=r(53193),x=r(79190),A=r(2260),f=r(32143),j=r(85865),_=r(71806),g=r(84882),y=r(73460),N=r(207),v=r(67803),b=r(83150),P=r(10939),w=r(10312),C=r(70008);const k="style_highlightable__biB77";var E=r(70579);const S=/\s+/,q=(0,w.A)((e=>new RegExp("(".concat(e.toString().trim().split(S).map(C.A).join("|"),")"),"i"))),z=a.memo((e=>{let{highlight:t,children:r}=e;if(Array.isArray(r))return r.map(((e,r)=>(0,E.jsx)(z,{highlight:t,children:e},r)));if(!t||!r||"string"!==typeof r&&!Number.isFinite(r))return r||null;const s=q(t);return(0,E.jsx)("span",{className:k,children:r.toString().split(s).filter(Boolean).map(((e,t)=>a.createElement(s.test(e)?"mark":"span",{key:t},e)))})})),D=z;var M=r(17545),I=r(58338),R=r(95747);const B="style_table-body__UaSDI",Q="style_invalid-results__xfJgr",U="style_table-head__tmuYe",L="style_not-published__KTvNz",O="style_center__5C2Uk",X="style_no-results-card__hJ248",Y="style_minheight__Qpr-9",F="style_no-results-text__PtOSj",J="style_analysis__M4Th0",T="style_small__QxCJm",G="style_horizontal__f42Xi",V="style_selector__XVrF1",Z="style_fillheight__1UWvV";var K=r(17604),W=r(66062),H=r(80045),$=r(88058),ee=r(51787),te=r(67784),re=r(92127),se=r(12639),ae=r(1198);const ne="style_searchbar__L3fSk",ie="style_searchbar-icon__o1zED",le="style_searchbar-letters__NY7xQ",ce=["search"],oe={"aria-label":"Search projects by text",startAdornment:(0,E.jsx)(ee.A,{position:"start",children:(0,E.jsx)(re.g,{icon:se.MjD,size:"2x",className:ie})}),classes:{input:le}},he=(0,$.A)(((e,t,r)=>{const a=(0,l.parse)(e.search,{ignoreQueryPrefix:!0}),{search:n}=a,i=(0,H.A)(a,ce),c=Boolean(n)===Boolean(r);r&&(i.search=r),n!==r&&(i.page=void 0,t((0,s.A)((0,s.A)({},e),{},{search:(0,l.stringify)(i),replace:c})))}),500),de=()=>{const e=(0,i.zy)(),t=(0,i.Zp)(),[r,s]=(0,a.useState)((0,l.parse)(e.search,{ignoreQueryPrefix:!0}).search);(0,a.useEffect)((()=>he.cancel),[]);const n=(0,a.useCallback)((r=>{let{target:{value:a}}=r;s(a),he(e,t,a)}),[e,t]),c=ae.m.find((e=>"browser"===e.id));return(0,E.jsx)(te.A,{title:c.text,value:r||"",onChange:n,className:ne,InputProps:oe,placeholder:R._r.searchExample})},ue="All results",pe=[5,10,25,50],me={title:"Previous page"},xe={title:"Next page"},Ae={opacity:[0,1]};(0,K.A)()||(Ae.transform=["translateX(2.5%)","translateX(0)"]);const fe=e=>{let{projectData:t,highlight:r,index:s,previewUrl:i}=e;const l=new W.M(t),{identifier:c,accession:p,published:m,pdbInfo:x,metadata:A,mdCount:f,directions:j}=l,_=(0,a.useRef)(null);return(0,a.useLayoutEffect)((()=>{if(!_.current||!_.current.animate)return;const e=_.current.animate(Ae,{fill:"both",easing:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",duration:750,delay:100+75*s});return()=>e.cancel()}),[s]),l.error?(0,E.jsxs)(h.A,{ref:_,className:L,children:[(0,E.jsx)(d.A,{className:O,children:" Errored entry "}),(0,E.jsxs)(d.A,{className:O,children:[" ",l.error," "]}),(0,E.jsx)(d.A,{className:O,children:" - "}),(0,E.jsx)(d.A,{className:O,children:" - "})]}):(0,E.jsxs)(h.A,{ref:_,className:o()({[L]:!m}),children:[(0,E.jsxs)(d.A,{className:O,children:[(0,E.jsx)(n.N_,{to:{pathname:"/id/".concat(p||c,"/overview"),state:{projectData:l}},children:(0,E.jsxs)(D,{highlight:r,children:[p||c,!m&&(0,E.jsx)("div",{children:"(not published)"})]})}),f>1&&(0,E.jsx)("div",{className:T,children:"".concat(f," MDs")})]}),(0,E.jsx)(d.A,{className:O,children:(0,E.jsx)(D,{highlight:r,children:A&&A.NAME?A.NAME:x&&x.compound?x.compound:"Not available"})}),(0,E.jsx)(d.A,{className:O,children:(0,E.jsx)(b.A,{src:i,width:"110",height:"110",loading:"lazy",alt:"Project preview"})}),(0,E.jsx)(d.A,{className:O,children:Object.entries(j).filter((e=>{let[t,r]=e;return r})).map((e=>{let[t,r]=e;return(0,E.jsx)(u.A,{clickable:!0,className:J,component:n.N_,to:{pathname:"/id/".concat(p||c,"/").concat(t),state:{projectData:l}},label:R.h7.get(t)||t,variant:"outlined"},t)}))})]})},je=()=>{const e=(0,i.zy)(),t=(0,i.Zp)(),r=decodeURIComponent(e.search),n=(0,l.parse)(r,{ignoreQueryPrefix:!0,decoder:e=>e}),[c,u]=(0,a.useState)(n.option||ue),b=(0,a.useCallback)((r=>{let{target:{value:a}}=r;t((0,s.A)((0,s.A)({},e),{},{search:(0,l.stringify)({search:n.search,query:n.query,option:a&&a!==ue?a:void 0})})),u(a)}),[e,n,u]),w=R._r.optionsField,C=c&&c!==ue&&"".concat(w,"+*").concat(c),k=(0,l.stringify)({search:n.search,query:n.query,ref:n.ref,page:n.page||1,limit:n.limit||10,filter:C});(0,a.useEffect)((()=>{window.scrollTo(0,0)}),[n.page]);const S=(0,a.useRef)(null),q=w?"".concat(R.nP,"/options?projection=").concat(w):null,{payload:z,error:D}=(0,I.A)(q),L=(0,a.useMemo)((()=>{let e=[];return z&&(e=Object.keys(z[w]).filter((e=>"null"!==e))),[ue,...e]}),[z]),J="".concat(R.nP,"?").concat(k),{loading:T,payload:K,error:W}=(0,I.A)(J);if(T&&!S.current)return(0,E.jsx)(M.A,{});if(W)return W.toString();if(D)return D.toString();let H,$=0;K?(H=K.projects,$=K.filteredCount,S.current=K):S.current?(H=S.current.projects,$=S.current.filteredCount):H=[];const ee=H.map((e=>"".concat(R.nP,"/").concat(e.identifier,"/files/").concat(R.pP)));return(0,E.jsx)(P.A,{children:(0,E.jsxs)(p.A,{className:Y,children:[(0,E.jsxs)("div",{className:G,children:[(0,E.jsx)(de,{}),w&&(0,E.jsxs)(m.A,{className:V,children:[(0,E.jsx)(x.A,{children:R._r.optionsLabel}),(0,E.jsx)(A.A,{label:R._r.optionsLabel,value:c!==ue?c:"",onChange:b,className:Z,children:L.map(((e,t)=>(0,E.jsx)(f.A,{value:e,children:R._r.optionsNiceNames[e]||e},t)))})]})]}),T||K?[]:(0,E.jsx)(P.A,{className:X,children:(0,E.jsx)(j.A,{variant:"h5",className:F,children:"No results were found"})}),(0,E.jsxs)(_.A,{children:[(0,E.jsx)(g.A,{className:U,children:(0,E.jsxs)(h.A,{children:[(0,E.jsx)(d.A,{className:O,children:"accession"}),(0,E.jsx)(d.A,{className:O,children:"name"}),(0,E.jsx)(d.A,{className:O,children:"preview"}),(0,E.jsx)(d.A,{className:O,children:"analyses"})]})}),(0,E.jsx)(y.A,{className:K?o()(B):o()(B,Q),children:H.map(((e,t)=>(0,E.jsx)(fe,{projectData:e,highlight:n.search,index:t,previewUrl:ee[t]},t)))}),(0,E.jsx)(N.A,{children:(0,E.jsx)(h.A,{children:(0,E.jsx)(v.A,{rowsPerPageOptions:pe,colSpan:6,count:$,rowsPerPage:+n.limit||10,page:(+n.page||1)-1,onPageChange:(r,a)=>{t((0,s.A)((0,s.A)({},e),{},{search:(0,l.stringify)({search:n.search,query:n.query,option:n.option,page:a+1===1?void 0:a+1,limit:n.limit&&10!==+n.limit?+n.limit:void 0})}))},onRowsPerPageChange:r=>{let{target:{value:a}}=r;t((0,s.A)((0,s.A)({},e),{},{search:(0,l.stringify)({search:n.search,query:n.query,option:n.option,limit:10===+a?void 0:a})}))},backIconButtonProps:me,nextIconButtonProps:xe})})})]})]})})}}}]);
//# sourceMappingURL=browse.4e7335a7.chunk.js.map