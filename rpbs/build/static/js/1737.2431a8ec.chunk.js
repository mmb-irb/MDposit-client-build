"use strict";(self.webpackChunkmdposit=self.webpackChunkmdposit||[]).push([[1737,5154,9117],{36114:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(65043),s=n(82746),o=n(32577),i=n(29449);const a=["grey","yellow","red"],c=()=>{const{topology:e}=(0,r.useContext)(i.f);return(0,r.useMemo)((()=>{if(!e)return;if(!e.proteinReferences.some((e=>!!e.entropies)))return;const t=e.proteinReferences.map((e=>{if(!e.entropies)return[];const t=e.entropies.map((e=>Math.log(e+1e-4)));return e.logarithmicEntropies=t,t})),n=[].concat.apply([],t),r=Math.max(...n),i=Math.min(...n),c=(0,o.m4Y)().range(a).domain([i,(i+r)/2,r]);return[{name:"Mutations",color:"custom",customScheme:s.ColormakerRegistry.addScheme((function(t){this.atomColor=t=>{const n=t.residueIndex,r=e.getResidueByIndex(n);if(!r.referenceId)return parseInt("ffffff",16);const s=r.referenceData.logarithmicEntropies;if(!s||0===s.length)return parseInt("ffffff",16);const i=s[r.referenceNumber-1];if(!i)return parseInt("ffffff",16);const a=(0,o.yWT)(c(i)).formatHex();return parseInt(a.substring(1),16)}}))}]}),[e])}},1679:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var r=n(65043),s=n(89257),o=n(10939),i=n(92428),a=n(36114),c=n(5154),l=n(17545),u=n(95747),f=n(29449),d=n(48838),p=n(70579);const m={triggerOnce:!0,rootMargin:"100px"},g=()=>{const[e,t]=(0,s.Wx)(m),{topology:n}=(0,r.useContext)(f.f),g=(0,r.useMemo)((()=>{if(!n)return;if(0===n.proteinReferences.filter((e=>u.kO.includes(e.uniprot)&&e.entropies)).length)return;const e=n.residueCount,t=new Array(e).fill(null);for(let r=0;r<e;r++){const e=n.getResidueByIndex(r);if(!e.referenceId)continue;const s=e.referenceNumber-1,o=e.referenceData.entropies;if(!o)continue;const i=o[s];if(void 0===i)continue;const a=Math.round(1e3*Math.log(i+1e-4))/1e3;t[r]=a}return t}),[n]),[h,x]=(0,r.useState)([]),y=h.map((e=>+e.index)),C=(0,a.A)(),M=(0,r.useCallback)(((e,t,n)=>{const r={color:n,index:t};x((e=>[...e,r]))}),[x]),k=(0,r.useCallback)(((e,t)=>{x((e=>e.filter((e=>e.index!==t))))}),[x]),b=(0,r.useCallback)((()=>{x([])}),[x]),I=(0,r.useCallback)((e=>`Logarithmic entropy: ${Math.round(100*e.value)/100}`),[]);return n&&!g?"Missing entropies data":C?(0,p.jsxs)(r.Suspense,{fallback:(0,p.jsx)(l.A,{}),children:[(0,p.jsx)(o.A,{className:c.default.nglcard,ref:e,children:t?(0,p.jsx)(i.default,{className:c.default.container,startingRepresentations:C,selectedResidueIndices:y}):(0,p.jsx)("div",{style:{height:"50vh"}})}),(0,p.jsx)(o.A,{children:(0,p.jsx)(d.A,{residueValues:g,legendTitle:"Logarithmic entropy",onSelect:M,onDeselect:k,onClean:b,onTooltip:I,className:c.default.selector})})]}):(0,p.jsx)(l.A,{})}},5154:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r={container:"style_container__eJ9YA",nglcard:"style_nglcard__lM3g-",selector:"style_selector__WXY0g"}}}]);
//# sourceMappingURL=1737.2431a8ec.chunk.js.map